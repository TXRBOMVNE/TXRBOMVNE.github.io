"use strict";var xB=Object.defineProperty,MB=Object.defineProperties,OB=Object.getOwnPropertyDescriptors,Xk=Object.getOwnPropertySymbols,PB=Object.prototype.hasOwnProperty,kB=Object.prototype.propertyIsEnumerable,eN=(ot,Ce,N)=>Ce in ot?xB(ot,Ce,{enumerable:!0,configurable:!0,writable:!0,value:N}):ot[Ce]=N,tN=(ot,Ce)=>{for(var N in Ce||(Ce={}))PB.call(Ce,N)&&eN(ot,N,Ce[N]);if(Xk)for(var N of Xk(Ce))kB.call(Ce,N)&&eN(ot,N,Ce[N]);return ot},nN=(ot,Ce)=>MB(ot,OB(Ce));(self.webpackChunktab_player=self.webpackChunktab_player||[]).push([[179],{2011:(ot,Ce,N)=>{N.d(Ce,{Dh:()=>le,GT:()=>ye,cc:()=>Oe,hO:()=>Ge,on:()=>Z,pX:()=>de,xv:()=>ve});var u=N(5e3),V=N(127),P=N(5813);ot=N.hmd(ot);const ae=["ngOnDestroy"],de=(Ie,ze,Ze,Re={})=>new Proxy(Ie,{get:(Me,Se)=>Ze.runOutsideAngular(()=>{var We;if(Ie[Se])return(null===(We=null==Re?void 0:Re.spy)||void 0===We?void 0:We.get)&&Re.spy.get(Se,Ie[Se]),Ie[Se];if(ae.indexOf(Se)>-1)return()=>{};const ne=ze.toPromise().then(pe=>{const Ee=pe&&pe[Se];return"function"==typeof Ee?Ee.bind(pe):Ee&&Ee.then?Ee.then(Q=>Ze.run(()=>Q)):Ze.run(()=>Ee)});return new Proxy(()=>{},{get:(pe,Ee)=>ne[Ee],apply:(pe,Ee,Q)=>ne.then(re=>{var se;const _e=re&&re(...Q);return(null===(se=null==Re?void 0:Re.spy)||void 0===se?void 0:se.apply)&&Re.spy.apply(Se,Q,_e),_e})})})}),ye=(Ie,ze)=>{ze.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(Re=>{Object.defineProperty(Ie.prototype,Re,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,Re))})})};class me{constructor(ze){return ze}}const le=new u.OlP("angularfire2.app.options"),ve=new u.OlP("angularfire2.app.name");function Z(Ie,ze,Ze){const Me="object"==typeof Ze&&Ze||{};Me.name=Me.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const We=V.Z.apps.filter(ne=>ne&&ne.name===Me.name)[0]||ze.runOutsideAngular(()=>V.Z.initializeApp(Ie,Me));try{JSON.stringify(Ie)!==JSON.stringify(We.options)&&G("error",`${We.name} Firebase App already initialized with different options${ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ne){}return new me(We)}const G=(Ie,...ze)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[Ie](...ze)},ie={provide:me,useFactory:Z,deps:[le,u.R0b,[new u.FiY,ve]]};let Ge=(()=>{class Ie{constructor(Ze){V.Z.registerVersion("angularfire",P.q4.full,"core"),V.Z.registerVersion("angularfire",P.q4.full,"app-compat"),V.Z.registerVersion("angular",u.q4F.full,Ze.toString())}static initializeApp(Ze,Re){return{ngModule:Ie,providers:[{provide:le,useValue:Ze},{provide:ve,useValue:Re}]}}}return Ie.\u0275fac=function(Ze){return new(Ze||Ie)(u.LFG(u.Lbi))},Ie.\u0275mod=u.oAB({type:Ie}),Ie.\u0275inj=u.cJS({providers:[ie]}),Ie})();function Oe(Ie,ze,Ze,Re,Me){const[,Se,We]=globalThis.\u0275AngularfireInstanceCache.find(ne=>ne[0]===Ie)||[];if(Se)return function Le(Ie,ze){try{return Ie.toString()===ze.toString()}catch(Ze){return Ie===ze}}(Me,We)||(ge("error",`${ze} was already initialized on the ${Ze} Firebase App with different settings.${qe?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:Me,was:We})),Se;{const ne=Re();return globalThis.\u0275AngularfireInstanceCache.push([Ie,ne,Me]),ne}}const qe=!!ot.hot,ge=(Ie,...ze)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[Ie](...ze)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ot,Ce,N)=>{N.d(Ce,{q4:()=>Kt,iC:()=>Bu,fc:()=>Nl,HU:()=>gd,vb:()=>zp,JM:()=>Uu});var u=N(5e3),V=N(5867),P=N(5861),ae=N(9681),de=N(2090),ye=N(4859),me=N(1877),le=N(8766);const ve="@firebase/installations",Z="0.5.12",ie=`w:${Z}`,Ge="FIS_v2",ze=new de.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ze(T){return T instanceof de.ZR&&T.code.includes("request-failed")}function Re({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function Me(T){return{token:T.token,requestStatus:2,expiresIn:re(T.expiresIn),creationTime:Date.now()}}function Se(T,S){return We.apply(this,arguments)}function We(){return(We=(0,P.Z)(function*(T,S){const U=(yield S.json()).error;return ze.create("request-failed",{requestName:T,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function ne({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function pe(T,{refreshToken:S}){const M=ne(T);return M.append("Authorization",function se(T){return`${Ge} ${T}`}(S)),M}function Ee(T){return Q.apply(this,arguments)}function Q(){return(Q=(0,P.Z)(function*(T){const S=yield T();return S.status>=500&&S.status<600?T():S})).apply(this,arguments)}function re(T){return Number(T.replace("s","000"))}function _e(T,S){return ce.apply(this,arguments)}function ce(){return(ce=(0,P.Z)(function*({appConfig:T,heartbeatServiceProvider:S},{fid:M}){const U=Re(T),J=ne(T),ue=S.getImmediate({optional:!0});if(ue){const xt=yield ue.getHeartbeatsHeader();xt&&J.append("x-firebase-client",xt)}const Ye={method:"POST",headers:J,body:JSON.stringify({fid:M,authVersion:Ge,appId:T.appId,sdkVersion:ie})},mt=yield Ee(()=>fetch(U,Ye));if(mt.ok){const xt=yield mt.json();return{fid:xt.fid||M,registrationStatus:2,refreshToken:xt.refreshToken,authToken:Me(xt.authToken)}}throw yield Se("Create Installation",mt)})).apply(this,arguments)}function Ue(T){return new Promise(S=>{setTimeout(S,T)})}const en=/^[cdef][\w-]{21}$/;function Ke(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const M=function hn(T){return function vt(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return en.test(M)?M:""}catch(T){return""}}function Ln(T){return`${T.appName}!${T.appId}`}const gn=new Map;function on(T,S){const M=Ln(T);Dn(M,S),function zi(T,S){const M=function On(){return!Nr&&"BroadcastChannel"in self&&(Nr=new BroadcastChannel("[Firebase] FID Change"),Nr.onmessage=T=>{Dn(T.data.key,T.data.fid)}),Nr}();M&&M.postMessage({key:T,fid:S}),function gs(){0===gn.size&&Nr&&(Nr.close(),Nr=null)}()}(M,S)}function Dn(T,S){const M=gn.get(T);if(M)for(const U of M)U(S)}let Nr=null;const Un="firebase-installations-store";let ms=null;function wt(){return ms||(ms=(0,le.X3)("firebase-installations-database",1,{upgrade:(T,S)=>{0===S&&T.createObjectStore(Un)}})),ms}function Rr(T,S){return An.apply(this,arguments)}function An(){return(An=(0,P.Z)(function*(T,S){const M=Ln(T),J=(yield wt()).transaction(Un,"readwrite"),ue=J.objectStore(Un),Pe=yield ue.get(M);return yield ue.put(S,M),yield J.done,(!Pe||Pe.fid!==S.fid)&&on(T,S.fid),S})).apply(this,arguments)}function an(T){return ir.apply(this,arguments)}function ir(){return(ir=(0,P.Z)(function*(T){const S=Ln(T),U=(yield wt()).transaction(Un,"readwrite");yield U.objectStore(Un).delete(S),yield U.done})).apply(this,arguments)}function qr(T,S){return pr.apply(this,arguments)}function pr(){return(pr=(0,P.Z)(function*(T,S){const M=Ln(T),J=(yield wt()).transaction(Un,"readwrite"),ue=J.objectStore(Un),Pe=yield ue.get(M),Ye=S(Pe);return void 0===Ye?yield ue.delete(M):yield ue.put(Ye,M),yield J.done,Ye&&(!Pe||Pe.fid!==Ye.fid)&&on(T,Ye.fid),Ye})).apply(this,arguments)}function xn(T){return gr.apply(this,arguments)}function gr(){return(gr=(0,P.Z)(function*(T){let S;const M=yield qr(T.appConfig,U=>{const J=Vs(U),ue=Yt(T,J);return S=ue.registrationPromise,ue.installationEntry});return""===M.fid?{installationEntry:yield S}:{installationEntry:M,registrationPromise:S}})).apply(this,arguments)}function Vs(T){return Ri(T||{fid:Ke(),registrationStatus:0})}function Yt(T,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(ze.create("app-offline"))};const M={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},U=function pt(T,S){return ut.apply(this,arguments)}(T,M);return{installationEntry:M,registrationPromise:U}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:vi(T)}:{installationEntry:S}}function ut(){return(ut=(0,P.Z)(function*(T,S){try{const M=yield _e(T,S);return Rr(T.appConfig,M)}catch(M){throw Ze(M)&&409===M.customData.serverCode?yield an(T.appConfig):yield Rr(T.appConfig,{fid:S.fid,registrationStatus:0}),M}})).apply(this,arguments)}function vi(T){return bi.apply(this,arguments)}function bi(){return(bi=(0,P.Z)(function*(T){let S=yield zt(T.appConfig);for(;1===S.registrationStatus;)yield Ue(100),S=yield zt(T.appConfig);if(0===S.registrationStatus){const{installationEntry:M,registrationPromise:U}=yield xn(T);return U||M}return S})).apply(this,arguments)}function zt(T){return qr(T,S=>{if(!S)throw ze.create("installation-not-found");return Ri(S)})}function Ri(T){return function Vn(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function mn(T,S){return gt.apply(this,arguments)}function gt(){return(gt=(0,P.Z)(function*({appConfig:T,heartbeatServiceProvider:S},M){const U=Gr(T,M),J=pe(T,M),ue=S.getImmediate({optional:!0});if(ue){const xt=yield ue.getHeartbeatsHeader();xt&&J.append("x-firebase-client",xt)}const Ye={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:ie,appId:T.appId}})},mt=yield Ee(()=>fetch(U,Ye));if(mt.ok)return Me(yield mt.json());throw yield Se("Generate Auth Token",mt)})).apply(this,arguments)}function Gr(T,{fid:S}){return`${Re(T)}/${S}/authTokens:generate`}function z(T){return H.apply(this,arguments)}function H(){return(H=(0,P.Z)(function*(T,S=!1){let M;const U=yield qr(T.appConfig,ue=>{if(!It(ue))throw ze.create("not-registered");const Pe=ue.authToken;if(!S&&sn(Pe))return ue;if(1===Pe.requestStatus)return M=B(T,S),ue;{if(!navigator.onLine)throw ze.create("app-offline");const Ye=sr(ue);return M=xe(T,Ye),Ye}});return M?yield M:U.authToken})).apply(this,arguments)}function B(T,S){return $.apply(this,arguments)}function $(){return($=(0,P.Z)(function*(T,S){let M=yield W(T.appConfig);for(;1===M.authToken.requestStatus;)yield Ue(100),M=yield W(T.appConfig);const U=M.authToken;return 0===U.requestStatus?z(T,S):U})).apply(this,arguments)}function W(T){return qr(T,S=>{if(!It(S))throw ze.create("not-registered");return function ee(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function xe(T,S){return He.apply(this,arguments)}function He(){return(He=(0,P.Z)(function*(T,S){try{const M=yield mn(T,S),U=Object.assign(Object.assign({},S),{authToken:M});return yield Rr(T.appConfig,U),M}catch(M){if(!Ze(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const U=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield Rr(T.appConfig,U)}else yield an(T.appConfig);throw M}})).apply(this,arguments)}function It(T){return void 0!==T&&2===T.registrationStatus}function sn(T){return 2===T.requestStatus&&!function tn(T){const S=Date.now();return S<T.creationTime||T.creationTime+T.expiresIn<S+36e5}(T)}function sr(T){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:S})}function K(){return(K=(0,P.Z)(function*(T){const S=T,{installationEntry:M,registrationPromise:U}=yield xn(S);return U?U.catch(console.error):z(S).catch(console.error),M.fid})).apply(this,arguments)}function Je(){return(Je=(0,P.Z)(function*(T,S=!1){const M=T;return yield dt(M),(yield z(M,S)).token})).apply(this,arguments)}function dt(T){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,P.Z)(function*(T){const{registrationPromise:S}=yield xn(T);S&&(yield S)})).apply(this,arguments)}function Da(T){return ze.create("missing-app-config-values",{valueName:T})}const ii="installations",jt=T=>{const S=T.getProvider("app").getImmediate(),M=function mr(T){if(!T||!T.options)throw Da("App Configuration");if(!T.name)throw Da("App Name");const S=["projectId","apiKey","appId"];for(const M of S)if(!T.options[M])throw Da(M);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(S);return{app:S,appConfig:M,heartbeatServiceProvider:(0,ae._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},wn=T=>{const S=T.getProvider("app").getImmediate(),M=(0,ae._getProvider)(S,ii).getImmediate();return{getId:()=>function Y(T){return K.apply(this,arguments)}(M),getToken:J=>function De(T){return Je.apply(this,arguments)}(M,J)}};(function Zr(){(0,ae._registerComponent)(new ye.wA(ii,jt,"PUBLIC")),(0,ae._registerComponent)(new ye.wA("installations-internal",wn,"PRIVATE"))})(),(0,ae.registerVersion)(ve,Z),(0,ae.registerVersion)(ve,Z,"esm2017");const ys="@firebase/remote-config",Bn=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Vc{constructor(S,M,U,J){this.client=S,this.storage=M,this.storageCache=U,this.logger=J}isCachedDataFresh(S,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-M,J=U<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${J}.`),J}fetch(S){var M=this;return(0,P.Z)(function*(){const[U,J]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(J&&M.isCachedDataFresh(S.cacheMaxAgeMillis,U))return J;S.eTag=J&&J.eTag;const ue=yield M.client.fetch(S),Pe=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ue.status&&Pe.push(M.storage.setLastSuccessfulFetchResponse(ue)),yield Promise.all(Pe),ue})()}}function vu(T=navigator){return T.languages&&T.languages[0]||T.language}class Yn{constructor(S,M,U,J,ue,Pe){this.firebaseInstallations=S,this.sdkVersion=M,this.namespace=U,this.projectId=J,this.apiKey=ue,this.appId=Pe}fetch(S){var M=this;return(0,P.Z)(function*(){var U,J,ue;const[Pe,Ye]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),xt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Nt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},ct={sdk_version:M.sdkVersion,app_instance_id:Pe,app_instance_id_token:Ye,app_id:M.appId,language_code:vu()},Er={method:"POST",headers:Nt,body:JSON.stringify(ct)},Wn=fetch(xt,Er),Xs=new Promise((rs,Hi)=>{S.signal.addEventListener(()=>{const to=new Error("The operation was aborted.");to.name="AbortError",Hi(to)})});let eo;try{yield Promise.race([Wn,Xs]),eo=yield Wn}catch(rs){let Hi="fetch-client-network";throw"AbortError"===(null===(U=rs)||void 0===U?void 0:U.name)&&(Hi="fetch-timeout"),Bn.create(Hi,{originalErrorMessage:null===(J=rs)||void 0===J?void 0:J.message})}let As=eo.status;const Qa=eo.headers.get("ETag")||void 0;let sa,Ja;if(200===eo.status){let rs;try{rs=yield eo.json()}catch(Hi){throw Bn.create("fetch-client-parse",{originalErrorMessage:null===(ue=Hi)||void 0===ue?void 0:ue.message})}sa=rs.entries,Ja=rs.state}if("INSTANCE_STATE_UNSPECIFIED"===Ja?As=500:"NO_CHANGE"===Ja?As=304:("NO_TEMPLATE"===Ja||"EMPTY_CONFIG"===Ja)&&(sa={}),304!==As&&200!==As)throw Bn.create("fetch-status",{httpStatus:As});return{status:As,eTag:Qa,config:sa}})()}}class vs{constructor(S,M){this.client=S,this.storage=M}fetch(S){var M=this;return(0,P.Z)(function*(){const U=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(S,U)})()}attemptFetch(S,{throttleEndTimeMillis:M,backoffCount:U}){var J=this;return(0,P.Z)(function*(){yield function Bc(T,S){return new Promise((M,U)=>{const J=Math.max(S-Date.now(),0),ue=setTimeout(M,J);T.addEventListener(()=>{clearTimeout(ue),U(Bn.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,M);try{const ue=yield J.client.fetch(S);return yield J.storage.deleteThrottleMetadata(),ue}catch(ue){if(!function kp(T){if(!(T instanceof de.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}(ue))throw ue;const Pe={throttleEndTimeMillis:Date.now()+(0,de.$s)(U),backoffCount:U+1};return yield J.storage.setThrottleMetadata(Pe),J.attemptFetch(S,Pe)}})()}}class Rp{constructor(S,M,U,J,ue){this.app=S,this._client=M,this._storageCache=U,this._storage=J,this._logger=ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Aa(T,S){var M;const U=T.target.error||void 0;return Bn.create(S,{originalErrorMessage:U&&(null===(M=U)||void 0===M?void 0:M.message)})}const Zo="app_namespace_store";class $c{constructor(S,M,U,J=function Lp(){return new Promise((T,S)=>{var M;try{const U=indexedDB.open("firebase_remote_config",1);U.onerror=J=>{S(Aa(J,"storage-open"))},U.onsuccess=J=>{T(J.target.result)},U.onupgradeneeded=J=>{0===J.oldVersion&&J.target.result.createObjectStore(Zo,{keyPath:"compositeKey"})}}catch(U){S(Bn.create("storage-open",{originalErrorMessage:null===(M=U)||void 0===M?void 0:M.message}))}})}()){this.appId=S,this.appName=M,this.namespace=U,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var M=this;return(0,P.Z)(function*(){const U=yield M.openDbPromise;return new Promise((J,ue)=>{var Pe;const mt=U.transaction([Zo],"readonly").objectStore(Zo),xt=M.createCompositeKey(S);try{const Nt=mt.get(xt);Nt.onerror=ct=>{ue(Aa(ct,"storage-get"))},Nt.onsuccess=ct=>{const Er=ct.target.result;J(Er?Er.value:void 0)}}catch(Nt){ue(Bn.create("storage-get",{originalErrorMessage:null===(Pe=Nt)||void 0===Pe?void 0:Pe.message}))}})})()}set(S,M){var U=this;return(0,P.Z)(function*(){const J=yield U.openDbPromise;return new Promise((ue,Pe)=>{var Ye;const xt=J.transaction([Zo],"readwrite").objectStore(Zo),Nt=U.createCompositeKey(S);try{const ct=xt.put({compositeKey:Nt,value:M});ct.onerror=Er=>{Pe(Aa(Er,"storage-set"))},ct.onsuccess=()=>{ue()}}catch(ct){Pe(Bn.create("storage-set",{originalErrorMessage:null===(Ye=ct)||void 0===Ye?void 0:Ye.message}))}})})()}delete(S){var M=this;return(0,P.Z)(function*(){const U=yield M.openDbPromise;return new Promise((J,ue)=>{var Pe;const mt=U.transaction([Zo],"readwrite").objectStore(Zo),xt=M.createCompositeKey(S);try{const Nt=mt.delete(xt);Nt.onerror=ct=>{ue(Aa(ct,"storage-delete"))},Nt.onsuccess=()=>{J()}}catch(Nt){ue(Bn.create("storage-delete",{originalErrorMessage:null===(Pe=Nt)||void 0===Pe?void 0:Pe.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class zo{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,P.Z)(function*(){const M=S.storage.getLastFetchStatus(),U=S.storage.getLastSuccessfulFetchTimestampMillis(),J=S.storage.getActiveConfig(),ue=yield M;ue&&(S.lastFetchStatus=ue);const Pe=yield U;Pe&&(S.lastSuccessfulFetchTimestampMillis=Pe);const Ye=yield J;Ye&&(S.activeConfig=Ye)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function yy(){return xa.apply(this,arguments)}function xa(){return(xa=(0,P.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch(T){return!1}})).apply(this,arguments)}!function Up(){(0,ae._registerComponent)(new ye.wA("remote-config",function T(S,{instanceIdentifier:M}){const U=S.getProvider("app").getImmediate(),J=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Bn.create("registration-window");if(!(0,de.hl)())throw Bn.create("indexed-db-unavailable");const{projectId:ue,apiKey:Pe,appId:Ye}=U.options;if(!ue)throw Bn.create("registration-project-id");if(!Pe)throw Bn.create("registration-api-key");if(!Ye)throw Bn.create("registration-app-id");const mt=new $c(Ye,U.name,M=M||"firebase"),xt=new zo(mt),Nt=new me.Yd(ys);Nt.logLevel=me.in.ERROR;const ct=new Yn(J,ae.SDK_VERSION,M,ue,Pe,Ye),Er=new vs(ct,mt),Wn=new Vc(Er,mt,xt,Nt),Xs=new Rp(U,Wn,xt,mt,Nt);return function fn(T){const S=(0,de.m9)(T);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Xs),Xs},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(ys,"0.3.11"),(0,ae.registerVersion)(ys,"0.3.11","esm2017")}();const Hs="/firebase-messaging-sw.js",Ti="/firebase-cloud-messaging-push-scope",Wo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Oa="google.c.a.c_id",Ph="google.c.a.c_l",Vp="google.c.a.ts",$s="google.c.a.e";var ws=(()=>{return(T=ws||(ws={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",ws;var T})();function Fi(T){const S=new Uint8Array(T);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Gc(T){const M=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(M),J=new Uint8Array(U.length);for(let ue=0;ue<U.length;++ue)J[ue]=U.charCodeAt(ue);return J}const Lr="fcm_token_details_db",Zc="fcm_token_object_Store";function zc(T){return bu.apply(this,arguments)}function bu(){return bu=(0,P.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ue=>ue.name).includes(Lr))return null;let S=null;return(yield(0,le.X3)(Lr,5,{upgrade:(U=(0,P.Z)(function*(J,ue,Pe,Ye){var mt;if(ue<2||!J.objectStoreNames.contains(Zc))return;const xt=Ye.objectStore(Zc),Nt=yield xt.index("fcmSenderId").get(T);if(yield xt.clear(),Nt)if(2===ue){const ct=Nt;if(!ct.auth||!ct.p256dh||!ct.endpoint)return;S={token:ct.fcmToken,createTime:null!==(mt=ct.createTime)&&void 0!==mt?mt:Date.now(),subscriptionOptions:{auth:ct.auth,p256dh:ct.p256dh,endpoint:ct.endpoint,swScope:ct.swScope,vapidKey:"string"==typeof ct.vapidKey?ct.vapidKey:Fi(ct.vapidKey)}}}else if(3===ue){const ct=Nt;S={token:ct.fcmToken,createTime:ct.createTime,subscriptionOptions:{auth:Fi(ct.auth),p256dh:Fi(ct.p256dh),endpoint:ct.endpoint,swScope:ct.swScope,vapidKey:Fi(ct.vapidKey)}}}else if(4===ue){const ct=Nt;S={token:ct.fcmToken,createTime:ct.createTime,subscriptionOptions:{auth:Fi(ct.auth),p256dh:Fi(ct.p256dh),endpoint:ct.endpoint,swScope:ct.swScope,vapidKey:Fi(ct.vapidKey)}}}}),function(ue,Pe,Ye,mt){return U.apply(this,arguments)})})).close(),yield(0,le.Lj)(Lr),yield(0,le.Lj)("fcm_vapid_details_db"),yield(0,le.Lj)("undefined"),wu(S)?S:null;var U}),bu.apply(this,arguments)}function wu(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:S}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const Es="firebase-messaging-store";let El=null;function yn(){return El||(El=(0,le.X3)("firebase-messaging-database",1,{upgrade:(T,S)=>{0===S&&T.createObjectStore(Es)}})),El}function Pa(T){return qs.apply(this,arguments)}function qs(){return(qs=(0,P.Z)(function*(T){const S=yr(T),U=yield(yield yn()).transaction(Es).objectStore(Es).get(S);if(U)return U;{const J=yield zc(T.appConfig.senderId);if(J)return yield pn(T,J),J}})).apply(this,arguments)}function pn(T,S){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,P.Z)(function*(T,S){const M=yr(T),J=(yield yn()).transaction(Es,"readwrite");return yield J.objectStore(Es).put(S,M),yield J.done,S})).apply(this,arguments)}function ka(T){return yo.apply(this,arguments)}function yo(){return(yo=(0,P.Z)(function*(T){const S=yr(T),U=(yield yn()).transaction(Es,"readwrite");yield U.objectStore(Es).delete(S),yield U.done})).apply(this,arguments)}function yr({appConfig:T}){return T.appId}const jn=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ts(T,S){return _r.apply(this,arguments)}function _r(){return(_r=(0,P.Z)(function*(T,S){var M;const U=yield Zs(T),J=_o(S),ue={method:"POST",headers:U,body:JSON.stringify(J)};let Pe;try{Pe=yield(yield fetch(Gs(T.appConfig),ue)).json()}catch(Ye){throw jn.create("token-subscribe-failed",{errorInfo:null===(M=Ye)||void 0===M?void 0:M.toString()})}if(Pe.error)throw jn.create("token-subscribe-failed",{errorInfo:Pe.error.message});if(!Pe.token)throw jn.create("token-subscribe-no-token");return Pe.token})).apply(this,arguments)}function Ko(T,S){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,P.Z)(function*(T,S){var M;const U=yield Zs(T),J=_o(S.subscriptionOptions),ue={method:"PATCH",headers:U,body:JSON.stringify(J)};let Pe;try{Pe=yield(yield fetch(`${Gs(T.appConfig)}/${S.token}`,ue)).json()}catch(Ye){throw jn.create("token-update-failed",{errorInfo:null===(M=Ye)||void 0===M?void 0:M.toString()})}if(Pe.error)throw jn.create("token-update-failed",{errorInfo:Pe.error.message});if(!Pe.token)throw jn.create("token-update-no-token");return Pe.token})).apply(this,arguments)}function Tl(T,S){return oi.apply(this,arguments)}function oi(){return(oi=(0,P.Z)(function*(T,S){var M;const J={method:"DELETE",headers:yield Zs(T)};try{const Pe=yield(yield fetch(`${Gs(T.appConfig)}/${S}`,J)).json();if(Pe.error)throw jn.create("token-unsubscribe-failed",{errorInfo:Pe.error.message})}catch(ue){throw jn.create("token-unsubscribe-failed",{errorInfo:null===(M=ue)||void 0===M?void 0:M.toString()})}})).apply(this,arguments)}function Gs({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function Zs(T){return St.apply(this,arguments)}function St(){return(St=(0,P.Z)(function*({appConfig:T,installations:S}){const M=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function _o({p256dh:T,auth:S,endpoint:M,vapidKey:U}){const J={web:{endpoint:M,auth:S,p256dh:T}};return U!==Wo&&(J.web.applicationPubKey=U),J}const Iu=6048e5;function Wc(T){return Na.apply(this,arguments)}function Na(){return(Na=(0,P.Z)(function*(T){const S=yield Ra(T.swRegistration,T.vapidKey),M={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:S.endpoint,auth:Fi(S.getKey("auth")),p256dh:Fi(S.getKey("p256dh"))},U=yield Pa(T.firebaseDependencies);if(U){if(Yc(U.subscriptionOptions,M))return Date.now()>=U.createTime+Iu?kh(T,{token:U.token,createTime:Date.now(),subscriptionOptions:M}):U.token;try{yield Tl(T.firebaseDependencies,U.token)}catch(J){console.warn(J)}return Ne(T.firebaseDependencies,M)}return Ne(T.firebaseDependencies,M)})).apply(this,arguments)}function Kc(T){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,P.Z)(function*(T){const S=yield Pa(T.firebaseDependencies);S&&(yield Tl(T.firebaseDependencies,S.token),yield ka(T.firebaseDependencies));const M=yield T.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function kh(T,S){return zs.apply(this,arguments)}function zs(){return(zs=(0,P.Z)(function*(T,S){try{const M=yield Ko(T.firebaseDependencies,S),U=Object.assign(Object.assign({},S),{token:M,createTime:Date.now()});return yield pn(T.firebaseDependencies,U),M}catch(M){throw yield Kc(T),M}})).apply(this,arguments)}function Ne(T,S){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,P.Z)(function*(T,S){const U={token:yield Ts(T,S),createTime:Date.now(),subscriptionOptions:S};return yield pn(T,U),U.token})).apply(this,arguments)}function Ra(T,S){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,P.Z)(function*(T,S){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Gc(S)})})).apply(this,arguments)}function Yc(T,S){return S.vapidKey===T.vapidKey&&S.endpoint===T.endpoint&&S.auth===T.auth&&S.p256dh===T.p256dh}function Cs(T){const S={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function Qi(T,S){if(!S.notification)return;T.notification={};const M=S.notification.title;M&&(T.notification.title=M);const U=S.notification.body;U&&(T.notification.body=U);const J=S.notification.image;J&&(T.notification.image=J)}(S,T),function Cl(T,S){!S.data||(T.data=S.data)}(S,T),function Fa(T,S){var M,U,J,ue,Pe;if(!S.fcmOptions&&!(null===(M=S.notification)||void 0===M?void 0:M.click_action))return;T.fcmOptions={};const Ye=null!==(J=null===(U=S.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==J?J:null===(ue=S.notification)||void 0===ue?void 0:ue.click_action;Ye&&(T.fcmOptions.link=Ye);const mt=null===(Pe=S.fcmOptions)||void 0===Pe?void 0:Pe.analytics_label;mt&&(T.fcmOptions.analyticsLabel=mt)}(S,T),S}function Nh(T){return"object"==typeof T&&!!T&&Oa in T}function Qc(T,S){const M=[];for(let U=0;U<T.length;U++)M.push(T.charAt(U)),U<S.length&&M.push(S.charAt(U));return M.join("")}function vo(T){return jn.create("missing-app-config-values",{valueName:T})}Qc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Qc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class vr{constructor(S,M,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function Jc(T){if(!T||!T.options)throw vo("App Configuration Object");if(!T.name)throw vo("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:M}=T;for(const U of S)if(!M[U])throw vo(U);return{appName:T.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:J,installations:M,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Ji(T){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,P.Z)(function*(T){var S;try{T.swRegistration=yield navigator.serviceWorker.register(Hs,{scope:Ti}),T.swRegistration.update().catch(()=>{})}catch(M){throw jn.create("failed-service-worker-registration",{browserErrorMessage:null===(S=M)||void 0===S?void 0:S.message})}})).apply(this,arguments)}function Jo(T,S){return ai.apply(this,arguments)}function ai(){return(ai=(0,P.Z)(function*(T,S){if(!S&&!T.swRegistration&&(yield Ji(T)),S||!T.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw jn.create("invalid-sw-registration");T.swRegistration=S}})).apply(this,arguments)}function Rh(T,S){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,P.Z)(function*(T,S){S?T.vapidKey=S:T.vapidKey||(T.vapidKey=Wo)})).apply(this,arguments)}function La(){return(La=(0,P.Z)(function*(T,S){if(!navigator)throw jn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw jn.create("permission-blocked");return yield Rh(T,null==S?void 0:S.vapidKey),yield Jo(T,null==S?void 0:S.serviceWorkerRegistration),Wc(T)})).apply(this,arguments)}function Su(T,S,M){return ea.apply(this,arguments)}function ea(){return(ea=(0,P.Z)(function*(T,S,M){const U=ed(S);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:M[Oa],message_name:M[Ph],message_time:M[Vp],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ed(T){switch(T){case ws.NOTIFICATION_CLICKED:return"notification_open";case ws.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Il(){return(Il=(0,P.Z)(function*(T,S){const M=S.data;if(!M.isFirebaseMessaging)return;T.onMessageHandler&&M.messageType===ws.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(Cs(M)):T.onMessageHandler.next(Cs(M)));const U=M.data;Nh(U)&&"1"===U[$s]&&(yield Su(T,M.messageType,U))})).apply(this,arguments)}const Ua="@firebase/messaging",bo=T=>{const S=new vr(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function td(T,S){return Il.apply(this,arguments)}(S,M)),S},nd=T=>{const S=T.getProvider("messaging").getImmediate();return{getToken:U=>function Xc(T,S){return La.apply(this,arguments)}(S,U)}};function Du(){return ui.apply(this,arguments)}function ui(){return(ui=(0,P.Z)(function*(){try{yield(0,de.eu)()}catch(T){return!1}return"undefined"!=typeof window&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Fh(){(0,ae._registerComponent)(new ye.wA("messaging",bo,"PUBLIC")),(0,ae._registerComponent)(new ye.wA("messaging-internal",nd,"PRIVATE")),(0,ae.registerVersion)(Ua,"0.9.16"),(0,ae.registerVersion)(Ua,"0.9.16","esm2017")}();const Dl="analytics",jp="firebase_id",Ba="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ja="https://www.googletagmanager.com/gtag/js",or=new me.Yd("@firebase/analytics");function sd(T){return Promise.all(T.map(S=>S.catch(M=>M)))}function Hp(T,S){const M=document.createElement("script");M.src=`${ja}?l=${T}&id=${S}`,M.async=!0,document.head.appendChild(M)}function ta(T,S,M,U,J,ue){return od.apply(this,arguments)}function od(){return(od=(0,P.Z)(function*(T,S,M,U,J,ue){const Pe=U[J];try{if(Pe)yield S[Pe];else{const mt=(yield sd(M)).find(xt=>xt.measurementId===J);mt&&(yield S[mt.appId])}}catch(Ye){or.error(Ye)}T("config",J,ue)})).apply(this,arguments)}function Al(T,S,M,U,J){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,P.Z)(function*(T,S,M,U,J){try{let ue=[];if(J&&J.send_to){let Pe=J.send_to;Array.isArray(Pe)||(Pe=[Pe]);const Ye=yield sd(M);for(const mt of Pe){const xt=Ye.find(ct=>ct.measurementId===mt),Nt=xt&&S[xt.appId];if(!Nt){ue=[];break}ue.push(Nt)}}0===ue.length&&(ue=Object.values(S)),yield Promise.all(ue),T("event",U,J||{})}catch(ue){or.error(ue)}})).apply(this,arguments)}function En(){const T=window.document.getElementsByTagName("script");for(const S of Object.values(T))if(S.src&&S.src.includes(ja))return S;return null}const it=new de.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ha=new class zr{constructor(S={},M=1e3){this.throttleMetadata=S,this.intervalMillis=M}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,M){this.throttleMetadata[S]=M}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function na(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function ad(T){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,P.Z)(function*(T){var S;const{appId:M,apiKey:U}=T,J={method:"GET",headers:na(U)},ue=Ba.replace("{app-id}",M),Pe=yield fetch(ue,J);if(200!==Pe.status&&304!==Pe.status){let Ye="";try{const mt=yield Pe.json();(null===(S=mt.error)||void 0===S?void 0:S.message)&&(Ye=mt.error.message)}catch(mt){}throw it.create("config-fetch-failed",{httpStatus:Pe.status,responseMessage:Ye})}return Pe.json()})).apply(this,arguments)}function ud(T){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,P.Z)(function*(T,S=Ha,M){const{appId:U,apiKey:J,measurementId:ue}=T.options;if(!U)throw it.create("no-app-id");if(!J){if(ue)return{measurementId:ue,appId:U};throw it.create("no-api-key")}const Pe=S.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new xu;return setTimeout((0,P.Z)(function*(){Ye.abort()}),void 0!==M?M:6e4),Ws({appId:U,apiKey:J,measurementId:ue},Pe,Ye,S)})).apply(this,arguments)}function Ws(T,S,M){return ft.apply(this,arguments)}function ft(){return(ft=(0,P.Z)(function*(T,{throttleEndTimeMillis:S,backoffCount:M},U,J=Ha){var ue,Pe;const{appId:Ye,measurementId:mt}=T;try{yield qp(U,S)}catch(xt){if(mt)return or.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mt} provided in the "measurementId" field in the local Firebase config. [${null===(ue=xt)||void 0===ue?void 0:ue.message}]`),{appId:Ye,measurementId:mt};throw xt}try{const xt=yield ad(T);return J.deleteThrottleMetadata(Ye),xt}catch(xt){const Nt=xt;if(!ld(Nt)){if(J.deleteThrottleMetadata(Ye),mt)return or.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mt} provided in the "measurementId" field in the local Firebase config. [${null==Nt?void 0:Nt.message}]`),{appId:Ye,measurementId:mt};throw xt}const ct=503===Number(null===(Pe=null==Nt?void 0:Nt.customData)||void 0===Pe?void 0:Pe.httpStatus)?(0,de.$s)(M,J.intervalMillis,30):(0,de.$s)(M,J.intervalMillis),Er={throttleEndTimeMillis:Date.now()+ct,backoffCount:M+1};return J.setThrottleMetadata(Ye,Er),or.debug(`Calling attemptFetch again in ${ct} millis`),Ws(T,Er,U,J)}})).apply(this,arguments)}function qp(T,S){return new Promise((M,U)=>{const J=Math.max(S-Date.now(),0),ue=setTimeout(M,J);T.addEventListener(()=>{clearTimeout(ue),U(it.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function ld(T){if(!(T instanceof de.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}class xu{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let Mu,Za;function Ks(){return(Ks=(0,P.Z)(function*(T,S,M,U,J){if(J&&J.global)T("event",M,U);else{const ue=yield S;T("event",M,Object.assign(Object.assign({},U),{send_to:ue}))}})).apply(this,arguments)}function Ou(T){Za=T}function za(T){Mu=T}function Pu(){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,P.Z)(function*(){var T;if(!(0,de.hl)())return or.warn(it.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,de.eu)()}catch(S){return or.warn(it.create("indexeddb-unavailable",{errorInfo:null===(T=S)||void 0===T?void 0:T.toString()}).message),!1}return!0})).apply(this,arguments)}function ur(){return(ur=(0,P.Z)(function*(T,S,M,U,J,ue,Pe){var Ye;const mt=ud(T);mt.then(Wn=>{M[Wn.measurementId]=Wn.appId,T.options.measurementId&&Wn.measurementId!==T.options.measurementId&&or.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${Wn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Wn=>or.error(Wn)),S.push(mt);const xt=Pu().then(Wn=>{if(Wn)return U.getId()}),[Nt,ct]=yield Promise.all([mt,xt]);En()||Hp(ue,Nt.measurementId),Za&&(J("consent","default",Za),Ou(void 0)),J("js",new Date);const Er=null!==(Ye=null==Pe?void 0:Pe.config)&&void 0!==Ye?Ye:{};return Er.origin="firebase",Er.update=!0,null!=ct&&(Er[jp]=ct),J("config",Nt.measurementId,Er),Mu&&(J("set",Mu),za(void 0)),Nt.measurementId})).apply(this,arguments)}class Ml{constructor(S){this.app=S}_delete(){return delete Ar[this.app.options.appId],Promise.resolve()}}let Ar={},er=[];const _n={};let Li,Cn,ts="dataLayer",Kr=!1;function ku(T,S,M){!function Ui(){const T=[];if((0,de.ru)()&&T.push("This is a browser extension environment."),(0,de.zI)()||T.push("Cookies are not available."),T.length>0){const S=T.map((U,J)=>`(${J+1}) ${U}`).join(" "),M=it.create("invalid-analytics-context",{errorInfo:S});or.warn(M.message)}}();const U=T.options.appId;if(!U)throw it.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw it.create("no-api-key");or.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ar[U])throw it.create("already-exists",{id:U});if(!Kr){!function Ss(T){let S=[];Array.isArray(window[T])?S=window[T]:window[T]=S}(ts);const{wrappedGtag:ue,gtagCore:Pe}=function $p(T,S,M,U,J){let ue=function(...Pe){window[U].push(arguments)};return window[J]&&"function"==typeof window[J]&&(ue=window[J]),window[J]=function xl(T,S,M,U){function ue(){return(ue=(0,P.Z)(function*(Pe,Ye,mt){try{"event"===Pe?yield Al(T,S,M,Ye,mt):"config"===Pe?yield ta(T,S,M,U,Ye,mt):"consent"===Pe?T("consent","update",mt):T("set",Ye)}catch(xt){or.error(xt)}})).apply(this,arguments)}return function J(Pe,Ye,mt){return ue.apply(this,arguments)}}(ue,T,S,M),{gtagCore:ue,wrappedGtag:window[J]}}(Ar,er,_n,ts,"gtag");Cn=ue,Li=Pe,Kr=!0}return Ar[U]=function cd(T,S,M,U,J,ue,Pe){return ur.apply(this,arguments)}(T,er,_n,S,Li,ts,M),new Ml(T)}function dd(){return hd.apply(this,arguments)}function hd(){return(hd=(0,P.Z)(function*(){if((0,de.ru)()||!(0,de.zI)()||!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch(T){return!1}})).apply(this,arguments)}const Nn="@firebase/analytics";!function So(){(0,ae._registerComponent)(new ye.wA(Dl,(S,{options:M})=>ku(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ae._registerComponent)(new ye.wA("analytics-internal",function T(S){try{const M=S.getProvider(Dl).getImmediate();return{logEvent:(U,J,ue)=>function Vi(T,S,M,U){T=(0,de.m9)(T),function Xn(T,S,M,U,J){return Ks.apply(this,arguments)}(Cn,Ar[T.app.options.appId],S,M,U).catch(J=>or.error(J))}(M,U,J,ue)}}catch(M){throw it.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ae.registerVersion)(Nn,"0.8.0"),(0,ae.registerVersion)(Nn,"0.8.0","esm2017")}();var Zp=N(4408),Vr=N(7565);const Pl=new class li extends Vr.v{}(class Ol extends Zp.o{constructor(S,M){super(S,M),this.scheduler=S,this.work=M}schedule(S,M=0){return M>0?super.schedule(S,M):(this.delay=M,this.state=S,this.scheduler.flush(this),this)}execute(S,M){return M>0||this.closed?super.execute(S,M):this._execute(S,M)}requestAsyncId(S,M,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(S,M,U):S.flush(this)}});var Ya=N(4986),Qs=N(8505),Ru=N(5363),fd=N(9468);const Kt=new u.GfV("7.4.1"),pd="__angularfire_symbol__analyticsIsSupportedValue",Bi="__angularfire_symbol__analyticsIsSupported",wr="__angularfire_symbol__remoteConfigIsSupportedValue",Do="__angularfire_symbol__remoteConfigIsSupported",Js="__angularfire_symbol__messagingIsSupportedValue",Fu="__angularfire_symbol__messagingIsSupported";function Uu(T,S,M){if(S){if(1===S.length)return S[0];const ue=S.filter(Pe=>Pe.app===M);if(1===ue.length)return ue[0]}return M.container.getProvider(T).getImmediate({optional:!0})}globalThis[Bi]||(globalThis[Bi]=dd().then(T=>globalThis[pd]=T).catch(()=>globalThis[pd]=!1)),globalThis[Fu]||(globalThis[Fu]=Du().then(T=>globalThis[Js]=T).catch(()=>globalThis[Js]=!1)),globalThis[Do]||(globalThis[Do]=yy().then(T=>globalThis[wr]=T).catch(()=>globalThis[wr]=!1));const zp=(T,S)=>{const M=S?[S]:(0,V.C6)(),U=[];return M.forEach(J=>{J.container.getProvider(T).instances.forEach(Pe=>{U.includes(Pe)||U.push(Pe)})}),U};function vn(){}class ci{constructor(S,M=Pl){this.zone=S,this.delegate=M}now(){return this.delegate.now()}schedule(S,M,U){const J=this.zone;return this.delegate.schedule(function(Pe){J.runGuarded(()=>{S.apply(this,[Pe])})},M,U)}}class Vu{constructor(S){this.zone=S,this.task=null}call(S,M){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vn,{},vn,vn)),M.pipe((0,Qs.b)({next:U,complete:U,error:U})).subscribe(S).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let gd=(()=>{class T{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new ci(Zone.current)),this.insideAngular=M.run(()=>new ci(Zone.current,Ya.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(M){return new(M||T)(u.LFG(u.R0b))},T.\u0275prov=u.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function Qr(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function Nl(T){return T.pipe((0,Ru.Q)(Qr().outsideAngular))}function Bu(T){return Qr(),function Rl(T){return function(M){return(M=M.lift(new Vu(T.ngZone))).pipe((0,fd.R)(T.outsideAngular),(0,Ru.Q)(T.insideAngular))}}(Qr())(T)}},7143:(ot,Ce,N)=>{N.d(Ce,{$:()=>Gs,A:()=>G,B:()=>Oe,G:()=>wn,H:()=>ln,J:()=>vs,L:()=>sn,M:()=>xa,N:()=>Ma,P:()=>Ya,Q:()=>Oa,R:()=>Io,T:()=>Ph,U:()=>Wo,V:()=>ws,W:()=>Fi,X:()=>zc,Y:()=>Cu,Z:()=>Ts,_:()=>Ko,a:()=>Jn,a0:()=>Wc,a1:()=>Kc,a2:()=>kh,a3:()=>Ne,a4:()=>Ra,a5:()=>Yc,a6:()=>Qi,a7:()=>Cl,a8:()=>Nh,a9:()=>Qc,aA:()=>Wn,aB:()=>mt,aC:()=>Nl,aD:()=>ns,aE:()=>je,aI:()=>na,aL:()=>$s,aa:()=>Ji,ab:()=>Jo,ac:()=>Rh,af:()=>Su,ag:()=>ed,ah:()=>td,ak:()=>Es,al:()=>Sl,an:()=>ja,ao:()=>od,ap:()=>Zn,aq:()=>Ee,ar:()=>$t,as:()=>dt,at:()=>Ze,au:()=>Gh,av:()=>Qa,aw:()=>Re,ax:()=>ne,ay:()=>re,az:()=>tn,b:()=>it,c:()=>Js,d:()=>Bh,e:()=>Lu,f:()=>Rl,g:()=>U,h:()=>T,i:()=>Wr,j:()=>Pe,k:()=>Qp,l:()=>Nu,m:()=>Xp,n:()=>Sy,o:()=>le,r:()=>Zp,s:()=>Gp,u:()=>Pl,y:()=>Dl});var u=N(5861),V=N(2090),P=N(9681),ae=N(655),de=N(1877),ye=N(4859);const le={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Oe=function ie(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Le=function Ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},qe=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ie=new de.Yd("@firebase/auth");function ze(v,...g){Ie.logLevel<=de.in.ERROR&&Ie.error(`Auth (${P.SDK_VERSION}): ${v}`,...g)}function Ze(v,...g){throw We(v,...g)}function Re(v,...g){return We(v,...g)}function Me(v,g,y){const E=Object.assign(Object.assign({},Le()),{[g]:y});return new V.LL("auth","Firebase",E).create(g,{appName:v.name})}function Se(v,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&Ze(v,"argument-error"),Me(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function We(v,...g){if("string"!=typeof v){const y=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(y,...E)}return qe.create(v,...g)}function ne(v,g,...y){if(!v)throw We(g,...y)}function pe(v){const g="INTERNAL ASSERTION FAILED: "+v;throw ze(g),new Error(g)}function Ee(v,g){v||pe(g)}const Q=new Map;function re(v){Ee(v instanceof Function,"Expected a class definition");let g=Q.get(v);return g?(Ee(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,Q.set(v,g),g)}function ce(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Ue(){return"http:"===vt()||"https:"===vt()}function vt(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Ke{constructor(g,y){this.shortDelay=g,this.longDelay=y,Ee(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function en(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ue()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function hn(v,g){Ee(v.emulator,"Emulator should always be set here");const{url:y}=v.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class Ln{static initialize(g,y,E){this.fetchImpl=g,y&&(this.headersImpl=y),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const gn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},on=new Ke(3e4,6e4);function Ht(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function rn(v,g,y,E){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,u.Z)(function*(v,g,y,E,x={}){return zi(v,x,(0,u.Z)(function*(){let k={},te={};E&&("GET"===g?te=E:k={body:JSON.stringify(E)});const Ae=(0,V.xO)(Object.assign({key:v.config.apiKey},te)).slice(1),Xe=yield v._getAdditionalHeaders();return Xe["Content-Type"]="application/json",v.languageCode&&(Xe["X-Firebase-Locale"]=v.languageCode),Ln.fetch()(_i(v,v.config.apiHost,y,Ae),Object.assign({method:g,headers:Xe,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function zi(v,g,y){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,u.Z)(function*(v,g,y){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},gn),g);try{const x=new Ni(v),k=yield Promise.race([y(),x.promise]);x.clearNetworkTimeout();const te=yield k.json();if("needConfirmation"in te)throw Un(v,"account-exists-with-different-credential",te);if(k.ok&&!("errorMessage"in te))return te;{const Ae=k.ok?te.errorMessage:te.error.message,[Xe,Et]=Ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Xe)throw Un(v,"credential-already-in-use",te);if("EMAIL_EXISTS"===Xe)throw Un(v,"email-already-in-use",te);if("USER_DISABLED"===Xe)throw Un(v,"user-disabled",te);const Rt=E[Xe]||Xe.toLowerCase().replace(/[_\s]+/g,"-");if(Et)throw Me(v,Rt,Et);Ze(v,Rt)}}catch(x){if(x instanceof V.ZR)throw x;Ze(v,"network-request-failed")}})).apply(this,arguments)}function On(v,g,y,E){return gs.apply(this,arguments)}function gs(){return(gs=(0,u.Z)(function*(v,g,y,E,x={}){const k=yield rn(v,g,y,E,x);return"mfaPendingCredential"in k&&Ze(v,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function _i(v,g,y,E){const x=`${g}${y}?${E}`;return v.config.emulator?hn(v.config,x):`${v.config.apiScheme}://${x}`}class Ni{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,E)=>{this.timer=setTimeout(()=>E(Re(this.auth,"network-request-failed")),on.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Un(v,g,y){const E={appName:v.name};y.email&&(E.email=y.email),y.phoneNumber&&(E.phoneNumber=y.phoneNumber);const x=Re(v,g,E);return x.customData._tokenResponse=y,x}function wt(){return(wt=(0,u.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Rr(v,g){return An.apply(this,arguments)}function An(){return(An=(0,u.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function an(v,g){return ir.apply(this,arguments)}function ir(){return(ir=(0,u.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function qr(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function gr(){return(gr=(0,u.Z)(function*(v,g=!1){const y=(0,V.m9)(v),E=yield y.getIdToken(g),x=Yt(E);ne(x&&x.exp&&x.auth_time&&x.iat,y.auth,"internal-error");const k="object"==typeof x.firebase?x.firebase:void 0,te=null==k?void 0:k.sign_in_provider;return{claims:x,token:E,authTime:qr(Vs(x.auth_time)),issuedAtTime:qr(Vs(x.iat)),expirationTime:qr(Vs(x.exp)),signInProvider:te||null,signInSecondFactor:(null==k?void 0:k.sign_in_second_factor)||null}})).apply(this,arguments)}function Vs(v){return 1e3*Number(v)}function Yt(v){var g;const[y,E,x]=v.split(".");if(void 0===y||void 0===E||void 0===x)return ze("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,V.tV)(E);return k?JSON.parse(k):(ze("Failed to decode base64 JWT payload"),null)}catch(k){return ze("Caught error parsing JWT payload as JSON",null===(g=k)||void 0===g?void 0:g.toString()),null}}function ut(v,g){return vi.apply(this,arguments)}function vi(){return(vi=(0,u.Z)(function*(v,g,y=!1){if(y)return g;try{return yield g}catch(E){throw E instanceof V.ZR&&bi(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}function bi({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class zt{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const x=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,u.Z)(function*(){yield y.iteration()}),E)}iteration(){var g=this;return(0,u.Z)(function*(){var y;try{yield g.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(y=E)||void 0===y?void 0:y.code)&&g.schedule(!0))}g.schedule()})()}}class Ri{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=qr(this.lastLoginAt),this.creationTime=qr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Vn(v){return mn.apply(this,arguments)}function mn(){return(mn=(0,u.Z)(function*(v){var g;const y=v.auth,E=yield v.getIdToken(),x=yield ut(v,an(y,{idToken:E}));ne(null==x?void 0:x.users.length,y,"internal-error");const k=x.users[0];v._notifyReloadListener(k);const te=(null===(g=k.providerUserInfo)||void 0===g?void 0:g.length)?H(k.providerUserInfo):[],Ae=z(v.providerData,te),Rt=!!v.isAnonymous&&!(v.email&&k.passwordHash||(null==Ae?void 0:Ae.length)),Hn={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:Ae,metadata:new Ri(k.createdAt,k.lastLoginAt),isAnonymous:Rt};Object.assign(v,Hn)})).apply(this,arguments)}function Gr(){return(Gr=(0,u.Z)(function*(v){const g=(0,V.m9)(v);yield Vn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function z(v,g){return[...v.filter(E=>!g.some(x=>x.providerId===E.providerId)),...g]}function H(v){return v.map(g=>{var{providerId:y}=g,E=(0,ae._T)(g,["providerId"]);return{providerId:y,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function $(){return($=(0,u.Z)(function*(v,g){const y=yield zi(v,{},(0,u.Z)(function*(){const E=(0,V.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:k}=v.config,te=_i(v,x,"/v1/token",`key=${k}`),Ae=yield v._getAdditionalHeaders();return Ae["Content-Type"]="application/x-www-form-urlencoded",Ln.fetch()(te,{method:"POST",headers:Ae,body:E})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class W{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ne(g.idToken,"internal-error"),ne(void 0!==g.idToken,"internal-error"),ne(void 0!==g.refreshToken,"internal-error");const y="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function pt(v){const g=Yt(v);return ne(g,"internal-error"),ne(void 0!==g.exp,"internal-error"),ne(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var E=this;return(0,u.Z)(function*(){return ne(!E.accessToken||E.refreshToken,g,"user-token-expired"),y||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var E=this;return(0,u.Z)(function*(){const{accessToken:x,refreshToken:k,expiresIn:te}=yield function B(v,g){return $.apply(this,arguments)}(g,y);E.updateTokensAndExpiration(x,k,Number(te))})()}updateTokensAndExpiration(g,y,E){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,y){const{refreshToken:E,accessToken:x,expirationTime:k}=y,te=new W;return E&&(ne("string"==typeof E,"internal-error",{appName:g}),te.refreshToken=E),x&&(ne("string"==typeof x,"internal-error",{appName:g}),te.accessToken=x),k&&(ne("number"==typeof k,"internal-error",{appName:g}),te.expirationTime=k),te}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new W,this.toJSON())}_performRefresh(){return pe("not implemented")}}function xe(v,g){ne("string"==typeof v||void 0===v,"internal-error",{appName:g})}class He{constructor(g){var{uid:y,auth:E,stsTokenManager:x}=g,k=(0,ae._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=E,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new Ri(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,u.Z)(function*(){const E=yield ut(y,y.stsTokenManager.getToken(y.auth,g));return ne(E,y.auth,"internal-error"),y.accessToken!==E&&(y.accessToken=E,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),E})()}getIdTokenResult(g){return function xn(v){return gr.apply(this,arguments)}(this,g)}reload(){return function gt(v){return Gr.apply(this,arguments)}(this)}_assign(g){this!==g&&(ne(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new He(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var E=this;return(0,u.Z)(function*(){let x=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),x=!0),y&&(yield Vn(E)),yield E.auth._persistUserIfCurrent(E),x&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,u.Z)(function*(){const y=yield g.getIdToken();return yield ut(g,function ms(v,g){return wt.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var E,x,k,te,Ae,Xe,Et,Rt;const Hn=null!==(E=y.displayName)&&void 0!==E?E:void 0,is=null!==(x=y.email)&&void 0!==x?x:void 0,no=null!==(k=y.phoneNumber)&&void 0!==k?k:void 0,qu=null!==(te=y.photoURL)&&void 0!==te?te:void 0,Bl=null!==(Ae=y.tenantId)&&void 0!==Ae?Ae:void 0,Gu=null!==(Xe=y._redirectEventId)&&void 0!==Xe?Xe:void 0,Wh=null!==(Et=y.createdAt)&&void 0!==Et?Et:void 0,Zu=null!==(Rt=y.lastLoginAt)&&void 0!==Rt?Rt:void 0,{uid:jl,emailVerified:tg,isAnonymous:Kh,providerData:Hl,stsTokenManager:$l}=y;ne(jl&&$l,g,"internal-error");const Dy=W.fromJSON(this.name,$l);ne("string"==typeof jl,g,"internal-error"),xe(Hn,g.name),xe(is,g.name),ne("boolean"==typeof tg,g,"internal-error"),ne("boolean"==typeof Kh,g,"internal-error"),xe(no,g.name),xe(qu,g.name),xe(Bl,g.name),xe(Gu,g.name),xe(Wh,g.name),xe(Zu,g.name);const eu=new He({uid:jl,auth:g,email:is,emailVerified:tg,displayName:Hn,isAnonymous:Kh,photoURL:qu,phoneNumber:no,tenantId:Bl,stsTokenManager:Dy,createdAt:Wh,lastLoginAt:Zu});return Hl&&Array.isArray(Hl)&&(eu.providerData=Hl.map(ss=>Object.assign({},ss))),Gu&&(eu._redirectEventId=Gu),eu}static _fromIdTokenResponse(g,y,E=!1){return(0,u.Z)(function*(){const x=new W;x.updateFromServerResponse(y);const k=new He({uid:y.localId,auth:g,stsTokenManager:x,isAnonymous:E});return yield Vn(k),k})()}}const sn=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(y,E){var x=this;return(0,u.Z)(function*(){x.storage[y]=E})()}_get(y){var E=this;return(0,u.Z)(function*(){const x=E.storage[y];return void 0===x?null:x})()}_remove(y){var E=this;return(0,u.Z)(function*(){delete E.storage[y]})()}_addListener(y,E){}_removeListener(y,E){}}return v.type="NONE",v})();function tn(v,g,y){return`firebase:${v}:${g}:${y}`}class sr{constructor(g,y,E){this.persistence=g,this.auth=y,this.userKey=E;const{config:x,name:k}=this.auth;this.fullUserKey=tn(this.userKey,x.apiKey,k),this.fullPersistenceKey=tn("persistence",x.apiKey,k),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,u.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?He._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,u.Z)(function*(){if(y.persistence===g)return;const E=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,E?y.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,E="authUser"){return(0,u.Z)(function*(){if(!y.length)return new sr(re(sn),g,E);const x=(yield Promise.all(y.map(function(){var Et=(0,u.Z)(function*(Rt){if(yield Rt._isAvailable())return Rt});return function(Rt){return Et.apply(this,arguments)}}()))).filter(Et=>Et);let k=x[0]||re(sn);const te=tn(E,g.config.apiKey,g.name);let Ae=null;for(const Et of y)try{const Rt=yield Et._get(te);if(Rt){const Hn=He._fromJSON(g,Rt);Et!==k&&(Ae=Hn),k=Et;break}}catch(Rt){}const Xe=x.filter(Et=>Et._shouldAllowMigration);return k._shouldAllowMigration&&Xe.length?(k=Xe[0],Ae&&(yield k._set(te,Ae.toJSON())),yield Promise.all(y.map(function(){var Et=(0,u.Z)(function*(Rt){if(Rt!==k)try{yield Rt._remove(te)}catch(Hn){}});return function(Rt){return Et.apply(this,arguments)}}())),new sr(k,g,E)):new sr(k,g,E)})()}}function ee(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Je(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Y(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Mt(g))return"Blackberry";if(Qt(g))return"Webos";if(K(g))return"Safari";if((g.includes("chrome/")||De(g))&&!g.includes("edge/"))return"Chrome";if(dt(g))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Y(v=(0,V.z$)()){return/firefox\//i.test(v)}function K(v=(0,V.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function De(v=(0,V.z$)()){return/crios\//i.test(v)}function Je(v=(0,V.z$)()){return/iemobile/i.test(v)}function dt(v=(0,V.z$)()){return/android/i.test(v)}function Mt(v=(0,V.z$)()){return/blackberry/i.test(v)}function Qt(v=(0,V.z$)()){return/webos/i.test(v)}function $t(v=(0,V.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Zn(v=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function Fr(v=(0,V.z$)()){return $t(v)||dt(v)||Qt(v)||Mt(v)||/windows phone/i.test(v)||Je(v)}function mr(v,g=[]){let y;switch(v){case"Browser":y=ee((0,V.z$)());break;case"Worker":y=`${ee((0,V.z$)())}-${v}`;break;default:y=v}const E=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${P.SDK_VERSION}/${E}`}class Da{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,y){const E=k=>new Promise((te,Ae)=>{try{te(g(k))}catch(Xe){Ae(Xe)}});E.onAbort=y,this.queue.push(E);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(g){var y=this;return(0,u.Z)(function*(){var E;if(y.auth.currentUser===g)return;const x=[];try{for(const k of y.queue)yield k(g),k.onAbort&&x.push(k.onAbort)}catch(k){x.reverse();for(const te of x)try{te()}catch(Ae){}throw y.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=k)||void 0===E?void 0:E.message})}})()}}class ii{constructor(g,y,E){this.app=g,this.heartbeatServiceProvider=y,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jt(this),this.idTokenSubscription=new jt(this),this.beforeStateQueue=new Da(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,y){var E=this;return y&&(this._popupRedirectResolver=re(y)),this._initializationPromise=this.queue((0,u.Z)(function*(){var x,k;if(!E._deleted&&(E.persistenceManager=yield sr.create(E,g),!E._deleted)){if(null===(x=E._popupRedirectResolver)||void 0===x?void 0:x._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(te){}yield E.initializeCurrentUser(y),E.lastNotifiedUid=(null===(k=E.currentUser)||void 0===k?void 0:k.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,u.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y,!0)}})()}initializeCurrentUser(g){var y=this;return(0,u.Z)(function*(){var E;const x=yield y.assertedPersistence.getCurrentUser();let k=x,te=!1;if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const Ae=null===(E=y.redirectUser)||void 0===E?void 0:E._redirectEventId,Xe=null==k?void 0:k._redirectEventId,Et=yield y.tryRedirectSignIn(g);(!Ae||Ae===Xe)&&(null==Et?void 0:Et.user)&&(k=Et.user,te=!0)}if(!k)return y.directlySetCurrentUser(null);if(!k._redirectEventId){if(te)try{yield y.beforeStateQueue.runMiddleware(k)}catch(Ae){k=x,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(Ae))}return k?y.reloadAndSetCurrentUserOrClear(k):y.directlySetCurrentUser(null)}return ne(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===k._redirectEventId?y.directlySetCurrentUser(k):y.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(g){var y=this;return(0,u.Z)(function*(){let E=null;try{E=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch(x){yield y._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,u.Z)(function*(){var E;try{yield Vn(g)}catch(x){if("auth/network-request-failed"!==(null===(E=x)||void 0===E?void 0:E.code))return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Zt(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,u.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,u.Z)(function*(){const E=g?(0,V.m9)(g):null;return E&&ne(E.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(E&&E._clone(y))})()}_updateCurrentUser(g,y=!1){var E=this;return(0,u.Z)(function*(){if(!E._deleted)return g&&ne(E.tenantId===g.tenantId,E,"tenant-id-mismatch"),y||(yield E.beforeStateQueue.runMiddleware(g)),E.queue((0,u.Z)(function*(){yield E.directlySetCurrentUser(g),E.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,u.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var y=this;return this.queue((0,u.Z)(function*(){yield y.assertedPersistence.setPersistence(re(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new V.LL("auth","Firebase",g())}onAuthStateChanged(g,y,E){return this.registerStateListener(this.authStateSubscription,g,y,E)}beforeAuthStateChanged(g,y){return this.beforeStateQueue.pushCallback(g,y)}onIdTokenChanged(g,y,E){return this.registerStateListener(this.idTokenSubscription,g,y,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var E=this;return(0,u.Z)(function*(){const x=yield E.getOrInitRedirectPersistenceManager(y);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,u.Z)(function*(){if(!y.redirectPersistenceManager){const E=g&&re(g)||y._popupRedirectResolver;ne(E,y,"argument-error"),y.redirectPersistenceManager=yield sr.create(y,[re(E._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,u.Z)(function*(){var E,x;return y._isInitialized&&(yield y.queue((0,u.Z)(function*(){}))),(null===(E=y._currentUser)||void 0===E?void 0:E._redirectEventId)===g?y._currentUser:(null===(x=y.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,u.Z)(function*(){if(g===y.currentUser)return y.queue((0,u.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,E,x){if(this._deleted)return()=>{};const k="function"==typeof y?y:y.next.bind(y),te=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(te,this,"internal-error"),te.then(()=>k(this.currentUser)),"function"==typeof y?g.addObserver(y,E,x):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,u.Z)(function*(){y.currentUser&&y.currentUser!==g&&y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh(),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=mr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,u.Z)(function*(){var y;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const x=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return x&&(E["X-Firebase-Client"]=x),E})()}}function je(v){return(0,V.m9)(v)}class jt{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,V.ne)(y=>this.observer=y)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function wn(v,g,y){const E=je(v);ne(E._canInitEmulator,E,"emulator-config-failed"),ne(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const x=!!(null==y?void 0:y.disableWarnings),k=Zr(g),{host:te,port:Ae}=function ys(v){const g=Zr(v),y=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!y)return{host:"",port:null};const E=y[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(E);if(x){const k=x[1];return{host:k,port:zn(E.substr(k.length+1))}}{const[k,te]=E.split(":");return{host:k,port:zn(te)}}}(g);E.config.emulator={url:`${k}//${te}${null===Ae?"":`:${Ae}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:te,port:Ae,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function _s(){function v(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function Zr(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function zn(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class ln{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return pe("not implemented")}_getIdTokenResponse(g){return pe("not implemented")}_linkToIdToken(g,y){return pe("not implemented")}_getReauthenticationResolver(g){return pe("not implemented")}}function fo(v,g){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,u.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:resetPassword",Ht(v,g))})).apply(this,arguments)}function Vt(v,g){return po.apply(this,arguments)}function po(){return(po=(0,u.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ki(v,g){return qo.apply(this,arguments)}function qo(){return(qo=(0,u.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:update",Ht(v,g))})).apply(this,arguments)}function Pn(){return(Pn=(0,u.Z)(function*(v,g){return On(v,"POST","/v1/accounts:signInWithPassword",Ht(v,g))})).apply(this,arguments)}function Bs(v,g){return go.apply(this,arguments)}function go(){return(go=(0,u.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:sendOobCode",Ht(v,g))})).apply(this,arguments)}function Mn(v,g){return fn.apply(this,arguments)}function fn(){return(fn=(0,u.Z)(function*(v,g){return Bs(v,g)})).apply(this,arguments)}function Lc(v,g){return mo.apply(this,arguments)}function mo(){return(mo=(0,u.Z)(function*(v,g){return Bs(v,g)})).apply(this,arguments)}function wi(v,g){return si.apply(this,arguments)}function si(){return(si=(0,u.Z)(function*(v,g){return Bs(v,g)})).apply(this,arguments)}function Uc(v,g){return yu.apply(this,arguments)}function yu(){return(yu=(0,u.Z)(function*(v,g){return Bs(v,g)})).apply(this,arguments)}function Ei(){return(Ei=(0,u.Z)(function*(v,g){return On(v,"POST","/v1/accounts:signInWithEmailLink",Ht(v,g))})).apply(this,arguments)}function Vc(){return(Vc=(0,u.Z)(function*(v,g){return On(v,"POST","/v1/accounts:signInWithEmailLink",Ht(v,g))})).apply(this,arguments)}class vu extends ln{constructor(g,y,E,x=null){super("password",E),this._email=g,this._password=y,this._tenantId=x}static _fromEmailAndPassword(g,y){return new vu(g,y,"password")}static _fromEmailAndCode(g,y,E=null){return new vu(g,y,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,u.Z)(function*(){switch(y.signInMethod){case"password":return function Go(v,g){return Pn.apply(this,arguments)}(g,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function js(v,g){return Ei.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:Ze(g,"internal-error")}})()}_linkToIdToken(g,y){var E=this;return(0,u.Z)(function*(){switch(E.signInMethod){case"password":return Vt(g,{idToken:y,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function _u(v,g){return Vc.apply(this,arguments)}(g,{idToken:y,email:E._email,oobCode:E._password});default:Ze(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Yn(v,g){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,u.Z)(function*(v,g){return On(v,"POST","/v1/accounts:signInWithIdp",Ht(v,g))})).apply(this,arguments)}class vs extends ln{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new vs(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):Ze("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:x}=y,k=(0,ae._T)(y,["providerId","signInMethod"]);if(!E||!x)return null;const te=new vs(E,x);return te.idToken=k.idToken||void 0,te.accessToken=k.accessToken||void 0,te.secret=k.secret,te.nonce=k.nonce,te.pendingToken=k.pendingToken||null,te}_getIdTokenResponse(g){return Yn(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,Yn(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Yn(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,V.xO)(y)}return g}}function Np(v,g){return jc.apply(this,arguments)}function jc(){return(jc=(0,u.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:sendVerificationCode",Ht(v,g))})).apply(this,arguments)}function Aa(){return(Aa=(0,u.Z)(function*(v,g){return On(v,"POST","/v1/accounts:signInWithPhoneNumber",Ht(v,g))})).apply(this,arguments)}function Hc(){return(Hc=(0,u.Z)(function*(v,g){const y=yield On(v,"POST","/v1/accounts:signInWithPhoneNumber",Ht(v,g));if(y.temporaryProof)throw Un(v,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Fp={USER_NOT_FOUND:"user-not-found"};function $c(){return($c=(0,u.Z)(function*(v,g){return On(v,"POST","/v1/accounts:signInWithPhoneNumber",Ht(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Fp)})).apply(this,arguments)}class zo extends ln{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new zo({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new zo({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function Rp(v,g){return Aa.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function Zo(v,g){return Hc.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Lp(v,g){return $c.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:E,verificationCode:x}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:E,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:E,phoneNumber:x,temporaryProof:k}=g;return E||y||x||k?new zo({verificationId:y,verificationCode:E,phoneNumber:x,temporaryProof:k}):null}}class bs{constructor(g){var y,E,x,k,te,Ae;const Xe=(0,V.zd)((0,V.pd)(g)),Et=null!==(y=Xe.apiKey)&&void 0!==y?y:null,Rt=null!==(E=Xe.oobCode)&&void 0!==E?E:null,Hn=function Up(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=Xe.mode)&&void 0!==x?x:null);ne(Et&&Rt&&Hn,"argument-error"),this.apiKey=Et,this.operation=Hn,this.code=Rt,this.continueUrl=null!==(k=Xe.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(te=Xe.languageCode)&&void 0!==te?te:null,this.tenantId=null!==(Ae=Xe.tenantId)&&void 0!==Ae?Ae:null}static parseLink(g){const y=function Oh(v){const g=(0,V.zd)((0,V.pd)(v)).link,y=g?(0,V.zd)((0,V.pd)(g)).deep_link_id:null,E=(0,V.zd)((0,V.pd)(v)).deep_link_id;return(E?(0,V.zd)((0,V.pd)(E)).link:null)||E||y||g||v}(g);try{return new bs(y)}catch(E){return null}}}let xa=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(y,E){return vu._fromEmailAndPassword(y,E)}static credentialWithLink(y,E){const x=bs.parseLink(E);return ne(x,"argument-error"),vu._fromEmailAndCode(y,x.code,x.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Hs{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Ti extends Hs{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Wo extends Ti{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return ne("providerId"in y&&"signInMethod"in y,"argument-error"),vs._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ne(g.idToken||g.accessToken,"argument-error"),vs._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Wo.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Wo.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:E,oauthTokenSecret:x,pendingToken:k,nonce:te,providerId:Ae}=g;if(!E&&!x&&!y&&!k||!Ae)return null;try{return new Wo(Ae)._credential({idToken:y,accessToken:E,nonce:te,pendingToken:k})}catch(Xe){return null}}}let Ma=(()=>{class v extends Ti{constructor(){super("facebook.com")}static credential(y){return vs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return v.credentialFromTaggedObject(y)}static credentialFromError(y){return v.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return v.credential(y.oauthAccessToken)}catch(E){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Oa=(()=>{class v extends Ti{constructor(){super("google.com"),this.addScope("profile")}static credential(y,E){return vs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:E})}static credentialFromResult(y){return v.credentialFromTaggedObject(y)}static credentialFromError(y){return v.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:E,oauthAccessToken:x}=y;if(!E&&!x)return null;try{return v.credential(E,x)}catch(k){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Ph=(()=>{class v extends Ti{constructor(){super("github.com")}static credential(y){return vs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return v.credentialFromTaggedObject(y)}static credentialFromError(y){return v.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return v.credential(y.oauthAccessToken)}catch(E){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class $s extends ln{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return Yn(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,Yn(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Yn(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:x,pendingToken:k}=y;return E&&x&&k&&E===x?new $s(E,k):null}static _create(g,y){return new $s(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ws extends Hs{constructor(g){ne(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return ws.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return ws.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=$s.fromJSON(g);return ne(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:E}=g;if(!y||!E)return null;try{return $s._create(E,y)}catch(x){return null}}}let Fi=(()=>{class v extends Ti{constructor(){super("twitter.com")}static credential(y,E){return vs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:E})}static credentialFromResult(y){return v.credentialFromTaggedObject(y)}static credentialFromError(y){return v.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:E,oauthTokenSecret:x}=y;if(!E||!x)return null;try{return v.credential(E,x)}catch(k){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Gc(v,g){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,u.Z)(function*(v,g){return On(v,"POST","/v1/accounts:signUp",Ht(v,g))})).apply(this,arguments)}class Ur{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,E,x=!1){return(0,u.Z)(function*(){const k=yield He._fromIdTokenResponse(g,E,x),te=Zc(E);return new Ur({user:k,providerId:te,_tokenResponse:E,operationType:y})})()}static _forOperation(g,y,E){return(0,u.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const x=Zc(E);return new Ur({user:g,providerId:x,_tokenResponse:E,operationType:y})})()}}function Zc(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function zc(v){return bu.apply(this,arguments)}function bu(){return(bu=(0,u.Z)(function*(v){var g;const y=je(v);if(yield y._initializationPromise,null===(g=y.currentUser)||void 0===g?void 0:g.isAnonymous)return new Ur({user:y.currentUser,providerId:null,operationType:"signIn"});const E=yield Gc(y,{returnSecureToken:!0}),x=yield Ur._fromIdTokenResponse(y,"signIn",E,!0);return yield y._updateCurrentUser(x.user),x})).apply(this,arguments)}class wu extends V.ZR{constructor(g,y,E,x){var k;super(y.code,y.message),this.operationType=E,this.user=x,Object.setPrototypeOf(this,wu.prototype),this.customData={appName:g.name,tenantId:null!==(k=g.tenantId)&&void 0!==k?k:void 0,_serverResponse:y.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,y,E,x){return new wu(g,y,E,x)}}function Eu(v,g,y,E){return("reauthenticate"===g?y._getReauthenticationResolver(v):y._getIdTokenResponse(v)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?wu._fromErrorAndOperation(v,k,g,E):k})}function wl(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function Es(v,g){return El.apply(this,arguments)}function El(){return(El=(0,u.Z)(function*(v,g){const y=(0,V.m9)(v);yield qs(!0,y,g);const{providerUserInfo:E}=yield Rr(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),x=wl(E||[]);return y.providerData=y.providerData.filter(k=>x.has(k.providerId)),x.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function yn(v,g){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,u.Z)(function*(v,g,y=!1){const E=yield ut(v,g._linkToIdToken(v.auth,yield v.getIdToken()),y);return Ur._forOperation(v,"link",E)})).apply(this,arguments)}function qs(v,g,y){return pn.apply(this,arguments)}function pn(){return(pn=(0,u.Z)(function*(v,g,y){yield Vn(g);const x=!1===v?"provider-already-linked":"no-such-provider";ne(wl(g.providerData).has(y)===v,g.auth,x)})).apply(this,arguments)}function Tu(v,g){return ka.apply(this,arguments)}function ka(){return(ka=(0,u.Z)(function*(v,g,y=!1){var E;const{auth:x}=v,k="reauthenticate";try{const te=yield ut(v,Eu(x,k,g,v),y);ne(te.idToken,x,"internal-error");const Ae=Yt(te.idToken);ne(Ae,x,"internal-error");const{sub:Xe}=Ae;return ne(v.uid===Xe,x,"user-mismatch"),Ur._forOperation(v,k,te)}catch(te){throw"auth/user-not-found"===(null===(E=te)||void 0===E?void 0:E.code)&&Ze(x,"user-mismatch"),te}})).apply(this,arguments)}function yo(v,g){return yr.apply(this,arguments)}function yr(){return(yr=(0,u.Z)(function*(v,g,y=!1){const E="signIn",x=yield Eu(v,E,g),k=yield Ur._fromIdTokenResponse(v,E,x);return y||(yield v._updateCurrentUser(k.user)),k})).apply(this,arguments)}function Cu(v,g){return jn.apply(this,arguments)}function jn(){return(jn=(0,u.Z)(function*(v,g){return yo(je(v),g)})).apply(this,arguments)}function Ts(v,g){return _r.apply(this,arguments)}function _r(){return(_r=(0,u.Z)(function*(v,g){const y=(0,V.m9)(v);return yield qs(!1,y,g.providerId),yn(y,g)})).apply(this,arguments)}function Ko(v,g){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,u.Z)(function*(v,g){return Tu((0,V.m9)(v),g)})).apply(this,arguments)}function Tl(v,g){return oi.apply(this,arguments)}function oi(){return(oi=(0,u.Z)(function*(v,g){return On(v,"POST","/v1/accounts:signInWithCustomToken",Ht(v,g))})).apply(this,arguments)}function Gs(v,g){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,u.Z)(function*(v,g){const y=je(v),E=yield Tl(y,{token:g,returnSecureToken:!0}),x=yield Ur._fromIdTokenResponse(y,"signIn",E);return yield y._updateCurrentUser(x.user),x})).apply(this,arguments)}class St{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?_o._fromServerResponse(g,y):Ze(g,"internal-error")}}class _o extends St{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new _o(y)}}function Iu(v,g,y){var E;ne((null===(E=y.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),ne(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(ne(y.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(ne(y.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function Wc(v,g,y){return Na.apply(this,arguments)}function Na(){return(Na=(0,u.Z)(function*(v,g,y){const E=(0,V.m9)(v),x={requestType:"PASSWORD_RESET",email:g};y&&Iu(E,x,y),yield Lc(E,x)})).apply(this,arguments)}function Kc(v,g,y){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,u.Z)(function*(v,g,y){yield fo((0,V.m9)(v),{oobCode:g,newPassword:y})})).apply(this,arguments)}function kh(v,g){return zs.apply(this,arguments)}function zs(){return(zs=(0,u.Z)(function*(v,g){yield Ki((0,V.m9)(v),{oobCode:g})})).apply(this,arguments)}function Ne(v,g){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,u.Z)(function*(v,g){const y=(0,V.m9)(v),E=yield fo(y,{oobCode:g}),x=E.requestType;switch(ne(x,y,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(E.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(E.mfaInfo,y,"internal-error");default:ne(E.email,y,"internal-error")}let k=null;return E.mfaInfo&&(k=St._fromServerResponse(je(y),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:k},operation:x}})).apply(this,arguments)}function Ra(v,g){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,u.Z)(function*(v,g){const{data:y}=yield Ne((0,V.m9)(v),g);return y.email})).apply(this,arguments)}function Yc(v,g,y){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,u.Z)(function*(v,g,y){const E=je(v),x=yield Gc(E,{returnSecureToken:!0,email:g,password:y}),k=yield Ur._fromIdTokenResponse(E,"signIn",x);return yield E._updateCurrentUser(k.user),k})).apply(this,arguments)}function Qi(v,g,y){return Cu((0,V.m9)(v),xa.credential(g,y))}function Cl(v,g,y){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,u.Z)(function*(v,g,y){const E=(0,V.m9)(v),x={requestType:"EMAIL_SIGNIN",email:g};ne(y.handleCodeInApp,E,"argument-error"),y&&Iu(E,x,y),yield wi(E,x)})).apply(this,arguments)}function Nh(v,g){const y=bs.parseLink(g);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}function Qc(v,g,y){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,u.Z)(function*(v,g,y){const E=(0,V.m9)(v),x=xa.credentialWithLink(g,y||ce());return ne(x._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Cu(E,x)})).apply(this,arguments)}function vo(v,g){return vr.apply(this,arguments)}function vr(){return(vr=(0,u.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:createAuthUri",Ht(v,g))})).apply(this,arguments)}function Ji(v,g){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,u.Z)(function*(v,g){const E={identifier:g,continueUri:Ue()?ce():"http://localhost"},{signinMethods:x}=yield vo((0,V.m9)(v),E);return x||[]})).apply(this,arguments)}function Jo(v,g){return ai.apply(this,arguments)}function ai(){return(ai=(0,u.Z)(function*(v,g){const y=(0,V.m9)(v),x={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&Iu(y.auth,x,g);const{email:k}=yield Mn(y.auth,x);k!==v.email&&(yield v.reload())})).apply(this,arguments)}function Rh(v,g,y){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,u.Z)(function*(v,g,y){const E=(0,V.m9)(v),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};y&&Iu(E.auth,k,y);const{email:te}=yield Uc(E.auth,k);te!==v.email&&(yield v.reload())})).apply(this,arguments)}function Xc(v,g){return La.apply(this,arguments)}function La(){return(La=(0,u.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Su(v,g){return ea.apply(this,arguments)}function ea(){return(ea=(0,u.Z)(function*(v,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const E=(0,V.m9)(v),k={idToken:yield E.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},te=yield ut(E,Xc(E.auth,k));E.displayName=te.displayName||null,E.photoURL=te.photoUrl||null;const Ae=E.providerData.find(({providerId:Xe})=>"password"===Xe);Ae&&(Ae.displayName=E.displayName,Ae.photoURL=E.photoURL),yield E._updateTokensIfNecessary(te)})).apply(this,arguments)}function ed(v,g){return Il((0,V.m9)(v),g,null)}function td(v,g){return Il((0,V.m9)(v),null,g)}function Il(v,g,y){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,u.Z)(function*(v,g,y){const{auth:E}=v,k={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(k.email=g),y&&(k.password=y);const te=yield ut(v,Vt(E,k));yield v._updateTokensIfNecessary(te,!0)})).apply(this,arguments)}class bo{constructor(g,y,E={}){this.isNewUser=g,this.providerId=y,this.profile=E}}class nd extends bo{constructor(g,y,E,x){super(g,y,E),this.username=x}}class Fh extends bo{constructor(g,y){super(g,"facebook.com",y)}}class Du extends nd{constructor(g,y){super(g,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class ui extends bo{constructor(g,y){super(g,"google.com",y)}}class Lh extends nd{constructor(g,y,E){super(g,"twitter.com",y,E)}}function Sl(v){const{user:g,_tokenResponse:y}=v;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function Va(v){var g,y;if(!v)return null;const{providerId:E}=v,x=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},k=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&(null==v?void 0:v.idToken)){const te=null===(y=null===(g=Yt(v.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(te)return new bo(k,"anonymous"!==te&&"custom"!==te?te:null)}if(!E)return null;switch(E){case"facebook.com":return new Fh(k,x);case"github.com":return new Du(k,x);case"google.com":return new ui(k,x);case"twitter.com":return new Lh(k,x,v.screenName||null);case"custom":case"anonymous":return new bo(k,null);default:return new bo(k,E,x)}}(y)}function Dl(v){return(0,V.m9)(v).signOut()}class Is{constructor(g,y,E){this.type=g,this.credential=y,this.auth=E}static _fromIdtoken(g,y){return new Is("enroll",g,y)}static _fromMfaPendingCredential(g){return new Is("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,E;if(null==g?void 0:g.multiFactorSession){if(null===(y=g.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return Is._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(E=g.multiFactorSession)||void 0===E?void 0:E.idToken)return Is._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Ba{constructor(g,y,E){this.session=g,this.hints=y,this.signInResolver=E}static _fromError(g,y){const E=je(g),x=y.customData._serverResponse,k=(x.mfaInfo||[]).map(Ae=>St._fromServerResponse(E,Ae));ne(x.mfaPendingCredential,E,"internal-error");const te=Is._fromMfaPendingCredential(x.mfaPendingCredential);return new Ba(te,k,function(){var Ae=(0,u.Z)(function*(Xe){const Et=yield Xe._process(E,te);delete x.mfaInfo,delete x.mfaPendingCredential;const Rt=Object.assign(Object.assign({},x),{idToken:Et.idToken,refreshToken:Et.refreshToken});switch(y.operationType){case"signIn":const Hn=yield Ur._fromIdTokenResponse(E,y.operationType,Rt);return yield E._updateCurrentUser(Hn.user),Hn;case"reauthenticate":return ne(y.user,E,"internal-error"),Ur._forOperation(y.user,y.operationType,Rt);default:Ze(E,"internal-error")}});return function(Xe){return Ae.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,u.Z)(function*(){return y.signInResolver(g)})()}}function ja(v,g){var y;const E=(0,V.m9)(v),x=g;return ne(g.customData.operationType,E,"argument-error"),ne(null===(y=x.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,E,"argument-error"),Ba._fromError(E,x)}function or(v,g){return rn(v,"POST","/v2/accounts/mfaEnrollment:start",Ht(v,g))}class Ss{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(E=>St._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new Ss(g)}getSession(){var g=this;return(0,u.Z)(function*(){return Is._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,y){var E=this;return(0,u.Z)(function*(){const x=g,k=yield E.getSession(),te=yield ut(E.user,x._process(E.user.auth,k,y));return yield E.user._updateTokensIfNecessary(te),E.user.reload()})()}unenroll(g){var y=this;return(0,u.Z)(function*(){var E;const x="string"==typeof g?g:g.uid,k=yield y.user.getIdToken(),te=yield ut(y.user,function Hp(v,g){return rn(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Ht(v,g))}(y.user.auth,{idToken:k,mfaEnrollmentId:x}));y.enrolledFactors=y.enrolledFactors.filter(({uid:Ae})=>Ae!==x),yield y.user._updateTokensIfNecessary(te);try{yield y.user.reload()}catch(Ae){if("auth/user-token-expired"!==(null===(E=Ae)||void 0===E?void 0:E.code))throw Ae}})()}}const ta=new WeakMap;function od(v){const g=(0,V.m9)(v);return ta.has(g)||ta.set(g,Ss._fromUser(g)),ta.get(g)}const Al="__sak";class Eo{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Al,"1"),this.storage.removeItem(Al),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const it=(()=>{class v extends Eo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,E)=>this.onStorageEvent(y,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function xl(){const v=(0,V.z$)();return K(v)||$t(v)}()&&function Wi(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Fr(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const E of Object.keys(this.listeners)){const x=this.storage.getItem(E),k=this.localCache[E];x!==k&&y(E,k,x)}}onStorageEvent(y,E=!1){if(!y.key)return void this.forAllChangedKeys((Ae,Xe,Et)=>{this.notifyListeners(Ae,Et)});const x=y.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ae=this.storage.getItem(x);if(y.newValue!==Ae)null!==y.newValue?this.storage.setItem(x,y.newValue):this.storage.removeItem(x);else if(this.localCache[x]===y.newValue&&!E)return}const k=()=>{const Ae=this.storage.getItem(x);!E&&this.localCache[x]===Ae||this.notifyListeners(x,Ae)},te=this.storage.getItem(x);!function qt(){return(0,V.w1)()&&10===document.documentMode}()||te===y.newValue||y.newValue===y.oldValue?k():setTimeout(k,10)}notifyListeners(y,E){this.localCache[y]=E;const x=this.listeners[y];if(x)for(const k of Array.from(x))k(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,E,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:E,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,E){var x=()=>super._set,k=this;return(0,u.Z)(function*(){yield x().call(k,y,E),k.localCache[y]=JSON.stringify(E)})()}_get(y){var E=()=>super._get,x=this;return(0,u.Z)(function*(){const k=yield E().call(x,y);return x.localCache[y]=JSON.stringify(k),k})()}_remove(y){var E=()=>super._remove,x=this;return(0,u.Z)(function*(){yield E().call(x,y),delete x.localCache[y]})()}}return v.type="LOCAL",v})(),Jn=(()=>{class v extends Eo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,E){}_removeListener(y,E){}}return v.type="SESSION",v})();let Ha=(()=>{class v{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const E=this.receivers.find(k=>k.isListeningto(y));if(E)return E;const x=new v(y);return this.receivers.push(x),x}isListeningto(y){return this.eventTarget===y}handleEvent(y){var E=this;return(0,u.Z)(function*(){const x=y,{eventId:k,eventType:te,data:Ae}=x.data,Xe=E.handlersMap[te];if(!(null==Xe?void 0:Xe.size))return;x.ports[0].postMessage({status:"ack",eventId:k,eventType:te});const Et=Array.from(Xe).map(function(){var Hn=(0,u.Z)(function*(is){return is(x.origin,Ae)});return function(is){return Hn.apply(this,arguments)}}()),Rt=yield function zr(v){return Promise.all(v.map(function(){var g=(0,u.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(E){return{fulfilled:!1,reason:E}}});return function(y){return g.apply(this,arguments)}}()))}(Et);x.ports[0].postMessage({status:"done",eventId:k,eventType:te,response:Rt})})()}_subscribe(y,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(E)}_unsubscribe(y,E){this.handlersMap[y]&&E&&this.handlersMap[y].delete(E),(!E||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function na(v="",g=10){let y="";for(let E=0;E<g;E++)y+=Math.floor(10*Math.random());return v+y}class ad{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,E=50){var x=this;return(0,u.Z)(function*(){const k="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let te,Ae;return new Promise((Xe,Et)=>{const Rt=na("",20);k.port1.start();const Hn=setTimeout(()=>{Et(new Error("unsupported_event"))},E);Ae={messageChannel:k,onMessage(is){const no=is;if(no.data.eventId===Rt)switch(no.data.status){case"ack":clearTimeout(Hn),te=setTimeout(()=>{Et(new Error("timeout"))},3e3);break;case"done":clearTimeout(te),Xe(no.data.response);break;default:clearTimeout(Hn),clearTimeout(te),Et(new Error("invalid_response"))}}},x.handlers.add(Ae),k.port1.addEventListener("message",Ae.onMessage),x.target.postMessage({eventType:g,eventId:Rt,data:y},[k.port2])}).finally(()=>{Ae&&x.removeMessageHandler(Ae)})})()}}function Tn(){return window}function Xi(){return void 0!==Tn().WorkerGlobalScope&&"function"==typeof Tn().importScripts}function ft(){return(ft=(0,u.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const xu="firebaseLocalStorageDb",Xn="firebaseLocalStorage",Ks="fbase_key";class To{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Ys(v,g){return v.transaction([Xn],g?"readwrite":"readonly").objectStore(Xn)}function es(){const v=indexedDB.open(xu,1);return new Promise((g,y)=>{v.addEventListener("error",()=>{y(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(Xn,{keyPath:Ks})}catch(x){y(x)}}),v.addEventListener("success",(0,u.Z)(function*(){const E=v.result;E.objectStoreNames.contains(Xn)?g(E):(E.close(),yield function $a(){const v=indexedDB.deleteDatabase(xu);return new To(v).toPromise()}(),g(yield es()))}))})}function qa(v,g,y){return ra.apply(this,arguments)}function ra(){return(ra=(0,u.Z)(function*(v,g,y){const E=Ys(v,!0).put({[Ks]:g,value:y});return new To(E).toPromise()})).apply(this,arguments)}function Ds(){return(Ds=(0,u.Z)(function*(v,g){const y=Ys(v,!1).get(g),E=yield new To(y).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Za(v,g){const y=Ys(v,!0).delete(g);return new To(y).toPromise()}const Wr=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,u.Z)(function*(){return y.db||(y.db=yield es()),y.db})()}_withRetries(y){var E=this;return(0,u.Z)(function*(){let x=0;for(;;)try{const k=yield E._openDb();return yield y(k)}catch(k){if(x++>3)throw k;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,u.Z)(function*(){return Xi()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,u.Z)(function*(){y.receiver=Ha._getInstance(function ld(){return Xi()?self:null}()),y.receiver._subscribe("keyChanged",function(){var E=(0,u.Z)(function*(x,k){return{keyProcessed:(yield y._poll()).includes(k.key)}});return function(x,k){return E.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var E=(0,u.Z)(function*(x,k){return["keyChanged"]});return function(x,k){return E.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,u.Z)(function*(){var E,x;if(y.activeServiceWorker=yield function Ws(){return ft.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new ad(y.activeServiceWorker);const k=yield y.sender._send("ping",{},800);!k||(null===(E=k[0])||void 0===E?void 0:E.fulfilled)&&(null===(x=k[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var E=this;return(0,u.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function qp(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:y},E.serviceWorkerReceiverAvailable?800:50)}catch(x){}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const y=yield es();return yield qa(y,Al,"1"),yield Za(y,Al),!0}catch(y){}return!1})()}_withPendingWrite(y){var E=this;return(0,u.Z)(function*(){E.pendingWrites++;try{yield y()}finally{E.pendingWrites--}})()}_set(y,E){var x=this;return(0,u.Z)(function*(){return x._withPendingWrite((0,u.Z)(function*(){return yield x._withRetries(k=>qa(k,y,E)),x.localCache[y]=E,x.notifyServiceWorker(y)}))})()}_get(y){var E=this;return(0,u.Z)(function*(){const x=yield E._withRetries(k=>function Ga(v,g){return Ds.apply(this,arguments)}(k,y));return E.localCache[y]=x,x})()}_remove(y){var E=this;return(0,u.Z)(function*(){return E._withPendingWrite((0,u.Z)(function*(){return yield E._withRetries(x=>Za(x,y)),delete E.localCache[y],E.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,u.Z)(function*(){const E=yield y._withRetries(te=>{const Ae=Ys(te,!1).getAll();return new To(Ae).toPromise()});if(!E)return[];if(0!==y.pendingWrites)return[];const x=[],k=new Set;for(const{fbase_key:te,value:Ae}of E)k.add(te),JSON.stringify(y.localCache[te])!==JSON.stringify(Ae)&&(y.notifyListeners(te,Ae),x.push(te));for(const te of Object.keys(y.localCache))y.localCache[te]&&!k.has(te)&&(y.notifyListeners(te,null),x.push(te));return x})()}notifyListeners(y,E){this.localCache[y]=E;const x=this.listeners[y];if(x)for(const k of Array.from(x))k(E)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function cd(v,g){return rn(v,"POST","/v2/accounts/mfaSignIn:start",Ht(v,g))}function Ar(){return(Ar=(0,u.Z)(function*(v){return(yield rn(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function _n(v){return new Promise((g,y)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=g,E.onerror=x=>{const k=Re("internal-error");k.customData=x,y(k)},E.type="text/javascript",E.charset="UTF-8",function er(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(E)})}function ts(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Cn=1e12;class Kr{constructor(g){this.auth=g,this.counter=Cn,this._widgets=new Map}render(g,y){const E=this.counter;return this._widgets.set(E,new br(g,this.auth.name,y||{})),this.counter++,E}reset(g){var y;const E=g||Cn;null===(y=this._widgets.get(E))||void 0===y||y.delete(),this._widgets.delete(E)}getResponse(g){var y;return(null===(y=this._widgets.get(g||Cn))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,u.Z)(function*(){var E;return null===(E=y._widgets.get(g||Cn))||void 0===E||E.execute(),""})()}}class br{constructor(g,y,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;ne(x,"argument-error",{appName:y}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ui(v){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}(50);const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ku=ts("rcb"),Uh=new Ke(3e4,6e4);class dd{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(g=Tn().grecaptcha)||void 0===g?void 0:g.render)}load(g,y=""){return ne(function hd(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(y),g,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(Tn().grecaptcha):new Promise((E,x)=>{const k=Tn().setTimeout(()=>{x(Re(g,"network-request-failed"))},Uh.get());Tn()[ku]=()=>{Tn().clearTimeout(k),delete Tn()[ku];const Ae=Tn().grecaptcha;if(!Ae)return void x(Re(g,"internal-error"));const Xe=Ae.render;Ae.render=(Et,Rt)=>{const Hn=Xe(Et,Rt);return this.counter++,Hn},this.hostLanguage=y,E(Ae)},_n(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:ku,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(k),x(Re(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var y;return!!(null===(y=Tn().grecaptcha)||void 0===y?void 0:y.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Wa{load(g){return(0,u.Z)(function*(){return new Kr(g)})()}clearedOneInstance(){}}const Yr="recaptcha",_y={theme:"light",type:"image"};class Io{constructor(g,y=Object.assign({},_y),E){this.parameters=y,this.type=Yr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=je(E),this.isInvisible="invisible"===this.parameters.size,ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;ne(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Wa:new dd,this.validateStartingState()}verify(){var g=this;return(0,u.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(y)||new Promise(k=>{const te=Ae=>{!Ae||(g.tokenChangeListeners.delete(te),k(Ae))};g.tokenChangeListeners.add(te),g.isInvisible&&E.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(E=>E(y)),"function"==typeof g)g(y);else if("string"==typeof g){const E=Tn()[g];"function"==typeof E&&E(y)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,u.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const E=document.createElement("div");y.appendChild(E),y=E}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,u.Z)(function*(){ne(Ue()&&!Xi(),g.auth,"internal-error"),yield function Vh(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function Ml(v){return Ar.apply(this,arguments)}(g.auth);ne(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Vi{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=zo._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function Gp(v,g,y){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,u.Z)(function*(v,g,y){const E=je(v),x=yield Vr(E,g,(0,V.m9)(y));return new Vi(x,k=>Cu(E,k))})).apply(this,arguments)}function Nu(v,g,y){return So.apply(this,arguments)}function So(){return(So=(0,u.Z)(function*(v,g,y){const E=(0,V.m9)(v);yield qs(!1,E,"phone");const x=yield Vr(E.auth,g,(0,V.m9)(y));return new Vi(x,k=>Ts(E,k))})).apply(this,arguments)}function Zp(v,g,y){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,u.Z)(function*(v,g,y){const E=(0,V.m9)(v),x=yield Vr(E.auth,g,(0,V.m9)(y));return new Vi(x,k=>Ko(E,k))})).apply(this,arguments)}function Vr(v,g,y){return li.apply(this,arguments)}function li(){return(li=(0,u.Z)(function*(v,g,y){var E;const x=yield y.verify();try{let k;if(ne("string"==typeof x,v,"argument-error"),ne(y.type===Yr,v,"argument-error"),k="string"==typeof g?{phoneNumber:g}:g,"session"in k){const te=k.session;if("phoneNumber"in k)return ne("enroll"===te.type,v,"internal-error"),(yield or(v,{idToken:te.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{ne("signin"===te.type,v,"internal-error");const Ae=(null===(E=k.multiFactorHint)||void 0===E?void 0:E.uid)||k.multiFactorUid;return ne(Ae,v,"missing-multi-factor-info"),(yield cd(v,{mfaPendingCredential:te.credential,mfaEnrollmentId:Ae,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:te}=yield Np(v,{phoneNumber:k.phoneNumber,recaptchaToken:x});return te}}finally{y._reset()}})).apply(this,arguments)}function Pl(v,g){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,u.Z)(function*(v,g){yield yn((0,V.m9)(v),g)})).apply(this,arguments)}let Ya=(()=>{class v{constructor(y){this.providerId=v.PROVIDER_ID,this.auth=je(y)}verifyPhoneNumber(y,E){return Vr(this.auth,y,(0,V.m9)(E))}static credential(y,E){return zo._fromVerification(y,E)}static credentialFromResult(y){return v.credentialFromTaggedObject(y)}static credentialFromError(y){return v.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:E,temporaryProof:x}=y;return E&&x?zo._fromTokenResponse(E,x):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Qs(v,g){return g?re(g):(ne(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Ru extends ln{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Yn(g,this._buildIdpRequest())}_linkToIdToken(g,y){return Yn(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return Yn(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function fd(v){return yo(v.auth,new Ru(v),v.bypassAuthState)}function Kt(v){const{auth:g,user:y}=v;return ne(y,g,"internal-error"),Tu(y,new Ru(v),v.bypassAuthState)}function pd(v){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,u.Z)(function*(v){const{auth:g,user:y}=v;return ne(y,g,"internal-error"),yn(y,new Ru(v),v.bypassAuthState)})).apply(this,arguments)}class wr{constructor(g,y,E,x,k=!1){this.auth=g,this.resolver=E,this.user=x,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,u.Z)(function*(E,x){g.pendingPromise={resolve:E,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(k){g.reject(k)}});return function(E,x){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,u.Z)(function*(){const{urlResponse:E,sessionId:x,postBody:k,tenantId:te,error:Ae,type:Xe}=g;if(Ae)return void y.reject(Ae);const Et={auth:y.auth,requestUri:E,sessionId:x,tenantId:te||void 0,postBody:k||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(Xe)(Et))}catch(Rt){y.reject(Rt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return fd;case"linkViaPopup":case"linkViaRedirect":return pd;case"reauthViaPopup":case"reauthViaRedirect":return Kt;default:Ze(this.auth,"internal-error")}}resolve(g){Ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Ee(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Do=new Ke(2e3,1e4);function Js(v,g,y){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,u.Z)(function*(v,g,y){const E=je(v);Se(v,g,Hs);const x=Qs(E,y);return new Uu(E,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function Lu(v,g,y){return ji.apply(this,arguments)}function ji(){return(ji=(0,u.Z)(function*(v,g,y){const E=(0,V.m9)(v);Se(E.auth,g,Hs);const x=Qs(E.auth,y);return new Uu(E.auth,"reauthViaPopup",g,x,E).executeNotNull()})).apply(this,arguments)}function Bh(v,g,y){return kl.apply(this,arguments)}function kl(){return(kl=(0,u.Z)(function*(v,g,y){const E=(0,V.m9)(v);Se(E.auth,g,Hs);const x=Qs(E.auth,y);return new Uu(E.auth,"linkViaPopup",g,x,E).executeNotNull()})).apply(this,arguments)}let Uu=(()=>{class v extends wr{constructor(y,E,x,k,te){super(y,E,k,te),this.provider=x,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var y=this;return(0,u.Z)(function*(){const E=yield y.execute();return ne(E,y.auth,"internal-error"),E})()}onExecution(){var y=this;return(0,u.Z)(function*(){Ee(1===y.filter.length,"Popup operations only handle one event");const E=na();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],E),y.authWindow.associatedEvent=E,y.resolver._originValidation(y.auth).catch(x=>{y.reject(x)}),y.resolver._isIframeWebStorageSupported(y.auth,x=>{x||y.reject(Re(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Re(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const y=()=>{var E,x;this.pollId=(null===(x=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===x?void 0:x.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Re(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Do.get())};y()}}return v.currentPopupAction=null,v})();const vn=new Map;class ci extends wr{constructor(g,y,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,u.Z)(function*(){let E=vn.get(y.auth._key());if(!E){try{const k=(yield function Vu(v,g){return gd.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;E=()=>Promise.resolve(k)}catch(x){E=()=>Promise.reject(x)}vn.set(y.auth._key(),E)}return y.bypassAuthState||vn.set(y.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,E=this;return(0,u.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(E,g);if("unknown"!==g.type){if(g.eventId){const x=yield E.auth._redirectUserForId(g.eventId);if(x)return E.user=x,y().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function gd(){return(gd=(0,u.Z)(function*(v,g){const y=Bu(g),E=jh(v);if(!(yield E._isAvailable()))return!1;const x="true"===(yield E._get(y));return yield E._remove(y),x})).apply(this,arguments)}function Qr(v,g){return ia.apply(this,arguments)}function ia(){return(ia=(0,u.Z)(function*(v,g){return jh(v)._set(Bu(g),"true")})).apply(this,arguments)}function ns(){vn.clear()}function Nl(v,g){vn.set(v._key(),g)}function jh(v){return re(v._redirectPersistence)}function Bu(v){return tn("pendingRedirect",v.config.apiKey,v.name)}function Rl(v,g,y){return function ju(v,g,y){return Ci.apply(this,arguments)}(v,g,y)}function Ci(){return(Ci=(0,u.Z)(function*(v,g,y){const E=je(v);Se(v,g,Hs);const x=Qs(E,y);return yield Qr(x,E),x._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function T(v,g,y){return function S(v,g,y){return M.apply(this,arguments)}(v,g,y)}function M(){return(M=(0,u.Z)(function*(v,g,y){const E=(0,V.m9)(v);Se(E.auth,g,Hs);const x=Qs(E.auth,y);yield Qr(x,E.auth);const k=yield Nt(E);return x._openRedirect(E.auth,g,"reauthViaRedirect",k)})).apply(this,arguments)}function U(v,g,y){return function J(v,g,y){return ue.apply(this,arguments)}(v,g,y)}function ue(){return(ue=(0,u.Z)(function*(v,g,y){const E=(0,V.m9)(v);Se(E.auth,g,Hs);const x=Qs(E.auth,y);yield qs(!1,E,g.providerId),yield Qr(x,E.auth);const k=yield Nt(E);return x._openRedirect(E.auth,g,"linkViaRedirect",k)})).apply(this,arguments)}function Pe(v,g){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,u.Z)(function*(v,g){return yield je(v)._initializationPromise,mt(v,g,!1)})).apply(this,arguments)}function mt(v,g){return xt.apply(this,arguments)}function xt(){return(xt=(0,u.Z)(function*(v,g,y=!1){const E=je(v),x=Qs(E,g),te=yield new ci(E,x,y).execute();return te&&!y&&(delete te.user._redirectEventId,yield E._persistUserIfCurrent(te.user),yield E._setRedirectUser(null,g)),te})).apply(this,arguments)}function Nt(v){return ct.apply(this,arguments)}function ct(){return(ct=(0,u.Z)(function*(v){const g=na(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class Wn{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(y=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function As(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eo(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var E;if(g.error&&!eo(g)){const x=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";y.onError(Re(this.auth,x))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const E=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xs(g))}saveEventToCache(g){this.cachedEventUids.add(Xs(g)),this.lastProcessedEventTime=Date.now()}}function Xs(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function eo({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===(null==g?void 0:g.code)}function Qa(v){return sa.apply(this,arguments)}function sa(){return(sa=(0,u.Z)(function*(v,g={}){return rn(v,"GET","/v1/projects",g)})).apply(this,arguments)}const Ja=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rs=/^https?/;function to(){return(to=(0,u.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield Qa(v);for(const y of g)try{if(vy(y))return}catch(E){}Ze(v,"unauthorized-domain")})).apply(this,arguments)}function vy(v){const g=ce(),{protocol:y,hostname:E}=new URL(g);if(v.startsWith("chrome-extension://")){const te=new URL(v);return""===te.hostname&&""===E?"chrome-extension:"===y&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&te.hostname===E}if(!rs.test(y))return!1;if(Ja.test(v))return E===v;const x=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(E)}const B0=new Ke(3e4,6e4);function Hh(){const v=Tn().___jsl;if(null==v?void 0:v.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let y=0;y<v.CP.length;y++)v.CP[y]=null}let Fl=null;function $h(v){return Fl=Fl||function Wp(v){return new Promise((g,y)=>{var E,x,k;function te(){Hh(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Hh(),y(Re(v,"network-request-failed"))},timeout:B0.get()})}if(null===(x=null===(E=Tn().gapi)||void 0===E?void 0:E.iframes)||void 0===x?void 0:x.Iframe)g(gapi.iframes.getContext());else{if(!(null===(k=Tn().gapi)||void 0===k?void 0:k.load)){const Ae=ts("iframefcb");return Tn()[Ae]=()=>{gapi.load?te():y(Re(v,"network-request-failed"))},_n(`https://apis.google.com/js/api.js?onload=${Ae}`).catch(Xe=>y(Xe))}te()}}).catch(g=>{throw Fl=null,g})}(v),Fl}const Ao=new Ke(5e3,15e3),md={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$u=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xo(v){const g=v.config;ne(g.authDomain,v,"auth-domain-config-required");const y=g.emulator?hn(g,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:v.name,v:P.SDK_VERSION},x=$u.get(v.config.apiHost);x&&(E.eid=x);const k=v._getFrameworks();return k.length&&(E.fw=k.join(",")),`${y}?${(0,V.xO)(E).slice(1)}`}function Yp(){return Yp=(0,u.Z)(function*(v){const g=yield $h(v),y=Tn().gapi;return ne(y,v,"internal-error"),g.open({where:document.body,url:xo(v),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:md,dontclear:!0},E=>new Promise(function(){var x=(0,u.Z)(function*(k,te){yield E.restyle({setHideOnLeave:!1});const Ae=Re(v,"network-request-failed"),Xe=Tn().setTimeout(()=>{te(Ae)},Ao.get());function Et(){Tn().clearTimeout(Xe),k(E)}E.ping(Et).then(Et,()=>{te(Ae)})});return function(k,te){return x.apply(this,arguments)}}()))}),Yp.apply(this,arguments)}const Xa={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ul{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function Gh(v,g,y,E,x,k){ne(v.config.authDomain,v,"auth-domain-config-required"),ne(v.config.apiKey,v,"invalid-api-key");const te={apiKey:v.config.apiKey,appName:v.name,authType:y,redirectUrl:E,v:P.SDK_VERSION,eventId:x};if(g instanceof Hs){g.setDefaultLanguage(v.languageCode),te.providerId=g.providerId||"",(0,V.xb)(g.getCustomParameters())||(te.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Xe,Et]of Object.entries(k||{}))te[Xe]=Et}if(g instanceof Ti){const Xe=g.getScopes().filter(Et=>""!==Et);Xe.length>0&&(te.scopes=Xe.join(","))}v.tenantId&&(te.tid=v.tenantId);const Ae=te;for(const Xe of Object.keys(Ae))void 0===Ae[Xe]&&delete Ae[Xe];return`${function xs({config:v}){return v.emulator?hn(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,V.xO)(Ae).slice(1)}`}const Ms="webStorageSupport",Qp=class Zh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jn,this._completeRedirectFn=mt,this._overrideRedirectResult=Nl}_openPopup(g,y,E,x){var k=this;return(0,u.Z)(function*(){var te;Ee(null===(te=k.eventManagers[g._key()])||void 0===te?void 0:te.manager,"_initialize() not called before _openPopup()");const Ae=Gh(g,y,E,ce(),x);return function by(v,g,y,E=500,x=600){const k=Math.max((window.screen.availHeight-x)/2,0).toString(),te=Math.max((window.screen.availWidth-E)/2,0).toString();let Ae="";const Xe=Object.assign(Object.assign({},Xa),{width:E.toString(),height:x.toString(),top:k,left:te}),Et=(0,V.z$)().toLowerCase();y&&(Ae=De(Et)?"_blank":y),Y(Et)&&(g=g||"http://localhost",Xe.scrollbars="yes");const Rt=Object.entries(Xe).reduce((is,[no,qu])=>`${is}${no}=${qu},`,"");if(function ri(v=(0,V.z$)()){var g;return $t(v)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(Et)&&"_self"!==Ae)return function Vl(v,g){const y=document.createElement("a");y.href=v,y.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(E)}(g||"",Ae),new Ul(null);const Hn=window.open(g||"",Ae,Rt);ne(Hn,v,"popup-blocked");try{Hn.focus()}catch(is){}return new Ul(Hn)}(g,Ae,na())})()}_openRedirect(g,y,E,x){var k=this;return(0,u.Z)(function*(){return yield k._originValidation(g),function ud(v){Tn().location.href=v}(Gh(g,y,E,ce(),x)),new Promise(()=>{})})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:x,promise:k}=this.eventManagers[y];return x?Promise.resolve(x):(Ee(k,"If manager is not set, promise should be"),k)}const E=this.initAndGetManager(g);return this.eventManagers[y]={promise:E},E.catch(()=>{delete this.eventManagers[y]}),E}initAndGetManager(g){var y=this;return(0,u.Z)(function*(){const E=yield function Kp(v){return Yp.apply(this,arguments)}(g),x=new Wn(g);return E.register("authEvent",k=>(ne(null==k?void 0:k.authEvent,g,"invalid-auth-event"),{status:x.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:x},y.iframes[g._key()]=E,x})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(Ms,{type:Ms},x=>{var k;const te=null===(k=null==x?void 0:x[0])||void 0===k?void 0:k[Ms];void 0!==te&&y(!!te),Ze(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Hi(v){return to.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return Fr()||K()||$t()}};class Jp extends class Ty{constructor(g){this.factorId=g}_process(g,y,E){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,E);case"signin":return this._finalizeSignIn(g,y.credential);default:return pe("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Jp(g)}_finalizeEnroll(g,y,E){return function sd(v,g){return rn(v,"POST","/v2/accounts/mfaEnrollment:finalize",Ht(v,g))}(g,{idToken:y,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function ur(v,g){return rn(v,"POST","/v2/accounts/mfaSignIn:finalize",Ht(v,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Xp=(()=>{class v{constructor(){}static assertion(y){return Jp._fromCredential(y)}}return v.FACTOR_ID="phone",v})();var Cy="@firebase/auth";class Iy{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,u.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(E=>{var x;g((null===(x=E)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);!y||(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Sy(v=(0,P.getApp)()){const g=(0,P._getProvider)(v,"auth");return g.isInitialized()?g.getImmediate():function se(v,g){const y=(0,P._getProvider)(v,"auth");if(y.isInitialized()){const x=y.getImmediate(),k=y.getOptions();if((0,V.vZ)(k,null!=g?g:{}))return x;Ze(x,"already-initialized")}return y.initialize({options:g})}(v,{popupRedirectResolver:Qp,persistence:[Wr,it,Jn]})}!function bd(v){(0,P._registerComponent)(new ye.wA("auth",(g,{options:y})=>{const E=g.getProvider("app").getImmediate(),x=g.getProvider("heartbeat"),{apiKey:k,authDomain:te}=E.options;return((Ae,Xe)=>{ne(k&&!k.includes(":"),"invalid-api-key",{appName:Ae.name}),ne(!(null==te?void 0:te.includes(":")),"argument-error",{appName:Ae.name});const Et={apiKey:k,authDomain:te,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mr(v)},Rt=new ii(Ae,Xe,Et);return function _e(v,g){const y=(null==g?void 0:g.persistence)||[],E=(Array.isArray(y)?y:[y]).map(re);(null==g?void 0:g.errorMap)&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(E,null==g?void 0:g.popupRedirectResolver)}(Rt,y),Rt})(E,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,E)=>{g.getProvider("auth-internal").initialize()})),(0,P._registerComponent)(new ye.wA("auth-internal",g=>{const y=je(g.getProvider("auth").getImmediate());return new Iy(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,P.registerVersion)(Cy,"0.20.7",function eg(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,P.registerVersion)(Cy,"0.20.7","esm2017")}("Browser")},2090:(ot,Ce,N)=>{N.d(Ce,{$s:()=>Vn,BH:()=>Ge,G6:()=>ne,L:()=>le,LL:()=>ce,Sg:()=>Oe,UG:()=>ge,US:()=>ye,ZB:()=>G,ZR:()=>_e,b$:()=>Ze,eu:()=>Ee,hl:()=>pe,jU:()=>Ie,m9:()=>Gr,ne:()=>wt,pd:()=>Un,r3:()=>Ht,ru:()=>ze,tV:()=>ve,uI:()=>qe,vZ:()=>Nr,w1:()=>Me,xO:()=>_i,xb:()=>Dn,z$:()=>Le,zI:()=>Q,zd:()=>Ni});const ae=function(z){const H=[];let B=0;for(let $=0;$<z.length;$++){let W=z.charCodeAt($);W<128?H[B++]=W:W<2048?(H[B++]=W>>6|192,H[B++]=63&W|128):55296==(64512&W)&&$+1<z.length&&56320==(64512&z.charCodeAt($+1))?(W=65536+((1023&W)<<10)+(1023&z.charCodeAt(++$)),H[B++]=W>>18|240,H[B++]=W>>12&63|128,H[B++]=W>>6&63|128,H[B++]=63&W|128):(H[B++]=W>>12|224,H[B++]=W>>6&63|128,H[B++]=63&W|128)}return H},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,H){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const B=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,$=[];for(let W=0;W<z.length;W+=3){const xe=z[W],He=W+1<z.length,It=He?z[W+1]:0,sn=W+2<z.length,tn=sn?z[W+2]:0;let Y=(15&It)<<2|tn>>6,K=63&tn;sn||(K=64,He||(Y=64)),$.push(B[xe>>2],B[(3&xe)<<4|It>>4],B[Y],B[K])}return $.join("")},encodeString(z,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(z):this.encodeByteArray(ae(z),H)},decodeString(z,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(z):function(z){const H=[];let B=0,$=0;for(;B<z.length;){const W=z[B++];if(W<128)H[$++]=String.fromCharCode(W);else if(W>191&&W<224){const xe=z[B++];H[$++]=String.fromCharCode((31&W)<<6|63&xe)}else if(W>239&&W<365){const sn=((7&W)<<18|(63&z[B++])<<12|(63&z[B++])<<6|63&z[B++])-65536;H[$++]=String.fromCharCode(55296+(sn>>10)),H[$++]=String.fromCharCode(56320+(1023&sn))}else{const xe=z[B++],He=z[B++];H[$++]=String.fromCharCode((15&W)<<12|(63&xe)<<6|63&He)}}return H.join("")}(this.decodeStringToByteArray(z,H))},decodeStringToByteArray(z,H){this.init_();const B=H?this.charToByteMapWebSafe_:this.charToByteMap_,$=[];for(let W=0;W<z.length;){const xe=B[z.charAt(W++)],It=W<z.length?B[z.charAt(W)]:0;++W;const tn=W<z.length?B[z.charAt(W)]:64;++W;const ee=W<z.length?B[z.charAt(W)]:64;if(++W,null==xe||null==It||null==tn||null==ee)throw Error();$.push(xe<<2|It>>4),64!==tn&&($.push(It<<4&240|tn>>2),64!==ee&&$.push(tn<<6&192|ee))}return $},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}},le=function(z){return function(z){const H=ae(z);return ye.encodeByteArray(H,!0)}(z).replace(/\./g,"")},ve=function(z){try{return ye.decodeString(z,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function G(z,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return H}for(const B in H)!H.hasOwnProperty(B)||!ie(B)||(z[B]=G(z[B],H[B]));return z}function ie(z){return"__proto__"!==z}class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,B)=>{this.resolve=H,this.reject=B})}wrapCallback(H){return(B,$)=>{B?this.reject(B):this.resolve($),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(B):H(B,$))}}}function Oe(z,H){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const $=H||"demo-project",W=z.iat||0,xe=z.sub||z.user_id;if(!xe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const He=Object.assign({iss:`https://securetoken.google.com/${$}`,aud:$,iat:W,exp:W+3600,auth_time:W,sub:xe,user_id:xe,firebase:{sign_in_provider:"custom",identities:{}}},z);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(He)),""].join(".")}function Le(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function qe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function ge(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(z){return!1}}function Ie(){return"object"==typeof self&&self.self===self}function ze(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function Ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Me(){const z=Le();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function ne(){return!ge()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pe(){return"object"==typeof indexedDB}function Ee(){return new Promise((z,H)=>{try{let B=!0;const $="validate-browser-context-for-indexeddb-analytics-module",W=self.indexedDB.open($);W.onsuccess=()=>{W.result.close(),B||self.indexedDB.deleteDatabase($),z(!0)},W.onupgradeneeded=()=>{B=!1},W.onerror=()=>{var xe;H((null===(xe=W.error)||void 0===xe?void 0:xe.message)||"")}}catch(B){H(B)}})}function Q(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class _e extends Error{constructor(H,B,$){super(B),this.code=H,this.customData=$,this.name="FirebaseError",Object.setPrototypeOf(this,_e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ce.prototype.create)}}class ce{constructor(H,B,$){this.service=H,this.serviceName=B,this.errors=$}create(H,...B){const $=B[0]||{},W=`${this.service}/${H}`,xe=this.errors[H],He=xe?function Ue(z,H){return z.replace(vt,(B,$)=>{const W=H[$];return null!=W?String(W):`<${$}?>`})}(xe,$):"Error";return new _e(W,`${this.serviceName}: ${He} (${W}).`,$)}}const vt=/\{\$([^}]+)}/g;function Ht(z,H){return Object.prototype.hasOwnProperty.call(z,H)}function Dn(z){for(const H in z)if(Object.prototype.hasOwnProperty.call(z,H))return!1;return!0}function Nr(z,H){if(z===H)return!0;const B=Object.keys(z),$=Object.keys(H);for(const W of B){if(!$.includes(W))return!1;const xe=z[W],He=H[W];if(On(xe)&&On(He)){if(!Nr(xe,He))return!1}else if(xe!==He)return!1}for(const W of $)if(!B.includes(W))return!1;return!0}function On(z){return null!==z&&"object"==typeof z}function _i(z){const H=[];for(const[B,$]of Object.entries(z))Array.isArray($)?$.forEach(W=>{H.push(encodeURIComponent(B)+"="+encodeURIComponent(W))}):H.push(encodeURIComponent(B)+"="+encodeURIComponent($));return H.length?"&"+H.join("&"):""}function Ni(z){const H={};return z.replace(/^\?/,"").split("&").forEach($=>{if($){const[W,xe]=$.split("=");H[decodeURIComponent(W)]=decodeURIComponent(xe)}}),H}function Un(z){const H=z.indexOf("?");if(!H)return"";const B=z.indexOf("#",H);return z.substring(H,B>0?B:void 0)}function wt(z,H){const B=new Rr(z,H);return B.subscribe.bind(B)}class Rr{constructor(H,B){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=B,this.task.then(()=>{H(this)}).catch($=>{this.error($)})}next(H){this.forEachObserver(B=>{B.next(H)})}error(H){this.forEachObserver(B=>{B.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,B,$){let W;if(void 0===H&&void 0===B&&void 0===$)throw new Error("Missing Observer.");W=function an(z,H){if("object"!=typeof z||null===z)return!1;for(const B of H)if(B in z&&"function"==typeof z[B])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:B,complete:$},void 0===W.next&&(W.next=ir),void 0===W.error&&(W.error=ir),void 0===W.complete&&(W.complete=ir);const xe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?W.error(this.finalError):W.complete()}catch(He){}}),this.observers.push(W),xe}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let B=0;B<this.observers.length;B++)this.sendOne(B,H)}sendOne(H,B){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{B(this.observers[H])}catch($){"undefined"!=typeof console&&console.error&&console.error($)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ir(){}function Vn(z,H=1e3,B=2){const $=H*Math.pow(B,z),W=Math.round(.5*$*(Math.random()-.5)*2);return Math.min(144e5,$+W)}function Gr(z){return z&&z._delegate?z._delegate:z}},386:(ot,Ce,N)=>{var u=N(5e3);let V=null;function P(){return V}const me=new u.OlP("DocumentToken");let le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function ve(){return(0,u.LFG)(G)}()},providedIn:"platform"}),n})();const Z=new u.OlP("Location Initialized");let G=(()=>{class n extends le{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ie()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ie()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(me))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Ge(){return new G((0,u.LFG)(me))}()},providedIn:"platform"}),n})();function ie(){return!!window.history.pushState}function Oe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Le(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function qe(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Ie(n){const e=(0,u.LFG)(me).location;return new Ze((0,u.LFG)(le),e&&e.origin||"")}()},providedIn:"root"}),n})();const ze=new u.OlP("appBaseHref");let Ze=(()=>{class n extends ge{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Oe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+qe(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+qe(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+qe(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(le),u.LFG(ze,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Re=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Oe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+qe(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+qe(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(le),u.LFG(ze,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n{constructor(t,r){this._subject=new u.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Le(ne(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+qe(r))}normalize(t){return n.stripTrailingSlash(function We(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ne(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=qe,n.joinWithSlash=Oe,n.stripTrailingSlash=Le,n.\u0275fac=function(t){return new(t||n)(u.LFG(ge),u.LFG(le))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Se(){return new Me((0,u.LFG)(ge),(0,u.LFG)(le))}()},providedIn:"root"}),n})();function ne(n){return n.replace(/\/index.html$/,"")}function po(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}let Ki=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,u.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,u.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.ZZ4),u.Y36(u.aQg),u.Y36(u.SBq),u.Y36(u.Qsj))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Go{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Pn=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Go(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,c),Bs(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Bs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Bs(n,e){n.context.$implicit=e.item}let Mn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new fn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Lc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Lc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class fn{constructor(){this.$implicit=null,this.ngIf=null}}function Lc(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}class mo{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let wi=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),si=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new mo(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(wi,9))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),_u=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,a]=t.split(".");null!=(r=null!=r&&a?`${r}${a}`:r)?this._renderer.setStyle(this._ngEl.nativeElement,i,r):this._renderer.removeStyle(this._ngEl.nativeElement,i)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.aQg),u.Y36(u.Qsj))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})(),$s=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function Ur(n){return"server"===n}let wu=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new Eu((0,u.LFG)(me),window)}),n})();class Eu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Es(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=wl(this.window.history)||wl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function wl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class yn{}class qs extends class Pa extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function de(n){V||(V=n)}(new qs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Tu(){return pn=pn||document.querySelector("base"),pn?pn.getAttribute("href"):null}();return null==t?null:function yo(n){ka=ka||document.createElement("a"),ka.setAttribute("href",n);const e=ka.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){pn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return po(document.cookie,e)}}let ka,pn=null;const yr=new u.OlP("TRANSITION_ID"),jn=[{provide:u.ip1,useFactory:function Cu(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const r=P(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[yr,me,u.zs3],multi:!0}];class Ts{static init(){(0,u.VLi)(new Ts)}addToWindow(e){u.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const i=u.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const f=function(m){c=c||m,a--,0==a&&r(c)};i.forEach(function(m){m.whenStable(f)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let _r=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Ko=new u.OlP("EventManagerPlugins");let Yi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const c=i[a];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ko),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Tl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=P().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let oi=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Gs=(()=>{class n extends oi{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const c=this._doc.createElement("style");c.textContent=a,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Zs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Zs))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(me))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Zs(n){P().remove(n)}const St={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},_o=/%COMP%/g;function zs(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?zs(n,i,t):(i=i.replace(_o,n),t.push(i))}return t}function Ne(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ra=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Sn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case u.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Qi(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case u.ifc.ShadowDom:return new Cl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=zs(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Yi),u.LFG(Gs),u.LFG(u.AFp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Sn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(St[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=St[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=St[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,i&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ne(r)):this.eventManager.addEventListener(e,t,Ne(r))}}class Qi extends Sn{constructor(e,t,r,i){super(e),this.component=r;const a=zs(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Yo(n){return"_ngcontent-%COMP%".replace(_o,n)}(i+"-"+r.id),this.hostAttr=function kh(n){return"_nghost-%COMP%".replace(_o,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Cl extends Sn{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=zs(i.id,i.styles,[]);for(let c=0;c<a.length;c++){const f=document.createElement("style");f.textContent=a[c],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Fa=(()=>{class n extends Tl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(me))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Nh=["alt","control","meta","shift"],Jc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vo={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},vr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ji=(()=>{class n extends Tl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="";if(Nh.forEach(m=>{const b=r.indexOf(m);b>-1&&(r.splice(b,1),c+=m+".")}),c+=a,0!=r.length||0===a.length)return null;const f={};return f.domEventName=i,f.fullKey=c,f}static getEventFullKey(t){let r="",i=function Qo(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&vo.hasOwnProperty(e)&&(e=vo[e]))}return Jc[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Nh.forEach(a=>{a!=i&&vr[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(me))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Xc=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:"browser"},{provide:u.g9A,useValue:function Jo(){qs.makeCurrent(),Ts.init()},multi:!0},{provide:me,useFactory:function Rh(){return(0,u.RDi)(document),document},deps:[]}]),La=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function ai(){return new u.qLn},deps:[]},{provide:Ko,useClass:Fa,multi:!0,deps:[me,u.R0b,u.Lbi]},{provide:Ko,useClass:Ji,multi:!0,deps:[me]},{provide:Ra,useClass:Ra,deps:[Yi,Gs,u.AFp]},{provide:u.FYo,useExisting:Ra},{provide:oi,useExisting:Gs},{provide:Gs,useClass:Gs,deps:[me]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b]},{provide:Yi,useClass:Yi,deps:[Ko,u.R0b]},{provide:yn,useClass:_r,deps:[]}];let Su=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:yr,useExisting:u.AFp},jn]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(n,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:La,imports:[$s,u.hGG]}),n})();"undefined"!=typeof window&&window;var En=N(8996),Au=N(3269);function it(...n){const e=(0,Au.yG)(n);return(0,En.D)(n,e)}var ar=N(7579);class Jn extends ar.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var zr=N(8306);const{isArray:Ha}=Array,{getPrototypeOf:na,prototype:ad,keys:Tn}=Object;function ud(n){if(1===n.length){const e=n[0];if(Ha(e))return{args:e,keys:null};if(function Xi(n){return n&&"object"==typeof n&&na(n)===ad}(e)){const t=Tn(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ws=N(4671),ft=N(4004);const{isArray:qp}=Array;function xu(n){return(0,ft.U)(e=>function ld(n,e){return qp(e)?n(...e):n(e)}(n,e))}function Mu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Xn=N(5403),Ks=N(9672);function $a(n,e,t){n?(0,Ks.f)(t,n,e):e()}var es=N(576);function qa(n,e){const t=(0,es.m)(n)?n:()=>n,r=i=>i.error(t());return new zr.y(e?i=>e.schedule(r,0,i):r)}const Ga=(0,N(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ds=N(8189);function Ou(...n){return function Za(){return(0,Ds.J)(1)}()((0,En.D)(n,(0,Au.yG)(n)))}var za=N(8421);function Pu(n){return new zr.y(e=>{(0,za.Xf)(n()).subscribe(e)})}var Wr=N(515),cd=N(727),ur=N(4482);function Ml(){return(0,ur.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Xn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ar extends zr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ur.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new cd.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Xn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=cd.w0.EMPTY)}return e}refCount(){return Ml()(this)}}function er(n,e){return(0,ur.e)((t,r)=>{let i=null,a=0,c=!1;const f=()=>c&&!i&&r.complete();t.subscribe((0,Xn.x)(r,m=>{null==i||i.unsubscribe();let b=0;const I=a++;(0,za.Xf)(n(m,I)).subscribe(i=(0,Xn.x)(r,A=>r.next(e?e(m,A,I,b++):A),()=>{i=null,f()}))},()=>{c=!0,f()}))})}function _n(n){return n<=0?()=>Wr.E:(0,ur.e)((e,t)=>{let r=0;e.subscribe((0,Xn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ts(...n){const e=(0,Au.yG)(n);return(0,ur.e)((t,r)=>{(e?Ou(n,t,e):Ou(n,t)).subscribe(r)})}function Co(n,e,t,r,i){return(a,c)=>{let f=t,m=e,b=0;a.subscribe((0,Xn.x)(c,I=>{const A=b++;m=f?n(m,I,A):(f=!0,I),r&&c.next(m)},i&&(()=>{f&&c.next(m),c.complete()})))}}function Li(n,e){return(0,ur.e)(Co(n,e,arguments.length>=2,!0))}function Cn(n,e){return(0,ur.e)((t,r)=>{let i=0;t.subscribe((0,Xn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}function Kr(n){return(0,ur.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Xn.x)(t,void 0,void 0,c=>{a=(0,za.Xf)(n(c,Kr(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var br=N(5577);function Ui(n,e){return(0,es.m)(e)?(0,br.z)(n,e,1):(0,br.z)(n,1)}function ku(n){return n<=0?()=>Wr.E:(0,ur.e)((e,t)=>{let r=[];e.subscribe((0,Xn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Uh(n=kn){return(0,ur.e)((e,t)=>{let r=!1;e.subscribe((0,Xn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function kn(){return new Ga}function dd(n){return(0,ur.e)((e,t)=>{let r=!1;e.subscribe((0,Xn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Wa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Cn((i,a)=>n(i,a,r)):Ws.y,_n(1),t?dd(e):Uh(()=>new Ga))}var Yr=N(8505);class Io{constructor(e,t){this.id=e,this.url=t}}class Vh extends Io{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Vi extends Io{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Gp extends Io{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Nn extends Io{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Nu extends Io{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class So extends Io{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zp extends Io{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ol extends Io{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vr extends Io{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class li{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Pl{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ka{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ya{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qs{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ru{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fd{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Kt="primary";class pd{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Bi(n){return new pd(n)}const wr="ngNavigationCancelingError";function Do(n){const e=Error("NavigationCancelingError: "+n);return e[wr]=!0,e}function Fu(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],f=n[a];if(c.startsWith(":"))i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ji(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Bh(n[i],e[i]))return!1;return!0}function Bh(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function kl(n){return Array.prototype.concat.apply([],n)}function Uu(n){return n.length>0?n[n.length-1]:null}function vn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ci(n){return(0,u.CqO)(n)?n:(0,u.QGY)(n)?(0,En.D)(Promise.resolve(n)):it(n)}const gd={exact:function Nl(n,e,t){if(!U(n.segments,e.segments)||!ju(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Nl(n.children[r],e.children[r],t))return!1;return!0},subset:Bu},Qr={exact:function ns(n,e){return ji(n,e)},subset:function jh(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Bh(n[t],e[t]))},ignored:()=>!0};function ia(n,e,t){return gd[t.paths](n.root,e.root,t.matrixParams)&&Qr[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Bu(n,e,t){return Rl(n,e,e.segments,t)}function Rl(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!U(i,t)||e.hasChildren()||!ju(i,t,r))}if(n.segments.length===t.length){if(!U(n.segments,t)||!ju(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Bu(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(U(n.segments,i)&&ju(n.segments,i,r)&&n.children[Kt])&&Rl(n.children[Kt],e,a,r)}}function ju(n,e,t){return e.every((r,i)=>Qr[t](n[i].parameters,r.parameters))}class Ci{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bi(this.queryParams)),this._queryParamMap}toString(){return Ye.serialize(this)}}class T{constructor(e,t){this.segments=e,this.children=t,this.parent=null,vn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return mt(this)}}class S{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Bi(this.parameters)),this._parameterMap}toString(){return As(this)}}function U(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class ue{}class Pe{parse(e){const t=new Hh(e);return new Ci(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${xt(e.root,!0)}`,r=function sa(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ct(t)}=${ct(i)}`).join("&"):`${ct(t)}=${ct(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Er(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Ye=new Pe;function mt(n){return n.segments.map(e=>As(e)).join("/")}function xt(n,e){if(!n.hasChildren())return mt(n);if(e){const t=n.children[Kt]?xt(n.children[Kt],!1):"",r=[];return vn(n.children,(i,a)=>{a!==Kt&&r.push(`${a}:${xt(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function J(n,e){let t=[];return vn(n.children,(r,i)=>{i===Kt&&(t=t.concat(e(r,i)))}),vn(n.children,(r,i)=>{i!==Kt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Kt?[xt(n.children[Kt],!1)]:[`${i}:${xt(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Kt]?`${mt(n)}/${t[0]}`:`${mt(n)}/(${t.join("//")})`}}function Nt(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ct(n){return Nt(n).replace(/%3B/gi,";")}function Wn(n){return Nt(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xs(n){return decodeURIComponent(n)}function eo(n){return Xs(n.replace(/\+/g,"%20"))}function As(n){return`${Wn(n.path)}${function Qa(n){return Object.keys(n).map(e=>`;${Wn(e)}=${Wn(n[e])}`).join("")}(n.parameters)}`}const Ja=/^[^\/()?;=#]+/;function rs(n){const e=n.match(Ja);return e?e[0]:""}const Hi=/^[^=?&#]+/,vy=/^[^&#]+/;class Hh{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new T([],{}):new T([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Kt]=new T(e,t)),r}parseSegment(){const e=rs(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new S(Xs(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=rs(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=rs(this.remaining);i&&(r=i,this.capture(r))}e[Xs(t)]=Xs(r)}parseQueryParam(e){const t=function to(n){const e=n.match(Hi);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function B0(n){const e=n.match(vy);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=eo(t),a=eo(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=rs(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Kt);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[Kt]:new T([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Wp{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Fl(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Fl(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=$h(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return $h(e,this._root).map(t=>t.value)}}function Fl(n,e){if(n===e.value)return e;for(const t of e.children){const r=Fl(n,t);if(r)return r}return null}function $h(n,e){if(n===e.value)return[e];for(const t of e.children){const r=$h(n,t);if(r.length)return r.unshift(e),r}return[]}class Ao{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Hu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ll extends Wp{constructor(e,t){super(e),this.snapshot=t,_d(this,e)}toString(){return this.snapshot.toString()}}function md(n,e){const t=function $u(n,e){const c=new Xa([],{},{},"",{},Kt,e,null,n.root,-1,{});return new yd("",new Ao(c,[]))}(n,e),r=new Jn([new S("",{})]),i=new Jn({}),a=new Jn({}),c=new Jn({}),f=new Jn(""),m=new xo(r,i,c,f,a,Kt,e,t.root);return m.snapshot=t.root,new Ll(new Ao(m,[]),t)}class xo{constructor(e,t,r,i,a,c,f,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=f,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ft.U)(e=>Bi(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ft.U)(e=>Bi(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Kp(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Yp(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Xa{constructor(e,t,r,i,a,c,f,m,b,I,A){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=f,this.routeConfig=m,this._urlSegment=b,this._lastPathIndex=I,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Bi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bi(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class yd extends Wp{constructor(e,t){super(t),this.url=e,_d(this,t)}toString(){return qh(this._root)}}function _d(n,e){e.value._routerState=n,e.children.forEach(t=>_d(n,t))}function qh(n){const e=n.children.length>0?` { ${n.children.map(qh).join(", ")} } `:"";return`${n.value}${e}`}function vd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ji(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ji(e.params,t.params)||n.params.next(t.params),function Lu(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ji(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ji(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Ul(n,e){const t=ji(n.params,e.params)&&function M(n,e){return U(n,e)&&n.every((t,r)=>ji(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ul(n.parent,e.parent))}function Vl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function wy(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Vl(n,r,i);return Vl(n,r)})}(n,e,t);return new Ao(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(f=>Vl(n,f)),c}}const r=function Ey(n){return new xo(new Jn(n.url),new Jn(n.params),new Jn(n.queryParams),new Jn(n.fragment),new Jn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Vl(n,a));return new Ao(r,i)}}function xs(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ms(n){return"object"==typeof n&&null!=n&&n.outlets}function Zh(n,e,t,r,i){let a={};if(r&&vn(r,(f,m)=>{a[m]=Array.isArray(f)?f.map(b=>`${b}`):`${f}`}),n===e)return new Ci(t,a,i);const c=Qp(n,e,t);return new Ci(c,a,i)}function Qp(n,e,t){const r={};return vn(n.children,(i,a)=>{r[a]=i===e?t:Qp(i,e,t)}),new T(n.segments,r)}class Ty{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&xs(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Ms);if(i&&i!==Uu(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Xp{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function eg(n,e,t){if(n||(n=new T([],{})),0===n.segments.length&&n.hasChildren())return bd(n,e,t);const r=function Sy(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],f=t[r];if(Ms(f))break;const m=`${f}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&b&&"object"==typeof b&&void 0===b.outlets){if(!E(m,b,c))return a;r+=2}else{if(!E(m,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new T(n.segments.slice(0,r.pathIndex),{});return a.children[Kt]=new T(n.segments.slice(r.pathIndex),n.children),bd(a,0,i)}return r.match&&0===i.length?new T(n.segments,{}):r.match&&!n.hasChildren()?v(n,e,t):r.match?bd(n,0,i):v(n,e,t)}function bd(n,e,t){if(0===t.length)return new T(n.segments,{});{const r=function Iy(n){return Ms(n[0])?n[0].outlets:{[Kt]:n}}(t),i={};return vn(r,(a,c)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[c]=eg(n.children[c],e,a))}),vn(n.children,(a,c)=>{void 0===r[c]&&(i[c]=a)}),new T(n.segments,i)}}function v(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Ms(a)){const m=g(a.outlets);return new T(r,m)}if(0===i&&xs(t[0])){r.push(new S(n.segments[e].path,y(t[0]))),i++;continue}const c=Ms(a)?a.outlets[Kt]:`${a}`,f=i<t.length-1?t[i+1]:null;c&&f&&xs(f)?(r.push(new S(c,y(f))),i+=2):(r.push(new S(c,{})),i++)}return new T(r,{})}function g(n){const e={};return vn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=v(new T([],{}),0,t))}),e}function y(n){const e={};return vn(n,(t,r)=>e[r]=`${t}`),e}function E(n,e,t){return n==t.path&&ji(e,t.parameters)}class k{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),vd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Hu(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),vn(i,(a,c)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Hu(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Hu(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Hu(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Ru(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Ya(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(vd(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),vd(f.route.value),this.activateChildRoutes(e,null,c.children)}else{const f=function te(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),m=f?f.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=m,c.outlet&&c.outlet.activateWith(i,m),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Ae{constructor(e,t){this.routes=e,this.module=t}}function Xe(n){return"function"==typeof n}function Rt(n){return n instanceof Ci}const Bl=Symbol("INITIAL_VALUE");function Gu(){return er(n=>function To(...n){const e=(0,Au.yG)(n),t=(0,Au.jO)(n),{args:r,keys:i}=ud(n);if(0===r.length)return(0,En.D)([],e);const a=new zr.y(function Ys(n,e,t=Ws.y){return r=>{$a(e,()=>{const{length:i}=n,a=new Array(i);let c=i,f=i;for(let m=0;m<i;m++)$a(e,()=>{const b=(0,En.D)(n[m],e);let I=!1;b.subscribe((0,Xn.x)(r,A=>{a[m]=A,I||(I=!0,f--),f||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>Mu(i,c):Ws.y));return t?a.pipe(xu(t)):a}(n.map(e=>e.pipe(_n(1),ts(Bl)))).pipe(Li((e,t)=>{let r=!1;return t.reduce((i,a,c)=>i!==Bl?i:(a===Bl&&(r=!0),r||!1!==a&&c!==t.length-1&&!Rt(a)?i:a),e)},Bl),Cn(e=>e!==Bl),(0,ft.U)(e=>Rt(e)?e:!0===e),_n(1)))}class Wh{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Zu,this.attachRef=null}}class Zu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Wh,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let jl=(()=>{class n{constructor(t,r,i,a,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.name=a||Kt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,m=new tg(t,f,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,m),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Zu),u.Y36(u.s_b),u.Y36(u._Vd),u.$8M("name"),u.Y36(u.sBO))},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class tg{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===xo?this.route:e===Zu?this.childContexts:this.parent.get(e,t)}}let Kh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"router-outlet")},directives:[jl],encapsulation:2}),n})();function Hl(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];$l(r,Dy(e,r))}}function $l(n,e){n.children&&Hl(n.children,e)}function Dy(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function eu(n){const e=n.children&&n.children.map(eu),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Kt&&(t.component=Kh),t}function ss(n){return n.outlet||Kt}function Tr(n,e){const t=n.filter(r=>ss(r)===e);return t.push(...n.filter(r=>ss(r)!==e)),t}const j0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ng(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},j0):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const a=(e.matcher||Fu)(t,n,e);if(!a)return Object.assign({},j0);const c={};vn(a.posParams,(m,b)=>{c[b]=m.path});const f=a.consumed.length>0?Object.assign(Object.assign({},c),a.consumed[a.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:a.consumed,remainingSegments:t.slice(a.consumed.length),parameters:f,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function wd(n,e,t,r,i="corrected"){if(t.length>0&&function CC(n,e,t){return t.some(r=>rg(n,e,r)&&ss(r)!==Kt)}(n,t,r)){const c=new T(e,function TC(n,e,t,r){const i={};i[Kt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&ss(a)!==Kt){const c=new T([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[ss(a)]=c}return i}(n,e,r,new T(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function IC(n,e,t){return t.some(r=>rg(n,e,r))}(n,t,r)){const c=new T(n.segments,function H0(n,e,t,r,i,a){const c={};for(const f of r)if(rg(n,t,f)&&!i[ss(f)]){const m=new T([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===a?n.segments.length:e.length,c[ss(f)]=m}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const a=new T(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function rg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function $0(n,e,t,r){return!!(ss(n)===r||r!==Kt&&rg(e,t,n))&&("**"===n.path||ng(e,n,t).matched)}function SC(n,e,t){return 0===e.length&&!n.children[t]}class Ay{constructor(e){this.segmentGroup=e||null}}class Ed{constructor(e){this.urlTree=e}}function Br(n){return qa(new Ay(n))}function ig(n){return qa(new Ed(n))}class Yh{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(u.h0i)}apply(){const e=wd(this.urlTree.root,[],[],this.config).segmentGroup,t=new T(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Kt).pipe((0,ft.U)(a=>this.createUrlTree(My(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Kr(a=>{if(a instanceof Ed)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Ay?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Kt).pipe((0,ft.U)(i=>this.createUrlTree(My(i),e.queryParams,e.fragment))).pipe(Kr(i=>{throw i instanceof Ay?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new T([],{[Kt]:e}):e;return new Ci(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ft.U)(a=>new T([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,En.D)(i).pipe(Ui(a=>{const c=r.children[a],f=Tr(t,a);return this.expandSegmentGroup(e,f,c,a).pipe((0,ft.U)(m=>({segment:m,outlet:a})))}),Li((a,c)=>(a[c.outlet]=c.segment,a),{}),function hd(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Cn((i,a)=>n(i,a,r)):Ws.y,ku(1),t?dd(e):Uh(()=>new Ga))}())}expandSegment(e,t,r,i,a,c){return(0,En.D)(r).pipe(Ui(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,c).pipe(Kr(b=>{if(b instanceof Ay)return it(null);throw b}))),Wa(f=>!!f),Kr((f,m)=>{if(f instanceof Ga||"EmptyError"===f.name)return SC(t,i,a)?it(new T([],{})):Br(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,c,f){return $0(i,t,a,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,c):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c):Br(t):Br(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?ig(a):this.lineralizeSegments(r,a).pipe((0,br.z)(c=>{const f=new T(c,{});return this.expandSegment(e,f,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:f,consumedSegments:m,remainingSegments:b,positionalParamSegments:I}=ng(t,i,a);if(!f)return Br(t);const A=this.applyRedirectCommands(m,i.redirectTo,I);return i.redirectTo.startsWith("/")?ig(A):this.lineralizeSegments(i,A).pipe((0,br.z)(R=>this.expandSegment(e,t,r,R.concat(b),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?it(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,ft.U)(A=>(r._loadedConfig=A,new T(i,{})))):it(new T(i,{}));const{matched:c,consumedSegments:f,remainingSegments:m}=ng(t,r,i);return c?this.getChildConfig(e,r,i).pipe((0,br.z)(I=>{const A=I.module,R=I.routes,{segmentGroup:L,slicedSegments:j}=wd(t,f,m,R),oe=new T(L.segments,L.children);if(0===j.length&&oe.hasChildren())return this.expandChildren(A,R,oe).pipe((0,ft.U)(st=>new T(f,st)));if(0===R.length&&0===j.length)return it(new T(f,{}));const be=ss(r)===a;return this.expandSegment(A,oe,R,j,be?Kt:a,!0).pipe((0,ft.U)(rt=>new T(f.concat(rt.segments),rt.children)))})):Br(t)}getChildConfig(e,t,r){return t.children?it(new Ae(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?it(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,br.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,ft.U)(a=>(t._loadedConfig=a,a))):function G0(n){return qa(Do(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):it(new Ae([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?it(i.map(c=>{const f=e.get(c);let m;if(function Hn(n){return n&&Xe(n.canLoad)}(f))m=f.canLoad(t,r);else{if(!Xe(f))throw new Error("Invalid CanLoad guard");m=f(t,r)}return ci(m)})).pipe(Gu(),(0,Yr.b)(c=>{if(!Rt(c))return;const f=Do(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw f.url=c,f}),(0,ft.U)(c=>!0===c)):it(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return it(r);if(i.numberOfChildren>1||!i.children[Kt])return qa(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Kt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Ci(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return vn(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return vn(t.children,(f,m)=>{c[m]=this.createSegmentGroup(e,f,r,i)}),new T(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function My(n){const e={};for(const r of Object.keys(n.children)){const a=My(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function xy(n){if(1===n.numberOfChildren&&n.children[Kt]){const e=n.children[Kt];return new T(n.segments.concat(e.segments),e.children)}return n}(new T(n.segments,e))}class Oy{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class sg{constructor(e,t){this.component=e,this.route=t}}function Z0(n,e,t){const r=n._root;return Jh(r,e?e._root:null,t,[r.value])}function Qh(n,e,t){const r=function xC(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Jh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Hu(e);return n.children.forEach(c=>{(function Py(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const m=function MC(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!U(n.url,e.url);case"pathParamsOrQueryParamsChange":return!U(n.url,e.url)||!ji(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ul(n,e)||!ji(n.queryParams,e.queryParams);default:return!Ul(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new Oy(r)):(a.data=c.data,a._resolvedData=c._resolvedData),Jh(n,e,a.component?f?f.children:null:t,r,i),m&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new sg(f.outlet.component,c))}else c&&Xh(e,f,i),i.canActivateChecks.push(new Oy(r)),Jh(n,null,a.component?f?f.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),vn(a,(c,f)=>Xh(c,t.getContext(f),i)),i}function Xh(n,e,t){const r=Hu(n),i=n.value;vn(r,(a,c)=>{Xh(a,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new sg(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class LC{}function Ny(n){return new zr.y(e=>e.error(n))}class VC{constructor(e,t,r,i,a,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=c}recognize(){const e=wd(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Kt);if(null===t)return null;const r=new Xa([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Kt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ao(r,t),a=new yd(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=Kp(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const c=t.children[a],f=Tr(e,a),m=this.processSegmentGroup(f,c,a);if(null===m)return null;r.push(...m)}const i=Ry(r);return function BC(n){n.sort((e,t)=>e.value.outlet===Kt?-1:t.value.outlet===Kt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const c=this.processSegmentAgainstRoute(a,t,r,i);if(null!==c)return c}return SC(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!$0(e,t,r,i))return null;let a,c=[],f=[];if("**"===e.path){const L=r.length>0?Uu(r).parameters:{};a=new Xa(r,L,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Mo(e),ss(e),e.component,e,z0(t),ql(t)+r.length,qC(e))}else{const L=ng(t,e,r);if(!L.matched)return null;c=L.consumedSegments,f=L.remainingSegments,a=new Xa(c,L.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Mo(e),ss(e),e.component,e,z0(t),ql(t)+c.length,qC(e))}const m=function jC(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:I}=wd(t,c,f,m.filter(L=>void 0===L.redirectTo),this.relativeLinkResolution);if(0===I.length&&b.hasChildren()){const L=this.processChildren(m,b);return null===L?null:[new Ao(a,L)]}if(0===m.length&&0===I.length)return[new Ao(a,[])];const A=ss(e)===i,R=this.processSegment(m,b,I,A?Kt:i);return null===R?null:[new Ao(a,R)]}}function HC(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Ry(n){const e=[],t=new Set;for(const r of n){if(!HC(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Ry(r.children);e.push(new Ao(r.value,i))}return e.filter(r=>!t.has(r))}function z0(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ql(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Mo(n){return n.data||{}}function qC(n){return n.resolve||{}}function ag(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Ly(n){return er(e=>{const t=n(e);return t?(0,En.D)(t).pipe((0,ft.U)(()=>e)):it(e)})}class Y0 extends class ef{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const ug=new u.OlP("ROUTES");class lg{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,ft.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=a.create(e);return new Ae(kl(c.injector.get(ug,void 0,u.XFs.Self|u.XFs.Optional)).map(eu),c)}),Kr(a=>{throw t._loader$=void 0,a}));return t._loader$=new Ar(i,()=>new ar.x).pipe(Ml()),t._loader$}loadModuleFactory(e){return ci(e()).pipe((0,br.z)(t=>t instanceof u.YKP?it(t):(0,En.D)(this.compiler.compileModuleAsync(t))))}}class Q0{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function ZA(n){throw n}function Td(n,e,t){return e.parse("/")}function cg(n,e){return it(null)}const J0={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},GC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let lr=(()=>{class n{constructor(t,r,i,a,c,f,m){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ar.x,this.errorHandler=ZA,this.malformedUriErrorHandler=Td,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:cg,afterPreactivation:cg},this.urlHandlingStrategy=new Q0,this.routeReuseStrategy=new Y0,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(u.h0i),this.console=c.get(u.c2e);const A=c.get(u.R0b);this.isNgZoneEnabled=A instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function Vu(){return new Ci(new T([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new lg(c,f,R=>this.triggerEvent(new li(R)),R=>this.triggerEvent(new Pl(R))),this.routerState=md(this.currentUrlTree,this.rootComponentType),this.transitions=new Jn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Cn(i=>0!==i.id),(0,ft.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),er(i=>{let a=!1,c=!1;return it(i).pipe((0,Yr.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),er(f=>{const m=this.browserUrlTree.toString(),b=!this.navigated||f.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return X0(f.source)&&(this.browserUrlTree=f.extractedUrl),it(f).pipe(er(A=>{const R=this.transitions.getValue();return r.next(new Vh(A.id,this.serializeUrl(A.extractedUrl),A.source,A.restoredState)),R!==this.transitions.getValue()?Wr.E:Promise.resolve(A)}),function DC(n,e,t,r){return er(i=>function Ii(n,e,t,r,i){return new Yh(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,ft.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Yr.b)(A=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:A.urlAfterRedirects})}),function qA(n,e,t,r,i){return(0,br.z)(a=>function UC(n,e,t,r,i="emptyOnly",a="legacy"){try{const c=new VC(n,e,t,r,i,a).recognize();return null===c?Ny(new LC):it(c)}catch(c){return Ny(c)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,ft.U)(c=>Object.assign(Object.assign({},a),{targetSnapshot:c}))))}(this.rootComponentType,this.config,A=>this.serializeUrl(A),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Yr.b)(A=>{if("eager"===this.urlUpdateStrategy){if(!A.extras.skipLocationChange){const L=this.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);this.setBrowserUrl(L,A)}this.browserUrlTree=A.urlAfterRedirects}const R=new Nu(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);r.next(R)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:R,extractedUrl:L,source:j,restoredState:oe,extras:be}=f,$e=new Vh(R,this.serializeUrl(L),j,oe);r.next($e);const rt=md(L,this.rootComponentType).snapshot;return it(Object.assign(Object.assign({},f),{targetSnapshot:rt,urlAfterRedirects:L,extras:Object.assign(Object.assign({},be),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,f.resolve(null),Wr.E}),Ly(f=>{const{targetSnapshot:m,id:b,extractedUrl:I,rawUrl:A,extras:{skipLocationChange:R,replaceUrl:L}}=f;return this.hooks.beforePreactivation(m,{navigationId:b,appliedUrlTree:I,rawUrlTree:A,skipLocationChange:!!R,replaceUrl:!!L})}),(0,Yr.b)(f=>{const m=new So(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(m)}),(0,ft.U)(f=>Object.assign(Object.assign({},f),{guards:Z0(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function ky(n,e){return(0,br.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?it(Object.assign(Object.assign({},t),{guardsResult:!0})):function OC(n,e,t,r){return(0,En.D)(n).pipe((0,br.z)(i=>function FC(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?it(a.map(f=>{const m=Qh(f,e,i);let b;if(function qu(n){return n&&Xe(n.canDeactivate)}(m))b=ci(m.canDeactivate(n,e,t,r));else{if(!Xe(m))throw new Error("Invalid CanDeactivate guard");b=ci(m(n,e,t,r))}return b.pipe(Wa())})).pipe(Gu()):it(!0)}(i.component,i.route,t,e,r)),Wa(i=>!0!==i,!0))}(c,r,i,n).pipe((0,br.z)(f=>f&&function Et(n){return"boolean"==typeof n}(f)?function PC(n,e,t,r){return(0,En.D)(e).pipe(Ui(i=>Ou(function kC(n,e){return null!==n&&e&&e(new Ka(n)),it(!0)}(i.route.parent,r),function og(n,e){return null!==n&&e&&e(new Qs(n)),it(!0)}(i.route,r),function RC(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function AC(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Pu(()=>it(c.guards.map(m=>{const b=Qh(m,c.node,t);let I;if(function no(n){return n&&Xe(n.canActivateChild)}(b))I=ci(b.canActivateChild(r,n));else{if(!Xe(b))throw new Error("Invalid CanActivateChild guard");I=ci(b(r,n))}return I.pipe(Wa())})).pipe(Gu())));return it(a).pipe(Gu())}(n,i.path,t),function NC(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return it(!0);const i=r.map(a=>Pu(()=>{const c=Qh(a,e,t);let f;if(function is(n){return n&&Xe(n.canActivate)}(c))f=ci(c.canActivate(e,n));else{if(!Xe(c))throw new Error("Invalid CanActivate guard");f=ci(c(e,n))}return f.pipe(Wa())}));return it(i).pipe(Gu())}(n,i.route,t))),Wa(i=>!0!==i,!0))}(r,a,n,e):it(f)),(0,ft.U)(f=>Object.assign(Object.assign({},t),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,Yr.b)(f=>{if(Rt(f.guardsResult)){const b=Do(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw b.url=f.guardsResult,b}const m=new Zp(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(m)}),Cn(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),Ly(f=>{if(f.guards.canActivateChecks.length)return it(f).pipe((0,Yr.b)(m=>{const b=new Ol(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(b)}),er(m=>{let b=!1;return it(m).pipe(function W0(n,e){return(0,br.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return it(t);let a=0;return(0,En.D)(i).pipe(Ui(c=>function GA(n,e,t,r){return function oa(n,e,t,r){const i=ag(n);if(0===i.length)return it({});const a={};return(0,En.D)(i).pipe((0,br.z)(c=>function Fy(n,e,t,r){const i=Qh(n,e,r);return ci(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,Yr.b)(f=>{a[c]=f}))),ku(1),(0,br.z)(()=>ag(a).length===i.length?it(a):Wr.E))}(n._resolve,n,e,r).pipe((0,ft.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),Kp(n,t).resolve),null)))}(c.route,r,n,e)),(0,Yr.b)(()=>a++),ku(1),(0,br.z)(c=>a===i.length?it(t):Wr.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Yr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(m),this.cancelNavigationTransition(m,"At least one route resolver didn't emit any value."))}}))}),(0,Yr.b)(m=>{const b=new Vr(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(b)}))}),Ly(f=>{const{targetSnapshot:m,id:b,extractedUrl:I,rawUrl:A,extras:{skipLocationChange:R,replaceUrl:L}}=f;return this.hooks.afterPreactivation(m,{navigationId:b,appliedUrlTree:I,rawUrlTree:A,skipLocationChange:!!R,replaceUrl:!!L})}),(0,ft.U)(f=>{const m=function by(n,e,t){const r=Vl(n,e._root,t?t._root:void 0);return new Ll(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:m})}),(0,Yr.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,ft.U)(r=>(new k(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,Yr.b)({next(){a=!0},complete(){a=!0}}),function _y(n){return(0,ur.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var f;a||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===i.id&&(this.currentNavigation=null)}),Kr(f=>{if(c=!0,function Js(n){return n&&n[wr]}(f)){const m=Rt(f.url);m||(this.navigated=!0,this.restoreHistory(i,!0));const b=new Gp(i.id,this.serializeUrl(i.extractedUrl),f.message);r.next(b),m?setTimeout(()=>{const I=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),A={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||X0(i.source)};this.scheduleNavigation(I,"imperative",null,A,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new Nn(i.id,this.serializeUrl(i.extractedUrl),f);r.next(m);try{i.resolve(this.errorHandler(f))}catch(b){i.reject(b)}}return Wr.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const m=Object.assign({},c);delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(a.state=m)}const f=this.parseUrl(t.url);this.scheduleNavigation(f,r,c,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Hl(t),this.config=t.map(eu),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:f,preserveFragment:m}=r,b=i||this.routerState.root,I=m?this.currentUrlTree.fragment:c;let A=null;switch(f){case"merge":A=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=a||null}return null!==A&&(A=this.removeEmptyProps(A)),function Gh(n,e,t,r,i){if(0===t.length)return Zh(e.root,e.root,e.root,r,i);const a=function Jp(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Ty(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return vn(a.outlets,(m,b)=>{f[b]="string"==typeof m?m.split("/"):m}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((f,m)=>{0==m&&"."===f||(0==m&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new Ty(t,e,r)}(t);if(a.toRoot())return Zh(e.root,e.root,new T([],{}),r,i);const c=function Cy(n,e,t){if(n.isAbsolute)return new Xp(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new Xp(a,a===e.root,0)}const r=xs(n.commands[0])?0:1;return function zh(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Xp(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),f=c.processChildren?bd(c.segmentGroup,c.index,a.commands):eg(c.segmentGroup,c.index,a.commands);return Zh(e.root,c.segmentGroup,f,r,i)}(b,this.currentUrlTree,t,A,null!=I?I:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Rt(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function ZC(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},J0):!1===r?Object.assign({},GC):r,Rt(t))return ia(this.currentUrlTree,t,i);const a=this.parseUrl(t);return ia(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Vi(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,c){var f,m;if(this.disposed)return Promise.resolve(!1);let b,I,A;c?(b=c.resolve,I=c.reject,A=c.promise):A=new Promise((j,oe)=>{b=j,I=oe});const R=++this.navigationId;let L;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),L=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(m=this.browserPageId)&&void 0!==m?m:0)+1):L=0,this.setTransition({id:R,targetPageId:L,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:b,reject:I,promise:A,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),A.catch(j=>Promise.reject(j))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Gp(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function X0(n){return"imperative"!==n}let Cd=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=c,this.commands=null,this.onChanges=new ar.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Id(this.skipLocationChange),replaceUrl:Id(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Id(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(lr),u.Y36(xo),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&u.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),n})();function Id(n){return""===n||!!n}class dg{}class hg{preload(e,t){return it(null)}}let nb=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new lg(i,r,m=>t.triggerEvent(new li(m)),m=>t.triggerEvent(new Pl(m)))}setUpPreloading(){this.subscription=this.router.events.pipe(Cn(t=>t instanceof Vi),Ui(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(u.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const c=a._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,En.D)(i).pipe((0,Ds.J)(),(0,ft.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?it(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,br.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(lr),u.LFG(u.Sil),u.LFG(u.zs3),u.LFG(dg))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),By=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Vh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Vi&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof fd&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new fd(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const zu=new u.OlP("ROUTER_CONFIGURATION"),Wu=new u.OlP("ROUTER_FORROOT_GUARD"),rb=[Me,{provide:ue,useClass:Pe},{provide:lr,useFactory:function ob(n,e,t,r,i,a,c={},f,m){const b=new lr(null,n,e,t,r,i,kl(a));return f&&(b.urlHandlingStrategy=f),m&&(b.routeReuseStrategy=m),function $y(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,b),c.enableTracing&&b.events.subscribe(I=>{var A,R;null===(A=console.group)||void 0===A||A.call(console,`Router Event: ${I.constructor.name}`),console.log(I.toString()),console.log(I),null===(R=console.groupEnd)||void 0===R||R.call(console)}),b},deps:[ue,Zu,Me,u.zs3,u.Sil,ug,zu,[class Uy{},new u.FiY],[class K0{},new u.FiY]]},Zu,{provide:xo,useFactory:function ab(n){return n.routerState.root},deps:[lr]},nb,hg,class tb{preload(e,t){return t().pipe(Kr(()=>it(null)))}},{provide:zu,useValue:{enableTracing:!1}}];function ib(){return new u.PXZ("Router",lr)}let jy=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[rb,Hy(t),{provide:Wu,useFactory:sb,deps:[[lr,new u.FiY,new u.tp0]]},{provide:zu,useValue:r||{}},{provide:ge,useFactory:KC,deps:[le,[new u.tBr(ze),new u.FiY],zu]},{provide:By,useFactory:fg,deps:[lr,wu,zu]},{provide:dg,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:hg},{provide:u.PXZ,multi:!0,useFactory:ib},[Sd,{provide:u.ip1,multi:!0,useFactory:pg,deps:[Sd]},{provide:gg,useFactory:ub,deps:[Sd]},{provide:u.tb,multi:!0,useExisting:gg}]]}}static forChild(t){return{ngModule:n,providers:[Hy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Wu,8),u.LFG(lr,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function fg(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new By(n,e,t)}function KC(n,e,t={}){return t.useHash?new Re(n,e):new Ze(n,e)}function sb(n){return"guarded"}function Hy(n){return[{provide:u.deG,multi:!0,useValue:n},{provide:ug,multi:!0,useValue:n}]}let Sd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ar.x}appInitializer(){return this.injector.get(Z,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(f=>r=f),a=this.injector.get(lr),c=this.injector.get(zu);return"disabled"===c.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?it(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(zu),i=this.injector.get(nb),a=this.injector.get(By),c=this.injector.get(lr),f=this.injector.get(u.z2F);t===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),a.init(),c.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function pg(n){return n.appInitializer.bind(n)}function ub(n){return n.bootstrapListener.bind(n)}const gg=new u.OlP("Router Initializer");class Dd{}const aa="*";function ro(n,e){return{type:7,name:n,definitions:e,options:{}}}function tr(n,e=null){return{type:4,styles:e,timings:n}}function mg(n,e=null){return{type:2,steps:n,options:e}}function Xt(n){return{type:6,styles:n,offset:null}}function nr(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function qy(n){Promise.resolve(null).then(n)}class tf{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){qy(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class db{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const a=this.players.length;0==a?qy(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==a&&this._onFinish()}),c.onDestroy(()=>{++r==a&&this._onDestroy()}),c.onStart(()=>{++i==a&&this._onStart()})}),this.totalTime=this.players.reduce((c,f)=>Math.max(c,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class hb{}class Zy{}class os{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(c):this.headers.set(a,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof os?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new os;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof os?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let c=this.headers.get(t);if(!c)return;c=c.filter(f=>-1===a.indexOf(f)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class eI{encodeKey(e){return zy(e)}encodeValue(e){return zy(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Bt=/%(\d[a-f0-9])/gi,fb={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function zy(n){return encodeURIComponent(n).replace(Bt,(e,t)=>{var r;return null!==(r=fb[t])&&void 0!==r?r:e})}function Wy(n){return`${n}`}class io{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new eI,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function tI(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[c,f]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],m=t.get(c)||[];m.push(f),t.set(c,m)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new io({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Wy(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Wy(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class pb{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function yg(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function ca(n){return"undefined"!=typeof Blob&&n instanceof Blob}function _g(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Gl{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function nI(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new os),this.context||(this.context=new pb),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+c}}else this.params=new io,this.urlWithParams=t}serializeBody(){return null===this.body?null:yg(this.body)||ca(this.body)||_g(this.body)||function gb(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof io?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||_g(this.body)?null:ca(this.body)?this.body.type||null:yg(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof io?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,a=e.responseType||this.responseType,c=void 0!==e.body?e.body:this.body,f=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,m=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let b=e.headers||this.headers,I=e.params||this.params;const A=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(b=Object.keys(e.setHeaders).reduce((R,L)=>R.set(L,e.setHeaders[L]),b)),e.setParams&&(I=Object.keys(e.setParams).reduce((R,L)=>R.set(L,e.setParams[L]),I)),new Gl(r,i,c,{params:I,headers:b,context:A,reportProgress:m,responseType:a,withCredentials:f})}}var jr=(()=>((jr=jr||{})[jr.Sent=0]="Sent",jr[jr.UploadProgress=1]="UploadProgress",jr[jr.ResponseHeader=2]="ResponseHeader",jr[jr.DownloadProgress=3]="DownloadProgress",jr[jr.Response=4]="Response",jr[jr.User=5]="User",jr))();class vg{constructor(e,t=200,r="OK"){this.headers=e.headers||new os,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class mb extends vg{constructor(e={}){super(e),this.type=jr.ResponseHeader}clone(e={}){return new mb({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Zl extends vg{constructor(e={}){super(e),this.type=jr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Zl({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class nf extends vg{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function rf(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let zl=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof Gl)a=t;else{let m,b;m=i.headers instanceof os?i.headers:new os(i.headers),i.params&&(b=i.params instanceof io?i.params:new io({fromObject:i.params})),a=new Gl(t,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:b,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=it(a).pipe(Ui(m=>this.handler.handle(m)));if(t instanceof Gl||"events"===i.observe)return c;const f=c.pipe(Cn(m=>m instanceof Zl));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return f.pipe((0,ft.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return f.pipe((0,ft.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return f.pipe((0,ft.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return f.pipe((0,ft.U)(m=>m.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new io).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,rf(i,r))}post(t,r,i={}){return this.request("POST",t,rf(i,r))}put(t,r,i={}){return this.request("PUT",t,rf(i,r))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(hb))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class bg{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const rI=new u.OlP("HTTP_INTERCEPTORS");let iI=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const yb=/^\)\]\}',?\n/;let wg=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new zr.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((L,j)=>i.setRequestHeader(L,j.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const L=t.detectContentTypeHeader();null!==L&&i.setRequestHeader("Content-Type",L)}if(t.responseType){const L=t.responseType.toLowerCase();i.responseType="json"!==L?L:"text"}const a=t.serializeBody();let c=null;const f=()=>{if(null!==c)return c;const L=i.statusText||"OK",j=new os(i.getAllResponseHeaders()),oe=function aI(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return c=new mb({headers:j,status:i.status,statusText:L,url:oe}),c},m=()=>{let{headers:L,status:j,statusText:oe,url:be}=f(),$e=null;204!==j&&($e=void 0===i.response?i.responseText:i.response),0===j&&(j=$e?200:0);let rt=j>=200&&j<300;if("json"===t.responseType&&"string"==typeof $e){const st=$e;$e=$e.replace(yb,"");try{$e=""!==$e?JSON.parse($e):null}catch(Qe){$e=st,rt&&(rt=!1,$e={error:Qe,text:$e})}}rt?(r.next(new Zl({body:$e,headers:L,status:j,statusText:oe,url:be||void 0})),r.complete()):r.error(new nf({error:$e,headers:L,status:j,statusText:oe,url:be||void 0}))},b=L=>{const{url:j}=f(),oe=new nf({error:L,status:i.status||0,statusText:i.statusText||"Unknown Error",url:j||void 0});r.error(oe)};let I=!1;const A=L=>{I||(r.next(f()),I=!0);let j={type:jr.DownloadProgress,loaded:L.loaded};L.lengthComputable&&(j.total=L.total),"text"===t.responseType&&!!i.responseText&&(j.partialText=i.responseText),r.next(j)},R=L=>{let j={type:jr.UploadProgress,loaded:L.loaded};L.lengthComputable&&(j.total=L.total),r.next(j)};return i.addEventListener("load",m),i.addEventListener("error",b),i.addEventListener("timeout",b),i.addEventListener("abort",b),t.reportProgress&&(i.addEventListener("progress",A),null!==a&&i.upload&&i.upload.addEventListener("progress",R)),i.send(a),r.next({type:jr.Sent}),()=>{i.removeEventListener("error",b),i.removeEventListener("abort",b),i.removeEventListener("load",m),i.removeEventListener("timeout",b),t.reportProgress&&(i.removeEventListener("progress",A),null!==a&&i.upload&&i.upload.removeEventListener("progress",R)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(yn))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const _b=new u.OlP("XSRF_COOKIE_NAME"),vb=new u.OlP("XSRF_HEADER_NAME");class uI{}let ex=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=po(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(me),u.LFG(u.Lbi),u.LFG(_b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),bb=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(uI),u.LFG(vb))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),tx=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(rI,[]);this.chain=r.reduceRight((i,a)=>new bg(i,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Zy),u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),nx=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:bb,useClass:iI}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:_b,useValue:t.cookieName}:[],t.headerName?{provide:vb,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[bb,{provide:rI,useExisting:bb,multi:!0},{provide:uI,useClass:ex},{provide:_b,useValue:"XSRF-TOKEN"},{provide:vb,useValue:"X-XSRF-TOKEN"}]}),n})(),lI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[zl,{provide:hb,useClass:tx},wg,{provide:Zy,useExisting:wg}],imports:[[nx.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();function Eb(...n){const e=(0,Au.jO)(n),{args:t,keys:r}=ud(n),i=new zr.y(a=>{const{length:c}=t;if(!c)return void a.complete();const f=new Array(c);let m=c,b=c;for(let I=0;I<c;I++){let A=!1;(0,za.Xf)(t[I]).subscribe((0,Xn.x)(a,R=>{A||(A=!0,b--),f[I]=R},()=>m--,void 0,()=>{(!m||!A)&&(b||a.next(r?Mu(r,f):f),a.complete())}))}});return e?i.pipe(xu(e)):i}let Ky=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),n})(),tu=(()=>{class n extends Ky{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const Oo=new u.OlP("NgValueAccessor"),Yy={provide:Oo,useExisting:(0,u.Gpc)(()=>Qy),multi:!0};let Qy=(()=>{class n extends tu{writeValue(t){this.setProperty("checked",t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(a){return r.onChange(a.target.checked)})("blur",function(){return r.onTouched()})},features:[u._Bn([Yy]),u.qOj]}),n})();const Ku={provide:Oo,useExisting:(0,u.Gpc)(()=>Po),multi:!0},cI=new u.OlP("CompositionEventMode");let Po=(()=>{class n extends Ky{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Tb(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(cI,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[u._Bn([Ku]),u.qOj]}),n})();function Yu(n){return null==n||0===n.length}function Jy(n){return null!=n&&"number"==typeof n.length}const Si=new u.OlP("NgValidators"),Qu=new u.OlP("NgAsyncValidators"),sf=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class $n{static min(e){return Eg(e)}static max(e){return Kl(e)}static required(e){return function Ad(n){return Yu(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function Yl(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Cb(n){return Yu(n.value)||sf.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Xy(n){return e=>Yu(e.value)||!Jy(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function e_(n){return e=>Jy(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Tg(n){if(!n)return xd;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Yu(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return i_(e)}static composeAsync(e){return o_(e)}}function Eg(n){return e=>{if(Yu(e.value)||Yu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function Kl(n){return e=>{if(Yu(e.value)||Yu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function xd(n){return null}function t_(n){return null!=n}function af(n){const e=(0,u.QGY)(n)?(0,En.D)(n):n;return(0,u.CqO)(e),e}function Ib(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function n_(n,e){return e.map(t=>t(n))}function r_(n){return n.map(e=>function rx(n){return!n.validate}(e)?e:t=>e.validate(t))}function i_(n){if(!n)return null;const e=n.filter(t_);return 0==e.length?null:function(t){return Ib(n_(t,e))}}function s_(n){return null!=n?i_(r_(n)):null}function o_(n){if(!n)return null;const e=n.filter(t_);return 0==e.length?null:function(t){return Eb(n_(t,e).map(af)).pipe((0,ft.U)(Ib))}}function a_(n){return null!=n?o_(r_(n)):null}function Sb(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function as(n){return n._rawValidators}function Db(n){return n._rawAsyncValidators}function u_(n){return n?Array.isArray(n)?n:[n]:[]}function l_(n,e){return Array.isArray(n)?n.includes(e):n===e}function dI(n,e){const t=u_(e);return u_(n).forEach(i=>{l_(t,i)||t.push(i)}),t}function c_(n,e){return u_(e).filter(t=>!l_(n,t))}class hI{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=s_(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=a_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ju extends hI{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class di extends hI{get formDirective(){return null}get path(){return null}}class d_{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let Xu=(()=>{class n extends d_{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ju,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[u.qOj]}),n})(),Ql=(()=>{class n extends d_{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(di,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[u.qOj]}),n})();function Md(n,e){return[...e.path,n]}function lf(n,e){m_(n,e),e.valueAccessor.writeValue(n.value),function y_(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&_I(n,e)})}(n,e),function cx(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Mb(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&_I(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function g_(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Cg(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Od(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Jl(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function m_(n,e){const t=as(n);null!==e.validator?n.setValidators(Sb(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Db(n);null!==e.asyncValidator?n.setAsyncValidators(Sb(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Jl(e._rawValidators,i),Jl(e._rawAsyncValidators,i)}function Od(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=as(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(c=>c!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=Db(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(c=>c!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return Jl(e._rawValidators,r),Jl(e._rawAsyncValidators,r),t}function _I(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Sg(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function Pd(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===Po?t=a:function Pb(n){return Object.getPrototypeOf(n.constructor)===tu}(a)?r=a:i=a}),i||r||t||null}function v_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Xl="VALID",cf="INVALID",el="PENDING",ru="DISABLED";function df(n){return(Ag(n)?n.validators:n)||null}function b_(n){return Array.isArray(n)?s_(n):n||null}function Dg(n,e){return(Ag(e)?e.asyncValidators:n)||null}function w_(n){return Array.isArray(n)?a_(n):n||null}function Ag(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const xg=n=>n instanceof xr,E_=n=>n instanceof us;function T_(n){return xg(n)?n.value:n.getRawValue()}function ec(n,e){const t=E_(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new u.vHH(1e3,"");if(!r[e])throw new u.vHH(1001,"")}function C_(n,e){E_(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new u.vHH(1002,"")})}class I_{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=b_(this._rawValidators),this._composedAsyncValidatorFn=w_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Xl}get invalid(){return this.status===cf}get pending(){return this.status==el}get disabled(){return this.status===ru}get enabled(){return this.status!==ru}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=b_(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=w_(e)}addValidators(e){this.setValidators(dI(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(dI(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(c_(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(c_(e,this._rawAsyncValidators))}hasValidator(e){return l_(this._rawValidators,e)}hasAsyncValidator(e){return l_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=el,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ru,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Xl,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xl||this.status===el)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ru:Xl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=el,this._hasOwnPendingAsyncValidator=!0;const t=af(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function bI(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=E_(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof EI)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?ru:this.errors?cf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(el)?el:this._anyControlsHaveStatus(cf)?cf:Xl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ag(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class xr extends I_{constructor(e=null,t,r){super(df(t),Dg(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ag(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){v_(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){v_(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class us extends I_{constructor(e,t,r){super(df(t),Dg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){C_(this,e),Object.keys(e).forEach(r=>{ec(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=T_(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class EI extends I_{constructor(e,t,r){super(df(t),Dg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){C_(this,e),e.forEach((r,i)=>{ec(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>T_(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const DI={provide:Ju,useExisting:(0,u.Gpc)(()=>ff)},Lb=(()=>Promise.resolve(null))();let ff=(()=>{class n extends Ju{constructor(t,r,i,a,c){super(),this._changeDetectorRef=c,this.control=new xr,this._registered=!1,this.update=new u.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Pd(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Sg(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){lf(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Lb.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;Lb.then(()=>{var a;i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),null===(a=this._changeDetectorRef)||void 0===a||a.markForCheck()})}_getPath(t){return this._parent?Md(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(di,9),u.Y36(Si,10),u.Y36(Qu,10),u.Y36(Oo,10),u.Y36(u.sBO,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([DI]),u.qOj,u.TTD]}),n})(),tc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const px={provide:Oo,useExisting:(0,u.Gpc)(()=>Mg),multi:!0};let Mg=(()=>{class n extends tu{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},features:[u._Bn([px]),u.qOj]}),n})();const AI={provide:Oo,useExisting:(0,u.Gpc)(()=>pf),multi:!0};let xI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),mx=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t)return void this._accessors.splice(r,1)}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return!!t[0].control&&t[0]._parent===r._control._parent&&t[1].name===r.name}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:xI}),n})(),pf=(()=>{class n extends tu{constructor(t,r,i,a){super(t,r),this._registry=i,this._injector=a,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(Ju),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(mx),u.Y36(u.zs3))},n.\u0275dir=u.lG2({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[u._Bn([AI]),u.qOj]}),n})();const MI={provide:Oo,useExisting:(0,u.Gpc)(()=>kd),multi:!0};let kd=(()=>{class n extends tu{writeValue(t){this.setProperty("value",parseFloat(t))}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(a){return r.onChange(a.target.value)})("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},features:[u._Bn([MI]),u.qOj]}),n})();const Og=new u.OlP("NgModelWithFormControlWarning"),_x={provide:di,useExisting:(0,u.Gpc)(()=>nc)};let nc=(()=>{class n extends di{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Od(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return lf(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Cg(t.control||null,t,!1),v_(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function da(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Cg(r||null,t),xg(i)&&(lf(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Ig(n,e){m_(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function dx(n,e){return Od(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){m_(this.form,this),this._oldForm&&Od(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Si,10),u.Y36(Qu,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([_x]),u.qOj,u.TTD]}),n})();const Bb={provide:Ju,useExisting:(0,u.Gpc)(()=>iu)};let iu=(()=>{class n extends Ju{constructor(t,r,i,a,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new u.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Pd(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),Sg(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Md(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(u.Y36(di,13),u.Y36(Si,10),u.Y36(Qu,10),u.Y36(Oo,10),u.Y36(Og,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[u._Bn([Bb]),u.qOj,u.TTD]}),n})();const PI={provide:Oo,useExisting:(0,u.Gpc)(()=>Ng),multi:!0};function kg(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Ng=(()=>{class n extends tu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=kg(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function kI(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([PI]),u.qOj]}),n})(),jb=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(kg(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(Ng,9))},n.\u0275dir=u.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const NI={provide:Oo,useExisting:(0,u.Gpc)(()=>tl),multi:!0};function Hb(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let tl=(()=>{class n extends tu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(a=>this._getOptionId(a));r=(a,c)=>{a._setSelected(i.indexOf(c.toString())>-1)}}else r=(i,a)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],a=r.selectedOptions;if(void 0!==a){const c=a;for(let f=0;f<c.length;f++){const b=this._getOptionValue(c[f].value);i.push(b)}}else{const c=r.options;for(let f=0;f<c.length;f++){const m=c[f];if(m.selected){const b=this._getOptionValue(m.value);i.push(b)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function RI(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([NI]),u.qOj]}),n})(),$b=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Hb(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Hb(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(tl,9))},n.\u0275dir=u.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();function qb(n){return"number"==typeof n?n:parseFloat(n)}let su=(()=>{class n{constructor(){this._validator=xd}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):xd,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,features:[u.TTD]}),n})();const ha={provide:Si,useExisting:(0,u.Gpc)(()=>rc),multi:!0};let rc=(()=>{class n extends su{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>qb(t),this.createValidator=t=>Kl(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("max",r._enabled?r.max:null)},inputs:{max:"max"},features:[u._Bn([ha]),u.qOj]}),n})();const Di={provide:Si,useExisting:(0,u.Gpc)(()=>ou),multi:!0};let ou=(()=>{class n extends su{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>qb(t),this.createValidator=t=>Eg(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[u._Bn([Di]),u.qOj]}),n})(),x_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[xI]]}),n})(),Gb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[x_]}),n})(),M_=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Og,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[x_]}),n})();const Vd_spotify_id="8e391a0cb04d484e8963bf09bf48deb0",Vd_spotify_secret="1c4adc3172404f15b3e3ad25d1179fd3",Vd_firebase={apiKey:"AIzaSyB_sHPYM8O1AdmJ5ZOH3vbVbf_4Ma6va_U",authDomain:"tab-player.firebaseapp.com",projectId:"tab-player",storageBucket:"tab-player.appspot.com",messagingSenderId:"618067583645",appId:"1:618067583645:web:59377c1dae0d3e3b41aa74",measurementId:"G-47SYCQTKWH"};var we=N(5861),fa=N(7143),Gt=N(2090),ao=N(9681),nl=N(1877),Bd=N(4859),Zb=N(6451),Fg=N(5363),zb=N(6063);class $I extends ar.x{constructor(e=1/0,t=1/0,r=zb.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let f=0;for(let m=1;m<r.length&&r[m]<=c;m+=2)f=m;f&&r.splice(0,f+1)}}}var qI=N(3099);function GI(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,qI.B)({connector:()=>new $I(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Wb(n,e){return(0,es.m)(e)?er(()=>n,e):er(()=>n)}var mf=N(9468),Rn=N(5813),$i=N(2011);N(5867);const Jb=new Map,YI={activated:!1,tokenObservers:[]},Xb={initialized:!1,enabled:!1};function Jr(n){return Jb.get(n)||YI}function uo(n,e){Jb.set(n,e)}function _f(){return Xb}class ew{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,we.Z)(function*(){t.stop();try{t.pending=new Gt.BH,yield function N_(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Gt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const qi=new Gt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function wf(n){if(!Jr(n).activated)throw qi.create("use-before-activation",{appName:n.name})}function L_(n,e){return Tf.apply(this,arguments)}function Tf(){return(Tf=(0,we.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const L=yield c.getHeartbeatsHeader();L&&(a["X-Firebase-Client"]=L)}const f={method:"POST",body:JSON.stringify(e),headers:a};let m,b;try{m=yield fetch(n,f)}catch(L){throw qi.create("fetch-network-error",{originalErrorMessage:null===(r=L)||void 0===r?void 0:r.message})}if(200!==m.status)throw qi.create("fetch-status-error",{httpStatus:m.status});try{b=yield m.json()}catch(L){throw qi.create("fetch-parse-error",{originalErrorMessage:null===(i=L)||void 0===i?void 0:i.message})}const I=b.ttl.match(/^([\d.]+)(s)$/);if(!I||!I[2]||isNaN(Number(I[1])))throw qi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${b.ttl}`});const A=1e3*Number(I[1]),R=Date.now();return{token:b.token,expireTimeMillis:R+A,issuedAtTimeMillis:R}})).apply(this,arguments)}function nw(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const jd="firebase-app-check-store";let Cf=null;function iw(){return Cf||(Cf=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(qi.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(jd,{keyPath:"compositeKey"})}}catch(r){e(qi.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Cf)}function j_(){return(j_=(0,we.Z)(function*(n,e){const r=(yield iw()).transaction(jd,"readwrite"),a=r.objectStore(jd).put({compositeKey:n,value:e});return new Promise((c,f)=>{a.onsuccess=m=>{c()},r.onerror=m=>{var b;f(qi.create("storage-set",{originalErrorMessage:null===(b=m.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const Hd=new nl.Yd("@firebase/app-check");function H_(n,e){return(0,Gt.hl)()?function ow(n,e){return function uw(n,e){return j_.apply(this,arguments)}(function Vg(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Hd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function $_(){return _f().enabled}function q_(){return hw.apply(this,arguments)}function hw(){return(hw=(0,we.Z)(function*(){const n=_f();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const eS={error:"UNKNOWN_ERROR"};function fw(n){return Gt.US.encodeString(JSON.stringify(n),!1)}function Hg(n){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,we.Z)(function*(n,e=!1){const t=n.app;wf(t);const r=Jr(t);let a,i=r.token;if(!i){const m=yield r.cachedTokenPromise;m&&If(m)&&(i=m)}if(!e&&i&&If(i))return{token:i.token};let f,c=!1;if($_()){r.exchangeTokenPromise||(r.exchangeTokenPromise=L_(nw(t,yield q_()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),c=!0);const m=yield r.exchangeTokenPromise;return yield H_(t,m),uo(t,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(m=>(r.exchangeTokenPromise=void 0,m)),c=!0),i=yield r.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?Hd.warn(m.message):Hd.error(m),a=m}return i?(f={token:i.token},uo(t,Object.assign(Object.assign({},r),{token:i})),yield H_(t,i)):f=yw(a),c&&mw(t,f),f})).apply(this,arguments)}function G_(n,e){const t=Jr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),uo(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function pw(n){const{app:e}=n,t=Jr(e);let r=t.tokenRefresher;r||(r=function gw(n){const{app:e}=n;return new ew((0,we.Z)(function*(){let r;if(r=Jr(e).token?yield Hg(n,!0):yield Hg(n),r.error)throw r.error}),()=>!0,()=>{const t=Jr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),uo(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function mw(n,e){const t=Jr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function If(n){return n.expireTimeMillis-Date.now()>0}function yw(n){return{token:fw(eS),error:n}}class $d{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Jr(this.app);for(const t of e)G_(this.app,t.next);return Promise.resolve()}}const Df="app-check-internal";!function oS(){(0,ao._registerComponent)(new Bd.wA("app-check",n=>function tS(n,e){return new $d(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Df).initialize()})),(0,ao._registerComponent)(new Bd.wA(Df,n=>function nS(n){return{getToken:e=>Hg(n,e),addTokenListener:e=>function $g(n,e,t,r){const{app:i}=n,a=Jr(i),c={next:t,error:r,type:e};if(uo(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,c]})),a.token&&If(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),pw(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>pw(n))}(n,"INTERNAL",e),removeTokenListener:e=>G_(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ao.registerVersion)("@firebase/app-check","0.5.12")}();class qd{constructor(){return(0,Rn.vb)("app-check")}}"undefined"!=typeof window&&window;var Q_=N(127);const kw=new u.OlP("angularfire2.auth.use-emulator"),Nw=new u.OlP("angularfire2.auth.settings"),Rw=new u.OlP("angularfire2.auth.tenant-id"),Fw=new u.OlP("angularfire2.auth.langugage-code"),Lw=new u.OlP("angularfire2.auth.use-device-language"),Uw=new u.OlP("angularfire.auth.persistence"),Vw=(n,e,t,r,i,a,c,f)=>(0,$i.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),c)for(const[b,I]of Object.entries(c))m.settings[b]=I;return f&&m.setPersistence(f),m},[t,r,i,a,c,f]);let cc=(()=>{class n{constructor(t,r,i,a,c,f,m,b,I,A,R,L){const j=new ar.x,oe=it(void 0).pipe((0,Fg.Q)(c.outsideAngular),er(()=>a.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,5881)))),(0,ft.U)(()=>(0,$i.on)(t,a,r)),(0,ft.U)(be=>Vw(be,a,f,b,I,A,m,R)),GI({bufferSize:1,refCount:!1}));if(Ur(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=it(null);else{oe.pipe(Wa()).subscribe();const $e=oe.pipe(er(Qe=>Qe.getRedirectResult().then(Tt=>Tt,()=>null)),Rn.iC,GI({bufferSize:1,refCount:!1})),rt=oe.pipe(er(Qe=>new zr.y(Tt=>({unsubscribe:a.runOutsideAngular(()=>Qe.onAuthStateChanged(At=>Tt.next(At),At=>Tt.error(At),()=>Tt.complete()))})))),st=oe.pipe(er(Qe=>new zr.y(Tt=>({unsubscribe:a.runOutsideAngular(()=>Qe.onIdTokenChanged(At=>Tt.next(At),At=>Tt.error(At),()=>Tt.complete()))}))));this.authState=$e.pipe(Wb(rt),(0,mf.R)(c.outsideAngular),(0,Fg.Q)(c.insideAngular)),this.user=$e.pipe(Wb(st),(0,mf.R)(c.outsideAngular),(0,Fg.Q)(c.insideAngular)),this.idToken=this.user.pipe(er(Qe=>Qe?(0,En.D)(Qe.getIdToken()):it(null))),this.idTokenResult=this.user.pipe(er(Qe=>Qe?(0,En.D)(Qe.getIdTokenResult()):it(null))),this.credential=(0,Zb.T)($e,j,this.authState.pipe(Cn(Qe=>!Qe))).pipe((0,ft.U)(Qe=>(null==Qe?void 0:Qe.user)?Qe:null),(0,mf.R)(c.outsideAngular),(0,Fg.Q)(c.insideAngular))}return(0,$i.pX)(this,oe,a,{spy:{apply:(be,$e,rt)=>{(be.startsWith("signIn")||be.startsWith("createUser"))&&rt.then(st=>j.next(st))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG($i.Dh),u.LFG($i.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Rn.HU),u.LFG(kw,8),u.LFG(Nw,8),u.LFG(Rw,8),u.LFG(Fw,8),u.LFG(Lw,8),u.LFG(Uw,8),u.LFG(qd,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),fS=(()=>{class n{constructor(){Q_.Z.registerVersion("angularfire",Rn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[cc]}),n})();var Gg=N(4986);function Zg(){return(0,ur.e)((n,e)=>{let t,r=!1;n.subscribe((0,Xn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function jw(n,e){return n===e}N(5881);var yt,J_=N(3942),Hw="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},pa={},zg=zg||{},Ft=Hw||self;function xf(){}function ga(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Mf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var rl="closure_uid_"+(1e9*Math.random()>>>0),Rx=0;function X_(n,e,t){return n.call.apply(n.bind,arguments)}function Fx(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function hi(n,e,t){return(hi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?X_:Fx).apply(null,arguments)}function Of(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ai(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++)c[f-2]=arguments[f];return e.prototype[i].apply(r,c)}}function bt(){this.s=this.s,this.o=this.o}var yS={};bt.prototype.s=!1,bt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function gS(n){return Object.prototype.hasOwnProperty.call(n,rl)&&n[rl]||(n[rl]=++Rx)}(this);delete yS[n]}},bt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const $w=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Gd(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function qw(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(ga(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let c=0;c<a;c++)n[i+c]=r[c]}else n.push(r)}}function Hr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Hr.prototype.h=function(){this.defaultPrevented=!0};var Wg=function(){if(!Ft.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ft.addEventListener("test",xf,e),Ft.removeEventListener("test",xf,e)}catch(t){}return n}();function qn(n){return/^[\s\xa0]*$/.test(n)}var _S=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Kg(n,e){return n<e?-1:n>e?1:0}function Yg(){var n=Ft.navigator;return n&&(n=n.userAgent)?n:""}function ma(n){return-1!=Yg().indexOf(n)}function Qg(n){return Qg[" "](n),n}Qg[" "]=xf;var Jg,n,Zw=ma("Opera"),dc=ma("Trident")||ma("MSIE"),zw=ma("Edge"),ev=zw||dc,Ww=ma("Gecko")&&!(-1!=Yg().toLowerCase().indexOf("webkit")&&!ma("Edge"))&&!(ma("Trident")||ma("MSIE"))&&!ma("Edge"),Pf=-1!=Yg().toLowerCase().indexOf("webkit")&&!ma("Edge");function Kw(){var n=Ft.document;return n?n.documentMode:void 0}e:{var tv="",Zd=(n=Yg(),Ww?/rv:([^\);]+)(\)|;)/.exec(n):zw?/Edge\/([\d\.]+)/.exec(n):dc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Pf?/WebKit\/(\S+)/.exec(n):Zw?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Zd&&(tv=Zd?Zd[1]:""),dc){var Xg=Kw();if(null!=Xg&&Xg>parseFloat(tv)){Jg=String(Xg);break e}}Jg=tv}var Yw={};var kf=Ft.document&&dc&&(Kw()||parseInt(Jg,10))||void 0;function Nf(n,e){if(Hr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Ww){e:{try{Qg(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:vS[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Nf.X.h.call(this)}}Ai(Nf,Hr);var vS={2:"touch",3:"pen",4:"mouse"};Nf.prototype.h=function(){Nf.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Rf="closure_listenable_"+(1e6*Math.random()|0),Jw=0;function Xw(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++Jw,this.ba=this.ea=!1}function Ff(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function rv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function iv(n){const e={};for(const t in n)e[t]=n[t];return e}const eE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tE(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<eE.length;a++)t=eE[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function sv(n){this.src=n,this.g={},this.h=0}function nE(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=$w(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Ff(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function rE(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}sv.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=rE(n,e,r,i);return-1<c?(e=n[c],t||(e.ea=!1)):((e=new Xw(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var iE="closure_lm_"+(1e6*Math.random()|0),em={};function Lf(n,e,t,r,i){if(r&&r.once)return ov(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)Lf(n,e[a],t,r,i);return null}return t=tm(t),n&&n[Rf]?n.N(e,t,Mf(r)?!!r.capture:!!r,i):sE(n,e,t,!1,r,i)}function sE(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=Mf(i)?!!i.capture:!!i,f=uv(n);if(f||(n[iE]=f=new sv(n)),(t=f.add(e,t,r,c,a)).proxy)return t;if(r=function bS(){const e=wS;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Wg||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(oE(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ov(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)ov(n,e[a],t,r,i);return null}return t=tm(t),n&&n[Rf]?n.O(e,t,Mf(r)?!!r.capture:!!r,i):sE(n,e,t,!0,r,i)}function Wd(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Wd(n,e[a],t,r,i);else r=Mf(r)?!!r.capture:!!r,t=tm(t),n&&n[Rf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=rE(a=n.g[e],t,r,i))&&(Ff(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=uv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=rE(e,t,r,i)),(t=-1<n?e[n]:null)&&av(t))}function av(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Rf])nE(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(oE(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=uv(e))?(nE(t,n),0==t.h&&(t.src=null,e[iE]=null)):Ff(n)}}}function oE(n){return n in em?em[n]:em[n]="on"+n}function wS(n,e){if(n.ba)n=!0;else{e=new Nf(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&av(n),n=t.call(r,e)}return n}function uv(n){return(n=n[iE])instanceof sv?n:null}var lv="__closure_events_fn_"+(1e9*Math.random()>>>0);function tm(n){return"function"==typeof n?n:(n[lv]||(n[lv]=function(e){return n.handleEvent(e)}),n[lv])}function Xr(){bt.call(this),this.i=new sv(this),this.P=this,this.I=null}function fi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Hr(e,n);else if(e instanceof Hr)e.target=e.target||n;else{var i=e;tE(e=new Hr(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=au(c,r,!0,e)&&i}if(i=au(c=e.g=n,r,!0,e)&&i,i=au(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=au(c=e.g=t[a],r,!1,e)&&i}function au(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.ba&&c.capture==t){var f=c.listener,m=c.ha||c.src;c.ea&&nE(n.i,c),i=!1!==f.call(m,r)&&i}}return i&&!r.defaultPrevented}Ai(Xr,bt),Xr.prototype[Rf]=!0,Xr.prototype.removeEventListener=function(n,e,t,r){Wd(this,n,e,t,r)},Xr.prototype.M=function(){if(Xr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Ff(t[r]);delete n.g[e],n.h--}}this.I=null},Xr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Xr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var cv=Ft.JSON.stringify;function aE(){var n=hv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Uf,dv=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new TS,n=>n.reset());class TS{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function uE(n){Ft.setTimeout(()=>{throw n},0)}function lE(n,e){Uf||function CS(){var n=Ft.Promise.resolve(void 0);Uf=function(){n.then(IS)}}(),nm||(Uf(),nm=!0),hv.add(n,e)}var nm=!1,hv=new class ES{constructor(){this.h=this.g=null}add(e,t){const r=dv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function IS(){for(var n;n=aE();){try{n.h.call(n.g)}catch(t){uE(t)}var e=dv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}nm=!1}function rm(n,e){Xr.call(this),this.h=n||1,this.g=e||Ft,this.j=hi(this.kb,this),this.l=Date.now()}function fv(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Vf(n,e,t){if("function"==typeof n)t&&(n=hi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=hi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ft.setTimeout(n,e||0)}function cE(n){n.g=Vf(()=>{n.g=null,n.i&&(n.i=!1,cE(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ai(rm,Xr),(yt=rm.prototype).ca=!1,yt.R=null,yt.kb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),fi(this,"tick"),this.ca&&(fv(this),this.start()))}},yt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},yt.M=function(){rm.X.M.call(this),fv(this),delete this.g};class dE extends bt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:cE(this)}M(){super.M(),this.g&&(Ft.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bf(n){bt.call(this),this.h=n,this.g={}}Ai(Bf,bt);var hE=[];function fE(n,e,t,r){Array.isArray(t)||(t&&(hE[0]=t.toString()),t=hE);for(var i=0;i<t.length;i++){var a=Lf(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function pE(n){rv(n.g,function(e,t){this.g.hasOwnProperty(t)&&av(e)},n),n.g={}}function im(){this.g=!0}function Kd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function mE(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return cv(t)}catch(f){return e}}(n,t)+(r?" "+r:"")})}Bf.prototype.M=function(){Bf.X.M.call(this),pE(this)},Bf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},im.prototype.Aa=function(){this.g=!1},im.prototype.info=function(){};var hc={},yE=null;function jf(){return yE=yE||new Xr}function _E(n){Hr.call(this,hc.Oa,n)}function Hf(n){const e=jf();fi(e,new _E(e,n))}function vE(n,e){Hr.call(this,hc.STAT_EVENT,n),this.stat=e}function pi(n){const e=jf();fi(e,new vE(e,n))}function sm(n,e){Hr.call(this,hc.Pa,n),this.size=e}function Yd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ft.setTimeout(function(){n()},e)}hc.Oa="serverreachability",Ai(_E,Hr),hc.STAT_EVENT="statevent",Ai(vE,Hr),hc.Pa="timingevent",Ai(sm,Hr);var Qd={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},bE={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function pv(){}function wE(){}pv.prototype.h=null;var mv,Jd={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function gv(){Hr.call(this,"d")}function am(){Hr.call(this,"c")}function $f(){}function um(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Bf(this),this.O=lm,this.T=new rm(n=ev?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new EE}function EE(){this.i=null,this.g="",this.h=!1}Ai(gv,Hr),Ai(am,Hr),Ai($f,pv),$f.prototype.g=function(){return new XMLHttpRequest},$f.prototype.i=function(){return{}},mv=new $f;var lm=45e3,yv={},uu={};function fc(n,e,t){n.K=1,n.v=fm(lu(e)),n.s=t,n.P=!0,TE(n,null)}function TE(n,e){n.F=Date.now(),qf(n),n.A=lu(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),wv(t.i,"t",r),n.C=0,t=n.l.H,n.h=new EE,n.g=jE(n.l,t?e:null,!n.s),0<n.N&&(n.L=new dE(hi(n.Ka,n,n.g),n.N)),fE(n.S,n.g,"readystatechange",n.hb),e=n.H?iv(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Hf(1),function SS(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",f=a.split("&"),m=0;m<f.length;m++){var b=f[m].split("=");if(1<b.length){var I=b[0];b=b[1];var A=I.split("_");c=2<=A.length&&"type"==A[1]?c+(I+"=")+b+"&":c+(I+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function AS(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function _v(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=xS(n,t),i==uu){4==e&&(n.o=4,pi(14),r=!1),Kd(n.j,n.m,null,"[Incomplete Response]");break}if(i==yv){n.o=4,pi(15),Kd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Kd(n.j,n.m,i,null),Gf(n,i)}AS(n)&&i!=uu&&i!=yv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,pi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),kv(e),e.K=!0,pi(11))):(Kd(n.j,n.m,t,"[Invalid Chunked Response]"),il(n),Xd(n))}function xS(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?uu:(t=Number(e.substring(t,r)),isNaN(t)?yv:(r+=1)+t>e.length?uu:(e=e.substr(r,t),n.C=r+t,e))}function qf(n){n.V=Date.now()+n.O,CE(n,n.O)}function CE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Yd(hi(n.fb,n),e)}function cm(n){n.B&&(Ft.clearTimeout(n.B),n.B=null)}function Xd(n){0==n.l.G||n.I||Em(n.l,n)}function il(n){cm(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,fv(n.T),pE(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Gf(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Ev(t.h,n)))if(!n.J&&Ev(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Yd(hi(t.bb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Qf(t),bm(t)}Pv(t),pi(18)}if(1>=OE(t.h)&&t.ja){try{t.ja()}catch(b){}t.ja=void 0}}else sl(t,11)}else if((n.J||t.g==n)&&Qf(t),!qn(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.T=b[0],b=b[1],2==t.G)if("c"==b[0]){t.I=b[1],t.ka=b[2];const I=b[3];null!=I&&(t.ma=I,t.j.info("VER="+t.ma));const A=b[4];null!=A&&(t.Ca=A,t.j.info("SVER="+t.Ca));const R=b[5];null!=R&&"number"==typeof R&&0<R&&(t.J=r=1.5*R,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const L=n.g;if(L){const j=L.g?L.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(j){var a=r.h;a.g||-1==j.indexOf("spdy")&&-1==j.indexOf("quic")&&-1==j.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(gc(a,a.h),a.h=null))}if(r.D){const oe=L.g?L.g.getResponseHeader("X-HTTP-Session-Id"):null;oe&&(r.za=oe,Kn(r.F,r.D,oe))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var c=n;if((r=t).sa=Fv(r,r.H?r.ka:null,r.V),c.J){Tv(r.h,c);var f=c,m=r.J;m&&f.setTimeout(m),f.B&&(cm(f),qf(f)),r.g=c}else VE(r);0<t.i.length&&ih(t)}else"stop"!=b[0]&&"close"!=b[0]||sl(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?sl(t,7):xv(t):"noop"!=b[0]&&t.l&&t.l.wa(b),t.A=0)}Hf(4)}catch(b){}}function IE(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(ga(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Zf(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(ga(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function dm(n){if(n.W&&"function"==typeof n.W)return n.W();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(ga(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(yt=um.prototype).setTimeout=function(n){this.O=n},yt.hb=function(n){n=n.target;const e=this.L;e&&3==hu(n)?e.l():this.Ka(n)},yt.Ka=function(n){try{if(n==this.g)e:{const I=hu(this.g);var e=this.g.Ea();const A=this.g.aa();if(!(3>I)&&(3!=I||ev||this.g&&(this.h.h||this.g.fa()||UE(this.g)))){this.I||4!=I||7==e||Hf(8==e||0>=A?3:2),cm(this);var t=this.g.aa();this.Y=t;t:if(AS(this)){var r=UE(this.g);n="";var i=r.length,a=4==hu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){il(this),Xd(this);var c="";break t}this.h.i=new Ft.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==t,function DS(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.U,I,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var f,m=this.g;if((f=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qn(f)){var b=f;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,pi(12),il(this),Xd(this);break e}Kd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Gf(this,t)}this.P?(_v(this,I,c),ev&&this.i&&3==I&&(fE(this.S,this.T,"tick",this.gb),this.T.start())):(Kd(this.j,this.m,c,null),Gf(this,c)),4==I&&il(this),this.i&&!this.I&&(4==I?Em(this.l,this):(this.i=!1,qf(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,pi(12)):(this.o=0,pi(13)),il(this),Xd(this)}}}catch(I){}},yt.gb=function(){if(this.g){var n=hu(this.g),e=this.g.fa();this.C<e.length&&(cm(this),_v(this,n,e),this.i&&4!=n&&qf(this))}},yt.cancel=function(){this.I=!0,il(this)},yt.fb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function gE(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Hf(3),pi(17)),il(this),this.o=2,Xd(this)):CE(this,this.V-n)};var vv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pc(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof pc){this.h=void 0!==e?e:n.h,eh(this,n.j),this.s=n.s,this.g=n.g,hm(this,n.m),this.l=n.l,e=n.i;var t=new pm;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),MS(this,t),this.o=n.o}else n&&(t=String(n).match(vv))?(this.h=!!e,eh(this,t[1]||"",!0),this.s=ya(t[2]||""),this.g=ya(t[3]||"",!0),hm(this,t[4]),this.l=ya(t[5]||"",!0),MS(this,t[6]||"",!0),this.o=ya(t[7]||"")):(this.h=!!e,this.i=new pm(null,this.h))}function lu(n){return new pc(n)}function eh(n,e,t){n.j=t?ya(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function hm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function MS(n,e,t){e instanceof pm?(n.i=e,function kS(n,e){e&&!n.j&&(cu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(gm(this,r),wv(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=th(e,Lx)),n.i=new pm(e,n.h))}function Kn(n,e,t){n.i.set(e,t)}function fm(n){return Kn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ya(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function th(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,nh),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function nh(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}pc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(th(e,OS,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(th(e,OS,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(th(t,"/"==t.charAt(0)?PS:DE,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",th(t,AE)),n.join("")};var OS=/[#\/\?@]/g,DE=/[#\?:]/g,PS=/[#\?]/g,Lx=/[#\?@]/g,AE=/#/g;function pm(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function cu(n){n.g||(n.g=new Map,n.h=0,n.i&&function SE(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function gm(n,e){cu(n),e=rh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function bv(n,e){return cu(n),e=rh(n,e),n.g.has(e)}function wv(n,e,t){gm(n,e),0<t.length&&(n.i=null,n.g.set(rh(n,e),Gd(t)),n.h+=t.length)}function rh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function xE(n){this.l=n||RS,n=Ft.PerformanceNavigationTiming?0<(n=Ft.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ft.g&&Ft.g.Ga&&Ft.g.Ga()&&Ft.g.Ga().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(yt=pm.prototype).add=function(n,e){cu(this),this.i=null,n=rh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},yt.forEach=function(n,e){cu(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},yt.oa=function(){cu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},yt.W=function(n){cu(this);let e=[];if("string"==typeof n)bv(this,n)&&(e=e.concat(this.g.get(rh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},yt.set=function(n,e){return cu(this),this.i=null,bv(this,n=rh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},yt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},yt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),c=this.W(r);for(r=0;r<c.length;r++){var i=a;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var RS=10;function ME(n){return!!n.h||!!n.g&&n.g.size>=n.j}function OE(n){return n.h?1:n.g?n.g.size:0}function Ev(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function gc(n,e){n.g?n.g.add(e):n.h=e}function Tv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Cv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Gd(n.i)}function mm(){}function PE(){this.g=new mm}function kE(n,e,t){const r=t||"";try{IE(n,function(i,a){let c=i;Mf(i)&&(c=cv(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ym(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function zf(n){this.l=n.$b||null,this.j=n.ib||!1}function _m(n,e){Xr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Iv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}xE.prototype.cancel=function(){if(this.i=Cv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},mm.prototype.stringify=function(n){return Ft.JSON.stringify(n,void 0)},mm.prototype.parse=function(n){return Ft.JSON.parse(n,void 0)},Ai(zf,pv),zf.prototype.g=function(){return new _m(this.l,this.j)},zf.prototype.i=function(n){return function(){return n}}({}),Ai(_m,Xr);var Iv=0;function NE(n){n.j.read().then(n.Sa.bind(n)).catch(n.ga.bind(n))}function Wf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,du(n)}function du(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(yt=_m.prototype).open=function(n,e){if(this.readyState!=Iv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,du(this)},yt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ft).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ga.bind(this))},yt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Wf(this)),this.readyState=Iv},yt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,du(this)),this.g&&(this.readyState=3,du(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if(void 0!==Ft.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;NE(this)}else n.text().then(this.Ua.bind(this),this.ga.bind(this))},yt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Wf(this):du(this),3==this.readyState&&NE(this)}},yt.Ua=function(n){this.g&&(this.response=this.responseText=n,Wf(this))},yt.Ta=function(n){this.g&&(this.response=n,Wf(this))},yt.ga=function(){this.g&&Wf(this)},yt.setRequestHeader=function(n,e){this.v.append(n,e)},yt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},yt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(_m.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var LS=Ft.JSON.parse;function cr(n){Xr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Fo,this.K=this.L=!1}Ai(cr,Xr);var Fo="",US=/^https?$/i,Sv=["POST","PUT"];function RE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,FE(n),mc(n)}function FE(n){n.D||(n.D=!0,fi(n,"complete"),fi(n,"error"))}function LE(n){if(n.h&&void 0!==zg&&(!n.C[1]||4!=hu(n)||2!=n.aa()))if(n.v&&4==hu(n))Vf(n.Ha,0,n);else if(fi(n,"readystatechange"),4==hu(n)){n.h=!1;try{const f=n.aa();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(vv)[1]||null;if(!i&&Ft.self&&Ft.self.location){var a=Ft.self.location.protocol;i=a.substr(0,a.length-1)}r=!US.test(i?i.toLowerCase():"")}t=r}if(t)fi(n,"complete"),fi(n,"success");else{n.m=6;try{var c=2<hu(n)?n.g.statusText:""}catch(m){c=""}n.j=c+" ["+n.aa()+"]",FE(n)}}finally{mc(n)}}}function mc(n,e){if(n.g){Yf(n);const t=n.g,r=n.C[0]?xf:null;n.g=null,n.C=null,e||fi(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function Yf(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ft.clearTimeout(n.A),n.A=null)}function hu(n){return n.g?n.g.readyState:0}function UE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Fo:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Dv(n){let e="";return rv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function vm(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Dv(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Kn(n,e,t))}function yc(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Av(n){this.Ca=0,this.i=[],this.j=new im,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=yc("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=yc("baseRetryDelayMs",5e3,n),this.ab=yc("retryDelaySeedMs",1e4,n),this.Za=yc("forwardChannelMaxRetries",2,n),this.ta=yc("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Yb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new xE(n&&n.concurrentRequestLimit),this.Fa=new PE,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=n&&n.Wb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function xv(n){if(VS(n),3==n.G){var e=n.U++,t=lu(n.F);Kn(t,"SID",n.I),Kn(t,"RID",e),Kn(t,"TYPE","terminate"),_c(n,t),(e=new um(n,n.j,e,void 0)).K=2,e.v=fm(lu(t)),t=!1,Ft.navigator&&Ft.navigator.sendBeacon&&(t=Ft.navigator.sendBeacon(e.v.toString(),"")),!t&&Ft.Image&&((new Image).src=e.v,t=!0),t||(e.g=jE(e.l,null),e.g.da(e.v)),e.F=Date.now(),qf(e)}Rv(n)}function bm(n){n.g&&(kv(n),n.g.cancel(),n.g=null)}function VS(n){bm(n),n.u&&(Ft.clearTimeout(n.u),n.u=null),Qf(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Ft.clearTimeout(n.m),n.m=null)}function ih(n){ME(n.h)||n.m||(n.m=!0,lE(n.Ja,n),n.C=0)}function Ov(n,e){var t;t=e?e.m:n.U++;const r=lu(n.F);Kn(r,"SID",n.I),Kn(r,"RID",t),Kn(r,"AID",n.T),_c(n,r),n.o&&n.s&&vm(r,n.o,n.s),t=new um(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=wm(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),gc(n.h,t),fc(t,r,e)}function _c(n,e){n.ia&&rv(n.ia,function(t,r){Kn(e,r,t)}),n.l&&IE({},function(t,r){Kn(e,r,t)})}function wm(n,e,t){t=Math.min(n.i.length,t);var r=n.l?hi(n.l.Qa,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].h,c.push("ofs="+a)):a=0:c.push("ofs="+a);let f=!0;for(let m=0;m<t;m++){let b=i[m].h;const I=i[m].g;if(b-=a,0>b)a=Math.max(0,i[m].h-100),f=!1;else try{kE(I,c,"req"+b+"_")}catch(A){r&&r(I)}}if(f){r=c.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function VE(n){n.g||n.u||(n.Z=1,lE(n.Ia,n),n.A=0)}function Pv(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Yd(hi(n.Ia,n),Nv(n,n.A)),n.A++,0))}function kv(n){null!=n.B&&(Ft.clearTimeout(n.B),n.B=null)}function BE(n){n.g=new um(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=lu(n.sa);Kn(e,"RID","rpc"),Kn(e,"SID",n.I),Kn(e,"CI",n.L?"0":"1"),Kn(e,"AID",n.T),Kn(e,"TYPE","xmlhttp"),_c(n,e),n.o&&n.s&&vm(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=fm(lu(e)),t.s=null,t.P=!0,TE(t,n)}function Qf(n){null!=n.v&&(Ft.clearTimeout(n.v),n.v=null)}function Em(n,e){var t=null;if(n.g==e){Qf(n),kv(n),n.g=null;var r=2}else{if(!Ev(n.h,e))return;t=e.D,Tv(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;fi(r=jf(),new sm(r,t,e,i)),ih(n)}else VE(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function Mv(n,e){return!(OE(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Ya?0:n.Za)||(n.m=Yd(hi(n.Ja,n,e),Nv(n,n.C)),n.C++,0)))}(n,e)||2==r&&Pv(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:sl(n,5);break;case 4:sl(n,10);break;case 3:sl(n,6);break;default:sl(n,2)}}function Nv(n,e){let t=n.Wa+Math.floor(Math.random()*n.ab);return n.l||(t*=2),t*e}function sl(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=hi(n.jb,n);t||(t=new pc("//www.google.com/images/cleardot.gif"),Ft.location&&"http"==Ft.location.protocol||eh(t,"https"),fm(t)),function FS(n,e){const t=new im;if(Ft.Image){const r=new Image;r.onload=Of(ym,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Of(ym,t,r,"TestLoadImage: error",!1,e),r.onabort=Of(ym,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Of(ym,t,r,"TestLoadImage: timeout",!1,e),Ft.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else pi(2);n.G=0,n.l&&n.l.va(e),Rv(n),VS(n)}function Rv(n){if(n.G=0,n.la=[],n.l){const e=Cv(n.h);(0!=e.length||0!=n.i.length)&&(qw(n.la,e),qw(n.la,n.i),n.h.i.length=0,Gd(n.i),n.i.length=0),n.l.ua()}}function Fv(n,e,t){var r=t instanceof pc?lu(t):new pc(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),hm(r,r.m);else{var i=Ft.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new pc(null,void 0);r&&eh(a,r),e&&(a.g=e),i&&hm(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&Kn(r,t,e),Kn(r,"VER",n.ma),_c(n,r),r}function jE(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new cr(t&&n.Da&&!n.ra?new zf({ib:!0}):n.ra)).L=n.H,e}function Lv(){}function Jf(){if(dc&&!(10<=Number(kf)))throw Error("Environmental error: no available transport.")}function Ps(n,e){Xr.call(this),this.g=new Av(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Xb)&&!qn(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!qn(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Mr(this)}function Uv(n){gv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function HE(){am.call(this),this.status=1}function Mr(n){this.g=n}(yt=cr.prototype).da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():mv.g(),this.C=function om(n){return n.h||(n.h=n.i())}(this.u?this.u:mv),this.g.onreadystatechange=hi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void RE(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Ft.FormData&&n instanceof Ft.FormData,!(0<=$w(Sv,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,c]of t)this.g.setRequestHeader(a,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Yf(this),0<this.B&&((this.K=function Kf(n){return dc&&function Qw(){return function Gw(n){var e=Yw;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=_S(String(Jg)).split("."),t=_S("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",a=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Kg(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Kg(0==i[2].length,0==a[2].length)||Kg(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=hi(this.qa,this)):this.A=Vf(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){RE(this,a)}},yt.qa=function(){void 0!==zg&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,fi(this,"timeout"),this.abort(8))},yt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,fi(this,"complete"),fi(this,"abort"),mc(this))},yt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),mc(this,!0)),cr.X.M.call(this)},yt.Ha=function(){this.s||(this.F||this.v||this.l?LE(this):this.eb())},yt.eb=function(){LE(this)},yt.aa=function(){try{return 2<hu(this)?this.g.status:-1}catch(n){return-1}},yt.fa=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},yt.Ra=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),LS(e)}},yt.Ea=function(){return this.m},yt.Na=function(){return"string"==typeof this.j?this.j:String(this.j)},(yt=Av.prototype).ma=8,yt.G=1,yt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new um(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=iv(a),tE(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=wm(this,i,e),Kn(t=lu(this.F),"RID",n),Kn(t,"CVER",22),this.D&&Kn(t,"X-HTTP-Session-Id",this.D),_c(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(Dv(a)))+"&"+e:this.o&&vm(t,this.o,a)),gc(this.h,i),this.Xa&&Kn(t,"TYPE","init"),this.O?(Kn(t,"$req",e),Kn(t,"SID","null"),i.Z=!0,fc(i,t,null)):fc(i,t,e),this.G=2}}else 3==this.G&&(n?Ov(this,n):0==this.i.length||ME(this.h)||Ov(this))},yt.Ia=function(){if(this.u=null,BE(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Yd(hi(this.cb,this),n)}},yt.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,pi(10),bm(this),BE(this))},yt.bb=function(){null!=this.v&&(this.v=null,bm(this),Pv(this),pi(19))},yt.jb=function(n){n?(this.j.info("Successfully pinged google.com"),pi(2)):(this.j.info("Failed to ping google.com"),pi(1))},(yt=Lv.prototype).xa=function(){},yt.wa=function(){},yt.va=function(){},yt.ua=function(){},yt.Qa=function(){},Jf.prototype.g=function(n,e){return new Ps(n,e)},Ai(Ps,Xr),Ps.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;pi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Fv(n,null,n.V),ih(n)},Ps.prototype.close=function(){xv(this.g)},Ps.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=cv(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.$a++,n)),3==e.G&&ih(e)},Ps.prototype.M=function(){this.g.l=null,delete this.j,xv(this.g),delete this.g,Ps.X.M.call(this)},Ai(Uv,gv),Ai(HE,am),Ai(Mr,Lv),Mr.prototype.xa=function(){fi(this.g,"a")},Mr.prototype.wa=function(n){fi(this.g,new Uv(n))},Mr.prototype.va=function(n){fi(this.g,new HE(n))},Mr.prototype.ua=function(){fi(this.g,"b")},Jf.prototype.createWebChannel=Jf.prototype.g,Ps.prototype.send=Ps.prototype.u,Ps.prototype.open=Ps.prototype.m,Ps.prototype.close=Ps.prototype.close,Qd.NO_ERROR=0,Qd.TIMEOUT=8,Qd.HTTP_ERROR=6,bE.COMPLETE="complete",wE.EventType=Jd,Jd.OPEN="a",Jd.CLOSE="b",Jd.ERROR="c",Jd.MESSAGE="d",Xr.prototype.listen=Xr.prototype.N,cr.prototype.listenOnce=cr.prototype.O,cr.prototype.getLastError=cr.prototype.Na,cr.prototype.getLastErrorCode=cr.prototype.Ea,cr.prototype.getStatus=cr.prototype.aa,cr.prototype.getResponseJson=cr.prototype.Ra,cr.prototype.getResponseText=cr.prototype.fa,cr.prototype.send=cr.prototype.da;var sh=pa.createWebChannelTransport=function(){return new Jf},BS=pa.getStatEventTarget=function(){return jf()},Vv=pa.ErrorCode=Qd,Ux=pa.EventType=bE,Xf=pa.Event=hc,$E=pa.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Bv=pa.FetchXmlHttpFactory=zf,Tm=pa.WebChannel=wE,qE=pa.XhrIo=cr;const GE="@firebase/firestore";class ei{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ei.UNAUTHENTICATED=new ei(null),ei.GOOGLE_CREDENTIALS=new ei("google-credentials-uid"),ei.FIRST_PARTY=new ei("first-party-uid"),ei.MOCK_USER=new ei("mock-user");let ol="9.10.0";const fu=new nl.Yd("@firebase/firestore");function Cm(){return fu.logLevel}function Ve(n,...e){if(fu.logLevel<=nl.in.DEBUG){const t=e.map(jv);fu.debug(`Firestore (${ol}): ${n}`,...t)}}function Or(n,...e){if(fu.logLevel<=nl.in.ERROR){const t=e.map(jv);fu.error(`Firestore (${ol}): ${n}`,...t)}}function al(n,...e){if(fu.logLevel<=nl.in.WARN){const t=e.map(jv);fu.warn(`Firestore (${ol}): ${n}`,...t)}}function jv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function lt(n="Unexpected state"){const e=`FIRESTORE (${ol}) INTERNAL ASSERTION FAILED: `+n;throw Or(e),new Error(e)}function Ot(n,e){n||lt()}function nt(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends Gt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class gi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class zE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ei.UNAUTHENTICATED))}shutdown(){}}class WE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class KE{constructor(e){this.t=e,this.currentUser=ei.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let c=new gi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new gi,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const b=c;e.enqueueRetryable((0,we.Z)(function*(){yield b.promise,yield a(r.currentUser)}))},m=b=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(b=>m(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?m(b):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new gi)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ot("string"==typeof r.accessToken),new zE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ot(null===e||"string"==typeof e),new ei(e)}}class HS{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=ei.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ot(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class YE{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new HS(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(ei.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Hv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $S{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.A;return this.A=a.token,Ve("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ot("string"==typeof t.token),this.A=t.token,new Hv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function QE(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class JE{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=QE(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Lt(n,e){return n<e?-1:n>e?1:0}function vc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function $v(n){return n+"\0"}class Gn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Fe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Gn.fromMillis(Date.now())}static fromDate(e){return Gn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Gn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Lt(this.nanoseconds,e.nanoseconds):Lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class kt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new kt(e)}static min(){return new kt(new Gn(0,0))}static max(){return new kt(new Gn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ep{constructor(e,t,r){void 0===t?t=0:t>e.length&&lt(),void 0===r?r=e.length-t:r>e.length-t&&lt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ep.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ep?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class cn extends ep{construct(e,t,r){return new cn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Fe(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new cn(t)}static emptyPath(){return new cn([])}}const XE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ir extends ep{construct(e,t,r){return new Ir(e,t,r)}static isValidIdentifier(e){return XE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ir.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ir(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Fe(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Fe(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Fe(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===f?(c=!c,i++):"."!==f||c?(r+=f,i++):(a(),i++)}if(a(),c)throw new Fe(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ir(t)}static emptyPath(){return new Ir([])}}class tt{constructor(e){this.path=e}static fromPath(e){return new tt(cn.fromString(e))}static fromName(e){return new tt(cn.fromString(e).popFirst(5))}static empty(){return new tt(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===cn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new cn(e.slice()))}}class qv{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function eT(n){return n.fields.find(e=>2===e.kind)}function oh(n){return n.fields.filter(e=>2!==e.kind)}qv.UNKNOWN_ID=-1;class Gv{constructor(e,t){this.fieldPath=e,this.kind=t}}class ul{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ul(0,Gi.min())}}function qS(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=kt.fromTimestamp(1e9===r?new Gn(t+1,0):new Gn(t,r));return new Gi(i,tt.empty(),e)}function Zv(n){return new Gi(n.readTime,n.key,-1)}class Gi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Gi(kt.min(),tt.empty(),-1)}static max(){return new Gi(kt.max(),tt.empty(),-1)}}function Sm(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=tt.comparator(n.documentKey,e.documentKey),0!==t?t:Lt(n.largestBatchId,e.largestBatchId))}const zv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function _a(n){return Dm.apply(this,arguments)}function Dm(){return Dm=(0,we.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==zv)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),Dm.apply(this,arguments)}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let i=0,a=0,c=!1;e.forEach(f=>{++i,f.next(()=>{++a,c&&a===i&&t()},m=>r(m))}),c=!0,a===i&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(i=>i?he.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new he((r,i)=>{const a=e.length,c=new Array(a);let f=0;for(let m=0;m<a;m++){const b=m;t(e[b]).next(I=>{c[b]=I,++f,f===a&&r(c)},I=>i(I))}})}static doWhile(e,t){return new he((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class tp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new gi,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new np(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=tT(r.target.error);this.P.reject(new np(e,i))}}static open(e,t,r,i){try{return new tp(t,e.transaction(i,r))}catch(a){throw new np(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new zS(t)}}class va{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===va.D((0,Gt.z$)())&&Or("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),ah(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Gt.hl)())return!1;if(va.N())return!0;const e=(0,Gt.z$)(),t=va.D(e),r=0<t&&t<10,i=va.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,we.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new np(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const f=c.target.error;i("VersionError"===f.name?new Fe(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Fe(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new np(e,f))},a.onupgradeneeded=c=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.$(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,we.Z)(function*(){const c="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.F(e);const m=tp.open(a.db,e,c?"readonly":"readwrite",r),b=i(m).next(I=>(m.V(),I)).catch(I=>(m.abort(I),he.reject(I))).toPromise();return b.catch(()=>{}),yield m.v,b}catch(m){const b=m,I="FirebaseError"!==b.name&&f<3;if(Ve("SimpleDb","Transaction failed with error:",b.message,"Retrying:",I),a.close(),!I)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ZS{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return ah(this.U.delete())}}class np extends Fe{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ba(n){return"IndexedDbTransactionError"===n.name}class zS{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ah(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),ah(this.store.add(e))}get(e){return ah(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),ah(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),ah(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(c,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new he((a,c)=>{i.onerror=f=>{c(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new he((i,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Y(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,c,f)=>f.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new he((r,i)=>{t.onerror=a=>{const c=tT(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():r()}):r()}})}H(e,t){const r=[];return new he((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void i();const m=new ZS(f),b=t(f.primaryKey,f.value,m);if(b instanceof he){const I=b.catch(A=>(m.done(),he.reject(A)));r.push(I)}m.isDone?i():null===m.G?f.continue():f.continue(m.G)}}).next(()=>he.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ah(n){return new he((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=tT(r.target.error);t(i)}})}let WS=!1;function tT(n){const e=va.D((0,Gt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return WS||(WS=!0,setTimeout(()=>{throw r},0)),r}}return n}class KS{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ve("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,we.Z)(function*(){t.task=null;try{Ve("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){ba(r)?Ve("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield _a(r)}yield t.nt(6e4)}))}}class YS{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,we.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return he.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Ve("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,i).next(f=>{i-=f,r.add(c)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const c=a.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(i,a)).next(f=>(Ve("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>c.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const c=Zv(a);Sm(c,r)>0&&(r=c)}),new Gi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ls{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function QS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function bc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Am(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}ls.at=-1;class dr{constructor(e,t){this.comparator=e,this.root=t||mi.EMPTY}insert(e,t){return new dr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mi.BLACK,null,null))}remove(e){return new dr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cs(this.root,e,this.comparator,!1)}getReverseIterator(){return new cs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cs(this.root,e,this.comparator,!0)}}class cs{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:mi.RED,this.left=null!=i?i:mi.EMPTY,this.right=null!=a?a:mi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new mi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return mi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return mi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}mi.EMPTY=null,mi.RED=!0,mi.BLACK=!1,mi.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new mi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class In{constructor(e){this.comparator=e,this.data=new dr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nT(this.data.getIterator())}getIteratorFrom(e){return new nT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof In)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new In(this.comparator);return t.data=e,t}}class nT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function uh(n){return n.hasNext()?n.getNext():void 0}class Zi{constructor(e){this.fields=e,e.sort(Ir.comparator)}static empty(){return new Zi([])}unionWith(e){let t=new In(Ir.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Zi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return vc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Pr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Pr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Pr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pr.EMPTY_BYTE_STRING=new Pr("");const JS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pu(n){if(Ot(!!n),"string"==typeof n){let e=0;const t=JS.exec(n);if(Ot(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:hr(n.seconds),nanos:hr(n.nanos)}}function hr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function wc(n){return"string"==typeof n?Pr.fromBase64String(n):Pr.fromUint8Array(n)}function Wv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function xm(n){const e=n.mapValue.fields.__previous_value__;return Wv(e)?xm(e):e}function Lo(n){const e=pu(n.mapValue.fields.__local_write_time__.timestampValue);return new Gn(e.seconds,e.nanos)}class iT{constructor(e,t,r,i,a,c,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.useFetchStreams=m}}class gu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new gu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof gu&&e.projectId===this.projectId&&e.database===this.database}}function rp(n){return null==n}function Mm(n){return 0===n&&1/n==-1/0}function sT(n){return"number"==typeof n&&Number.isInteger(n)&&!Mm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const ll={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Om={nullValue:"NULL_VALUE"};function cl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Wv(n)?4:Qv(n)?9007199254740991:10:lt()}function wa(n,e){if(n===e)return!0;const t=cl(n);if(t!==cl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Lo(n).isEqual(Lo(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=pu(r.timestampValue),c=pu(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,wc(n.bytesValue).isEqual(wc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return hr(r.geoPointValue.latitude)===hr(i.geoPointValue.latitude)&&hr(r.geoPointValue.longitude)===hr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return hr(r.integerValue)===hr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=hr(r.doubleValue),c=hr(i.doubleValue);return a===c?Mm(a)===Mm(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return vc(n.arrayValue.values||[],e.arrayValue.values||[],wa);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(QS(a)!==QS(c))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===c[f]||!wa(a[f],c[f])))return!1;return!0}(n,e);default:return lt()}var i}function ip(n,e){return void 0!==(n.values||[]).find(t=>wa(t,e))}function Ec(n,e){if(n===e)return 0;const t=cl(n),r=cl(e);if(t!==r)return Lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Lt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=hr(i.integerValue||i.doubleValue),f=hr(a.integerValue||a.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(n,e);case 3:return Pm(n.timestampValue,e.timestampValue);case 4:return Pm(Lo(n),Lo(e));case 5:return Lt(n.stringValue,e.stringValue);case 6:return function(i,a){const c=wc(i),f=wc(a);return c.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),f=a.split("/");for(let m=0;m<c.length&&m<f.length;m++){const b=Lt(c[m],f[m]);if(0!==b)return b}return Lt(c.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=Lt(hr(i.latitude),hr(a.latitude));return 0!==c?c:Lt(hr(i.longitude),hr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],f=a.values||[];for(let m=0;m<c.length&&m<f.length;++m){const b=Ec(c[m],f[m]);if(b)return b}return Lt(c.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===ll.mapValue&&a===ll.mapValue)return 0;if(i===ll.mapValue)return 1;if(a===ll.mapValue)return-1;const c=i.fields||{},f=Object.keys(c),m=a.fields||{},b=Object.keys(m);f.sort(),b.sort();for(let I=0;I<f.length&&I<b.length;++I){const A=Lt(f[I],b[I]);if(0!==A)return A;const R=Ec(c[f[I]],m[b[I]]);if(0!==R)return R}return Lt(f.length,b.length)}(n.mapValue,e.mapValue);default:throw lt()}}function Pm(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Lt(n,e);const t=pu(n),r=pu(e),i=Lt(t.seconds,r.seconds);return 0!==i?i:Lt(t.nanos,r.nanos)}function Tc(n){return Kv(n)}function Kv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=pu(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?wc(n.bytesValue).toBase64():"referenceValue"in n?tt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=Kv(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const f of i)c?c=!1:a+=",",a+=`${f}:${Kv(r.fields[f])}`;return a+"}"}(n.mapValue):lt();var e}function Cc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function km(n){return!!n&&"integerValue"in n}function Ic(n){return!!n&&"arrayValue"in n}function Nm(n){return!!n&&"nullValue"in n}function Yv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rm(n){return!!n&&"mapValue"in n}function lh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return bc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=lh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Qv(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function XS(n){return"nullValue"in n?Om:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Cc(gu.empty(),tt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:lt()}function e1(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Cc(gu.empty(),tt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ll:lt()}function t1(n,e){const t=Ec(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function n1(n,e){const t=Ec(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ti{constructor(e){this.value=e}static empty(){return new ti({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Rm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lh(t)}setAll(e){let t=Ir.emptyPath(),r={},i=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=f.popLast()}c?r[f.lastSegment()]=lh(c):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Rm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Rm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){bc(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new ti(lh(this.value))}}function oT(n){const e=[];return bc(n.fields,(t,r)=>{const i=new Ir([t]);if(Rm(r)){const a=oT(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new Zi(e)}class Fn{constructor(e,t,r,i,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Fn(e,0,kt.min(),kt.min(),ti.empty(),0)}static newFoundDocument(e,t,r){return new Fn(e,1,t,kt.min(),r,0)}static newNoDocument(e,t){return new Fn(e,2,t,kt.min(),ti.empty(),0)}static newUnknownDocument(e,t){return new Fn(e,3,t,kt.min(),ti.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ti.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ti.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=kt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class r1{constructor(e,t=null,r=[],i=[],a=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=f,this.ht=null}}function i1(n,e=null,t=[],r=[],i=null,a=null,c=null){return new r1(n,e,t,r,i,a,c)}function ch(n){const e=nt(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Tc(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),rp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Tc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Tc(r)).join(",")),e.ht=t}return e.ht}function Fm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!$x(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!wa(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!a1(n.startAt,e.startAt)&&a1(n.endAt,e.endAt)}function Jv(n){return tt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Lm(n,e){return n.filters.filter(t=>t instanceof yi&&t.field.isEqual(e))}function sp(n,e,t){let r=Om,i=!0;for(const a of Lm(n,e)){let c=Om,f=!0;switch(a.op){case"<":case"<=":c=XS(a.value);break;case"==":case"in":case">=":c=a.value;break;case">":c=a.value,f=!1;break;case"!=":case"not-in":c=Om}t1({value:r,inclusive:i},{value:c,inclusive:f})<0&&(r=c,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];t1({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function aT(n,e,t){let r=ll,i=!0;for(const a of Lm(n,e)){let c=ll,f=!0;switch(a.op){case">=":case">":c=e1(a.value),f=!1;break;case"==":case"in":case"<=":c=a.value;break;case"<":c=a.value,f=!1;break;case"!=":case"not-in":c=ll}n1({value:r,inclusive:i},{value:c,inclusive:f})>0&&(r=c,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];n1({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class yi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new uT(e,t,r):"array-contains"===t?new Xv(e,r):"in"===t?new s1(e,r):"not-in"===t?new e0(e,r):"array-contains-any"===t?new t0(e,r):new yi(e,t,r)}static lt(e,t,r){return"in"===t?new Sc(e,r):new lT(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Ec(t,this.value)):null!==t&&cl(this.value)===cl(t)&&this.ft(Ec(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class uT extends yi{constructor(e,t,r){super(e,t,r),this.key=tt.fromName(r.referenceValue)}matches(e){const t=tt.comparator(e.key,this.key);return this.ft(t)}}class Sc extends yi{constructor(e,t){super(e,"in",t),this.keys=Um(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class lT extends yi{constructor(e,t){super(e,"not-in",t),this.keys=Um(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Um(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>tt.fromName(r.referenceValue))}class Xv extends yi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ic(t)&&ip(t.arrayValue,this.value)}}class s1 extends yi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ip(this.value.arrayValue,t)}}class e0 extends yi{constructor(e,t){super(e,"not-in",t)}matches(e){if(ip(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ip(this.value.arrayValue,t)}}class t0 extends yi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ic(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ip(this.value.arrayValue,r))}}class Uo{constructor(e,t){this.position=e,this.inclusive=t}}class op{constructor(e,t="asc"){this.field=e,this.dir=t}}function $x(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function o1(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?tt.comparator(tt.fromName(c.referenceValue),t.key):Ec(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function a1(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!wa(n.position[t],e.position[t]))return!1;return!0}class Ea{constructor(e,t=null,r=[],i=[],a=null,c="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=f,this.endAt=m,this._t=null,this.wt=null}}function cT(n,e,t,r,i,a,c,f){return new Ea(n,e,t,r,i,a,c,f)}function dh(n){return new Ea(n)}function dT(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function n0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Vm(n){for(const e of n.filters)if(e.dt())return e.field;return null}function Bm(n){return null!==n.collectionGroup}function Dc(n){const e=nt(n);if(null===e._t){e._t=[];const t=Vm(e),r=n0(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new op(t)),e._t.push(new op(Ir.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e._t.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new op(Ir.keyField(),a))}}}return e._t}function ds(n){const e=nt(n);if(!e.wt)if("F"===e.limitType)e.wt=i1(e.path,e.collectionGroup,Dc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Dc(e))t.push(new op(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Uo(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Uo(e.startAt.position,e.startAt.inclusive):null;e.wt=i1(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function jm(n,e,t){return new Ea(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hh(n,e){return Fm(ds(n),ds(e))&&n.limitType===e.limitType}function Hm(n){return`${ch(ds(n))}|lt:${n.limitType}`}function hT(n){return`Query(target=${function Hx(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Tc(r.value)}`;var r}).join(", ")}]`),rp(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Tc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Tc(t)).join(",")),`Target(${e})`}(ds(n))}; limitType=${n.limitType})`}function $m(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):tt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const f=o1(i,a,c);return i.inclusive?f<=0:f<0}(t.startAt,Dc(t),r)||t.endAt&&!function(i,a,c){const f=o1(i,a,c);return i.inclusive?f>=0:f>0}(t.endAt,Dc(t),r)));var t,r}function qm(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function fT(n){return(e,t)=>{let r=!1;for(const i of Dc(n)){const a=u1(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function u1(n,e,t){const r=n.field.isKeyField()?tt.comparator(e.key,t.key):function(i,a,c){const f=a.data.field(i),m=c.data.field(i);return null!==f&&null!==m?Ec(f,m):lt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return lt()}}function l1(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mm(e)?"-0":e}}function c1(n){return{integerValue:""+n}}function pT(n,e){return sT(e)?c1(e):l1(n,e)}class Gm{constructor(){this._=void 0}}function qx(n,e,t){return n instanceof ap?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof fh?gT(n,e):n instanceof ph?h1(n,e):function(r,i){const a=d1(r,i),c=f1(a)+f1(r.yt);return km(a)&&km(r.yt)?c1(c):l1(r.It,c)}(n,e)}function Gx(n,e,t){return n instanceof fh?gT(n,e):n instanceof ph?h1(n,e):t}function d1(n,e){return n instanceof up?km(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ap extends Gm{}class fh extends Gm{constructor(e){super(),this.elements=e}}function gT(n,e){const t=s(e);for(const r of n.elements)t.some(i=>wa(i,r))||t.push(r);return{arrayValue:{values:t}}}class ph extends Gm{constructor(e){super(),this.elements=e}}function h1(n,e){let t=s(e);for(const r of n.elements)t=t.filter(i=>!wa(i,r));return{arrayValue:{values:t}}}class up extends Gm{constructor(e,t){super(),this.It=e,this.yt=t}}function f1(n){return hr(n.integerValue||n.doubleValue)}function s(n){return Ic(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class o{constructor(e,t){this.field=e,this.transform=t}}class d{constructor(e,t){this.version=e,this.transformResults=t}}class h{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new h}static exists(e){return new h(void 0,e)}static updateTime(e){return new h(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function p(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class _{}function w(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new at(n.key,h.none()):new q(n.key,n.data,h.none());{const t=n.data,r=ti.empty();let i=new In(Ir.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);null===c&&a.length>1&&(a=a.popLast(),c=t.field(a)),null===c?r.delete(a):r.set(a,c),i=i.add(a)}return new X(n.key,r,new Zi(i.toArray()),h.none())}}function C(n,e,t){n instanceof q?function(r,i,a){const c=r.value.clone(),f=Be(r.fieldTransforms,i,a.transformResults);c.setAll(f),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof X?function(r,i,a){if(!p(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=Be(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(Te(r)),f.setAll(c),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function D(n,e,t,r){return n instanceof q?function(i,a,c,f){if(!p(i.precondition,a))return c;const m=i.value.clone(),b=et(i.fieldTransforms,f,a);return m.setAll(b),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof X?function(i,a,c,f){if(!p(i.precondition,a))return c;const m=et(i.fieldTransforms,f,a),b=a.data;return b.setAll(Te(i)),b.setAll(m),a.convertToFoundDocument(a.version,b).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(I=>I.field))}(n,e,t,r):(c=t,p(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c);var a,c}function O(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=d1(r.transform,i||null);null!=a&&(null===t&&(t=ti.empty()),t.set(r.field,a))}return t||null}function F(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&vc(t,r,(i,a)=>function l(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof fh&&r instanceof fh||t instanceof ph&&r instanceof ph?vc(t.elements,r.elements,wa):t instanceof up&&r instanceof up?wa(t.yt,r.yt):t instanceof ap&&r instanceof ap);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class q extends _{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class X extends _{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Te(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Be(n,e,t){const r=new Map;Ot(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,f=e.data.field(a.field);r.set(a.field,Gx(c,f,t[i]))}return r}function et(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,qx(a,c,e))}return r}class at extends _{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ke extends _{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Dt{constructor(e){this.count=e}}var Ct,ht;function hs(n){switch(n){default:return lt();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function dl(n){if(void 0===n)return Or("GRPC error has no .code"),fe.UNKNOWN;switch(n){case Ct.OK:return fe.OK;case Ct.CANCELLED:return fe.CANCELLED;case Ct.UNKNOWN:return fe.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return fe.INTERNAL;case Ct.UNAVAILABLE:return fe.UNAVAILABLE;case Ct.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case Ct.NOT_FOUND:return fe.NOT_FOUND;case Ct.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case Ct.ABORTED:return fe.ABORTED;case Ct.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case Ct.DATA_LOSS:return fe.DATA_LOSS;default:return lt()}}(ht=Ct||(Ct={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";class Ta{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){bc(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return Am(this.inner)}size(){return this.innerSize}}const r0=new dr(tt.comparator);function xi(){return r0}const Zm=new dr(tt.comparator);function Ac(...n){let e=Zm;for(const t of n)e=e.insert(t.key,t);return e}function zm(n){let e=Zm;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function co(){return xc()}function Wm(){return xc()}function xc(){return new Ta(n=>n.toString(),(n,e)=>n.isEqual(e))}const uN=new dr(tt.comparator),lN=new In(tt.comparator);function Jt(...n){let e=lN;for(const t of n)e=e.add(t);return e}const cN=new In(Lt);function mT(){return cN}class s0{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,o0.createSynthesizedTargetChangeForCurrentChange(e,t)),new s0(kt.min(),r,mT(),xi(),Jt())}}class o0{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new o0(Pr.EMPTY_BYTE_STRING,t,Jt(),Jt(),Jt())}}class yT{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class Zx{constructor(e,t){this.targetId=e,this.At=t}}class zx{constructor(e,t,r=Pr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Wx{constructor(){this.Rt=0,this.bt=Yx(),this.Pt=Pr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Jt(),t=Jt(),r=Jt();return this.bt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:lt()}}),new o0(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=Yx()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class dN{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=xi(),this.qt=Kx(),this.Kt=new In(Lt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:lt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const a=i.target;if(Jv(a))if(0===r){const c=new tt(a.path);this.jt(t,c,Fn.newNoDocument(c,kt.min()))}else Ot(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((a,c)=>{const f=this.Xt(c);if(f){if(a.current&&Jv(f.target)){const m=new tt(f.target.path);null!==this.Ut.get(m)||this.ee(c,m)||this.jt(c,m,Fn.newNoDocument(m,e))}a.Dt&&(t.set(c,a.xt()),a.Nt())}});let r=Jt();this.qt.forEach((a,c)=>{let f=!0;c.forEachWhile(m=>{const b=this.Xt(m);return!b||2===b.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.Ut.forEach((a,c)=>c.setReadTime(e));const i=new s0(e,t,this.Kt,this.Ut,r);return this.Ut=xi(),this.qt=Kx(),this.Kt=new In(Lt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new Wx,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new In(Lt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Wx),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function Kx(){return new dr(tt.comparator)}function Yx(){return new dr(tt.comparator)}const hN={asc:"ASCENDING",desc:"DESCENDING"},fN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class pN{constructor(e,t){this.databaseId=e,this.gt=t}}function a0(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qx(n,e){return n.gt?e.toBase64():e.toUint8Array()}function gN(n,e){return a0(n,e.toTimestamp())}function Mi(n){return Ot(!!n),kt.fromTimestamp(function(e){const t=pu(e);return new Gn(t.seconds,t.nanos)}(n))}function p1(n,e){return(t=n,new cn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Jx(n){const e=cn.fromString(n);return Ot(aM(e)),e}function u0(n,e){return p1(n.databaseId,e.path)}function hl(n,e){const t=Jx(e);if(t.get(1)!==n.databaseId.projectId)throw new Fe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Fe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new tt(eM(t))}function g1(n,e){return p1(n.databaseId,e)}function Xx(n){const e=Jx(n);return 4===e.length?cn.emptyPath():eM(e)}function l0(n){return new cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function eM(n){return Ot(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function tM(n,e,t){return{name:u0(n,e),fields:t.value.mapValue.fields}}function nM(n,e,t){const r=hl(n,e.name),i=Mi(e.updateTime),a=new ti({mapValue:{fields:e.fields}}),c=Fn.newFoundDocument(r,i,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function c0(n,e){let t;if(e instanceof q)t={update:tM(n,e.key,e.value)};else if(e instanceof at)t={delete:u0(n,e.key)};else if(e instanceof X)t={update:tM(n,e.key,e.data),updateMask:CN(e.fieldMask)};else{if(!(e instanceof ke))return lt();t={verify:u0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof ap)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof fh)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ph)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof up)return{fieldPath:a.field.canonicalString(),increment:c.yt};throw lt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:gN(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:lt()),t;var i}function m1(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?h.updateTime(Mi(i.updateTime)):void 0!==i.exists?h.exists(i.exists):h.none():h.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let f=null;"setToServerValue"in c?(Ot("REQUEST_TIME"===c.setToServerValue),f=new ap):"appendMissingElements"in c?f=new fh(c.appendMissingElements.values||[]):"removeAllFromArray"in c?f=new ph(c.removeAllFromArray.values||[]):"increment"in c?f=new up(a,c.increment):lt();const m=Ir.fromServerFormat(c.fieldPath);return new o(m,f)}(n,i)):[];var i;if(e.update){const i=hl(n,e.update.name),a=new ti({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Zi((e.updateMask.fieldPaths||[]).map(b=>Ir.fromServerFormat(b)));return new X(i,a,c,t,r)}return new q(i,a,t,r)}if(e.delete){const i=hl(n,e.delete);return new at(i,t)}if(e.verify){const i=hl(n,e.verify);return new ke(i,t)}return lt()}function rM(n,e){return{documents:[g1(n,e.path)]}}function iM(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=g1(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=g1(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0===m.length)return;const b=m.map(I=>function(A){if("=="===A.op){if(Yv(A.value))return{unaryFilter:{field:Km(A.field),op:"IS_NAN"}};if(Nm(A.value))return{unaryFilter:{field:Km(A.field),op:"IS_NULL"}}}else if("!="===A.op){if(Yv(A.value))return{unaryFilter:{field:Km(A.field),op:"IS_NOT_NAN"}};if(Nm(A.value))return{unaryFilter:{field:Km(A.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Km(A.field),op:wN(A.op),value:A.value}}}(I));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(b=>{return{field:Km((I=b).field),direction:bN(I.dir)};var I})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=(b=e.limit,n.gt||rp(b)?b:{value:b});var b,f,m;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function sM(n){let e=Xx(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ot(1===r);const I=t.from[0];I.allDescendants?i=I.collectionId:e=e.child(I.collectionId)}let a=[];t.where&&(a=oM(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(I=>{return new op(Ym((A=I).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let f=null;t.limit&&(f=function(I){let A;return A="object"==typeof I?I.value:I,rp(A)?null:A}(t.limit));let m=null;var I;t.startAt&&(m=new Uo((I=t.startAt).values||[],!!I.before));let b=null;return t.endAt&&(b=function(I){return new Uo(I.values||[],!I.before)}(t.endAt)),cT(e,i,c,a,f,"F",m,b)}function oM(n){return n?void 0!==n.unaryFilter?[TN(n)]:void 0!==n.fieldFilter?[EN(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>oM(e)).reduce((e,t)=>e.concat(t)):lt():[]}function bN(n){return hN[n]}function wN(n){return fN[n]}function Km(n){return{fieldPath:n.canonicalString()}}function Ym(n){return Ir.fromServerFormat(n.fieldPath)}function EN(n){return yi.create(Ym(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(n.fieldFilter.op),n.fieldFilter.value)}function TN(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Ym(n.unaryFilter.field);return yi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ym(n.unaryFilter.field);return yi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ym(n.unaryFilter.field);return yi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ym(n.unaryFilter.field);return yi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}function CN(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function aM(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ks(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=uM(e)),e=IN(n.get(t),e);return uM(e)}function IN(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function uM(n){return n+"\x01\x01"}function fl(n){const e=n.length;if(Ot(e>=2),2===e)return Ot("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),cn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&lt(),n.charAt(c+1)){case"\x01":const f=n.substring(a,c);let m;0===i.length?m=f:(i+=f,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:lt()}a=c+2}return new cn(r)}const lM=["userId","batchId"];function _T(n,e){return[n,ks(e)]}function cM(n,e,t){return[n,ks(e),t]}const SN={},DN=["prefixPath","collectionGroup","readTime","documentId"],AN=["prefixPath","collectionGroup","documentId"],xN=["collectionGroup","readTime","prefixPath","documentId"],MN=["canonicalId","targetId"],ON=["targetId","path"],PN=["path","targetId"],kN=["collectionId","parent"],NN=["indexId","uid"],RN=["uid","sequenceNumber"],FN=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],LN=["indexId","uid","orderedDocumentKey"],UN=["userId","collectionPath","documentId"],VN=["userId","collectionPath","largestBatchId"],BN=["userId","collectionGroup","largestBatchId"],dM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],jN=[...dM,"documentOverlays"],hM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fM=hM,HN=[...fM,"indexConfiguration","indexState","indexEntries"];class y1 extends GS{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Oi(n,e){const t=nt(n);return va.O(t.ie,e)}class _1{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&C(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=D(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=D(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Wm();return this.mutations.forEach(i=>{const a=e.get(i.key),c=a.overlayedDocument;let f=this.applyToLocalView(c,a.mutatedFields);f=t.has(i.key)?null:f;const m=w(c,f);null!==m&&r.set(i.key,m),c.isValidDocument()||c.convertToNoDocument(kt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Jt())}isEqual(e){return this.batchId===e.batchId&&vc(this.mutations,e.mutations,(t,r)=>F(t,r))&&vc(this.baseMutations,e.baseMutations,(t,r)=>F(t,r))}}class v1{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ot(e.mutations.length===r.length);let i=uN;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new v1(e,t,r,i)}}class b1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class gh{constructor(e,t,r,i,a=kt.min(),c=kt.min(),f=Pr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f}withSequenceNumber(e){return new gh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new gh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new gh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class pM{constructor(e){this.re=e}}function gM(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:vT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:u0(i=n.re,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:a0(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:lp(e.version)};else{if(!e.isUnknownDocument())return lt();r.unknownDocument={path:t.path.toArray(),version:lp(e.version)}}var i,a;return r}function vT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function lp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function cp(n){const e=new Gn(n.seconds,n.nanoseconds);return kt.fromTimestamp(e)}function dp(n,e){const t=(e.baseMutations||[]).map(a=>m1(n.re,a));for(let a=0;a<e.mutations.length-1;++a){const c=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(c.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>m1(n.re,a)),i=Gn.fromMillis(e.localWriteTimeMs);return new _1(e.batchId,i,t,r)}function d0(n){const e=cp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?cp(n.lastLimboFreeSnapshotVersion):kt.min();let r;var i;return void 0!==n.query.documents?(Ot(1===(i=n.query).documents.length),r=ds(dh(Xx(i.documents[0])))):r=ds(sM(n.query)),new gh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Pr.fromBase64String(n.resumeToken))}function mM(n,e){const t=lp(e.snapshotVersion),r=lp(e.lastLimboFreeSnapshotVersion);let i;i=Jv(e.target)?rM(n.re,e.target):iM(n.re,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ch(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function w1(n){const e=sM({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?jm(e,e.limit,"L"):e}function E1(n,e){return new b1(e.largestBatchId,m1(n.re,e.overlayMutation))}function yM(n,e){const t=e.path.lastSegment();return[n,ks(e.path.popLast()),t]}function _M(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:lp(r.readTime),documentKey:ks(r.documentKey.path),largestBatchId:r.largestBatchId}}class qN{getBundleMetadata(e,t){return vM(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:cp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return vM(e).put({bundleId:(r=t).id,createTime:lp(Mi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return bM(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:w1(i.bundledQuery),readTime:cp(i.readTime)};var i})}saveNamedQuery(e,t){return bM(e).put({name:(r=t).name,readTime:lp(Mi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function vM(n){return Oi(n,"bundles")}function bM(n){return Oi(n,"namedQueries")}class bT{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new bT(e,t.uid||"")}getOverlay(e,t){return h0(e).get(yM(this.userId,t)).next(r=>r?E1(this.It,r):null)}getOverlays(e,t){const r=co();return he.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,c)=>{const f=new b1(t,c);i.push(this.ue(e,f))}),he.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(ks(c.getCollectionPath())));const a=[];return i.forEach(c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(h0(e).Y("collectionPathOverlayIndex",f))}),he.waitFor(a)}getOverlaysForCollection(e,t,r){const i=co(),a=ks(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return h0(e).W("collectionPathOverlayIndex",c).next(f=>{for(const m of f){const b=E1(this.It,m);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=co();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return h0(e).Z({index:"collectionGroupOverlayIndex",range:f},(m,b,I)=>{const A=E1(this.It,b);a.size()<i||A.largestBatchId===c?(a.set(A.getKey(),A),c=A.largestBatchId):I.done()}).next(()=>a)}ue(e,t){return h0(e).put(function(r,i,a){const[c,f,m]=yM(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:c0(r.re,a.mutation)}}(this.It,this.userId,t))}}function h0(n){return Oi(n,"documentOverlays")}class hp{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(hr(e.integerValue));else if("doubleValue"in e){const r=hr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Mm(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(wc(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?Qv(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):lt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),tt.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function GN(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function wM(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=GN(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}hp.Te=new hp;class ZN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=wM(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=wM(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class zN{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class WN{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class f0{constructor(){this.Be=new ZN,this.Le=new zN(this.Be),this.Ue=new WN(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class fp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new fp(this.indexId,this.documentKey,this.arrayValue,r)}}function pp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=EM(n.arrayValue,e.arrayValue),0!==t?t:(t=EM(n.directionalValue,e.directionalValue),0!==t?t:tt.comparator(n.documentKey,e.documentKey)))}function EM(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class KN{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=eT(e);if(void 0!==t&&!this.ze(t))return!1;const r=oh(e);let i=0,a=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const c=r[i];if(!this.He(this.je,c)||!this.Je(this.Ge[a++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(a>=this.Ge.length||!this.Je(this.Ge[a++],c))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class YN{constructor(){this.Ye=new T1}addToCollectionParentIndex(e,t){return this.Ye.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(Gi.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(Gi.min())}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class T1{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new In(cn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new In(cn.comparator)).toArray()}}const wT=new Uint8Array(0);class QN{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new T1,this.Ze=new Ta(r=>ch(r),(r,i)=>Fm(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:ks(i)};return TM(e).put(a)}return he.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[$v(t),""],!1,!0);return TM(e).W(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(fl(c.parent))}return r})}addFieldIndex(e,t){const r=ET(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var c;delete i.indexId;const a=r.add(i);if(t.indexState){const c=g0(e);return a.next(f=>{c.put(_M(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=ET(e),i=g0(e),a=p0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=p0(e);let i=!0;const a=new Map;return he.forEach(this.tn(t),c=>this.en(e,c).next(f=>{i&&(i=!!f),a.set(c,f)})).next(()=>{if(i){let c=Jt();const f=[];return he.forEach(a,(m,b)=>{var I;Ve("IndexedDbIndexManager",`Using index ${I=m,`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(st=>`${st.fieldPath}:${st.kind}`).join(",")}`} to execute ${ch(t)}`);const A=function(st,Qe){const Tt=eT(Qe);if(void 0===Tt)return null;for(const At of Lm(st,Tt.fieldPath))switch(At.op){case"array-contains-any":return At.value.arrayValue.values||[];case"array-contains":return[At.value]}return null}(b,m),R=function(st,Qe){const Tt=new Map;for(const At of oh(Qe))for(const nn of Lm(st,At.fieldPath))switch(nn.op){case"==":case"in":Tt.set(At.fieldPath.canonicalString(),nn.value);break;case"not-in":case"!=":return Tt.set(At.fieldPath.canonicalString(),nn.value),Array.from(Tt.values())}return null}(b,m),L=function(st,Qe){const Tt=[];let At=!0;for(const nn of oh(Qe)){const $r=0===nn.kind?sp(st,nn.fieldPath,st.startAt):aT(st,nn.fieldPath,st.startAt);Tt.push($r.value),At&&(At=$r.inclusive)}return new Uo(Tt,At)}(b,m),j=function(st,Qe){const Tt=[];let At=!0;for(const nn of oh(Qe)){const $r=0===nn.kind?aT(st,nn.fieldPath,st.endAt):sp(st,nn.fieldPath,st.endAt);Tt.push($r.value),At&&(At=$r.inclusive)}return new Uo(Tt,At)}(b,m),oe=this.nn(m,b,L),be=this.nn(m,b,j),$e=this.sn(m,b,R),rt=this.rn(m.indexId,A,oe,L.inclusive,be,j.inclusive,$e);return he.forEach(rt,st=>r.J(st,t.limit).next(Qe=>{Qe.forEach(Tt=>{const At=tt.fromSegments(Tt.documentKey);c.has(At)||(c=c.add(At),f.push(At))})}))}).next(()=>f)}return he.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,a,c,f){const m=(null!=t?t.length:1)*Math.max(r.length,a.length),b=m/(null!=t?t.length:1),I=[];for(let A=0;A<m;++A){const R=t?this.on(t[A/b]):wT,L=this.un(e,R,r[A%b],i),j=this.cn(e,R,a[A%b],c),oe=f.map(be=>this.un(e,R,be,!0));I.push(...this.createRange(L,j,oe))}return I}un(e,t,r,i){const a=new fp(e,tt.empty(),t,r);return i?a:a.Ke()}cn(e,t,r,i){const a=new fp(e,tt.empty(),t,r);return i?a.Ke():a}en(e,t){const r=new KN(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let c=null;for(const f of a)r.We(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c})}getIndexType(e,t){let r=2;return he.forEach(this.tn(t),i=>this.en(e,i).next(a=>{a?0!==r&&a.fields.length<function(c){let f=new In(Ir.comparator),m=!1;for(const b of c.filters){const I=b;I.field.isKeyField()||("array-contains"===I.op||"array-contains-any"===I.op?m=!0:f=f.add(I.field))}for(const b of c.orderBy)b.field.isKeyField()||(f=f.add(b.field));return f.size+(m?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new f0;for(const i of oh(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.qe(i.kind);hp.Te.ce(a,c)}return r.$e()}on(e){const t=new f0;return hp.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new f0;return hp.Te.ce(Cc(this.databaseId,t),r.qe(function(i){const a=oh(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new f0);let a=0;for(const c of oh(e)){const f=r[a++];for(const m of i)if(this.ln(t,c.fieldPath)&&Ic(f))i=this.fn(i,c,f);else{const b=m.qe(c.kind);hp.Te.ce(f,b)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],a=[];for(const c of r.arrayValue.values||[])for(const f of i){const m=new f0;m.seed(f.$e()),hp.Te.ce(c,m.qe(t.kind)),a.push(m)}return a}ln(e,t){return!!e.filters.find(r=>r instanceof yi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=ET(e),i=g0(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const c=[];return he.forEach(a,f=>i.get([f.indexId,this.uid]).next(m=>{c.push(function(b,I){const A=I?new ul(I.sequenceNumber,new Gi(cp(I.readTime),new tt(fl(I.documentKey)),I.largestBatchId)):ul.empty(),R=b.fields.map(([L,j])=>new Gv(Ir.fromServerFormat(L),j));return new qv(b.indexId,b.collectionGroup,R,A)}(f,m))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Lt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=ET(e),a=g0(e);return this._n(e).next(c=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>he.forEach(f,m=>a.put(_M(m.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return he.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?he.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),he.forEach(f,m=>this.wn(e,i,m).next(b=>{const I=this.mn(a,m);return b.isEqual(I)?he.resolve():this.gn(e,a,m,b,I)}))))})}yn(e,t,r,i){return p0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return p0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=p0(e);let a=new In(pp);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(c,f)=>{a=a.add(new fp(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}mn(e,t){let r=new In(pp);const i=this.an(t,e);if(null==i)return r;const a=eT(t);if(null!=a){const c=e.data.field(a.fieldPath);if(Ic(c))for(const f of c.arrayValue.values||[])r=r.add(new fp(t.indexId,e.key,this.on(f),i))}else r=r.add(new fp(t.indexId,e.key,wT,i));return r}gn(e,t,r,i,a){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(f,m,b,I,A){const R=f.getIterator(),L=m.getIterator();let j=uh(R),oe=uh(L);for(;j||oe;){let be=!1,$e=!1;if(j&&oe){const rt=b(j,oe);rt<0?$e=!0:rt>0&&(be=!0)}else null!=j?$e=!0:be=!0;be?(I(oe),oe=uh(L)):$e?(A(j),j=uh(R)):(j=uh(R),oe=uh(L))}}(i,a,pp,f=>{c.push(this.yn(e,t,r,f))},f=>{c.push(this.pn(e,t,r,f))}),he.waitFor(c)}_n(e){let t=1;return g0(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,f)=>pp(c,f)).filter((c,f,m)=>!f||0!==pp(c,m[f-1]));const i=[];i.push(e);for(const c of r){const f=pp(c,e),m=pp(c,t);if(0===f)i[0]=e.Ke();else if(f>0&&m<0)i.push(c),i.push(c.Ke());else if(m>0)break}i.push(t);const a=[];for(let c=0;c<i.length;c+=2)a.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,wT,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,wT,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(CM)}getMinOffset(e,t){return he.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||lt())).next(CM)}}function TM(n){return Oi(n,"collectionParents")}function p0(n){return Oi(n,"indexEntries")}function ET(n){return Oi(n,"indexConfiguration")}function g0(n){return Oi(n,"indexState")}function CM(n){Ot(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Sm(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Gi(e.readTime,e.documentKey,t)}const IM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ho{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ho(e,ho.DEFAULT_COLLECTION_PERCENTILE,ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function SM(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],c=IDBKeyRange.only(t.batchId);let f=0;const m=r.Z({range:c},(I,A,R)=>(f++,R.delete()));a.push(m.next(()=>{Ot(1===f)}));const b=[];for(const I of t.mutations){const A=cM(e,I.key.path,t.batchId);a.push(i.delete(A)),b.push(I.key)}return he.waitFor(a).next(()=>b)}function TT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw lt();e=n.noDocument}return JSON.stringify(e).length}ho.DEFAULT_COLLECTION_PERCENTILE=10,ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ho.DEFAULT=new ho(41943040,ho.DEFAULT_COLLECTION_PERCENTILE,ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ho.DISABLED=new ho(-1,0,0);class CT{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Ot(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new CT(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return mh(e).Z({index:"userMutationsIndex",range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Qm(e),c=mh(e);return c.add({}).next(f=>{Ot("number"==typeof f);const m=new _1(f,t,r,i),b=function(R,L,j){const oe=j.baseMutations.map($e=>c0(R.re,$e)),be=j.mutations.map($e=>c0(R.re,$e));return{userId:L,batchId:j.batchId,localWriteTimeMs:j.localWriteTime.toMillis(),baseMutations:oe,mutations:be}}(this.It,this.userId,m),I=[];let A=new In((R,L)=>Lt(R.canonicalString(),L.canonicalString()));for(const R of i){const L=cM(this.userId,R.key.path,f);A=A.add(R.key.path.popLast()),I.push(c.put(b)),I.push(a.put(L,SN))}return A.forEach(R=>{I.push(this.indexManager.addToCollectionParentIndex(e,R))}),e.addOnCommittedListener(()=>{this.In[f]=m.keys()}),he.waitFor(I).next(()=>m)})}lookupMutationBatch(e,t){return mh(e).get(t).next(r=>r?(Ot(r.userId===this.userId),dp(this.It,r)):null)}Tn(e,t){return this.In[t]?he.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return mh(e).Z({index:"userMutationsIndex",range:i},(c,f,m)=>{f.userId===this.userId&&(Ot(f.batchId>=r),a=dp(this.It,f)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return mh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return mh(e).W("userMutationsIndex",t).next(r=>r.map(i=>dp(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=_T(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Qm(e).Z({range:i},(c,f,m)=>{const[b,I,A]=c,R=fl(I);if(b===this.userId&&t.path.isEqual(R))return mh(e).get(A).next(L=>{if(!L)throw lt();Ot(L.userId===this.userId),a.push(dp(this.It,L))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(Lt);const i=[];return t.forEach(a=>{const c=_T(this.userId,a.path),f=IDBKeyRange.lowerBound(c),m=Qm(e).Z({range:f},(b,I,A)=>{const[R,L,j]=b,oe=fl(L);R===this.userId&&a.path.isEqual(oe)?r=r.add(j):A.done()});i.push(m)}),he.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=_T(this.userId,r),c=IDBKeyRange.lowerBound(a);let f=new In(Lt);return Qm(e).Z({range:c},(m,b,I)=>{const[A,R,L]=m,j=fl(R);A===this.userId&&r.isPrefixOf(j)?j.length===i&&(f=f.add(L)):I.done()}).next(()=>this.En(e,f))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(mh(e).get(a).next(c=>{if(null===c)throw lt();Ot(c.userId===this.userId),r.push(dp(this.It,c))}))}),he.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return SM(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),he.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return he.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Qm(e).Z({range:r},(a,c,f)=>{if(a[0]===this.userId){const m=fl(a[1]);i.push(m)}else f.done()}).next(()=>{Ot(0===i.length)})})}containsKey(e,t){return DM(e,this.userId,t)}Rn(e){return AM(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function DM(n,e,t){const r=_T(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return Qm(n).Z({range:a,X:!0},(f,m,b)=>{const[I,A,R]=f;I===e&&A===i&&(c=!0),b.done()}).next(()=>c)}function mh(n){return Oi(n,"mutations")}function Qm(n){return Oi(n,"documentMutations")}function AM(n){return Oi(n,"mutationQueues")}class gp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new gp(0)}static vn(){return new gp(-1)}}class JN{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new gp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>kt.fromTimestamp(new Gn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Jm(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Ot(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Jm(e).Z((c,f)=>{const m=d0(f);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>he.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Jm(e).Z((r,i)=>{const a=d0(i);t(a)})}Vn(e){return xM(e).get("targetGlobalKey").next(t=>(Ot(null!==t),t))}Sn(e,t){return xM(e).put("targetGlobalKey",t)}Dn(e,t){return Jm(e).put(mM(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ch(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Jm(e).Z({range:i,index:"queryTargetsIndex"},(c,f,m)=>{const b=d0(f);Fm(t,b.target)&&(a=b,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=yh(e);return t.forEach(c=>{const f=ks(c.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,c))}),he.waitFor(i)}removeMatchingKeys(e,t,r){const i=yh(e);return he.forEach(t,a=>{const c=ks(a.path);return he.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=yh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=yh(e);let a=Jt();return i.Z({range:r,X:!0},(c,f,m)=>{const b=fl(c[1]),I=new tt(b);a=a.add(I)}).next(()=>a)}containsKey(e,t){const r=ks(t.path),i=IDBKeyRange.bound([r],[$v(r)],!1,!0);let a=0;return yh(e).Z({index:"documentTargetsIndex",X:!0,range:i},([c,f],m,b)=>{0!==c&&(a++,b.done())}).next(()=>a>0)}se(e,t){return Jm(e).get(t).next(r=>r?d0(r):null)}}function Jm(n){return Oi(n,"targets")}function xM(n){return Oi(n,"targetGlobal")}function yh(n){return Oi(n,"targetDocuments")}function MM([n,e],[t,r]){const i=Lt(n,t);return 0===i?Lt(e,r):i}class XN{constructor(e){this.xn=e,this.buffer=new In(MM),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();MM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class eR{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;Ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,we.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){ba(r)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield _a(r)}yield t.Fn(3e5)}))}}class tR{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return he.resolve(ls.at);const r=new XN(t);return this.$n.forEachTarget(e,i=>r.Mn(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.Mn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(IM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),IM):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,a,c,f,m,b;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),i=this.params.maximumSequenceNumbersToCollect):i=A,c=Date.now(),this.nthSequenceNumber(e,i))).next(A=>(r=A,f=Date.now(),this.removeTargets(e,r,t))).next(A=>(a=A,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(b=Date.now(),Cm()<=nl.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-I}ms\n\tDetermined least recently used ${i} in `+(f-c)+`ms\n\tRemoved ${a} targets in `+(m-f)+`ms\n\tRemoved ${A} documents in `+(b-m)+`ms\nTotal Duration: ${b-I}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:A})))}}class nR{constructor(e,t){this.db=e,this.garbageCollector=new tR(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return IT(e,r)}removeReference(e,t,r){return IT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return IT(e,t)}Gn(e,t){return function(r,i){let a=!1;return AM(r).tt(c=>DM(r,c,i).next(f=>(f&&(a=!0),he.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(c,f)=>{if(f<=t){const m=this.Gn(e,c).next(b=>{if(!b)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,kt.min()),yh(e).delete([0,ks(c.path)])))});i.push(m)}}).next(()=>he.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return IT(e,t)}Kn(e,t){const r=yh(e);let i,a=ls.at;return r.Z({index:"documentTargetsIndex"},([c,f],{path:m,sequenceNumber:b})=>{0===c?(a!==ls.at&&t(new tt(fl(i)),a),a=b,i=m):a=ls.at}).next(()=>{a!==ls.at&&t(new tt(fl(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function IT(n,e){return yh(n).put((r=n.currentSequenceNumber,{targetId:0,path:ks(e.path),sequenceNumber:r}));var r}class OM{constructor(){this.changes=new Ta(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class rR{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return mp(e).put(r)}removeEntry(e,t,r){return mp(e).delete(function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],vT(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Fn.newInvalidDocument(t);return mp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(m0(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:Fn.newInvalidDocument(t)};return mp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(m0(t))},(i,a)=>{r={document:this.jn(t,a),size:TT(a)}}).next(()=>r)}getEntries(e,t){let r=xi();return this.zn(e,t,(i,a)=>{const c=this.jn(i,a);r=r.insert(i,c)}).next(()=>r)}Hn(e,t){let r=xi(),i=new dr(tt.comparator);return this.zn(e,t,(a,c)=>{const f=this.jn(a,c);r=r.insert(a,f),i=i.insert(a,TT(c))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return he.resolve();let i=new In(RM);t.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound(m0(i.first()),m0(i.last())),c=i.getIterator();let f=c.getNext();return mp(e).Z({index:"documentKeyIndex",range:a},(m,b,I)=>{const A=tt.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;f&&RM(f,A)<0;)r(f,null),f=c.getNext();f&&f.isEqual(A)&&(r(f,b),f=c.hasNext()?c.getNext():null),f?I.j(m0(f)):I.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),vT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return mp(e).W(IDBKeyRange.bound(i,a,!0)).next(c=>{let f=xi();for(const m of c){const b=this.jn(tt.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);f=f.insert(b.key,b)}return f})}getAllFromCollectionGroup(e,t,r,i){let a=xi();const c=NM(t,r),f=NM(t,Gi.max());return mp(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,f,!0)},(m,b,I)=>{const A=this.jn(tt.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);a=a.insert(A.key,A),a.size===i&&I.done()}).next(()=>a)}newChangeBuffer(e){return new iR(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return kM(e).get("remoteDocumentGlobalKey").next(t=>(Ot(!!t),t))}Qn(e,t){return kM(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function $N(n,e){let t;if(e.document)t=nM(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=tt.fromSegments(e.noDocument.path),i=cp(e.noDocument.readTime);t=Fn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return lt();{const r=tt.fromSegments(e.unknownDocument.path),i=cp(e.unknownDocument.version);t=Fn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Gn(r[0],r[1]);return kt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(kt.min()))return r}return Fn.newInvalidDocument(e)}}function PM(n){return new rR(n)}class iR extends OM{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Ta(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new In((a,c)=>Lt(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const f=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,f.readTime)),c.isValidDocument()){const m=gM(this.Yn.It,c);i=i.add(a.path.popLast()),r+=TT(m)-f.size,t.push(this.Yn.addEntry(e,a,m))}else if(r-=f.size,this.trackRemovals){const m=gM(this.Yn.It,c.convertToNoDocument(kt.min()));t.push(this.Yn.addEntry(e,a,m))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),he.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,c)=>{this.Xn.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function kM(n){return Oi(n,"remoteDocumentGlobal")}function mp(n){return Oi(n,"remoteDocumentsV14")}function m0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function NM(n,e){const t=e.documentKey.path.toArray();return[n,vT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function RM(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Lt(t[a],r[a]),i)return i;return i=Lt(t.length,r.length),i||(i=Lt(t[t.length-2],r[r.length-2]),i||Lt(t[t.length-1],r[r.length-1]))}class sR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class FM{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&D(r.mutation,i,Zi.empty(),Gn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Jt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Jt()){const i=co();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let c=Ac();return a.forEach((f,m)=>{c=c.insert(f,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=co();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Jt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,r,i){let a=xi();const c=xc(),f=xc();return t.forEach((m,b)=>{const I=r.get(b.key);i.has(b.key)&&(void 0===I||I.mutation instanceof X)?a=a.insert(b.key,b):void 0!==I&&(c.set(b.key,I.mutation.getFieldMask()),D(I.mutation,b,I.mutation.getFieldMask(),Gn.now()))}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((b,I)=>c.set(b,I)),t.forEach((b,I)=>{var A;return f.set(b,new sR(I,null!==(A=c.get(b))&&void 0!==A?A:null))}),f))}recalculateAndSaveOverlays(e,t){const r=xc();let i=new dr((c,f)=>c-f),a=Jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(m=>{const b=t.get(m);if(null===b)return;let I=r.get(m)||Zi.empty();I=f.applyToLocalView(b,I),r.set(m,I);const A=(i.get(f.batchId)||Jt()).add(m);i=i.insert(f.batchId,A)})}).next(()=>{const c=[],f=i.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),b=m.key,I=m.value,A=Wm();I.forEach(R=>{if(!a.has(R)){const L=w(t.get(R),r.get(R));null!==L&&A.set(R,L),a=a.add(R)}}),c.push(this.documentOverlayCache.saveOverlays(e,b,A))}return he.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return tt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Bm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):he.resolve(co());let f=-1,m=a;return c.next(b=>he.forEach(b,(I,A)=>(f<A.largestBatchId&&(f=A.largestBatchId),a.get(I)?he.resolve():this.getBaseDocument(e,I,A).next(R=>{m=m.insert(I,R)}))).next(()=>this.populateOverlays(e,b,a)).next(()=>this.computeViews(e,m,b,Jt())).next(I=>({batchId:f,changes:zm(I)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new tt(t)).next(r=>{let i=Ac();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Ac();return this.indexManager.getCollectionParents(e,i).next(c=>he.forEach(c,f=>{const m=(b=t,I=f.child(i),new Ea(I,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,I;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(b=>{b.forEach((I,A)=>{a=a.insert(I,A)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((f,m)=>{const b=m.getKey();null===i.get(b)&&(i=i.insert(b,Fn.newInvalidDocument(b)))});let c=Ac();return i.forEach((f,m)=>{const b=a.get(f);void 0!==b&&D(b.mutation,m,Zi.empty(),Gn.now()),$m(t,m)&&(c=c.insert(f,m))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):he.resolve(Fn.newInvalidDocument(t))}}class oR{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return he.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Mi(r.createTime)}),he.resolve()}getNamedQuery(e,t){return he.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:w1(r.bundledQuery),readTime:Mi(r.readTime)}),he.resolve();var r}}class aR{constructor(){this.overlays=new dr(tt.comparator),this.es=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const r=co();return he.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ue(e,t,a)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const i=co(),a=t.length+1,c=new tt(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,b=m.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return he.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new dr((b,I)=>b-I);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let I=a.get(b.largestBatchId);null===I&&(I=co(),a=a.insert(b.largestBatchId,I)),I.set(b.getKey(),b)}}const f=co(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((b,I)=>f.set(b,I)),!(f.size()>=i)););return he.resolve(f)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new b1(t,r));let a=this.es.get(t);void 0===a&&(a=Jt(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class C1{constructor(){this.ns=new In(Pi.ss),this.rs=new In(Pi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Pi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Pi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new tt(new cn([])),r=new Pi(t,e),i=new Pi(t,e+1),a=[];return this.rs.forEachInRange([r,i],c=>{this.cs(c),a.push(c.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new tt(new cn([])),r=new Pi(t,e),i=new Pi(t,e+1);let a=Jt();return this.rs.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Pi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Pi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return tt.comparator(e.key,t.key)||Lt(e._s,t._s)}static os(e,t){return Lt(e._s,t._s)||tt.comparator(e.key,t.key)}}class uR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new In(Pi.ss)}checkEmpty(e){return he.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const c=new _1(a,t,r,i);this.mutationQueue.push(c);for(const f of i)this.gs=this.gs.add(new Pi(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return he.resolve(c)}lookupMutationBatch(e,t){return he.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return he.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Pi(t,0),i=new Pi(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],c=>{const f=this.ys(c._s);a.push(f)}),he.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(Lt);return t.forEach(i=>{const a=new Pi(i,0),c=new Pi(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,c],f=>{r=r.add(f._s)})}),he.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;tt.isDocumentKey(a)||(a=a.child(""));const c=new Pi(new tt(a),0);let f=new In(Lt);return this.gs.forEachWhile(m=>{const b=m.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(f=f.add(m._s)),!0)},c),he.resolve(this.Is(f))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ot(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return he.forEach(t.mutations,i=>{const a=new Pi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Pi(t,0),i=this.gs.firstAfterOrEqual(r);return he.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return he.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class lR{constructor(e){this.Es=e,this.docs=new dr(tt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():Fn.newInvalidDocument(t))}getEntries(e,t){let r=xi();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Fn.newInvalidDocument(i))}),he.resolve(r)}getAllFromCollection(e,t,r){let i=xi();const a=new tt(t.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:f,value:{document:m}}=c.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||Sm(Zv(m),r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return he.resolve(i)}getAllFromCollectionGroup(e,t,r,i){lt()}As(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new cR(this)}getSize(e){return he.resolve(this.size)}}class cR extends OM{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class dR{constructor(e){this.persistence=e,this.Rs=new Ta(t=>ch(t),Fm),this.lastRemoteSnapshotVersion=kt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new C1,this.targetCount=0,this.vs=gp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),he.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new gp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.Dn(t),he.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((c,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Rs.delete(c),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),he.waitFor(a).next(()=>i)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),he.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.Ps.containsKey(t))}}class LM{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new ls(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new dR(this),this.indexManager=new YN,this.remoteDocumentCache=new lR(r=>this.referenceDelegate.xs(r)),this.It=new pM(t),this.Ns=new oR(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new aR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new uR(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const i=new hR(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Ms(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Os(e,t){return he.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class hR extends GS{constructor(e){super(),this.currentSequenceNumber=e}}class ST{constructor(e){this.persistence=e,this.Fs=new C1,this.$s=null}static Bs(e){return new ST(e)}get Ls(){if(this.$s)return this.$s;throw lt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),he.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Ls,r=>{const i=tt.fromPath(r);return this.Us(e,i).next(a=>{a||t.removeEntry(i,kt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return he.or([()=>he.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class fR{constructor(e){this.It=e}$(e,t,r,i){const a=new tp("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",lM,{unique:!0}),f.createObjectStore("documentMutations"),UM(e),function(f){f.createObjectStore("remoteDocuments")}(e));let c=he.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),UM(e)),c=c.next(()=>function(f){const m=f.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:kt.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",b)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(f,m){return m.store("mutations").W().next(b=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",lM,{unique:!0});const I=m.store("mutations"),A=b.map(R=>I.put(R));return he.waitFor(A)})}(e,a))),c=c.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.qs(a))),r<6&&i>=6&&(c=c.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(c=c.next(()=>this.Gs(a))),r<8&&i>=8&&(c=c.next(()=>this.Qs(e,a))),r<9&&i>=9&&(c=c.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.js(a))),r<11&&i>=11&&(c=c.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(f){const m=f.createObjectStore("documentOverlays",{keyPath:UN});m.createIndex("collectionPathOverlayIndex",VN,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",BN,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:DN});m.createIndex("documentKeyIndex",AN),m.createIndex("collectionGroupIndex",xN)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.zs(e,a))),r<15&&i>=15&&(c=c.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:NN}).createIndex("sequenceNumberIndex",RN,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:FN}).createIndex("documentKeyIndex",LN,{unique:!1})}(e))),c}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=TT(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>he.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(f=>he.forEach(f,m=>{Ot(m.userId===a.userId);const b=dp(this.It,m);return SM(e,a.userId,b).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((c,f)=>{const m=new cn(c),b=[0,ks(m)];a.push(t.get(b).next(I=>I?he.resolve():t.put({targetId:0,path:ks(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>he.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:kN});const r=t.store("collectionParents"),i=new T1,a=c=>{if(i.add(c)){const f=c.lastSegment(),m=c.popLast();return r.put({collectionId:f,parent:ks(m)})}};return t.store("remoteDocuments").Z({X:!0},(c,f)=>{const m=new cn(c);return a(m.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([c,f,m],b)=>{const I=fl(f);return a(I.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=d0(i),c=mM(this.It,a);return t.put(c)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,c)=>{const f=t.store("remoteDocumentsV14"),m=(b=c,b.document?new tt(cn.fromString(b.document.name).popFirst(5)):b.noDocument?tt.fromSegments(b.noDocument.path):b.unknownDocument?tt.fromSegments(b.unknownDocument.path):lt()).path.toArray();var b;const I={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(f.put(I))}).next(()=>he.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=PM(this.It),a=new LM(ST.Bs,this.It.re);return r.W().next(c=>{const f=new Map;return c.forEach(m=>{var b;let I=null!==(b=f.get(m.userId))&&void 0!==b?b:Jt();dp(this.It,m).keys().forEach(A=>I=I.add(A)),f.set(m.userId,I)}),he.forEach(f,(m,b)=>{const I=new ei(b),A=bT.oe(this.It,I),R=a.getIndexManager(I),L=CT.oe(I,this.It,R,a.referenceDelegate);return new FM(i,L,A,R).recalculateAndSaveOverlaysForDocumentKeys(new y1(t,ls.at),m).next()})})}}function UM(n){n.createObjectStore("targetDocuments",{keyPath:ON}).createIndex("documentTargetsIndex",PN,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",MN,{unique:!0}),n.createObjectStore("targetGlobal")}const I1="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class S1{constructor(e,t,r,i,a,c,f,m,b,I,A=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=c,this.document=f,this.Js=b,this.Ys=I,this.Xs=A,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=R=>Promise.resolve(),!S1.C())throw new Fe(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nR(this,i),this.ii=t+"main",this.It=new pM(m),this.ri=new va(this.ii,this.Xs,new fR(this.It)),this.Cs=new JN(this.referenceDelegate,this.It),this.remoteDocumentCache=PM(this.It),this.Ns=new qN,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===I&&Or("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Fe(fe.FAILED_PRECONDITION,I1);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new ls(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,we.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,we.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,we.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>DT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(ba(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return y0(e).get("owner").next(t=>he.resolve(this.mi(t)))}gi(e){return DT(e).delete(this.clientId)}yi(){var e=this;return(0,we.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Oi(r,"clientMetadata");return i.W().next(a=>{const c=e.Ii(a,18e5),f=a.filter(m=>-1===c.indexOf(m));return he.forEach(f,m=>i.delete(m.clientId)).next(()=>f)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?he.resolve(!0):y0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Fe(fe.FAILED_PRECONDITION,I1);return!1}}return!(!this.networkEnabled||!this.inForeground)||DT(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,we.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new y1(t,ls.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>DT(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return CT.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new QN(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return bT.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(c=this.Xs)?HN:14===c?fM:13===c?hM:12===c?jN:11===c?dM:void lt();var c;let f;return this.ri.runTransaction(e,i,a,m=>(f=new y1(m,this.Ss?this.Ss.next():ls.at),"readwrite-primary"===t?this.fi(f).next(b=>!!b||this.di(f)).next(b=>{if(!b)throw Or(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Fe(fe.FAILED_PRECONDITION,zv);return r(f)}).next(b=>this.wi(f).next(()=>b)):this.Vi(f).next(()=>r(f)))).then(m=>(f.raiseOnCommittedEvent(),m))}Vi(e){return y0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Fe(fe.FAILED_PRECONDITION,I1)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return y0(e).put("owner",t)}static C(){return va.C()}_i(e){const t=y0(e);return t.get("owner").next(r=>this.mi(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):he.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Or(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Gt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Or("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Or("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function y0(n){return Oi(n,"owner")}function DT(n){return Oi(n,"clientMetadata")}function D1(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class A1{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Jt(),i=Jt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new A1(e,t.fromCache,r,i)}}class VM{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Mi(e,t,i,r)).next(a=>a||this.Oi(e,t))}ki(e,t){if(dT(t))return he.resolve(null);let r=ds(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=jm(t,null,"F"),r=ds(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=Jt(...a);return this.Ni.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,r).next(m=>{const b=this.Fi(t,f);return this.$i(t,b,c,m.readTime)?this.ki(e,jm(t,null,"F")):this.Bi(e,b,t,m)}))})))}Mi(e,t,r,i){return dT(t)||i.isEqual(kt.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(a=>{const c=this.Fi(t,a);return this.$i(t,c,r,i)?this.Oi(e,t):(Cm()<=nl.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hT(t)),this.Bi(e,c,t,qS(i,-1)))})}Fi(e,t){let r=new In(fT(e));return t.forEach((i,a)=>{$m(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Oi(e,t){return Cm()<=nl.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",hT(t)),this.Ni.getDocumentsMatchingQuery(e,t,Gi.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}class pR{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new dr(Lt),this.qi=new Ta(a=>ch(a),Fm),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FM(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function BM(n,e,t,r){return new pR(n,e,t,r)}function jM(n,e){return x1.apply(this,arguments)}function x1(){return x1=(0,we.Z)(function*(n,e){const t=nt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],f=[];let m=Jt();for(const b of i){c.push(b.batchId);for(const I of b.mutations)m=m.add(I.key)}for(const b of a){f.push(b.batchId);for(const I of b.mutations)m=m.add(I.key)}return t.localDocuments.getDocuments(r,m).next(b=>({ji:b,removedBatchIds:c,addedBatchIds:f}))})})}),x1.apply(this,arguments)}function gR(n,e){const t=nt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(c,f,m,b){const I=m.batch,A=I.keys();let R=he.resolve();return A.forEach(L=>{R=R.next(()=>b.getEntry(f,L)).next(j=>{const oe=m.docVersions.get(L);Ot(null!==oe),j.version.compareTo(oe)<0&&(I.applyToRemoteDocument(j,m),j.isValidDocument()&&(j.setReadTime(m.commitVersion),b.addEntry(j)))})}),R.next(()=>c.mutationQueue.removeMutationBatch(f,I))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let f=Jt();for(let m=0;m<c.mutationResults.length;++m)c.mutationResults[m].transformResults.length>0&&(f=f.add(c.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function HM(n){const e=nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function mR(n,e){const t=nt(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const f=[];e.targetChanges.forEach((I,A)=>{const R=i.get(A);if(!R)return;f.push(t.Cs.removeMatchingKeys(a,I.removedDocuments,A).next(()=>t.Cs.addMatchingKeys(a,I.addedDocuments,A)));let L=R.withSequenceNumber(a.currentSequenceNumber);var j,oe,be;e.targetMismatches.has(A)?L=L.withResumeToken(Pr.EMPTY_BYTE_STRING,kt.min()).withLastLimboFreeSnapshotVersion(kt.min()):I.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(I.resumeToken,r)),i=i.insert(A,L),oe=L,be=I,(0===(j=R).resumeToken.approximateByteSize()||oe.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8||be.addedDocuments.size+be.modifiedDocuments.size+be.removedDocuments.size>0)&&f.push(t.Cs.updateTargetData(a,L))});let m=xi(),b=Jt();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,I))}),f.push($M(a,c,e.documentUpdates).next(I=>{m=I.Wi,b=I.zi})),!r.isEqual(kt.min())){const I=t.Cs.getLastRemoteSnapshotVersion(a).next(A=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(I)}return he.waitFor(f).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,m,b)).next(()=>m)}).then(a=>(t.Ui=i,a))}function $M(n,e,t){let r=Jt(),i=Jt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=xi();return t.forEach((f,m)=>{const b=a.get(f);m.isFoundDocument()!==b.isFoundDocument()&&(i=i.add(f)),m.isNoDocument()&&m.version.isEqual(kt.min())?(e.removeEntry(f,m.readTime),c=c.insert(f,m)):!b.isValidDocument()||m.version.compareTo(b.version)>0||0===m.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(m),c=c.insert(f,m)):Ve("LocalStore","Ignoring outdated watch update for ",f,". Current version:",b.version," Watch version:",m.version)}),{Wi:c,zi:i}})}function yR(n,e){const t=nt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Xm(n,e){const t=nt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,he.resolve(i)):t.Cs.allocateTargetId(r).next(c=>(i=new gh(e,c,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function ey(n,e,t){return M1.apply(this,arguments)}function M1(){return M1=(0,we.Z)(function*(n,e,t){const r=nt(n),i=r.Ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!ba(c))throw c;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),M1.apply(this,arguments)}function AT(n,e,t){const r=nt(n);let i=kt.min(),a=Jt();return r.persistence.runTransaction("Execute query","readonly",c=>function(f,m,b){const I=nt(f),A=I.qi.get(b);return void 0!==A?he.resolve(I.Ui.get(A)):I.Cs.getTargetData(m,b)}(r,c,ds(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(c,f.targetId).next(m=>{a=m})}).next(()=>r.Li.getDocumentsMatchingQuery(c,e,t?i:kt.min(),t?a:Jt())).next(f=>(ZM(r,qm(e),f),{documents:f,Hi:a})))}function qM(n,e){const t=nt(n),r=nt(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.se(a,e).next(c=>c?c.target:null))}function GM(n,e){const t=nt(n),r=t.Ki.get(e)||kt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,qS(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(ZM(t,e,i),i))}function ZM(n,e,t){let r=kt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function O1(){return O1=(0,we.Z)(function*(n,e,t,r){const i=nt(n);let a=Jt(),c=xi();for(const b of t){const I=e.Ji(b.metadata.name);b.document&&(a=a.add(I));const A=e.Yi(b);A.setReadTime(e.Xi(b.metadata.readTime)),c=c.insert(I,A)}const f=i.Gi.newChangeBuffer({trackRemovals:!0}),m=yield Xm(i,(b=r,ds(dh(cn.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>$M(b,f,c).next(I=>(f.apply(b),I)).next(I=>i.Cs.removeMatchingKeysForTargetId(b,m.targetId).next(()=>i.Cs.addMatchingKeys(b,a,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(b,I.Wi,I.zi)).next(()=>I.Wi)))}),O1.apply(this,arguments)}function vR(n,e){return P1.apply(this,arguments)}function P1(){return P1=(0,we.Z)(function*(n,e,t=Jt()){const r=yield Xm(n,ds(w1(e.bundledQuery))),i=nt(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=Mi(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ns.saveNamedQuery(a,e);const f=r.withResumeToken(Pr.EMPTY_BYTE_STRING,c);return i.Ui=i.Ui.insert(f.targetId,f),i.Cs.updateTargetData(a,f).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),P1.apply(this,arguments)}function zM(n,e){return`firestore_clients_${n}_${e}`}function WM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function k1(n,e){return`firestore_targets_${n}_${e}`}class xT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new Fe(i.error.code,i.error.message))),c?new xT(e,t,i.state,a):(Or("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Fe(r.error.code,r.error.message))),a?new _0(e,r.state,i):(Or("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class MT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=mT();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=sT(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new MT(e,a):(Or("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class N1{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new N1(t.clientId,t.onlineState):(Or("SharedClientState",`Failed to parse online state: ${e}`),null)}}class R1{constructor(){this.activeTargetIds=mT()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class F1{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new dr(Lt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=zM(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new R1),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,we.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(zM(e.persistenceKey,i));if(a){const c=MT.Zi(i,a);c&&(e.ur=e.ur.insert(c.clientId,c))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(k1(this.persistenceKey,e));if(r){const i=_0.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(k1(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Or("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,we.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let c=ls.at;if(null!=a)try{const f=JSON.parse(a);Ot("number"==typeof f),c=f}catch(f){Or("SharedClientState","Failed to read sequence number from WebStorage",f)}return c}(r.newValue);i!==ls.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Mr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Or(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new xT(this.currentUser,e,t,r),a=WM(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=WM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=k1(this.persistenceKey,e),a=new _0(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return MT.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return xT.Zi(new ei(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return _0.Zi(i,t)}yr(e){return N1.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,we.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),c=[],f=[];return a.forEach(m=>{i.has(m)||c.push(m)}),i.forEach(m=>{a.has(m)||f.push(m)}),this.syncEngine.Br(c,f).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=mT();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class KM{constructor(){this.Lr=new R1,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new R1,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class bR{qr(e){}shutdown(){}}class YM{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const wR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class ER{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class TR extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,a){const c=this.ao(e,t);Ve("RestConnection","Sending: ",c,r);const f={};return this.ho(f,i,a),this.lo(e,c,f,r).then(m=>(Ve("RestConnection","Received: ",m),m),m=>{throw al("RestConnection",`${e} failed with error: `,m,"url: ",c,"request:",r),m})}fo(e,t,r,i,a,c){return this.co(e,t,r,i,a)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ol,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ao(e,t){return`${this.oo}/v1/${t}:${wR[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,i){return new Promise((a,c)=>{const f=new qE;f.listenOnce(Ux.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Vv.NO_ERROR:const b=f.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(b)),a(b);break;case Vv.TIMEOUT:Ve("Connection",'RPC "'+e+'" timed out'),c(new Fe(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Vv.HTTP_ERROR:const I=f.getStatus();if(Ve("Connection",'RPC "'+e+'" failed with status:',I,"response text:",f.getResponseText()),I>0){const A=f.getResponseJson().error;if(A&&A.status&&A.message){const R=function(L){const j=L.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(j)>=0?j:fe.UNKNOWN}(A.status);c(new Fe(R,A.message))}else c(new Fe(fe.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new Fe(fe.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{Ve("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);f.send(t,"POST",m,r,15)})}_o(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=sh(),c=BS(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new Bv({})),this.ho(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const m=i.join("");Ve("Connection","Creating WebChannel: "+m,f);const b=a.createWebChannel(m,f);let I=!1,A=!1;const R=new ER({Hr:j=>{A?Ve("Connection","Not sending because WebChannel is closed:",j):(I||(Ve("Connection","Opening WebChannel transport."),b.open(),I=!0),Ve("Connection","WebChannel sending:",j),b.send(j))},Jr:()=>b.close()}),L=(j,oe,be)=>{j.listen(oe,$e=>{try{be($e)}catch(rt){setTimeout(()=>{throw rt},0)}})};return L(b,Tm.EventType.OPEN,()=>{A||Ve("Connection","WebChannel transport opened.")}),L(b,Tm.EventType.CLOSE,()=>{A||(A=!0,Ve("Connection","WebChannel transport closed"),R.io())}),L(b,Tm.EventType.ERROR,j=>{A||(A=!0,al("Connection","WebChannel transport errored:",j),R.io(new Fe(fe.UNAVAILABLE,"The operation could not be completed")))}),L(b,Tm.EventType.MESSAGE,j=>{var oe;if(!A){const be=j.data[0];Ot(!!be);const $e=be,rt=$e.error||(null===(oe=$e[0])||void 0===oe?void 0:oe.error);if(rt){Ve("Connection","WebChannel received error:",rt);const st=rt.status;let Qe=function(At){const nn=Ct[At];if(void 0!==nn)return dl(nn)}(st),Tt=rt.message;void 0===Qe&&(Qe=fe.INTERNAL,Tt="Unknown error status: "+st+" with message "+rt.message),A=!0,R.io(new Fe(Qe,Tt)),b.close()}else Ve("Connection","WebChannel received:",be),R.ro(be)}}),L(c,Xf.STAT_EVENT,j=>{j.stat===$E.PROXY?Ve("Connection","Detected buffering proxy"):j.stat===$E.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{R.so()},0),R}}function QM(){return"undefined"!=typeof window?window:null}function OT(){return"undefined"!=typeof document?document:null}function v0(n){return new pN(n,!0)}class L1{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=i,this.yo=a,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,t-r);i>0&&Ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class JM{constructor(e,t,r,i,a,c,f,m){this.Hs=e,this.Po=r,this.vo=i,this.Vo=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new L1(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,we.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,we.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,we.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(Or(t.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Fe(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,we.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CR extends JM{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.It=a}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function yN(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:lt(),i=e.targetChange.targetIds||[],a=function(m,b){return m.gt?(Ot(void 0===b||"string"==typeof b),Pr.fromBase64String(b||"")):(Ot(void 0===b||b instanceof Uint8Array),Pr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(m){const b=void 0===m.code?fe.UNKNOWN:dl(m.code);return new Fe(b,m.message||"")}(c);t=new zx(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=hl(n,r.document.name),a=Mi(r.document.updateTime),c=new ti({mapValue:{fields:r.document.fields}}),f=Fn.newFoundDocument(i,a,c);t=new yT(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=hl(n,r.document),a=r.readTime?Mi(r.readTime):kt.min(),c=Fn.newNoDocument(i,a);t=new yT([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=hl(n,r.document);t=new yT([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return lt();{const r=e.filter,a=new Dt(r.count||0);t=new Zx(r.targetId,a)}}var m;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return kt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?kt.min():a.readTime?Mi(a.readTime):kt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=l0(this.It),t.addTarget=function(i,a){let c;const f=a.target;return c=Jv(f)?{documents:rM(i,f)}:{query:iM(i,f)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=Qx(i,a.resumeToken):a.snapshotVersion.compareTo(kt.min())>0&&(c.readTime=a0(i,a.snapshotVersion.toTimestamp())),c}(this.It,e);const r=function vN(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return lt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=l0(this.It),t.removeTarget=e,this.Bo(t)}}class IR extends JM{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.It=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(Ot(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function _N(n,e){return n&&n.length>0?(Ot(void 0!==e),n.map(t=>function(r,i){let a=Mi(r.updateTime?r.updateTime:i);return a.isEqual(kt.min())&&(a=Mi(i)),new d(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Mi(e.commitTime);return this.listener.Zo(r,t)}return Ot(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=l0(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>c0(this.It,r))};this.Bo(t)}}class SR extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Fe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.Vo.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Fe(fe.UNKNOWN,i.toString())})}fo(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.Vo.fo(e,t,r,a,c,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Fe(fe.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class DR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Or(t),this.ou=!1):Ve("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class AR{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr(f=>{r.enqueueAndForget((0,we.Z)(function*(){var m;_h(c)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,we.Z)(function*(b){const I=nt(b);I._u.add(4),yield ty(I),I.gu.set("Unknown"),I._u.delete(4),yield b0(I)}),function(b){return m.apply(this,arguments)})(c))}))}),this.gu=new DR(r,i)}}function b0(n){return U1.apply(this,arguments)}function U1(){return U1=(0,we.Z)(function*(n){if(_h(n))for(const e of n.wu)yield e(!0)}),U1.apply(this,arguments)}function ty(n){return V1.apply(this,arguments)}function V1(){return V1=(0,we.Z)(function*(n){for(const e of n.wu)yield e(!1)}),V1.apply(this,arguments)}function PT(n,e){const t=nt(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),H1(t)?j1(t):ry(t).ko()&&B1(t,e))}function w0(n,e){const t=nt(n),r=ry(t);t.du.delete(e),r.ko()&&XM(t,e),0===t.du.size&&(r.ko()?r.Fo():_h(t)&&t.gu.set("Unknown"))}function B1(n,e){n.yu.Ot(e.targetId),ry(n).zo(e)}function XM(n,e){n.yu.Ot(e),ry(n).Ho(e)}function j1(n){n.yu=new dN({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),ry(n).start(),n.gu.uu()}function H1(n){return _h(n)&&!ry(n).No()&&n.du.size>0}function _h(n){return 0===nt(n)._u.size}function eO(n){n.yu=void 0}function xR(n){return $1.apply(this,arguments)}function $1(){return $1=(0,we.Z)(function*(n){n.du.forEach((e,t)=>{B1(n,e)})}),$1.apply(this,arguments)}function MR(n,e){return q1.apply(this,arguments)}function q1(){return q1=(0,we.Z)(function*(n,e){eO(n),H1(n)?(n.gu.hu(e),j1(n)):n.gu.set("Unknown")}),q1.apply(this,arguments)}function OR(n,e,t){return G1.apply(this,arguments)}function G1(){return G1=(0,we.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof zx&&2===e.state&&e.cause)try{yield(r=(0,we.Z)(function*(i,a){const c=a.cause;for(const f of a.targetIds)i.du.has(f)&&(yield i.remoteSyncer.rejectListen(f,c),i.du.delete(f),i.yu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield kT(n,r)}else if(e instanceof yT?n.yu.Gt(e):e instanceof Zx?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(kt.min()))try{const r=yield HM(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.yu.te(a);return c.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const b=i.du.get(m);b&&i.du.set(m,b.withResumeToken(f.resumeToken,a))}}),c.targetMismatches.forEach(f=>{const m=i.du.get(f);if(!m)return;i.du.set(f,m.withResumeToken(Pr.EMPTY_BYTE_STRING,m.snapshotVersion)),XM(i,f);const b=new gh(m.target,f,1,m.sequenceNumber);B1(i,b)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield kT(n,r)}var r}),G1.apply(this,arguments)}function kT(n,e,t){return Z1.apply(this,arguments)}function Z1(){return Z1=(0,we.Z)(function*(n,e,t){if(!ba(e))throw e;n._u.add(1),yield ty(n),n.gu.set("Offline"),t||(t=()=>HM(n.localStore)),n.asyncQueue.enqueueRetryable((0,we.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield b0(n)}))}),Z1.apply(this,arguments)}function tO(n,e){return e().catch(t=>kT(n,t,e))}function ny(n){return z1.apply(this,arguments)}function z1(){return z1=(0,we.Z)(function*(n){const e=nt(n),t=vh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;PR(e);)try{const i=yield yR(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,kR(e,i)}catch(i){yield kT(e,i)}nO(e)&&rO(e)}),z1.apply(this,arguments)}function PR(n){return _h(n)&&n.fu.length<10}function kR(n,e){n.fu.push(e);const t=vh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function nO(n){return _h(n)&&!vh(n).No()&&n.fu.length>0}function rO(n){vh(n).start()}function NR(n){return W1.apply(this,arguments)}function W1(){return W1=(0,we.Z)(function*(n){vh(n).eu()}),W1.apply(this,arguments)}function RR(n){return K1.apply(this,arguments)}function K1(){return K1=(0,we.Z)(function*(n){const e=vh(n);for(const t of n.fu)e.Xo(t.mutations)}),K1.apply(this,arguments)}function FR(n,e,t){return Y1.apply(this,arguments)}function Y1(){return Y1=(0,we.Z)(function*(n,e,t){const r=n.fu.shift(),i=v1.from(r,e,t);yield tO(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ny(n)}),Y1.apply(this,arguments)}function LR(n,e){return Q1.apply(this,arguments)}function Q1(){return Q1=(0,we.Z)(function*(n,e){var t;e&&vh(n).Yo&&(yield(t=(0,we.Z)(function*(r,i){if(hs(a=i.code)&&a!==fe.ABORTED){const c=r.fu.shift();vh(r).Oo(),yield tO(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield ny(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),nO(n)&&rO(n)}),Q1.apply(this,arguments)}function iO(n,e){return J1.apply(this,arguments)}function J1(){return J1=(0,we.Z)(function*(n,e){const t=nt(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=_h(t);t._u.add(3),yield ty(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield b0(t)}),J1.apply(this,arguments)}function X1(n,e){return eD.apply(this,arguments)}function eD(){return eD=(0,we.Z)(function*(n,e){const t=nt(n);e?(t._u.delete(2),yield b0(t)):e||(t._u.add(2),yield ty(t),t.gu.set("Unknown"))}),eD.apply(this,arguments)}function ry(n){return n.pu||(n.pu=function(e,t,r){const i=nt(e);return i.su(),new CR(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:xR.bind(null,n),Zr:MR.bind(null,n),Wo:OR.bind(null,n)}),n.wu.push(function(){var e=(0,we.Z)(function*(t){t?(n.pu.Oo(),H1(n)?j1(n):n.gu.set("Unknown")):(yield n.pu.stop(),eO(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function vh(n){return n.Iu||(n.Iu=function(e,t,r){const i=nt(e);return i.su(),new IR(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:NR.bind(null,n),Zr:LR.bind(null,n),tu:RR.bind(null,n),Zo:FR.bind(null,n)}),n.wu.push(function(){var e=(0,we.Z)(function*(t){t?(n.Iu.Oo(),yield ny(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class tD{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,f=new tD(e,t,c,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fe(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function iy(n,e){if(Or("AsyncQueue",`${e}: ${n}`),ba(n))return new Fe(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class sy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||tt.comparator(t.key,r.key):(t,r)=>tt.comparator(t.key,r.key),this.keyedMap=Ac(),this.sortedSet=new dr(this.comparator)}static emptySet(e){return new sy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof sy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new sy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class sO{constructor(){this.Tu=new dr(tt.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):lt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class oy{constructor(e,t,r,i,a,c,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new oy(e,t,sy.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class UR{constructor(){this.Au=void 0,this.listeners=[]}}class VR{constructor(){this.queries=new Ta(e=>Hm(e),hh),this.onlineState="Unknown",this.Ru=new Set}}function nD(n,e){return rD.apply(this,arguments)}function rD(){return rD=(0,we.Z)(function*(n,e){const t=nt(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new UR),i)try{a.Au=yield t.onListen(r)}catch(c){const f=iy(c,`Initialization of query '${hT(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&oD(t)}),rD.apply(this,arguments)}function iD(n,e){return sD.apply(this,arguments)}function sD(){return sD=(0,we.Z)(function*(n,e){const t=nt(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),sD.apply(this,arguments)}function BR(n,e){const t=nt(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const f of c.listeners)f.Pu(i)&&(r=!0);c.Au=i}}r&&oD(t)}function jR(n,e,t){const r=nt(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function oD(n){n.Ru.forEach(e=>{e.next()})}class aD{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new oy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=oy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class HR{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class oO{constructor(e){this.It=e}Ji(e){return hl(this.It,e)}Yi(e){return e.metadata.exists?nM(this.It,e.document,!1):Fn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Mi(e)}}class $R{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=aO(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=cn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new oO(this.It);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const c of i.metadata.queries){const f=(t.get(c)||Jt()).add(a);t.set(c,f)}}return t}complete(){var e=this;return(0,we.Z)(function*(){const t=yield function _R(n,e,t,r){return O1.apply(this,arguments)}(e.localStore,new oO(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const i of e.queries)yield vR(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function aO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class uO{constructor(e){this.key=e}}class lO{constructor(e){this.key=e}}class cO{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Jt(),this.mutatedKeys=Jt(),this.Ku=fT(e),this.Gu=new sy(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new sO,i=t?t.Gu:this.Gu;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,b="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((I,A)=>{const R=i.get(I),L=$m(this.query,A)?A:null,j=!!R&&this.mutatedKeys.has(R.key),oe=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let be=!1;R&&L?R.data.isEqual(L.data)?j!==oe&&(r.track({type:3,doc:L}),be=!0):this.zu(R,L)||(r.track({type:2,doc:L}),be=!0,(m&&this.Ku(L,m)>0||b&&this.Ku(L,b)<0)&&(f=!0)):!R&&L?(r.track({type:0,doc:L}),be=!0):R&&!L&&(r.track({type:1,doc:R}),be=!0,(m||b)&&(f=!0)),be&&(L?(c=c.add(L),a=oe?a.add(I):a.delete(I)):(c=c.delete(I),a=a.delete(I)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const I="F"===this.query.limitType?c.last():c.first();c=c.delete(I.key),a=a.delete(I.key),r.track({type:1,doc:I})}return{Gu:c,Wu:r,$i:f,mutatedKeys:a}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const a=e.Wu.Eu();a.sort((b,I)=>function(A,R){const L=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return L(A)-L(R)}(b.type,I.type)||this.Ku(b.doc,I.doc)),this.Hu(r);const c=t?this.Ju():[],f=0===this.qu.size&&this.current?1:0,m=f!==this.Uu;return this.Uu=f,0!==a.length||m?{snapshot:new oy(this.query,e.Gu,i,a,e.mutatedKeys,0===f,m,!1),Yu:c}:{Yu:c}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new sO,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Jt(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new lO(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new uO(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=Jt();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return oy.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class qR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class GR{constructor(e){this.key=e,this.ec=!1}}class ZR{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.nc={},this.sc=new Ta(f=>Hm(f),hh),this.ic=new Map,this.rc=new Set,this.oc=new dr(tt.comparator),this.uc=new Map,this.cc=new C1,this.ac={},this.hc=new Map,this.lc=gp.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function zR(n,e){return uD.apply(this,arguments)}function uD(){return uD=(0,we.Z)(function*(n,e){const t=OD(n);let r,i;const a=t.sc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.tc();else{const c=yield Xm(t.localStore,ds(e));t.isPrimaryClient&&PT(t.remoteStore,c);const f=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield lD(t,e,r,"current"===f)}return i}),uD.apply(this,arguments)}function lD(n,e,t,r){return cD.apply(this,arguments)}function cD(){return cD=(0,we.Z)(function*(n,e,t,r){n.dc=(I,A,R)=>{return(L=(0,we.Z)(function*(j,oe,be,$e){let rt=oe.view.ju(be);rt.$i&&(rt=yield AT(j.localStore,oe.query,!1).then(({documents:Tt})=>oe.view.ju(Tt,rt)));const st=$e&&$e.targetChanges.get(oe.targetId),Qe=oe.view.applyChanges(rt,j.isPrimaryClient,st);return bD(j,oe.targetId,Qe.Yu),Qe.snapshot}),function(j,oe,be,$e){return L.apply(this,arguments)})(n,I,A,R);var L};const i=yield AT(n.localStore,e,!0),a=new cO(e,i.Hi),c=a.ju(i.documents),f=o0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),m=a.applyChanges(c,n.isPrimaryClient,f);bD(n,t,m.Yu);const b=new qR(e,t,a);return n.sc.set(e,b),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),m.snapshot}),cD.apply(this,arguments)}function WR(n,e){return dD.apply(this,arguments)}function dD(){return dD=(0,we.Z)(function*(n,e){const t=nt(n),r=t.sc.get(e),i=t.ic.get(r.targetId);if(i.length>1)return t.ic.set(r.targetId,i.filter(a=>!hh(a,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ey(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),w0(t.remoteStore,r.targetId),ay(t,r.targetId)}).catch(_a))):(ay(t,r.targetId),yield ey(t.localStore,r.targetId,!0))}),dD.apply(this,arguments)}function hD(){return hD=(0,we.Z)(function*(n,e,t){const r=PD(n);try{const i=yield function(a,c){const f=nt(a),m=Gn.now(),b=c.reduce((R,L)=>R.add(L.key),Jt());let I,A;return f.persistence.runTransaction("Locally write mutations","readwrite",R=>{let L=xi(),j=Jt();return f.Gi.getEntries(R,b).next(oe=>{L=oe,L.forEach((be,$e)=>{$e.isValidDocument()||(j=j.add(be))})}).next(()=>f.localDocuments.getOverlayedDocuments(R,L)).next(oe=>{I=oe;const be=[];for(const $e of c){const rt=O($e,I.get($e.key).overlayedDocument);null!=rt&&be.push(new X($e.key,rt,oT(rt.value.mapValue),h.exists(!0)))}return f.mutationQueue.addMutationBatch(R,m,be,c)}).next(oe=>{A=oe;const be=oe.applyToLocalDocumentSet(I,j);return f.documentOverlayCache.saveOverlays(R,oe.batchId,be)})}).then(()=>({batchId:A.batchId,changes:zm(I)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,f){let m=a.ac[a.currentUser.toKey()];m||(m=new dr(Lt)),m=m.insert(c,f),a.ac[a.currentUser.toKey()]=m}(r,i.batchId,t),yield Mc(r,i.changes),yield ny(r.remoteStore)}catch(i){const a=iy(i,"Failed to persist write");t.reject(a)}}),hD.apply(this,arguments)}function dO(n,e){return fD.apply(this,arguments)}function fD(){return fD=(0,we.Z)(function*(n,e){const t=nt(n);try{const r=yield mR(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.uc.get(a);c&&(Ot(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.ec=!0:i.modifiedDocuments.size>0?Ot(c.ec):i.removedDocuments.size>0&&(Ot(c.ec),c.ec=!1))}),yield Mc(t,r,e)}catch(r){yield _a(r)}}),fD.apply(this,arguments)}function hO(n,e,t){const r=nt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.sc.forEach((a,c)=>{const f=c.view.bu(e);f.snapshot&&i.push(f.snapshot)}),function(a,c){const f=nt(a);f.onlineState=c;let m=!1;f.queries.forEach((b,I)=>{for(const A of I.listeners)A.bu(c)&&(m=!0)}),m&&oD(f)}(r.eventManager,e),i.length&&r.nc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function YR(n,e,t){return pD.apply(this,arguments)}function pD(){return pD=(0,we.Z)(function*(n,e,t){const r=nt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.uc.get(e),a=i&&i.key;if(a){let c=new dr(tt.comparator);c=c.insert(a,Fn.newNoDocument(a,kt.min()));const f=Jt().add(a),m=new s0(kt.min(),new Map,new In(Lt),c,f);yield dO(r,m),r.oc=r.oc.remove(a),r.uc.delete(e),wD(r)}else yield ey(r.localStore,e,!1).then(()=>ay(r,e,t)).catch(_a)}),pD.apply(this,arguments)}function QR(n,e){return gD.apply(this,arguments)}function gD(){return gD=(0,we.Z)(function*(n,e){const t=nt(n),r=e.batch.batchId;try{const i=yield gR(t.localStore,e);vD(t,r,null),_D(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Mc(t,i)}catch(i){yield _a(i)}}),gD.apply(this,arguments)}function JR(n,e,t){return mD.apply(this,arguments)}function mD(){return mD=(0,we.Z)(function*(n,e,t){const r=nt(n);try{const i=yield function(a,c){const f=nt(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let b;return f.mutationQueue.lookupMutationBatch(m,c).next(I=>(Ot(null!==I),b=I.keys(),f.mutationQueue.removeMutationBatch(m,I))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,b,c)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,b)).next(()=>f.localDocuments.getDocuments(m,b))})}(r.localStore,e);vD(r,e,t),_D(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Mc(r,i)}catch(i){yield _a(i)}}),mD.apply(this,arguments)}function yD(){return yD=(0,we.Z)(function*(n,e){const t=nt(n);_h(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=nt(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>c.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.hc.get(r)||[];i.push(e),t.hc.set(r,i)}catch(r){const i=iy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),yD.apply(this,arguments)}function _D(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function vD(n,e,t){const r=nt(n);let i=r.ac[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.ac[r.currentUser.toKey()]=i}}function ay(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||fO(n,r)})}function fO(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(w0(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),wD(n))}function bD(n,e,t){for(const r of t)r instanceof uO?(n.cc.addReference(r.key,e),eF(n,r)):r instanceof lO?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||fO(n,r.key)):lt()}function eF(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.rc.add(r),wD(n))}function wD(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new tt(cn.fromString(e)),r=n.lc.next();n.uc.set(r,new GR(t)),n.oc=n.oc.insert(t,r),PT(n.remoteStore,new gh(ds(dh(t.path)),r,2,ls.at))}}function Mc(n,e,t){return ED.apply(this,arguments)}function ED(){return ED=(0,we.Z)(function*(n,e,t){const r=nt(n),i=[],a=[],c=[];var f;r.sc.isEmpty()||(r.sc.forEach((f,m)=>{c.push(r.dc(m,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,b.fromCache?"not-current":"current"),i.push(b);const I=A1.Ci(m.targetId,b);a.push(I)}}))}),yield Promise.all(c),r.nc.Wo(i),yield(f=(0,we.Z)(function*(m,b){const I=nt(m);try{yield I.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>he.forEach(b,R=>he.forEach(R.Si,L=>I.persistence.referenceDelegate.addReference(A,R.targetId,L)).next(()=>he.forEach(R.Di,L=>I.persistence.referenceDelegate.removeReference(A,R.targetId,L)))))}catch(A){if(!ba(A))throw A;Ve("LocalStore","Failed to update sequence numbers: "+A)}for(const A of b){const R=A.targetId;if(!A.fromCache){const L=I.Ui.get(R),oe=L.withLastLimboFreeSnapshotVersion(L.snapshotVersion);I.Ui=I.Ui.insert(R,oe)}}}),function(m,b){return f.apply(this,arguments)})(r.localStore,a))}),ED.apply(this,arguments)}function tF(n,e){return TD.apply(this,arguments)}function TD(){return TD=(0,we.Z)(function*(n,e){const t=nt(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield jM(t.localStore,e);t.currentUser=e,(i=t).hc.forEach(c=>{c.forEach(f=>{f.reject(new Fe(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Mc(t,r.ji)}var i}),TD.apply(this,arguments)}function nF(n,e){const t=nt(n),r=t.uc.get(e);if(r&&r.ec)return Jt().add(r.key);{let i=Jt();const a=t.ic.get(e);if(!a)return i;for(const c of a){const f=t.sc.get(c);i=i.unionWith(f.view.Qu)}return i}}function rF(n,e){return CD.apply(this,arguments)}function CD(){return CD=(0,we.Z)(function*(n,e){const t=nt(n),r=yield AT(t.localStore,e.query,!0),i=e.view.Zu(r);return t.isPrimaryClient&&bD(t,e.targetId,i.Yu),i}),CD.apply(this,arguments)}function iF(n,e){return ID.apply(this,arguments)}function ID(){return ID=(0,we.Z)(function*(n,e){const t=nt(n);return GM(t.localStore,e).then(r=>Mc(t,r))}),ID.apply(this,arguments)}function sF(n,e,t,r){return SD.apply(this,arguments)}function SD(){return SD=(0,we.Z)(function*(n,e,t,r){const i=nt(n),a=yield function(c,f){const m=nt(c),b=nt(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",I=>b.Tn(I,f).next(A=>A?m.localDocuments.getDocuments(I,A):he.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield ny(i.remoteStore):"acknowledged"===t||"rejected"===t?(vD(i,e,r||null),_D(i,e),f=e,nt(nt(i.localStore).mutationQueue).An(f)):lt(),yield Mc(i,a)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),SD.apply(this,arguments)}function DD(){return DD=(0,we.Z)(function*(n,e){const t=nt(n);if(OD(t),PD(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield pO(t,r.toArray());t.fc=!0,yield X1(t.remoteStore,!0);for(const a of i)PT(t.remoteStore,a)}else if(!1===e&&!1!==t.fc){const r=[];let i=Promise.resolve();t.ic.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(ay(t,c),ey(t.localStore,c,!0))),w0(t.remoteStore,c)}),yield i,yield pO(t,r),function(a){const c=nt(a);c.uc.forEach((f,m)=>{w0(c.remoteStore,m)}),c.cc.fs(),c.uc=new Map,c.oc=new dr(tt.comparator)}(t),t.fc=!1,yield X1(t.remoteStore,!1)}}),DD.apply(this,arguments)}function pO(n,e,t){return AD.apply(this,arguments)}function AD(){return AD=(0,we.Z)(function*(n,e,t){const r=nt(n),i=[],a=[];for(const c of e){let f;const m=r.ic.get(c);if(m&&0!==m.length){f=yield Xm(r.localStore,ds(m[0]));for(const b of m){const I=r.sc.get(b),A=yield rF(r,I);A.snapshot&&a.push(A.snapshot)}}else{const b=yield qM(r.localStore,c);f=yield Xm(r.localStore,b),yield lD(r,gO(b),c,!1)}i.push(f)}return r.nc.Wo(a),i}),AD.apply(this,arguments)}function gO(n){return cT(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function aF(n){const e=nt(n);return nt(nt(e.localStore).persistence).vi()}function uF(n,e,t,r){return xD.apply(this,arguments)}function xD(){return xD=(0,we.Z)(function*(n,e,t,r){const i=nt(n);if(i.fc)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const a=i.ic.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const c=yield GM(i.localStore,qm(a[0])),f=s0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Mc(i,c,f);break}case"rejected":yield ey(i.localStore,e,!0),ay(i,e,r);break;default:lt()}}),xD.apply(this,arguments)}function lF(n,e,t){return MD.apply(this,arguments)}function MD(){return MD=(0,we.Z)(function*(n,e,t){const r=OD(n);if(r.fc){for(const i of e){if(r.ic.has(i)){Ve("SyncEngine","Adding an already active target "+i);continue}const a=yield qM(r.localStore,i),c=yield Xm(r.localStore,a);yield lD(r,gO(a),c.targetId,!1),PT(r.remoteStore,c)}for(const i of t)r.ic.has(i)&&(yield ey(r.localStore,i,!1).then(()=>{w0(r.remoteStore,i),ay(r,i)}).catch(_a))}}),MD.apply(this,arguments)}function OD(n){const e=nt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=dO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YR.bind(null,e),e.nc.Wo=BR.bind(null,e.eventManager),e.nc._c=jR.bind(null,e.eventManager),e}function PD(n){const e=nt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JR.bind(null,e),e}class mO{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,we.Z)(function*(){t.It=v0(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return BM(this.persistence,new VM,e.initialUser,this.It)}gc(e){return new LM(ST.Bs,this.It)}mc(e){return new KM}terminate(){var e=this;return(0,we.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class yO extends mO{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield PD(r.Ec.syncEngine),yield ny(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return BM(this.persistence,new VM,e.initialUser,this.It)}Ic(e,t){return new eR(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new YS(t,this.persistence);return new KS(e.asyncQueue,r)}gc(e){const t=D1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ho.withCacheSize(this.cacheSizeBytes):ho.DEFAULT;return new S1(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,QM(),OT(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new KM}}class dF extends yO{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e);const i=r.Ec.syncEngine;r.sharedClientState instanceof F1&&(r.sharedClientState.syncEngine={Fr:sF.bind(null,i),$r:uF.bind(null,i),Br:lF.bind(null,i),vi:aF.bind(null,i),Or:iF.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,we.Z)(function*(c){yield function oF(n,e){return DD.apply(this,arguments)}(r.Ec.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}mc(e){const t=QM();if(!F1.C(t))throw new Fe(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=D1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new F1(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class kD{initialize(e,t){var r=this;return(0,we.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>hO(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=tF.bind(null,r.syncEngine),yield X1(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new VR}createDatastore(e){const t=v0(e.databaseInfo.databaseId),r=new TR(e.databaseInfo);return new SR(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>hO(this.syncEngine,f,0),c=YM.C()?new YM:new bR,new AR(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,f,m,b){const I=new ZR(r,i,a,c,f,m);return b&&(I.fc=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,we.Z)(function*(t){const r=nt(t);Ve("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield ty(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function _O(n,e=10240){let t=0;return{read:()=>(0,we.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,we.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class NT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):Or("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class hF{constructor(e,t){this.bc=e,this.It=t,this.metadata=new gi,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,we.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,we.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,we.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),i=Number(r);isNaN(i)&&e.Sc(`length string (${r}) is not valid number`);const a=yield e.Dc(i);return new HR(JSON.parse(a),t.length+i)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,we.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return(0,we.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,we.Z)(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class fF{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,we.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Fe(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,we.Z)(function*(a,c){const f=nt(a),m=l0(f.It)+"/documents",b={documents:c.map(L=>u0(f.It,L))},I=yield f.fo("BatchGetDocuments",m,b,c.length),A=new Map;I.forEach(L=>{const j=function mN(n,e){return"found"in e?function(t,r){Ot(!!r.found);const i=hl(t,r.found.name),a=Mi(r.found.updateTime),c=new ti({mapValue:{fields:r.found.fields}});return Fn.newFoundDocument(i,a,c)}(n,e):"missing"in e?function(t,r){Ot(!!r.missing),Ot(!!r.readTime);const i=hl(t,r.missing),a=Mi(r.readTime);return Fn.newNoDocument(i,a)}(n,e):lt()}(f.It,L);A.set(j.key.toString(),j)});const R=[];return c.forEach(L=>{const j=A.get(L.toString());Ot(!!j),R.push(j)}),R}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new at(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,we.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=tt.fromPath(i);e.mutations.push(new ke(a,e.precondition(a)))}),yield(r=(0,we.Z)(function*(i,a){const c=nt(i),f=l0(c.It)+"/documents",m={writes:a.map(b=>c0(c.It,b))};yield c.co("Commit",f,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw lt();t=kt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Fe(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(kt.min())?h.exists(!1):h.updateTime(t):h.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(kt.min()))throw new Fe(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return h.updateTime(t)}return h.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class pF{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Nc=r.maxAttempts,this.xo=new L1(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,we.Z)(function*(){const t=new fF(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Oc(a)}))}).catch(i=>{e.Oc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!rp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!hs(t)}return!1}}class gF{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ei.UNAUTHENTICATED,this.clientId=JE.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,we.Z)(function*(f){Ve("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Ve("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,we.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Fe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=iy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function vO(n,e){return ND.apply(this,arguments)}function ND(){return ND=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,we.Z)(function*(a){r.isEqual(a)||(yield jM(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),ND.apply(this,arguments)}function bO(n,e){return RD.apply(this,arguments)}function RD(){return RD=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield FD(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>iO(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>iO(e.remoteStore,a)),n.onlineComponents=e}),RD.apply(this,arguments)}function FD(n){return LD.apply(this,arguments)}function LD(){return LD=(0,we.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield vO(n,new mO)),n.offlineComponents}),LD.apply(this,arguments)}function RT(n){return UD.apply(this,arguments)}function UD(){return UD=(0,we.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield bO(n,new kD)),n.onlineComponents}),UD.apply(this,arguments)}function wO(n){return FD(n).then(e=>e.persistence)}function FT(n){return FD(n).then(e=>e.localStore)}function EO(n){return RT(n).then(e=>e.remoteStore)}function VD(n){return RT(n).then(e=>e.syncEngine)}function uy(n){return BD.apply(this,arguments)}function BD(){return BD=(0,we.Z)(function*(n){const e=yield RT(n),t=e.eventManager;return t.onListen=zR.bind(null,e.syncEngine),t.onUnlisten=WR.bind(null,e.syncEngine),t}),BD.apply(this,arguments)}function TO(n,e,t={}){const r=new gi;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(i,a,c,f,m){const b=new NT({next:A=>{a.enqueueAndForget(()=>iD(i,I));const R=A.docs.has(c);!R&&A.fromCache?m.reject(new Fe(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&A.fromCache&&f&&"server"===f.source?m.reject(new Fe(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(A)},error:A=>m.reject(A)}),I=new aD(dh(c.path),b,{includeMetadataChanges:!0,Nu:!0});return nD(i,I)}(yield uy(n),n.asyncQueue,e,t,r)})),r.promise}function CO(n,e,t={}){const r=new gi;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(i,a,c,f,m){const b=new NT({next:A=>{a.enqueueAndForget(()=>iD(i,I)),A.fromCache&&"server"===f.source?m.reject(new Fe(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(A)},error:A=>m.reject(A)}),I=new aD(c,b,{includeMetadataChanges:!0,Nu:!0});return nD(i,I)}(yield uy(n),n.asyncQueue,e,t,r)})),r.promise}const IO=new Map;function jD(n,e,t){if(!t)throw new Fe(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function SO(n,e,t,r){if(!0===e&&!0===r)throw new Fe(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function DO(n){if(!tt.isDocumentKey(n))throw new Fe(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function AO(n){if(tt.isDocumentKey(n))throw new Fe(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function LT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":lt()}function dn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Fe(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=LT(n);throw new Fe(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function xO(n,e){if(e<=0)throw new Fe(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class MO{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Fe(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Fe(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,SO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class E0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new MO({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Fe(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Fe(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new MO(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new jS;switch(t.type){case"gapi":return new YE(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Fe(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=IO.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),IO.delete(e),t.terminate())}(this),Promise.resolve()}}class rr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rr(this.firestore,e,this._key)}}class fs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fs(this.firestore,e,this._query)}}class pl extends fs{constructor(e,t,r){super(e,t,dh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rr(this.firestore,null,new tt(e))}withConverter(e){return new pl(this.firestore,e,this._path)}}function OO(n,e,...t){if(n=(0,Gt.m9)(n),jD("collection","path",e),n instanceof E0){const r=cn.fromString(e,...t);return AO(r),new pl(n,null,r)}{if(!(n instanceof rr||n instanceof pl))throw new Fe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return AO(r),new pl(n.firestore,null,r)}}function UT(n,e,...t){if(n=(0,Gt.m9)(n),1===arguments.length&&(e=JE.R()),jD("doc","path",e),n instanceof E0){const r=cn.fromString(e,...t);return DO(r),new rr(n,null,new tt(r))}{if(!(n instanceof rr||n instanceof pl))throw new Fe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return DO(r),new rr(n.firestore,n instanceof pl?n.converter:null,new tt(r))}}function PO(n,e){return n=(0,Gt.m9)(n),e=(0,Gt.m9)(e),(n instanceof rr||n instanceof pl)&&(e instanceof rr||e instanceof pl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function kO(n,e){return n=(0,Gt.m9)(n),e=(0,Gt.m9)(e),n instanceof fs&&e instanceof fs&&n.firestore===e.firestore&&hh(n._query,e._query)&&n.converter===e.converter}class SF{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new L1(this,"async_queue_retry"),this.jc=()=>{const t=OT();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=OT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=OT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new gi;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,we.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!ba(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,Or("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const i=tD.createAndSchedule(this,e,t,r,a=>this.Jc(a));return this.Uc.push(i),i}Wc(){this.qc&&lt()}verifyOperationInProgress(){}Yc(){var e=this;return(0,we.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function HD(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class DF{constructor(){this._progressObserver={},this._taskCompletionResolver=new gi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class fr extends E0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new SF,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||NO(this),this._firestoreClient.terminate()}}function ni(n){return n._firestoreClient||NO(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function NO(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new iT(n._databaseId,a,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var a,f;n._firestoreClient=new gF(n._authCredentials,n._appCheckCredentials,n._queue,r)}function RO(n,e,t){const r=new gi;return n.asyncQueue.enqueue((0,we.Z)(function*(){try{yield vO(n,t),yield bO(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(c=a).name?c.code===fe.FAILED_PRECONDITION||c.code===fe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw a;al("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var c})).then(()=>r.promise)}function FO(n){if(n._initialized||n._terminated)throw new Fe(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Oc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Fe(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ir(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class gl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gl(Pr.fromBase64String(e))}catch(t){throw new Fe(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new gl(Pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class yp{constructor(e){this._methodName=e}}class VT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fe(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fe(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Lt(this._lat,e._lat)||Lt(this._long,e._long)}}const LF=/^__.*__$/;class UF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new X(e,this.data,this.fieldMask,t,this.fieldTransforms):new q(e,this.data,t,this.fieldTransforms)}}class LO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new X(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function UO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class BT{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ea(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new BT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.oa(e),i}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.ea(),i}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return $T(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(UO(this.na)&&LF.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class VF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||v0(e)}fa(e,t,r,i=!1){return new BT({na:e,methodName:t,la:r,path:Ir.emptyPath(),ra:!1,ha:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function _p(n){const e=n._freezeSettings(),t=v0(n._databaseId);return new VF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function jT(n,e,t,r,i,a={}){const c=n.fa(a.merge||a.mergeFields?2:0,e,t,i);ZD("Data must be an object, but it was:",c,r);const f=jO(r,c);let m,b;if(a.merge)m=new Zi(c.fieldMask),b=c.fieldTransforms;else if(a.mergeFields){const I=[];for(const A of a.mergeFields){const R=zD(e,A,t);if(!c.contains(R))throw new Fe(fe.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);$O(I,R)||I.push(R)}m=new Zi(I),b=c.fieldTransforms.filter(A=>m.covers(A.field))}else m=null,b=c.fieldTransforms;return new UF(new ti(f),m,b)}class T0 extends yp{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof T0}}function VO(n,e,t){return new BT({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class $D extends yp{_toFieldTransform(e){return new o(e.path,new ap)}isEqual(e){return e instanceof $D}}class BF extends yp{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=VO(this,e,!0),r=this.da.map(a=>vp(a,t)),i=new fh(r);return new o(e.path,i)}isEqual(e){return this===e}}class jF extends yp{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=VO(this,e,!0),r=this.da.map(a=>vp(a,t)),i=new ph(r);return new o(e.path,i)}isEqual(e){return this===e}}class HF extends yp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new up(e.It,pT(e.It,this._a));return new o(e.path,t)}isEqual(e){return this===e}}function qD(n,e,t,r){const i=n.fa(1,e,t);ZD("Data must be an object, but it was:",i,r);const a=[],c=ti.empty();bc(r,(m,b)=>{const I=HT(e,m,t);b=(0,Gt.m9)(b);const A=i.ua(I);if(b instanceof T0)a.push(I);else{const R=vp(b,A);null!=R&&(a.push(I),c.set(I,R))}});const f=new Zi(a);return new LO(c,f,i.fieldTransforms)}function GD(n,e,t,r,i,a){const c=n.fa(1,e,t),f=[zD(e,r,t)],m=[i];if(a.length%2!=0)throw new Fe(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<a.length;R+=2)f.push(zD(e,a[R])),m.push(a[R+1]);const b=[],I=ti.empty();for(let R=f.length-1;R>=0;--R)if(!$O(b,f[R])){const L=f[R];let j=m[R];j=(0,Gt.m9)(j);const oe=c.ua(L);if(j instanceof T0)b.push(L);else{const be=vp(j,oe);null!=be&&(b.push(L),I.set(L,be))}}const A=new Zi(b);return new LO(I,A,c.fieldTransforms)}function BO(n,e,t,r=!1){return vp(t,n.fa(r?4:3,e))}function vp(n,e){if(HO(n=(0,Gt.m9)(n)))return ZD("Unsupported field value:",e,n),jO(n,e);if(n instanceof yp)return function(t,r){if(!UO(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let f=vp(c,r.ca(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Gt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return pT(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Gn.fromDate(t);return{timestampValue:a0(r.It,i)}}if(t instanceof Gn){const i=new Gn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:a0(r.It,i)}}if(t instanceof VT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof gl)return{bytesValue:Qx(r.It,t._byteString)};if(t instanceof rr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.aa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:p1(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${LT(t)}`)}(n,e)}function jO(n,e){const t={};return Am(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bc(n,(r,i)=>{const a=vp(i,e.ia(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function HO(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Gn||n instanceof VT||n instanceof gl||n instanceof rr||n instanceof yp)}function ZD(n,e,t){if(!HO(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=LT(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function zD(n,e,t){if((e=(0,Gt.m9)(e))instanceof Oc)return e._internalPath;if("string"==typeof e)return HT(n,e);throw $T("Field path arguments must be of type string or ",n,!1,void 0,t)}const $F=new RegExp("[~\\*/\\[\\]]");function HT(n,e,t){if(e.search($F)>=0)throw $T(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Oc(...e.split("."))._internalPath}catch(r){throw $T(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $T(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(a||c)&&(m+=" (found",a&&(m+=` in field ${r}`),c&&(m+=` in document ${i}`),m+=")"),new Fe(fe.INVALID_ARGUMENT,f+n+m)}function $O(n,e){return n.some(t=>t.isEqual(e))}class C0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new rr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new qF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(qT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class qF extends C0{data(){return super.data()}}function qT(n,e){return"string"==typeof e?HT(n,e):e instanceof Oc?e._internalPath:e._delegate._internalPath}class bp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pc extends C0{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new I0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(qT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class I0 extends Pc{data(e={}){return super.data(e)}}class bh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new bp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new I0(this._firestore,this._userDataWriter,r.key,r,new bp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fe(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new I0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new bp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const f=new I0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new bp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,b=-1;return 0!==c.type&&(m=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),b=a.indexOf(c.doc.key)),{type:GF(c.type),doc:f,oldIndex:m,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function GF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}function qO(n,e){return n instanceof Pc&&e instanceof Pc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof bh&&e instanceof bh&&n._firestore===e._firestore&&kO(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function GO(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Fe(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class S0{}function wh(n,...e){for(const t of e)n=t._apply(n);return n}class ZF extends S0{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=_p(e.firestore),r=function(i,a,c,f,m,b,I){let A;if(m.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Fe(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){QO(I,b);const L=[];for(const j of I)L.push(YO(f,i,j));A={arrayValue:{values:L}}}else A=YO(f,i,I)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||QO(I,b),A=BO(c,"where",I,"in"===b||"not-in"===b);const R=yi.create(m,b,A);return function(L,j){if(j.dt()){const be=Vm(L);if(null!==be&&!be.isEqual(j.field))throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${be.toString()}' and '${j.field.toString()}'`);const $e=n0(L);null!==$e&&JO(0,j.field,$e)}const oe=function(be,$e){for(const rt of be.filters)if($e.indexOf(rt.op)>=0)return rt.op;return null}(L,function(be){switch(be){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(j.op));if(null!==oe)throw new Fe(fe.INVALID_ARGUMENT,oe===j.op?`Invalid query. You cannot use more than one '${j.op.toString()}' filter.`:`Invalid query. You cannot use '${j.op.toString()}' filters with '${oe.toString()}' filters.`)}(i,R),R}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new fs(e.firestore,e.converter,function(i,a){const c=i.filters.concat([a]);return new Ea(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class WF extends S0{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Fe(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Fe(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new op(i,a);return function(f,m){if(null===n0(f)){const b=Vm(f);null!==b&&JO(0,b,m.field)}}(r,c),c}(e._query,this.wa,this.ya);return new fs(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Ea(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class ZO extends S0{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new fs(e.firestore,e.converter,jm(e._query,this.pa,this.Ia))}}class zO extends S0{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=KO(e,this.type,this.Ta,this.Ea);return new fs(e.firestore,e.converter,(i=t,new Ea((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class WO extends S0{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=KO(e,this.type,this.Ta,this.Ea);return new fs(e.firestore,e.converter,(i=t,new Ea((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function KO(n,e,t,r){if(t[0]=(0,Gt.m9)(t[0]),t[0]instanceof C0)return function(i,a,c,f,m){if(!f)throw new Fe(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const I of Dc(i))if(I.field.isKeyField())b.push(Cc(a,f.key));else{const A=f.data.field(I.field);if(Wv(A))throw new Fe(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+I.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const R=I.field.canonicalString();throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}b.push(A)}return new Uo(b,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=_p(n.firestore);return function(a,c,f,m,b,I){const A=a.explicitOrderBy;if(b.length>A.length)throw new Fe(fe.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let L=0;L<b.length;L++){const j=b[L];if(A[L].field.isKeyField()){if("string"!=typeof j)throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof j}`);if(!Bm(a)&&-1!==j.indexOf("/"))throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${j}' contains a slash.`);const oe=a.path.child(cn.fromString(j));if(!tt.isDocumentKey(oe))throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${oe}' is not because it contains an odd number of segments.`);const be=new tt(oe);R.push(Cc(c,be))}else{const oe=BO(f,m,j);R.push(oe)}}return new Uo(R,I)}(n._query,n.firestore._databaseId,i,e,t,r)}}function YO(n,e,t){if("string"==typeof(t=(0,Gt.m9)(t))){if(""===t)throw new Fe(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bm(e)&&-1!==t.indexOf("/"))throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(cn.fromString(t));if(!tt.isDocumentKey(r))throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Cc(n,new tt(r))}if(t instanceof rr)return Cc(n,t._key);throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${LT(t)}.`)}function QO(n,e){if(!Array.isArray(n)||0===n.length)throw new Fe(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Fe(fe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function JO(n,e,t){if(!t.isEqual(e))throw new Fe(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const n2={maxAttempts:5};class WD{convertValue(e,t="none"){switch(cl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw lt()}}convertObject(e,t){const r={};return bc(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new VT(hr(e.latitude),hr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=xm(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Lo(e));default:return null}}convertTimestamp(e){const t=pu(e);return new Gn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=cn.fromString(e);Ot(aM(r));const i=new gu(r.get(1),r.get(3)),a=new tt(r.popFirst(5));return i.isEqual(t)||Or(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function GT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class r2 extends WD{constructor(e){super(),this.firestore=e}convertBytes(e){return new gl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rr(this.firestore,null,t)}}class XO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=_p(e)}set(e,t,r){this._verifyNotCommitted();const i=Eh(e,this._firestore),a=GT(i.converter,t,r),c=jT(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,h.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Eh(e,this._firestore);let c;return c="string"==typeof(t=(0,Gt.m9)(t))||t instanceof Oc?GD(this._dataReader,"WriteBatch.update",a._key,t,r,i):qD(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,h.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Eh(e,this._firestore);return this._mutations=this._mutations.concat(new at(t._key,h.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Fe(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Eh(n,e){if((n=(0,Gt.m9)(n)).firestore!==e)throw new Fe(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class wp extends WD{constructor(e){super(),this.firestore=e}convertBytes(e){return new gl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rr(this.firestore,null,t)}}function eP(n,e,t){n=dn(n,rr);const r=dn(n.firestore,fr),i=GT(n.converter,e,t);return ly(r,[jT(_p(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,h.none())])}function tP(n,e,t,...r){n=dn(n,rr);const i=dn(n.firestore,fr),a=_p(i);let c;return c="string"==typeof(e=(0,Gt.m9)(e))||e instanceof Oc?GD(a,"updateDoc",n._key,e,t,r):qD(a,"updateDoc",n._key,e),ly(i,[c.toMutation(n._key,h.exists(!0))])}function nP(n,...e){var t,r,i;n=(0,Gt.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||HD(e[c])||(a=e[c],c++);const f={includeMetadataChanges:a.includeMetadataChanges};if(HD(e[c])){const A=e[c];e[c]=null===(t=A.next)||void 0===t?void 0:t.bind(A),e[c+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),e[c+2]=null===(i=A.complete)||void 0===i?void 0:i.bind(A)}let m,b,I;if(n instanceof rr)b=dn(n.firestore,fr),I=dh(n._key.path),m={next:A=>{e[c]&&e[c](KD(b,n,A))},error:e[c+1],complete:e[c+2]};else{const A=dn(n,fs);b=dn(A.firestore,fr),I=A._query;const R=new wp(b);m={next:L=>{e[c]&&e[c](new bh(b,R,A,L))},error:e[c+1],complete:e[c+2]},GO(n._query)}return function(A,R,L,j){const oe=new NT(j),be=new aD(R,oe,L);return A.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return nD(yield uy(A),be)})),()=>{oe.Rc(),A.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return iD(yield uy(A),be)}))}}(ni(b),I,f,m)}function ly(n,e){return function(t,r){const i=new gi;return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function KR(n,e,t){return hD.apply(this,arguments)}(yield VD(t),r,i)})),i.promise}(ni(n),e)}function KD(n,e,t){const r=t.docs.get(e._key),i=new wp(n);return new Pc(n,i,e._key,r,new bp(t.hasPendingWrites,t.fromCache),e.converter)}class f2 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=_p(e)}get(e){const t=Eh(e,this._firestore),r=new r2(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return lt();const a=i[0];if(a.isFoundDocument())return new C0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new C0(this._firestore,r,t._key,null,t.converter);throw lt()})}set(e,t,r){const i=Eh(e,this._firestore),a=GT(i.converter,t,r),c=jT(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=Eh(e,this._firestore);let c;return c="string"==typeof(t=(0,Gt.m9)(t))||t instanceof Oc?GD(this._dataReader,"Transaction.update",a._key,t,r,i):qD(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=Eh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Eh(e,this._firestore),r=new wp(this._firestore);return super.get(e).then(i=>new Pc(this._firestore,r,t._key,i._document,new bp(!1,!1),t.converter))}}function YD(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Fe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function iP(){if("undefined"==typeof Uint8Array)throw new Fe("unimplemented","Uint8Arrays are not available in this environment.")}function sP(){if(!function rT(){return"undefined"!=typeof atob}())throw new Fe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ol=ao.SDK_VERSION,(0,ao._registerComponent)(new Bd.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),c=new fr(new KE(t.getProvider("auth-internal")),new $S(t.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Fe(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gu(f.options.projectId,m)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,ao.registerVersion)(GE,"3.5.0",n),(0,ao.registerVersion)(GE,"3.5.0","esm2017")}();class D0{constructor(e){this._delegate=e}static fromBase64String(e){return sP(),new D0(gl.fromBase64String(e))}static fromUint8Array(e){return iP(),new D0(gl.fromUint8Array(e))}toBase64(){return sP(),this._delegate.toBase64()}toUint8Array(){return iP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function QD(n){return function E2(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class T2{enableIndexedDbPersistence(e,t){return function xF(n,e){FO(n=dn(n,fr));const t=ni(n),r=n._freezeSettings(),i=new kD;return RO(t,i,new yO(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function MF(n){FO(n=dn(n,fr));const e=ni(n),t=n._freezeSettings(),r=new kD;return RO(e,r,new dF(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function OF(n){if(n._initialized&&!n._terminated)throw new Fe(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new gi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{yield(t=(0,we.Z)(function*(r){if(!va.C())return Promise.resolve();const i=r+"main";yield va.delete(i)}),function(r){return t.apply(this,arguments)})(D1(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class oP{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof gu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&al("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function CF(n,e,t,r={}){var i;const a=(n=dn(n,E0))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&al("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,f;if("string"==typeof r.mockUserToken)c=r.mockUserToken,f=ei.MOCK_USER;else{c=(0,Gt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Fe(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new ei(m)}n._authCredentials=new WE(new zE(c,f))}}(this._delegate,e,t,r)}enableNetwork(){return function kF(n){return function mF(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield wO(n),t=yield EO(n);return e.setNetworkEnabled(!0),function(r){const i=nt(r);return i._u.delete(0),b0(i)}(t)}))}(ni(n=dn(n,fr)))}(this._delegate)}disableNetwork(){return function NF(n){return function yF(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield wO(n),t=yield EO(n);return e.setNetworkEnabled(!1),(r=(0,we.Z)(function*(i){const a=nt(i);a._u.add(0),yield ty(a),a.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ni(n=dn(n,fr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,SO("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function PF(n){return function(e){const t=new gi;return e.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function XR(n,e){return yD.apply(this,arguments)}(yield VD(e),t)})),t.promise}(ni(n=dn(n,fr)))}(this._delegate)}onSnapshotsInSync(e){return function h2(n,e){return function bF(n,e){const t=new NT(e);return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield uy(n),i=t,nt(r).Ru.add(i),void i.next();var r,i})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield uy(n),i=t,void nt(r).Ru.delete(i);var r,i}))}}(ni(n=dn(n,fr)),HD(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Fe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new cy(this,OO(this._delegate,e))}catch(t){throw Ns(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ca(this,UT(this._delegate,e))}catch(t){throw Ns(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Rs(this,function IF(n,e){if(n=dn(n,E0),jD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Fe(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new fs(n,null,(t=e,new Ea(cn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ns(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function p2(n,e,t){n=dn(n,fr);const r=Object.assign(Object.assign({},n2),t);return function(i){if(i.maxAttempts<1)throw new Fe(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function wF(n,e,t){const r=new gi;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){const i=yield(a=n,RT(a).then(c=>c.datastore));var a;new pF(n.asyncQueue,i,t,e,r).run()})),r.promise}(ni(n),i=>e(new f2(n,i)),r)}(this._delegate,t=>e(new aP(this,t)))}batch(){return ni(this._delegate),new uP(new XO(this._delegate,e=>ly(this._delegate,e)))}loadBundle(e){return function RF(n,e){const t=ni(n=dn(n,fr)),r=new DF;return function EF(n,e,t,r){const i=function(a,c){let f;return f="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,b){if(m instanceof Uint8Array)return _O(m,b);if(m instanceof ArrayBuffer)return _O(new Uint8Array(m),b);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new hF(m,c);var m}(t,v0(e));n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){!function cF(n,e,t){const r=nt(n);var i;(i=(0,we.Z)(function*(a,c,f){try{const m=yield c.getMetadata();if(yield function(R,L){const j=nt(R),oe=Mi(L.createTime);return j.persistence.runTransaction("hasNewerBundle","readonly",be=>j.Ns.getBundleMetadata(be,L.id)).then(be=>!!be&&be.createTime.compareTo(oe)>=0)}(a.localStore,m))return yield c.close(),f._completeWith({taskState:"Success",documentsLoaded:(R=m).totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}),Promise.resolve(new Set);f._updateProgress(aO(m));const b=new $R(m,a.localStore,c.It);let I=yield c.wc();for(;I;){const R=yield b.Ou(I);R&&f._updateProgress(R),I=yield c.wc()}const A=yield b.complete();return yield Mc(a,A.Bu,void 0),yield function(R,L){const j=nt(R);return j.persistence.runTransaction("Save bundle","readwrite",oe=>j.Ns.saveBundleMetadata(oe,L))}(a.localStore,m),f._completeWith(A.progress),Promise.resolve(A.$u)}catch(m){return al("SyncEngine",`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}var R}),function(a,c,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield VD(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function FF(n,e){return function TF(n,e){return n.asyncQueue.enqueue((0,we.Z)(function*(){return function(t,r){const i=nt(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield FT(n),e)}))}(ni(n=dn(n,fr)),e).then(t=>t?new fs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Rs(this,t):null)}}class ZT extends WD{constructor(e){super(),this.firestore=e}convertBytes(e){return new D0(new gl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ca.forKey(t,this.firestore,null)}}class aP{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ZT(e)}get(e){const t=Tp(e);return this._delegate.get(t).then(r=>new A0(this._firestore,new Pc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Tp(e);return r?(YD("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Tp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Tp(e);return this._delegate.delete(t),this}}class uP{constructor(e){this._delegate=e}set(e,t,r){const i=Tp(e);return r?(YD("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Tp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Tp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ep{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new I0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new x0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ep.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Ep(e,new ZT(e),t),i.set(t,a)),a}}Ep.INSTANCES=new WeakMap;class Ca{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ZT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Fe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ca(t,new rr(t._delegate,r,new tt(e)))}static forKey(e,t,r){return new Ca(t,new rr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new cy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new cy(this.firestore,OO(this._delegate,e))}catch(t){throw Ns(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Gt.m9)(e))instanceof rr&&PO(this._delegate,e)}set(e,t){t=YD("DocumentReference.set",t);try{return t?eP(this._delegate,e,t):eP(this._delegate,e)}catch(r){throw Ns(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?tP(this._delegate,e):tP(this._delegate,e,t,...r)}catch(i){throw Ns(i,"updateDoc()","DocumentReference.update()")}}delete(){return function c2(n){return ly(dn(n.firestore,fr),[new at(n._key,h.none())])}(this._delegate)}onSnapshot(...e){const t=lP(e),r=cP(e,i=>new A0(this.firestore,new Pc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return nP(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function s2(n){n=dn(n,rr);const e=dn(n.firestore,fr),t=ni(e),r=new wp(e);return function _F(n,e){const t=new gi;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(i,a,c){try{const f=yield function(m,b){const I=nt(m);return I.persistence.runTransaction("read document","readonly",A=>I.localDocuments.getDocument(A,b))}(i,a);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new Fe(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=iy(f,`Failed to get document '${a} from cache`);c.reject(m)}}),function(i,a,c){return r.apply(this,arguments)})(yield FT(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Pc(e,r,n._key,i,new bp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function o2(n){n=dn(n,rr);const e=dn(n.firestore,fr);return TO(ni(e),n._key,{source:"server"}).then(t=>KD(e,n,t))}(this._delegate):function i2(n){n=dn(n,rr);const e=dn(n.firestore,fr);return TO(ni(e),n._key).then(t=>KD(e,n,t))}(this._delegate),t.then(r=>new A0(this.firestore,new Pc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ca(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}function Ns(n,e,t){return n.message=n.message.replace(e,t),n}function lP(n){for(const e of n)if("object"==typeof e&&!QD(e))return e;return{}}function cP(n,e){var t,r;let i;return i=QD(n[0])?n[0]:QD(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class A0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ca(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return qO(this._delegate,e._delegate)}}class x0 extends A0{data(e){const t=this._delegate.data(e);return function ZE(n,e){n||lt()}(void 0!==t),t}}class Rs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ZT(e)}where(e,t,r){try{return new Rs(this.firestore,wh(this._delegate,function zF(n,e,t){const r=e,i=qT("where",n);return new ZF(i,r,t)}(e,t,r)))}catch(i){throw Ns(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Rs(this.firestore,wh(this._delegate,function KF(n,e="asc"){const t=e,r=qT("orderBy",n);return new WF(r,t)}(e,t)))}catch(r){throw Ns(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Rs(this.firestore,wh(this._delegate,function YF(n){return xO("limit",n),new ZO("limit",n,"F")}(e)))}catch(t){throw Ns(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Rs(this.firestore,wh(this._delegate,function QF(n){return xO("limitToLast",n),new ZO("limitToLast",n,"L")}(e)))}catch(t){throw Ns(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Rs(this.firestore,wh(this._delegate,function JF(...n){return new zO("startAt",n,!0)}(...e)))}catch(t){throw Ns(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Rs(this.firestore,wh(this._delegate,function XF(...n){return new zO("startAfter",n,!1)}(...e)))}catch(t){throw Ns(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Rs(this.firestore,wh(this._delegate,function e2(...n){return new WO("endBefore",n,!1)}(...e)))}catch(t){throw Ns(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Rs(this.firestore,wh(this._delegate,function t2(...n){return new WO("endAt",n,!0)}(...e)))}catch(t){throw Ns(t,"endAt()","Query.endAt()")}}isEqual(e){return kO(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function u2(n){n=dn(n,fs);const e=dn(n.firestore,fr),t=ni(e),r=new wp(e);return function vF(n,e){const t=new gi;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(i,a,c){try{const f=yield AT(i,a,!0),m=new cO(a,f.Hi),b=m.ju(f.documents),I=m.applyChanges(b,!1);c.resolve(I.snapshot)}catch(f){const m=iy(f,`Failed to execute query '${a} against cache`);c.reject(m)}}),function(i,a,c){return r.apply(this,arguments)})(yield FT(n),e,t);var r})),t.promise}(t,n._query).then(i=>new bh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function l2(n){n=dn(n,fs);const e=dn(n.firestore,fr),t=ni(e),r=new wp(e);return CO(t,n._query,{source:"server"}).then(i=>new bh(e,r,n,i))}(this._delegate):function a2(n){n=dn(n,fs);const e=dn(n.firestore,fr),t=ni(e),r=new wp(e);return GO(n._query),CO(t,n._query).then(i=>new bh(e,r,n,i))}(this._delegate),t.then(r=>new JD(this.firestore,new bh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=lP(e),r=cP(e,i=>new JD(this.firestore,new bh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return nP(this._delegate,t,r)}withConverter(e){return new Rs(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}class I2{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new x0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class JD{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Rs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new x0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new I2(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new x0(this._firestore,r))})}isEqual(e){return qO(this._delegate,e._delegate)}}class cy extends Rs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ca(this.firestore,e):null}doc(e){try{return new Ca(this.firestore,void 0===e?UT(this._delegate):UT(this._delegate,e))}catch(t){throw Ns(t,"doc()","CollectionReference.doc()")}}add(e){return function d2(n,e){const t=dn(n.firestore,fr),r=UT(n),i=GT(n.converter,e);return ly(t,[jT(_p(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,h.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ca(this.firestore,t))}isEqual(e){return PO(this._delegate,e._delegate)}withConverter(e){return new cy(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}function Tp(n){return dn(n,rr)}class XD{constructor(...e){this._delegate=new Oc(...e)}static documentId(){return new XD(Ir.keyField().canonicalString())}isEqual(e){return(e=(0,Gt.m9)(e))instanceof Oc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Cp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function m2(){return new $D("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Cp(e)}static delete(){const e=function g2(){return new T0("deleteField")}();return e._methodName="FieldValue.delete",new Cp(e)}static arrayUnion(...e){const t=function y2(...n){return new BF("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Cp(t)}static arrayRemove(...e){const t=function _2(...n){return new jF("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Cp(t)}static increment(e){const t=function v2(n){return new HF("increment",n)}(e);return t._methodName="FieldValue.increment",new Cp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const S2={Firestore:oP,GeoPoint:VT,Timestamp:Gn,Blob:D0,Transaction:aP,WriteBatch:uP,DocumentReference:Ca,DocumentSnapshot:A0,Query:Rs,QueryDocumentSnapshot:x0,QuerySnapshot:JD,CollectionReference:cy,FieldPath:XD,FieldValue:Cp,setLogLevel:function C2(n){!function Im(n){fu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function dP(n,e){return function x2(n,e=Gg.z){return new zr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function eA(n,e){return dP(n,e).pipe((0,ft.U)(t=>({payload:t,type:"query"})))}function zT(n,e){return eA(n,e).pipe(ts(void 0),Zg(),(0,ft.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,f)=>{const m=i.find(I=>I.doc.ref.isEqual(c.ref)),b=null==t?void 0:t.payload.docs.find(I=>I.ref.isEqual(c.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(c.metadata)||!m&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:c}})}),a}))}function hP(n,e,t){return zT(n,t).pipe(Li((r,i)=>function O2(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function P2(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return tA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return tA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return tA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),function Bw(n,e=Ws.y){return n=null!=n?n:jw,(0,ur.e)((t,r)=>{let i,a=!0;t.subscribe((0,Xn.x)(r,c=>{const f=e(c);(a||!n(i,f))&&(a=!1,i=f,r.next(c))}))})}(),(0,ft.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function tA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function fP(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function A2(n){(function D2(n,e){n.INTERNAL.registerComponent(new Bd.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},S2)))})(n,(e,t)=>new oP(e,t,new T2)),n.registerVersion("@firebase/firestore-compat","0.1.25")}(J_.Z);class pP{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=zT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ft.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ts(void 0),Zg(),Cn(([r,i])=>i.length>0||!r),(0,ft.U)(([r,i])=>i),Rn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Li((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=fP(e);return hP(this.query,t,this.afs.schedulers.outsideAngular).pipe(Rn.iC)}valueChanges(e={}){return eA(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Rn.iC)}get(e){return(0,En.D)(this.query.get(e)).pipe(Rn.iC)}add(e){return this.ref.add(e)}doc(e){return new gP(this.ref.doc(e),this.afs)}}class gP{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=_P(r,t);return new pP(i,a,this.afs)}snapshotChanges(){return function M2(n,e){return dP(n,e).pipe(ts(void 0),Zg(),(0,ft.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Rn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ft.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,En.D)(this.ref.get(e)).pipe(Rn.iC)}}class k2{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?zT(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Cn(t=>t.length>0),Rn.iC):zT(this.query,this.afs.schedulers.outsideAngular).pipe(Rn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Li((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=fP(e);return hP(this.query,t,this.afs.schedulers.outsideAngular).pipe(Rn.iC)}valueChanges(e={}){return eA(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Rn.iC)}get(e){return(0,En.D)(this.query.get(e)).pipe(Rn.iC)}}const mP=new u.OlP("angularfire2.enableFirestorePersistence"),yP=new u.OlP("angularfire2.firestore.persistenceSettings"),N2=new u.OlP("angularfire2.firestore.settings"),R2=new u.OlP("angularfire2.firestore.use-emulator");function _P(n,e=(t=>t)){return{query:e(n),ref:n}}let dy=(()=>{class n{constructor(t,r,i,a,c,f,m,b,I,A,R,L,j,oe,be,$e,rt){this.schedulers=m;const st=(0,$i.on)(t,f,r),Qe=I;A&&Vw(st,f,R,j,oe,be,L,$e),[this.firestore,this.persistenceEnabled$]=(0,$i.cc)(`${st.name}.firestore`,"AngularFirestore",st.name,()=>{const Tt=f.runOutsideAngular(()=>st.firestore());if(a&&Tt.settings(a),Qe&&Tt.useEmulator(...Qe),i&&!Ur(c)){const At=()=>{try{return(0,En.D)(Tt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(nn){return"undefined"!=typeof console&&console.warn(nn),it(!1)}};return[Tt,f.runOutsideAngular(At)]}return[Tt,it(!1)]},[a,Qe,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=_P(i,r),f=this.schedulers.ngZone.run(()=>a);return new pP(f,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new k2(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new gP(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG($i.Dh),u.LFG($i.xv,8),u.LFG(mP,8),u.LFG(N2,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Rn.HU),u.LFG(yP,8),u.LFG(R2,8),u.LFG(cc,8),u.LFG(kw,8),u.LFG(Nw,8),u.LFG(Rw,8),u.LFG(Fw,8),u.LFG(Lw,8),u.LFG(Uw,8),u.LFG(qd,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),F2=(()=>{class n{constructor(){Q_.Z.registerVersion("angularfire",Rn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:mP,useValue:!0},{provide:yP,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[dy]}),n})();const vP="firebasestorage.googleapis.com",bP="storageBucket";class kr extends Gt.ZR{constructor(e,t){super(nA(e),`Firebase Storage: ${t} (${nA(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,kr.prototype)}_codeEquals(e){return nA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function nA(n){return"storage/"+n}function rA(){return new kr("unknown","An unknown error occurred, please check the error payload for server response.")}function wP(){return new kr("canceled","User canceled the upload/download.")}function EP(){return new kr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function hy(n){return new kr("invalid-argument",n)}function TP(){return new kr("app-deleted","The Firebase app was deleted.")}function CP(n){return new kr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function M0(n,e){return new kr("invalid-format","String does not match format '"+n+"': "+e)}function O0(n){throw new kr("internal-error","Internal error: "+n)}class ps{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ps.makeFromUrl(e,t)}catch(i){return new ps(e,"")}if(""===r.path)return r;throw function z2(n){return new kr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function b(Qe){Qe.path_=decodeURIComponent(Qe.path)}const A=t.replace(/[.]/g,"\\."),st=[{regex:f,indices:{bucket:1,path:3},postModify:function a(Qe){"/"===Qe.path.charAt(Qe.path.length-1)&&(Qe.path_=Qe.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${A}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${t===vP?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let Qe=0;Qe<st.length;Qe++){const Tt=st[Qe],At=Tt.regex.exec(e);if(At){let $r=At[Tt.indices.path];$r||($r=""),r=new ps(At[Tt.indices.bucket],$r),Tt.postModify(r);break}}if(null==r)throw function Z2(n){return new kr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class Q2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function WT(n){return"string"==typeof n||n instanceof String}function IP(n){return iA()&&n instanceof Blob}function iA(){return"undefined"!=typeof Blob}function sA(n,e,t,r){if(r<e)throw hy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw hy(`Invalid value for '${n}'. Expected ${t} or less.`)}function kc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function SP(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Th=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Th||(Th={})),Th))();class rL{constructor(e,t,r,i,a,c,f,m,b,I,A){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=m,this.timeout_=b,this.progressCallback_=I,this.connectionFactory_=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,L)=>{this.resolve_=R,this.reject_=L,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,c=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());!function eL(n){return void 0!==n}(m)?a():a(m)}catch(m){c(m)}else if(null!==f){const m=rA();m.serverResponse=f.getErrorText(),c(this.errorCallback_?this.errorCallback_(f,m):m)}else c(i.canceled?this.appDelete_?TP():wP():function G2(){return new kr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new KT(!1,null,!0)):this.backoffId_=function J2(n,e,t){let r=1,i=null,a=null,c=!1,f=0;function m(){return 2===f}let b=!1;function I(...be){b||(b=!0,e.apply(null,be))}function A(be){i=setTimeout(()=>{i=null,n(L,m())},be)}function R(){a&&clearTimeout(a)}function L(be,...$e){if(b)return void R();if(be)return R(),void I.call(null,be,...$e);if(m()||c)return R(),void I.call(null,be,...$e);let st;r<64&&(r*=2),1===f?(f=2,st=0):st=1e3*(r+Math.random()),A(st)}let j=!1;function oe(be){j||(j=!0,R(),!b&&(null!==i?(be||(f=2),clearTimeout(i),A(0)):be||(f=1)))}return A(0),a=setTimeout(()=>{c=!0,oe(!0)},t),oe}((r,i)=>{if(i)return void r(!1,new KT(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const c=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const f=a.getErrorCode()===Th.NO_ERROR,m=a.getStatus();if(!f||this.isRetryStatusCode_(m)){const I=a.getErrorCode()===Th.ABORT;return void r(!1,new KT(!1,null,I))}const b=-1!==this.successCodes_.indexOf(m);r(!0,new KT(b,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function X2(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class KT{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function cL(...n){const e=function lL(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(iA())return new Blob(n);throw new kr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Vo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class oA{constructor(e,t){this.data=e,this.contentType=t||null}}function aA(n,e){switch(n){case Vo.RAW:return new oA(DP(e));case Vo.BASE64:case Vo.BASE64URL:return new oA(AP(n,e));case Vo.DATA_URL:return new oA(function pL(n){const e=new xP(n);return e.base64?AP(Vo.BASE64,e.rest):function fL(n){let e;try{e=decodeURIComponent(n)}catch(t){throw M0(Vo.DATA_URL,"Malformed data URL.")}return DP(e)}(e.rest)}(e),function gL(n){return new xP(n).contentType}(e))}throw rA()}function DP(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function AP(n,e){switch(n){case Vo.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw M0(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Vo.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw M0(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function hL(n){return atob(n)}(e)}catch(i){throw M0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class xP{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw M0(Vo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function mL(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ml{constructor(e,t){let r=0,i="";IP(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(IP(this.data_)){const i=function dL(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new ml(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ml(r,!0)}}static getBlob(...e){if(iA()){const t=e.map(r=>r instanceof ml?r.data_:r);return new ml(cL.apply(null,t))}{const t=e.map(c=>WT(c)?aA(Vo.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(c=>{for(let f=0;f<c.length;f++)i[a++]=c[f]}),new ml(i,!0)}}uploadData(){return this.data_}}function uA(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function nL(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function MP(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function vL(n,e){return e}class Fs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||vL}}let YT=null;function P0(){if(YT)return YT;const n=[];n.push(new Fs("bucket")),n.push(new Fs("generation")),n.push(new Fs("metageneration")),n.push(new Fs("name","fullPath",!0));const t=new Fs("name");t.xform=function e(a,c){return function bL(n){return!WT(n)||n.length<2?n:MP(n)}(c)},n.push(t);const i=new Fs("size");return i.xform=function r(a,c){return void 0!==c?Number(c):c},n.push(i),n.push(new Fs("timeCreated")),n.push(new Fs("updated")),n.push(new Fs("md5Hash",null,!0)),n.push(new Fs("cacheControl",null,!0)),n.push(new Fs("contentDisposition",null,!0)),n.push(new Fs("contentEncoding",null,!0)),n.push(new Fs("contentLanguage",null,!0)),n.push(new Fs("contentType",null,!0)),n.push(new Fs("metadata","customMetadata",!0)),YT=n,YT}function OP(n,e,t){const r=uA(e);return null===r?null:function EL(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const c=t[a];r[c.local]=c.xform(r,e[c.server])}return function wL(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new ps(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function lA(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const PP="prefixes";class yl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function _l(n){if(!n)throw rA()}function QT(n,e){return function t(r,i){const a=OP(n,i,e);return _l(null!==a),a}}function fy(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function $2(){return new kr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function H2(){return new kr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function j2(n){return new kr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function q2(n){return new kr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function k0(n){const e=fy(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function B2(n){return new kr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function NP(n,e,t){const i=kc(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new yl(i,"GET",QT(n,t),c);return f.errorHandler=k0(e),f}function AL(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const f=kc(e.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,I=new yl(f,"GET",function SL(n,e){return function t(r,i){const a=function IL(n,e,t){const r=uA(t);return null===r?null:function CL(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[PP])for(const i of t[PP]){const a=i.replace(/\/$/,""),c=n._makeStorageReference(new ps(e,a));r.prefixes.push(c)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new ps(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return _l(null!==a),a}}(n,e.bucket),b);return I.urlParams=a,I.errorHandler=fy(e),I}function FP(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function PL(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class JT{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function cA(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){_l(!1)}return _l(!!t&&-1!==(e||["active"]).indexOf(t)),t}const FL={STATE_CHANGED:"state_changed"},Ls={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function dA(n){switch(n){case"running":case"pausing":case"canceling":return Ls.RUNNING;case"paused":return Ls.PAUSED;case"success":return Ls.SUCCESS;case"canceled":return Ls.CANCELED;default:return Ls.ERROR}}class LL{constructor(e,t,r){if(function tL(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function py(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class VL extends class UL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Th.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Th.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Th.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw O0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw O0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw O0("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw O0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw O0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function mu(){return new VL}class BP{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=P0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function kL(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c=FP(e,r,i),f={name:c.fullPath},m=kc(a,n.host,n._protocol),I={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},A=lA(c,t),j=new yl(m,"POST",function L(oe){let be;cA(oe);try{be=oe.getResponseHeader("X-Goog-Upload-URL")}catch($e){_l(!1)}return _l(WT(be)),be},n.maxUploadRetryTime);return j.urlParams=f,j.headers=I,j.body=A,j.errorHandler=fy(e),j}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,mu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function NL(n,e,t,r){const m=new yl(t,"POST",function a(b){const I=cA(b,["active","final"]);let A=null;try{A=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch(L){_l(!1)}A||_l(!1);const R=Number(A);return _l(!isNaN(R)),new JT(R,r.size(),"final"===I)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=fy(e),m}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,mu,t,r);this._request=a,a.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new JT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let c;try{c=function RL(n,e,t,r,i,a,c,f){const m=new JT(0,0);if(c?(m.current=c.current,m.total=c.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function K2(){return new kr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const b=m.total-m.current;let I=b;i>0&&(I=Math.min(I,i));const A=m.current,j={"X-Goog-Upload-Command":I===b?"upload, finalize":"upload","X-Goog-Upload-Offset":`${m.current}`},oe=r.slice(A,A+I);if(null===oe)throw EP();const st=new yl(t,"POST",function be(Qe,Tt){const At=cA(Qe,["active","final"]),nn=m.current+I,$r=r.size();let Ho;return Ho="final"===At?QT(e,a)(Qe,Tt):null,new JT(nn,$r,"final"===At,Ho)},e.maxUploadRetryTime);return st.headers=j,st.body=oe.uploadData(),st.progressCallback=f||null,st.errorHandler=fy(n),st}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const f=this._ref.storage._makeRequest(c,mu,i,a);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=NP(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,mu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function LP(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},m=function f(){let st="";for(let Qe=0;Qe<2;Qe++)st+=Math.random().toString().slice(2);return st}();c["Content-Type"]="multipart/related; boundary="+m;const b=FP(e,r,i),I=lA(b,t),L=ml.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+I+"\r\n--"+m+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===L)throw EP();const j={name:b.fullPath},oe=kc(a,n.host,n._protocol),$e=n.maxUploadRetryTime,rt=new yl(oe,"POST",QT(n,t),$e);return rt.urlParams=j,rt.headers=c,rt.body=L.uploadData(),rt.errorHandler=fy(e),rt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,mu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=wP(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=dA(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new LL(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(dA(this._state)){case Ls.SUCCESS:py(this._resolve.bind(null,this.snapshot))();break;case Ls.CANCELED:case Ls.ERROR:py(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(dA(this._state)){case Ls.RUNNING:case Ls.PAUSED:e.next&&py(e.next.bind(e,this.snapshot))();break;case Ls.SUCCESS:e.complete&&py(e.complete.bind(e))();break;default:e.error&&py(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Ip{constructor(e,t){this._service=e,this._location=t instanceof ps?t:ps.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ip(e,t)}get root(){const e=new ps(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return MP(this._location.path)}get storage(){return this._service}get parent(){const e=function yL(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ps(this._location.bucket,e);return new Ip(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw CP(e)}}function HP(n,e,t){return hA.apply(this,arguments)}function hA(){return hA=(0,we.Z)(function*(n,e,t){const i=yield $P(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield HP(n,e,i.nextPageToken))}),hA.apply(this,arguments)}function $P(n,e){null!=e&&"number"==typeof e.maxResults&&sA("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=AL(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,mu)}function QL(n){n._throwIfRoot("getDownloadURL");const e=function xL(n,e,t){const i=kc(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new yl(i,"GET",function DL(n,e){return function t(r,i){const a=OP(n,i,e);return _l(null!==a),function TL(n,e,t,r){const i=uA(e);if(null===i||!WT(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const c=encodeURIComponent;return a.split(",").map(b=>{const A=n.fullPath;return kc("/b/"+c(n.bucket)+"/o/"+c(A),t,r)+SP({alt:"media",token:b})})[0]}(a,i,n.host,n._protocol)}}(n,t),c);return f.errorHandler=k0(e),f}(n.storage,n._location,P0());return n.storage.makeRequestWithTokens(e,mu).then(t=>{if(null===t)throw function Y2(){return new kr("no-download-url","The given file does not have any download URLs.")}();return t})}function qP(n,e){const t=function _L(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ps(n._location.bucket,t);return new Ip(n.storage,r)}function GP(n,e){if(n instanceof fA){const t=n;if(null==t._bucket)throw function W2(){return new kr("no-default-bucket","No default bucket found. Did you set the '"+bP+"' property when initializing the app?")}();const r=new Ip(t,t._bucket);return null!=e?GP(r,e):r}return void 0!==e?qP(n,e):n}function tU(n,e){if(e&&function XL(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof fA)return function eU(n,e){return new Ip(n,e)}(n,e);throw hy("To use ref(service, url), the first argument must be a Storage instance.")}return GP(n,e)}function ZP(n,e){const t=null==e?void 0:e[bP];return null==t?null:ps.makeFromBucketSpec(t,n)}class fA{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=vP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ps.makeFromBucketSpec(i,this._host):ZP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ps.makeFromBucketSpec(this._url,e):ZP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){sA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){sA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,we.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,we.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ip(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new Q2(TP());{const a=function uL(n,e,t,r,i,a){const c=SP(n.urlParams),f=n.url+c,m=Object.assign({},n.headers);return function oL(n,e){e&&(n["X-Firebase-GMPID"]=e)}(m,e),function iL(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(m,t),function sL(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(m,a),function aL(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(m,r),new rL(f,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,we.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const zP="@firebase/storage";function YP(n,e){return tU(n=(0,Gt.m9)(n),e)}function hU(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new fA(t,r,i,e,ao.SDK_VERSION)}!function fU(){(0,ao._registerComponent)(new Bd.wA("storage",hU,"PUBLIC").setMultipleInstances(!0)),(0,ao.registerVersion)(zP,"0.9.9",""),(0,ao.registerVersion)(zP,"0.9.9","esm2017")}();class XT{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class QP{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new XT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new XT(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?c=>t(new XT(c,this,this._ref)):{next:t.next?c=>t.next(new XT(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class JP{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Nc(e,this._service))}get items(){return this._delegate.items.map(e=>new Nc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Nc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function cU(n,e){return qP(n,e)}(this._delegate,e);return new Nc(t,this.storage)}get root(){return new Nc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Nc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new QP(function rU(n,e,t){return function ZL(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new BP(n,new ml(e),t)}(n=(0,Gt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Vo.RAW,r){this._throwIfRoot("putString");const i=aA(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new QP(new BP(this._delegate,new ml(i.data,!0),a),this)}listAll(){return function aU(n){return function WL(n){const e={prefixes:[],items:[]};return HP(n,e).then(()=>e)}(n=(0,Gt.m9)(n))}(this._delegate).then(e=>new JP(e,this.storage))}list(e){return function oU(n,e){return $P(n=(0,Gt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new JP(t,this.storage))}getMetadata(){return function iU(n){return function KL(n){n._throwIfRoot("getMetadata");const e=NP(n.storage,n._location,P0());return n.storage.makeRequestWithTokens(e,mu)}(n=(0,Gt.m9)(n))}(this._delegate)}updateMetadata(e){return function sU(n,e){return function YL(n,e){n._throwIfRoot("updateMetadata");const t=function ML(n,e,t,r){const a=kc(e.fullServerUrl(),n.host,n._protocol),f=lA(t,r),b=n.maxOperationRetryTime,I=new yl(a,"PATCH",QT(n,r),b);return I.headers={"Content-Type":"application/json; charset=utf-8"},I.body=f,I.errorHandler=k0(e),I}(n.storage,n._location,e,P0());return n.storage.makeRequestWithTokens(t,mu)}(n=(0,Gt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function uU(n){return QL(n=(0,Gt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function lU(n){return function JL(n){n._throwIfRoot("deleteObject");const e=function OL(n,e){const r=kc(e.fullServerUrl(),n.host,n._protocol),f=new yl(r,"DELETE",function c(m,b){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=k0(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,mu)}(n=(0,Gt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw CP(e)}}class XP{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(ek(e))throw hy("ref() expected a child path but got a URL, use refFromURL instead.");return new Nc(YP(this._delegate,e),this)}refFromURL(e){if(!ek(e))throw hy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ps.makeFromUrl(e,this._delegate.host)}catch(t){throw hy("refFromUrl() expected a valid full URL but got an invalid one.")}return new Nc(YP(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function dU(n,e,t,r={}){!function nU(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,Gt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function ek(n){return/^[A-Za-z]+:\/\//.test(n)}function yU(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new XP(t,r)}function tk(n){const e=function vU(n){return new zr.y(e=>{const t=c=>e.next(c);t(n.snapshot);const a=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){a()}}).pipe(function L2(n,e=Gg.z){return(0,ur.e)((t,r)=>{let i=null,a=null,c=null;const f=()=>{if(i){i.unsubscribe(),i=null;const b=a;a=null,r.next(b)}};function m(){const b=c+n,I=e.now();if(I<b)return i=this.schedule(void 0,b-I),void r.add(i);f()}t.subscribe((0,Xn.x)(r,b=>{a=b,c=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,ft.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function eC(n){return{getDownloadURL:()=>it(void 0).pipe(Rn.fc,er(()=>n.getDownloadURL()),Rn.iC),getMetadata:()=>it(void 0).pipe(Rn.fc,er(()=>n.getMetadata()),Rn.iC),delete:()=>(0,En.D)(n.delete()),child:e=>eC(n.child(e)),updateMetadata:e=>(0,En.D)(n.updateMetadata(e)),put:(e,t)=>tk(n.put(e,t)),putString:(e,t,r)=>tk(n.putString(e,t,r)),list:e=>(0,En.D)(n.list(e)),listAll:()=>(0,En.D)(n.listAll())}}!function _U(n){const e={TaskState:Ls,TaskEvent:FL,StringFormat:Vo,Storage:XP,Reference:Nc};n.INTERNAL.registerComponent(new Bd.wA("storage-compat",yU,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(J_.Z);const bU=new u.OlP("angularfire2.storageBucket"),wU=new u.OlP("angularfire2.storage.maxUploadRetryTime"),EU=new u.OlP("angularfire2.storage.maxOperationRetryTime"),TU=new u.OlP("angularfire2.storage.use-emulator");let pA=(()=>{class n{constructor(t,r,i,a,c,f,m,b,I,A){const R=(0,$i.on)(t,c,r);this.storage=(0,$i.cc)(`${R.name}.storage.${i}`,"AngularFireStorage",R.name,()=>{const L=c.runOutsideAngular(()=>R.storage(i||void 0)),j=I;return j&&L.useEmulator(...j),m&&L.setMaxUploadRetryTime(m),b&&L.setMaxOperationRetryTime(b),L},[m,b])}ref(t){return eC(this.storage.ref(t))}refFromURL(t){return eC(this.storage.refFromURL(t))}upload(t,r,i){return eC(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG($i.Dh),u.LFG($i.xv,8),u.LFG(bU,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Rn.HU),u.LFG(wU,8),u.LFG(EU,8),u.LFG(TU,8),u.LFG(qd,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),CU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),IU=(()=>{class n{constructor(){Q_.Z.registerVersion("angularfire",Rn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[pA],imports:[CU]}),n})(),Ch=(()=>{class n{constructor(t,r,i,a,c){this.fireAuth=t,this.firestore=r,this.http=i,this.storage=a,this.router=c,this.currentUser=new Jn(null),this.base64Secret=btoa(Vd_spotify_id+":"+Vd_spotify_secret)}requestLogin(t){return this.fireAuth.signInWithEmailAndPassword(t.email,t.password)}requestSignUp(t){return this.fireAuth.createUserWithEmailAndPassword(t.email,t.password)}setUserProfile(t,r){var i=this;return this.storage.ref("default_profile.png").getDownloadURL().pipe(_n(1),(0,Yr.b)(function(){var a=(0,we.Z)(function*(c){i.firestore.collection("users").doc(r).set({displayName:t,photoURL:c});const f=yield i.fireAuth.currentUser;!f||(0,fa.af)(f,{displayName:t,photoURL:c})});return function(c){return a.apply(this,arguments)}}()))}loginWithRefreshToken(){let t=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")).refreshToken:null;if(t)return this.http.post(`https://securetoken.googleapis.com/v1/token?key=${Vd_firebase.apiKey}`,{grant_type:"refresh_token",refresh_token:t}).pipe(Kr(r=>(console.log(r),it(null))))}logOut(){localStorage.clear(),this.currentUser.next(null),(0,fa.y)((0,fa.n)()).then(()=>{this.router.navigate(["/auth"])})}getAccessToken(){var t;const r=localStorage.getItem("spotify")&&JSON.parse(localStorage.getItem("spotify")).access_token&&JSON.parse(localStorage.getItem("spotify")).refresh_token?JSON.parse(localStorage.getItem("spotify")):null===(t=this.currentUser.value)||void 0===t?void 0:t.spotify;return this.currentUser.next(Object.assign(Object.assign({},this.currentUser.value),{spotify:r})),(null==r?void 0:r.access_token)?r.access_token?(new Date).getTime()>r.expirationTime?this.getAccessTokenWithRefreshToken():it(r.access_token):(this.logOut(),it(null)):this.getAccessTokenWithCode()}getAccessTokenWithRefreshToken(){var t,r;const i=(null===(r=null===(t=this.currentUser.value)||void 0===t?void 0:t.spotify)||void 0===r?void 0:r.refresh_token)||JSON.parse(localStorage.getItem("spotify")).refresh_token;return i?this.http.post("https://accounts.spotify.com/api/token",new URLSearchParams({grant_type:"refresh_token",refresh_token:i}).toString(),{headers:new os({Authorization:`Basic ${this.base64Secret} `,"Content-Type":"application/x-www-form-urlencoded"})}).pipe(_n(1),(0,ft.U)(a=>{var c,f,m;const b=1e3*+a.expires_in+(new Date).getTime();localStorage.setItem("spotify",JSON.stringify(Object.assign(Object.assign({},a),{expirationTime:b,refresh_token:i})));const I=Object.assign(Object.assign({},this.currentUser.value),{spotify:Object.assign(Object.assign({},a),{expirationTime:b,code:null===(m=null===(f=null===(c=this.currentUser)||void 0===c?void 0:c.value)||void 0===f?void 0:f.spotify)||void 0===m?void 0:m.code})});return this.currentUser.next(I),a.access_token})):(console.error("Please login again"),this.logOut(),it(null))}getAccessTokenWithCode(){var t,r;const i=null===(r=null===(t=this.currentUser.value)||void 0===t?void 0:t.spotify)||void 0===r?void 0:r.code;return i?this.http.post("https://accounts.spotify.com/api/token",new URLSearchParams({grant_type:"authorization_code",code:i,redirect_uri:"https://txrbomvne.github.io/"}).toString(),{headers:new os({Authorization:`Basic ${this.base64Secret} `,"Content-Type":"application/x-www-form-urlencoded"})}).pipe(_n(1),(0,ft.U)(a=>{var c,f,m;const b=1e3*+a.expires_in+(new Date).getTime();localStorage.setItem("spotify",JSON.stringify(Object.assign(Object.assign({},a),{expirationTime:b})));const I=Object.assign(Object.assign({},this.currentUser.value),{spotify:Object.assign(Object.assign({},a),{expirationTime:b,code:null===(m=null===(f=null===(c=this.currentUser)||void 0===c?void 0:c.value)||void 0===f?void 0:f.spotify)||void 0===m?void 0:m.code})});return this.currentUser.next(I),a.access_token})):(this.logOut(),it(null))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(cc),u.LFG(dy),u.LFG(zl),u.LFG(pA),u.LFG(lr))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ih=(()=>{class n{constructor(){this.isLoading=new ar.x,this.message=new ar.x}startLoading(t){this.message.next("XD"),this.message.next(t?t.toUpperCase():"LOADING"),this.isLoading.next(!0)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function SU(n,e){1&n&&(u.TgZ(0,"div"),u._UZ(1,"input",18)(2,"input",19),u.qZA()),2&n&&u.Q6J("@appear",void 0)}function DU(n,e){if(1&n&&(u.TgZ(0,"p",20),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Oqu(t.errorMessage)}}function AU(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",21)(1,"p",22),u._uU(2,"Don't have an account?"),u.qZA(),u.TgZ(3,"button",23),u.NdJ("click",function(){return u.CHM(t),u.oxw().toggleLoginMode(!1)}),u._uU(4," SIGN UP "),u.qZA()()}}function xU(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",21)(1,"p",22),u._uU(2,"Already have an account?"),u.qZA(),u.TgZ(3,"button",23),u.NdJ("click",function(){return u.CHM(t),u.oxw().toggleLoginMode(!0)}),u._uU(4," LOGIN "),u.qZA()()}}let MU=(()=>{class n{constructor(t,r,i,a){this.authService=t,this.loadingService=r,this.fireAuth=i,this.router=a,this.loginMode=!0,this.loginForm=new us({email:new xr(null,[$n.email,$n.required]),password:new xr(null,[$n.required,$n.minLength(6),$n.pattern("^[a-zA-Z]+$")])})}requestAuth(){this.loadingService.isLoading.next(!0),this.loginMode?this.authService.requestLogin(this.loginForm.value).then(t=>{const r=t.user.auth.currentUser;!r||(localStorage.setItem("auth",JSON.stringify({refreshToken:r.refreshToken})),this.loadingService.isLoading.next(!1),this.requestSpotifyAuth())}).catch(()=>{this.errorMessage="Invalid Credentials",this.loadingService.isLoading.next(!1)}):this.authService.requestSignUp(this.loginForm.value).then(t=>{const r=t.user.auth.currentUser;!r||(localStorage.setItem("auth",JSON.stringify({refreshToken:r.refreshToken})),this.authService.setUserProfile(this.loginForm.value.username,t.user.uid).pipe(Kr(()=>(this.loadingService.isLoading.next(!1),it(null)))).subscribe(()=>{this.loadingService.isLoading.next(!1),this.requestSpotifyAuth()}))}).catch(t=>{this.errorMessage="auth/email-already-in-use"===t.code?"This email is already in use":t.code,this.loadingService.isLoading.next(!1)})}toggleLoginMode(t){this.loginMode=t,t?(this.loginForm.removeControl("confirmPassword"),this.loginForm.removeControl("username")):(this.loginForm.addControl("confirmPassword",new xr(null,[$n.required,this.matchPasswordValidator()])),this.loginForm.addControl("username",new xr(null,$n.required)))}requestSpotifyAuth(){let t="https://accounts.spotify.com/authorize?"+new io({fromObject:{client_id:Vd_spotify_id,response_type:"code",scope:"streaming",redirect_uri:"https://txrbomvne.github.io/"}});window.open(t,"_self")}matchPasswordValidator(){return()=>{var t,r,i;return(null===(t=this.loginForm.get("password"))||void 0===t?void 0:t.value)===(null===(r=this.loginForm.get("confirmPassword"))||void 0===r?void 0:r.value)?(this.errorMessage=void 0,null):((null===(i=this.loginForm.get("confirmPassword"))||void 0===i?void 0:i.dirty)&&(this.errorMessage="Passwords don't match"),{passwordMatches:!1})}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ch),u.Y36(Ih),u.Y36(cc),u.Y36(lr))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-auth"]],decls:24,vars:6,consts:[["id","background-image"],["id","background",1,"d-flex","justify-content-center","align-items-center"],["id","modal",1,"rounded","text-center","px-4","py-5"],[1,"display-2","my-4"],[1,"space-line"],[1,"py-3"],["id","p1",1,"fs-5","my-2"],["id","p2",1,"fs-5"],["id","form",1,"px-4","mt-4",3,"formGroup"],["type","email","placeholder","Email","name","email","formControlName","email","autocomplete","email",1,"form-control","bg-dark","rounded-pill","border-0","shadow-none","px-4","text-white","fs-5"],["type","password","autocomplete","current-password","placeholder","Password","name","password","formControlName","password",1,"form-control","bg-dark","rounded-pill","border-0","shadow-none","px-4","my-3","text-white","fs-5"],[4,"ngIf"],["id","error","class","text-danger mb-2",4,"ngIf"],[1,"d-grid","my-4"],["id","spotify-btn","type","submit",1,"text-center","mx-5","fs-5","px-5","py-2","border-0","rounded-pill",3,"disabled","click"],["width","30","height","30","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-spotify"],["d","M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.669 11.538a.498.498 0 0 1-.686.165c-1.879-1.147-4.243-1.407-7.028-.77a.499.499 0 0 1-.222-.973c3.048-.696 5.662-.397 7.77.892a.5.5 0 0 1 .166.686zm.979-2.178a.624.624 0 0 1-.858.205c-2.15-1.321-5.428-1.704-7.972-.932a.625.625 0 0 1-.362-1.194c2.905-.881 6.517-.454 8.986 1.063a.624.624 0 0 1 .206.858zm.084-2.268C10.154 5.56 5.9 5.419 3.438 6.166a.748.748 0 1 1-.434-1.432c2.825-.857 7.523-.692 10.492 1.07a.747.747 0 1 1-.764 1.288z"],["class","d-grid mb-4",4,"ngIf"],["type","password username","placeholder","Confirm password","name","confirmPassword","formControlName","confirmPassword","autocomplete","current-password",1,"form-control","bg-dark","rounded-pill","border-0","shadow-none","px-4","text-white","fs-5"],["type","text","placeholder","Username","name","username","formControlName","username","autocomplete","username",1,"form-control","bg-dark","rounded-pill","border-0","shadow-none","px-4","my-3","text-white","fs-5"],["id","error",1,"text-danger","mb-2"],[1,"d-grid","mb-4"],["id","p3",1,"fs-5","mt-4"],["id","sign-up-btn",1,"text-center","mx-5","fs-5","px-5","py-2","border-0","rounded-pill",3,"click"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),u._uU(4,"L2P"),u.qZA(),u._UZ(5,"div",4),u.TgZ(6,"div",5)(7,"p",6),u._uU(8,"This app uses Spotify Premium"),u.qZA(),u.TgZ(9,"p",7),u._uU(10,"Please login and authorize to use your Spotify account"),u.qZA(),u.TgZ(11,"form",8),u._UZ(12,"input",9)(13,"input",10),u.YNc(14,SU,3,1,"div",11),u.YNc(15,DU,2,1,"p",12),u.TgZ(16,"div",13)(17,"button",14),u.NdJ("click",function(){return r.requestAuth()}),u.O4$(),u.TgZ(18,"svg",15),u._UZ(19,"path",16),u.qZA(),u._uU(20," CONTINUE WITH SPOTIFY "),u.qZA()()()(),u.kcU(),u._UZ(21,"div",4),u.YNc(22,AU,5,0,"div",17),u.YNc(23,xU,5,0,"div",17),u.qZA()()()),2&t&&(u.xp6(11),u.Q6J("formGroup",r.loginForm),u.xp6(3),u.Q6J("ngIf",!r.loginMode),u.xp6(1),u.Q6J("ngIf",r.errorMessage),u.xp6(2),u.Q6J("disabled",!r.loginForm.valid),u.xp6(5),u.Q6J("ngIf",r.loginMode),u.xp6(1),u.Q6J("ngIf",!r.loginMode))},directives:[tc,Ql,nc,Po,Xu,iu,Mn],styles:["#background-image[_ngcontent-%COMP%]{background-image:url(preview.07d0e1065cb4d872.png);background-repeat:no-repeat;background-size:cover;background-position:left;height:100vh}#background[_ngcontent-%COMP%]{background-color:#000000c4;width:100%;height:100%}#modal[_ngcontent-%COMP%]{background-color:#202020}h1[_ngcontent-%COMP%]{color:#bf9c6e;font-family:Barlow Condensed,sans-serif;font-weight:700;line-height:65px}.space-line[_ngcontent-%COMP%]{height:1px;width:100%;background-color:#707070}#form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#101010!important}#form[_ngcontent-%COMP%]   .ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px dashed red!important}#spotify-btn[_ngcontent-%COMP%]{font-family:Barlow Condensed,sans-serif;font-weight:600;display:flex;align-items:center;justify-content:center;gap:6px;background-color:#1ed760}#p1[_ngcontent-%COMP%]{color:gray;font-weight:300}#p2[_ngcontent-%COMP%]{color:#d6d6d6;font-weight:400}#sign-up-btn[_ngcontent-%COMP%]{font-family:Barlow Condensed,sans-serif;font-weight:600;display:flex;align-items:center;justify-content:center;gap:6px;background-color:#d6d6d6;color:#666}#p3[_ngcontent-%COMP%]{color:gray;font-weight:300;font-style:italic}"],data:{animation:[ro("appear",[nr(":enter",[Xt({transform:"scaleY(0)","transform-origin":"top",opacity:0}),tr("300ms ease-in-out",Xt({transform:"scaleY(1)",opacity:1}))]),nr(":leave",[Xt({"transform-origin":"top"}),tr("300ms ease-in-out",Xt({transform:"scaleY(0)",opacity:0}))])])]}}),n})(),nk=(()=>{class n{constructor(t,r){this.router=t,this.authService=r}canActivate(t,r){const i=this.authService.loginWithRefreshToken();return i?i.pipe(_n(1),(0,ft.U)(a=>{var c;if(!a)return this.router.createUrlTree(["/auth"]);let f=+a.expires_in+(new Date).getTime();if(t.queryParamMap.get("code")){const m=t.queryParamMap.get("code");return this.authService.currentUser.next(Object.assign(Object.assign({},this.authService.currentUser.value),{accessToken:a.access_token,expirationTime:f,refreshToken:a.refresh_token,uid:a.user_id,spotify:Object.assign(Object.assign({},null===(c=this.authService.currentUser.value)||void 0===c?void 0:c.spotify),{code:m})})),!0}return this.authService.currentUser.next(Object.assign(Object.assign({},this.authService.currentUser.value),{accessToken:a.access_token,expirationTime:f,refreshToken:a.refresh_token,uid:a.user_id})),!0})):this.router.createUrlTree(["/auth"])}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(lr),u.LFG(Ch))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const OU=function(){return["/"]};let rk=(()=>{class n{constructor(t){this.route=t,this.errorMessage="We didn't found a tab for that song!"}ngOnInit(){"true"===this.route.snapshot.queryParamMap.get("noTrack")&&(this.errorMessage="Spotify couldn't find that song!")}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(xo))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-not-found"]],decls:10,vars:3,consts:[["id","not-found-container",1,"h-100","w-100","row","m-0"],[1,"col","pt-5","px-0"],["id","back-btn-container",1,"fs-3","rounded-end",3,"routerLink"],["id","arrow-head"],[1,"my-auto"],[1,"text-white","text-center","my-auto","col-6"],[1,"col","p-0"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),u._uU(4,"\u2039"),u.qZA(),u.TgZ(5,"p",4),u._uU(6,"BACK"),u.qZA()()(),u.TgZ(7,"h2",5),u._uU(8),u.qZA(),u._UZ(9,"div",6),u.qZA()),2&t&&(u.xp6(2),u.Q6J("routerLink",u.DdM(2,OU)),u.xp6(6),u.hij(" ",r.errorMessage," "))},directives:[Cd],styles:["#not-found-container[_ngcontent-%COMP%]{width:100vw;min-height:100vh}#back-btn-container[_ngcontent-%COMP%]{color:#fff;font-family:Barlow Condensed;vertical-align:middle;padding-bottom:5px;margin-right:50%}#back-btn-container[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#ffffff1a}#back-btn-container[_ngcontent-%COMP%]:active{cursor:pointer;background-color:#ffffff26}#back-btn-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}#arrow-head[_ngcontent-%COMP%]{font-size:1.5em;margin-inline:10px;line-height:40px;max-height:40px!important;vertical-align:sub}"]}),n})(),tC=(()=>{class n{constructor(t){this.el=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","segment",""]]}),n})(),N0=(()=>{class n{constructor(t){this.playerService=t,this.tabLayout=Sh,this.currentTab=this.playerService.currentTab.value,this.staffHeight=42*(this.currentTab.instrument.strings-1),this.isPlaying=new ar.x}subToTab(){return this.playerService.currentTab.subscribe(t=>{this.currentTab=t,this.staffHeight=42*(t.instrument.strings-1)})}styleBar(t,r){let i;return!t.valid&&t.totalDurationRatio>t.timeSignatureRatio?(i={border:"red 1px solid",transform:"translateY(-1px)"},i):!t.valid&&t.totalDurationRatio<t.timeSignatureRatio?(i={border:"yellow 1px solid",transform:"translateY(-1px)"},i):this.hasTimeSignatureChanged(t,r)?(i={"width.px":Sh.barExtraWidth*t.timeSignatureRatio,"height.px":this.staffHeight},i):(i={"width.px":Sh.initialBarWidth*t.timeSignatureRatio,"height.px":this.staffHeight},i)}styleTimeSignature(t,r){let i;return this.hasTimeSignatureChanged(t,r)?(i={"width.px":Sh.leftBarExtraPadding},i):(i={"width.px":Sh.leftBarPadding},i)}styleSegment(t){var r;let i;return!t.isRest&&(null===(r=t.notes)||void 0===r?void 0:r.every(a=>!a.fretValue&&0!==a.fretValue))?(i={"width.px":t.separationSpace,"background-color":"rgba(255, 255, 255, 0.05)"},i):(i={"width.px":t.separationSpace},i)}styleNote(t){let r;return t.fretValue||0===t.fretValue?(r={"top.px":41.7*t.string-11},r):(r={"top.px":41.7*t.string-11,"background-color":"transparent"},r)}assignSlide(t){let r="../../../assets/svgs/effects/to-apply/";return t.effects&&t.effects.slides&&("slideUp"===t.effects.slides.slideOut||"slideUp"===t.effects.slides.slideIn)&&(r+="slide-up.svg"),t.effects&&t.effects.slides&&("slideDown"===t.effects.slides.slideOut||"slideDown"===t.effects.slides.slideIn)&&(r+="slide-down.svg"),t.effects&&t.effects.slides&&"slideToNote"===t.effects.slides.slideOut&&(r+="slide-down.svg"),r}styleSlideOut(t,r,i){if(!t.effects||!t.effects.slides)return{};let a;if("slideToNote"===t.effects.slides.slideOut){let c,f=0,m=0;r===i.segments[i.segments.length-1]&&(f=1.15,m=23),c=r.durationInverse<4?.95:4===r.durationInverse?.9:r.durationInverse>8?.5:.7,a={"width.px":40,transform:`translateX(${r.separationSpace/2+m}px) scaleX(${r.separationSpace/40*c+f}) rotate(20deg)`}}else a="slideDown"===t.effects.slides.slideOut?{"width.px":30,"max-width.px":r.separationSpace,transform:"translateX(25px) rotate(20deg)"}:"slideUp"===t.effects.slides.slideOut?{"width.px":30,"max-width.px":r.separationSpace,transform:"translateX(25px) rotate(-20deg)"}:{display:"none"};return a}styleSlideIn(t,r){if(!t.effects||!t.effects.slides)return{};let i;return i="slideDown"===t.effects.slides.slideIn?{"width.px":30,"max-width.px":r.separationSpace,transform:"translateX(-25px) rotate(20deg)"}:"slideUp"===t.effects.slides.slideIn?{"width.px":30,"max-width.px":r.separationSpace,transform:"translateX(-25px) rotate(-20deg)"}:{display:"none"},i}assignRestImg(t){var r;let i="../../../assets/svgs/rests/";if(t.effects&&(null===(r=t.effects)||void 0===r?void 0:r.isDotted)){if(!t.effects.isDotted)return i+"4th_rest.svg";switch(t.initialDurationInverse){case 1:return i+"dotted_1st_rest.svg";case 2:return i+"dotted_2nd_rest.svg";case 4:default:return i+"dotted_4th_rest.svg";case 8:return i+"dotted_8th_rest.svg";case 16:return i+"dotted_16th_rest.svg";case 32:return i+"dotted_32nd_rest.svg";case 64:return i+"dotted_64th_rest.svg"}}else switch(t.initialDurationInverse){case 1:return i+"1st_rest.svg";case 2:return i+"2nd_rest.svg";case 4:default:return i+"4th_rest.svg";case 8:return i+"8th_rest.svg";case 16:return i+"16th_rest.svg";case 32:return i+"32nd_rest.svg";case 64:return i+"64th_rest.svg"}}hasTimeSignatureChanged(t,r){return 0===r||t.timeSignature.denominator!==this.currentTab.bars[r-1].timeSignature.denominator||t.timeSignature.numerator!==this.currentTab.bars[r-1].timeSignature.numerator}play(){this.isPlaying.next(!0)}pause(){this.isPlaying.next(!1)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Rc))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const PU=["canvasContainer"];function kU(n,e){1&n&&u._UZ(0,"div",13)}const NU=function(){return[]};function RU(n,e){if(1&n&&(u.TgZ(0,"div",11),u.YNc(1,kU,1,0,"div",12),u.qZA()),2&n){const t=u.oxw(3);u.xp6(1),u.Q6J("ngForOf",u.DdM(1,NU).constructor(t.currentTab.instrument.strings))}}function FU(n,e){if(1&n&&(u.TgZ(0,"div")(1,"p"),u._uU(2),u.qZA(),u.TgZ(3,"p"),u._uU(4),u.qZA()()),2&n){const t=u.oxw().$implicit;u.xp6(2),u.Oqu(t.timeSignature.numerator),u.xp6(2),u.Oqu(t.timeSignature.denominator)}}function LU(n,e){if(1&n&&u._UZ(0,"hr",22),2&n){const t=u.oxw().$implicit,r=u.oxw(2).$implicit,i=u.oxw().$implicit,a=u.oxw(2);u.Q6J("ngStyle",a.styleSlideOut(t,r,i))}}function UU(n,e){if(1&n&&u._UZ(0,"hr",23),2&n){const t=u.oxw().$implicit,r=u.oxw(2).$implicit,i=u.oxw(3);u.Q6J("ngStyle",i.styleSlideIn(t,r))}}function VU(n,e){if(1&n&&(u.TgZ(0,"span",19),u._uU(1),u.YNc(2,LU,1,1,"hr",20),u.YNc(3,UU,1,1,"hr",21),u.qZA()),2&n){const t=e.$implicit,r=u.oxw(5);u.Q6J("ngStyle",r.styleNote(t)),u.xp6(1),u.hij(" ",t.fretValue," "),u.xp6(1),u.Q6J("ngIf",t.effects&&t.effects.slides&&t.effects.slides.slideOut),u.xp6(1),u.Q6J("ngIf",t.effects&&t.effects.slides&&t.effects.slides.slideIn)}}function BU(n,e){if(1&n&&(u.TgZ(0,"div",17),u.YNc(1,VU,4,4,"span",18),u.qZA()),2&n){const t=u.oxw().$implicit;u.xp6(1),u.Q6J("ngForOf",t.notes)}}function jU(n,e){if(1&n&&(u.TgZ(0,"div",24)(1,"div",25),u._UZ(2,"img",26),u.qZA()()),2&n){const t=u.oxw().$implicit,r=u.oxw(3);u.xp6(2),u.Q6J("src",r.assignRestImg(t),u.LSH)}}function HU(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",14),u.NdJ("focus",function(){const a=u.CHM(t).$implicit,c=u.oxw().$implicit;return u.oxw(2).updateSelection({bar:c,segment:a})}),u.YNc(1,BU,2,1,"div",15),u.YNc(2,jU,3,1,"div",16),u.qZA()}if(2&n){const t=e.$implicit,r=u.oxw(3);u.Q6J("ngStyle",r.styleSegment(t)),u.xp6(1),u.Q6J("ngIf",!t.isRest),u.xp6(1),u.Q6J("ngIf",t.isRest)}}function $U(n,e){if(1&n&&(u.TgZ(0,"div",5),u.YNc(1,RU,2,2,"div",6),u.TgZ(2,"div",7),u.YNc(3,FU,5,2,"div",8),u.qZA(),u.TgZ(4,"div",9),u.YNc(5,HU,3,3,"div",10),u.qZA()()),2&n){const t=e.$implicit,r=e.index,i=u.oxw(2);u.Q6J("ngStyle",i.styleBar(t,r)),u.xp6(1),u.Q6J("ngIf",i.currentTab.instrument),u.xp6(1),u.Q6J("ngStyle",i.styleTimeSignature(t,r)),u.xp6(1),u.Q6J("ngIf",i.hasTimeSignatureChanged(t,r)),u.xp6(2),u.Q6J("ngForOf",t.segments)}}function qU(n,e){if(1&n&&(u.TgZ(0,"div",3),u.YNc(1,$U,6,5,"div",4),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngForOf",t.currentTab.bars)}}const Sh={leftBarPadding:36,leftBarExtraPadding:80,initialBarWidth:360,initialBarInnerWidth:324,barExtraWidth:360*1.1,canvasHeight:340};let ik=(()=>{class n{constructor(t,r){this.tabService=t,this.playerService=r,this.tabLayout=Sh,this.currentTab=this.playerService.currentTab.value,this.staffHeight=42*(this.currentTab.instrument.strings-1),this.segmentSelection=new ar.x,this.subs=[],this.wholeNoteDurationMs=60/this.currentTab.initialTempo*4*1e3,this.currentNoteIndex=0,this.currentNoteDuration=new ar.x}segmentsArray(){let t=[];return this.currentTab.bars.forEach(r=>{t=t.concat(r.segments)}),t}ngOnInit(){var t;const r=this.tabService.isPlaying.subscribe(f=>{f?this.play():this.isPaused=!0}),i=this.subToPlay(),a=null===(t=this.segmentSelection)||void 0===t?void 0:t.subscribe(f=>{const{segment:m}=f;this.currentNoteIndex=this.segmentsArray().indexOf(m)}),c=this.playerService.currentTab.subscribe(f=>{this.currentTab=f,this.staffHeight=42*(f.instrument.strings-1)});this.tabService.subToTab().unsubscribe(),this.tabService.subToTab(),this.subs.push(r,i,a,c)}ngAfterViewInit(){this.tabService.HTMLSegments=this.HTMLSegments}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe())}play(){this.isPaused=!1,this.currentNoteDuration.next(this.wholeNoteDurationMs/this.segmentsArray()[this.currentNoteIndex].durationInverse)}subToPlay(){return this.currentNoteDuration.subscribe(t=>{this.HTMLSegments.get(this.currentNoteIndex).el.nativeElement.focus(),setTimeout(()=>{var r;if(!this.isPaused){if(this.currentNoteIndex++,!(null===(r=this.HTMLSegments)||void 0===r?void 0:r.get(this.currentNoteIndex))||!this.segmentsArray()[this.currentNoteIndex])return this.tabService.pause(),void(this.currentNoteIndex=0);this.currentNoteDuration.next(this.wholeNoteDurationMs/this.segmentsArray()[this.currentNoteIndex].durationInverse)}},t)})}pause(){this.tabService.pause(),this.isPaused=!0}updateSelection(t){var r;null===(r=this.segmentSelection)||void 0===r||r.next(t)}styleBar(t,r){return this.tabService.styleBar(t,r)}styleTimeSignature(t,r){return this.tabService.styleTimeSignature(t,r)}styleSegment(t){return this.tabService.styleSegment(t)}styleNote(t){return this.tabService.styleNote(t)}styleSlideOut(t,r,i){return this.tabService.styleSlideOut(t,r,i)}styleSlideIn(t,r){return this.tabService.styleSlideIn(t,r)}assignRestImg(t){return this.tabService.assignRestImg(t)}hasTimeSignatureChanged(t,r){return this.tabService.hasTimeSignatureChanged(t,r)}changeToHorizontalScroll(t){!this.canvasContainer||(t.deltaY>0?this.canvasContainer.nativeElement.scrollLeft+=100:this.canvasContainer.nativeElement.scrollLeft-=100)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(N0),u.Y36(Rc))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-tab"]],viewQuery:function(t,r){if(1&t&&(u.Gf(PU,5),u.Gf(tC,5)),2&t){let i;u.iGM(i=u.CRH())&&(r.canvasContainer=i.first),u.iGM(i=u.CRH())&&(r.HTMLSegments=i)}},hostBindings:function(t,r){1&t&&u.NdJ("wheel",function(a){return r.changeToHorizontalScroll(a)})},decls:3,vars:1,consts:[["id","canvas-container",1,"d-flex","align-items-center","py-5"],["canvasContainer",""],["id","editing-tab","class","d-flex text-white my-3",4,"ngIf"],["id","editing-tab",1,"d-flex","text-white","my-3"],["class","bar d-flex","bar","",3,"ngStyle",4,"ngFor","ngForOf"],["bar","",1,"bar","d-flex",3,"ngStyle"],["class","instrument-strings-container",4,"ngIf"],[1,"time-signature-container",3,"ngStyle"],[4,"ngIf"],[1,"segments-container","d-flex","h-100"],["tabindex","0","class","segment","segment","",3,"ngStyle","focus",4,"ngFor","ngForOf"],[1,"instrument-strings-container"],["class","instrument-string",4,"ngFor","ngForOf"],[1,"instrument-string"],["tabindex","0","segment","",1,"segment",3,"ngStyle","focus"],["class","notes-container h-100",4,"ngIf"],["class","rest-container",4,"ngIf"],[1,"notes-container","h-100"],["class","music-note","note","",3,"ngStyle",4,"ngFor","ngForOf"],["note","",1,"music-note",3,"ngStyle"],["class","slide-out rounded-pill",3,"ngStyle",4,"ngIf"],["class","slide-in rounded-pill",3,"ngStyle",4,"ngIf"],[1,"slide-out","rounded-pill",3,"ngStyle"],[1,"slide-in","rounded-pill",3,"ngStyle"],[1,"rest-container"],["note","",1,"rest"],[3,"src"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0,1),u.YNc(2,qU,2,1,"div",2),u.qZA()),2&t&&(u.xp6(2),u.Q6J("ngIf",r.currentTab))},styles:['#canvas-container[_ngcontent-%COMP%]{box-shadow:0 0 8px #00000040;overflow-x:auto;-ms-overflow-style:none;scrollbar-width:none;overflow-y:hidden}#canvas-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.bar[_ngcontent-%COMP%]{border-inline:#707070 1px solid;position:relative}.instrument-strings-container[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;z-index:-1}.instrument-string[_ngcontent-%COMP%]{height:2px;width:100%;background-color:#707070;margin-bottom:39.7px}.segment[_ngcontent-%COMP%]{position:relative;height:100%}.segment[_ngcontent-%COMP%]:focus{outline:none}.segment[_ngcontent-%COMP%]:focus:after{content:"";position:absolute;top:0;bottom:0;left:0;right:0;background-color:#bf9c6e4d;outline:none;transform:scaleY(2);z-index:100}span[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{cursor:default}span[_ngcontent-%COMP%]{background-color:#202020;font:500 22pt Barlow Condensed;border-radius:2px;line-height:20px;padding:2.5px;vertical-align:middle;text-align:center;position:absolute;z-index:10;transition:50ms;min-width:20px;min-height:28px;display:flex;align-items:center;justify-content:center;transform:translate(-2.5px,-5px)}.slide-out[_ngcontent-%COMP%], .slide-in[_ngcontent-%COMP%]{position:absolute;border-width:2px;border-color:#fff;opacity:.6;margin:0}.rest[_ngcontent-%COMP%]{transition:50ms;margin-right:5px}.time-signature-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;max-width:100%}.time-signature-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font:500 60px Barlow Condensed;margin:0;line-height:60px}']}),n})();class gA{constructor(e,t,r){this.tempo=e,this.timeSignature=t,this.segments=r}get timeSignatureRatio(){return this.timeSignature.numerator/this.timeSignature.denominator}get valid(){let e=0;for(let t of this.segments)e+=t.durationInverse**-1;return e===this.timeSignatureRatio*(4/this.timeSignature.denominator)}get totalDurationRatio(){let e=0;for(let t of this.segments)e+=t.durationInverse**-1;return e}}class rC{constructor(e,t,r,i){this.isRest=e,this.initialDurationInverse=t,this.notes=r,this.effects=i}get durationInverse(){let e=this.initialDurationInverse;return this.effects&&this.effects.isDotted&&(e=e**-1+e**-1/2,e=e**-1),e}get separationSpace(){return Sh.initialBarInnerWidth/this.durationInverse}}let sk={instrument:{name:"guitar",strings:6},initialKey:4,mode:!0,initialTempo:140,tuning:"Standard",bars:[new gA(140,{numerator:4,denominator:4},[new rC(!1,1,[{fretValue:0,string:0}])])]},Rc=(()=>{class n{constructor(t,r,i,a,c,f){this.firestore=t,this.authService=r,this.route=i,this.http=a,this.router=c,this.loadingService=f,this.currentUser=this.authService.currentUser.value,this.currentTab=new Jn(null),this.currentTabIndex=new Jn(null),this.currentTabGroup=new Jn(null),this.currentSpotifyTrack=new Jn(null),this.changingTrack=new ar.x,this.editMode=new ar.x}saveTabToUser(t){var r;if(this.currentUser=this.authService.currentUser.value,!this.currentUser||!this.currentTab.value)return;this.removeFillerNotes();const i=[];return null===(r=this.currentTabGroup.value)||void 0===r||r.tabs.forEach(a=>i.push(JSON.parse(JSON.stringify(a)))),this.firestore.collection("users").doc(this.currentUser.uid).collection("tabs").doc(t).set({tabs:i,uid:this.currentUser.uid,trackId:t})}postTab(t){var r;if(this.currentUser=this.authService.currentUser.value,!this.currentUser||!this.currentTab.value)return;this.removeFillerNotes();const i=[];return null===(r=this.currentTabGroup.value)||void 0===r||r.tabs.forEach(a=>i.push(JSON.parse(JSON.stringify(a)))),this.firestore.collection("tracks").doc(t).collection("tabs").add({tabs:i,uid:this.currentUser.uid,trackId:t,createdAt:(new Date).getTime()})}loadTab(t,r,i){this.loadingService.isLoading.next(!0);const{uid:a}=this.authService.currentUser.value,c=i||"true"===this.route.snapshot.queryParamMap.get("isCustom");if(this.currentSpotifyTrack.next(null),a)return this.getCurrentSpotifyTrack(t),this.getTabGroup(t,r,c)}getTabGroup(t,r,i){let a=this.firestore.collection("tracks").doc(t).collection("tabs");return i&&(a=this.firestore.collection("users").doc(this.currentUser.uid).collection("tabs").doc(t)),a.get().pipe((0,ft.U)(c=>{this.loadingService.isLoading.next(!1);const f=c.exists||!c.empty&&void 0!==c.empty;let m,b;if(!c||!f)return!1;if(i)b=c.data(),m=b.tabs;else{if(!c.docs[r])return!1;{let I=[];c.docs.forEach(A=>{I.push(A.data())}),I.sort((A,R)=>A.createdAt-R.createdAt),b=I[r],m=b.tabs}}return!(!c||!m||0===m.length)&&(this.currentTabGroup.next(b),this.currentTabIndex.next(0),this.currentTab.next(this.parseTab(m[0])),f)}))}changeTab(t){var r,i;const a=null===(r=this.currentTabGroup.value)||void 0===r?void 0:r.tabs.indexOf(t);-1!==a?a!==this.currentTabIndex.value&&(this.currentTabIndex.next(a),this.currentTab.next(this.parseTab(null===(i=this.currentTabGroup.value)||void 0===i?void 0:i.tabs[a]))):console.error("NO TAB WITH -1 INDEX")}createTab(t){if(this.currentUser)return this.firestore.collection("users").doc(this.currentUser.uid).collection("tabs").doc(t).set({tabs:[JSON.parse(JSON.stringify(Object.assign({},sk)))],uid:this.currentUser.uid,trackId:t,createdAt:(new Date).getTime()})}addInstrument(t){var r,i,a,c;this.currentUser=this.authService.currentUser.value;const f=[];return null===(r=this.currentTabGroup.value)||void 0===r||r.tabs.forEach(m=>f.push(JSON.parse(JSON.stringify(m)))),f.push(JSON.parse(JSON.stringify(Object.assign(Object.assign({},sk),{instrument:t,initialTempo:null===(i=this.currentTab.value)||void 0===i?void 0:i.initialTempo})))),this.firestore.collection("users").doc(this.currentUser.uid).collection("tabs").doc(null===(a=this.currentSpotifyTrack.value)||void 0===a?void 0:a.id).update({tabs:f,uid:this.currentUser.uid,trackId:null===(c=this.currentSpotifyTrack.value)||void 0===c?void 0:c.id}).catch(()=>this.loadingService.isLoading.next(!1)).then(()=>{var m;this.loadingService.startLoading(`Getting a new ${t.name.replace("-"," ")}`),this.getTabGroup(null===(m=this.currentSpotifyTrack.value)||void 0===m?void 0:m.id,0,!0).subscribe({next:()=>{this.loadingService.isLoading.next(!1)},error:I=>{console.log(I),this.loadingService.isLoading.next(!1)}})})}deleteTab(){var t;if(this.loadingService.startLoading("THROWING AWAY TAB"),this.currentUser=this.authService.currentUser.value,!this.currentTabIndex.value&&0!==this.currentTabIndex.value)return console.log("Try again"),it(null);const{uid:r}=this.currentUser,{id:i}=this.currentSpotifyTrack.value,a=null===(t=this.currentTabGroup.value)||void 0===t?void 0:t.tabs.slice();a.splice(this.currentTabIndex.value,1);const c=[];return a.forEach(f=>c.push(JSON.parse(JSON.stringify(f)))),this.firestore.collection("users").doc(this.currentUser.uid).collection("tabs").doc(i).set({tabs:c,uid:r,trackId:i}).then(()=>{this.loadingService.isLoading.next(!1),this.getTabGroup(i,0,!0).subscribe({next:()=>{this.loadingService.isLoading.next(!1)},error:f=>{console.log(f),this.loadingService.isLoading.next(!1)}})}).catch(()=>this.loadingService.isLoading.next(!1))}removeFillerNotes(){console.log(this.currentTabGroup.value);let t=this.currentTabGroup.value;t.tabs.forEach(r=>{r.bars.forEach(i=>{i.segments.forEach(a=>{let c=a.notes.filter(f=>f.fretValue||0===f.fretValue);a.notes=c})})}),this.currentTabGroup.next(t)}getCurrentSpotifyTrack(t){!t||this.authService.getAccessToken().pipe(_n(1)).subscribe(r=>{this.http.get(`https://api.spotify.com/v1/tracks/${t}`,{headers:new os({Authorization:`Bearer ${r}`,"Content-Type":"application/json"})}).pipe(_n(1),Kr(i=>(console.log(i),this.router.navigateByUrl("not-found?noTrack=true"),it(void 0)))).subscribe(i=>{this.currentSpotifyTrack.next(i)})})}parseTab(t){let r=Object.assign(Object.assign({},t),{instrument:{name:t.instrument.name,strings:+t.instrument.strings},bars:[]});return t.bars.forEach(i=>{let a=[];i.segments.forEach(f=>{const m=new rC(f.isRest,f.initialDurationInverse,f.notes,f.effects);a.push(m)});let c=new gA(i.tempo,i.timeSignature,a);r.bars.push(c)}),r}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(dy),u.LFG(Ch),u.LFG(xo),u.LFG(zl),u.LFG(lr),u.LFG(Ih))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var GU=N(3532);function ok(n=0,e=Gg.z){return n<0&&(n=0),function zU(n=0,e,t=Gg.P){let r=-1;return null!=e&&((0,GU.K)(e)?t=e:r=e),new zr.y(i=>{let a=function ZU(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let c=0;return t.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},a)})}(n,n,e)}let R0=(()=>{class n{constructor(t){this.tabService=t,this.currentTab=this.tabService.currentTab,this.modifyTab=new ar.x,this.notePropertiesInput={initialDurationInverse:4,isDotted:!1,isRest:!1,timeSignatureNumerator:4,timeSignatureDenominator:4,slideOutMode:null,slideInMode:null},this.playInterval=ok(500)}addBar(){this.currentTab.bars.push(new gA(this.currentTab.bars[this.currentTab.bars.length-1].tempo,this.currentTab.bars[this.currentTab.bars.length-1].timeSignature,(()=>{let r=[];for(let a=this.currentTab.instrument.strings-1;a>-1;a--)r.push({string:a});return[new rC(!1,4,r)]})())),this.modifyTab.next(null)}addSegment(t){this.currentTab.bars[t].segments.push(new rC(this.notePropertiesInput.isRest,this.notePropertiesInput.initialDurationInverse,[])),this.fillSegmentsNotesSpaces(),this.modifyTab.next(null)}updateNoteSelection(t){this.noteSelection=t}changeFretValue(t){if(!this.noteSelection||!this.noteSelection.note||!this.noteSelection.segment.notes||!t&&0!==t)return;let r=this.currentTab.bars.indexOf(this.noteSelection.bar),i=this.currentTab.bars[r].segments.indexOf(this.noteSelection.segment),a=this.currentTab.bars[r].segments[i].notes.indexOf(this.noteSelection.note);this.currentTab.bars[r].segments[i].notes[a].fretValue=t,this.modifyTab.next(null)}changeDuration(t,r){if(!this.noteSelection)return;let i=this.currentTab.bars.indexOf(this.noteSelection.bar),a=this.currentTab.bars[i].segments.indexOf(this.noteSelection.segment);(t||0===t)&&(this.currentTab.bars[i].segments[a].initialDurationInverse=t),(!1===r||r)&&(this.currentTab.bars[i].segments[a].effects={isDotted:r}),this.modifyTab.next(null)}changeTimeSignature(t,r){if(!this.noteSelection)return;let i=this.currentTab.bars.indexOf(this.noteSelection.bar);this.currentTab.bars[i].timeSignature={numerator:t,denominator:r},this.modifyTab.next(null)}changeSlides(t){if(!this.noteSelection||!this.noteSelection.note)return;let r=this.currentTab.bars.indexOf(this.noteSelection.bar),i=this.currentTab.bars[r].segments.indexOf(this.noteSelection.segment),a=this.currentTab.bars[r].segments[i].notes.indexOf(this.noteSelection.note);this.currentTab.bars[r].segments[i].notes[a].effects||(this.currentTab.bars[r].segments[i].notes[a].effects={}),this.currentTab.bars[r].segments[i].notes[a].effects.slides=t,this.modifyTab.next(null)}toggleRest(t){if(!this.noteSelection)return;let r=this.currentTab.bars.indexOf(this.noteSelection.bar),i=this.currentTab.bars[r].segments.indexOf(this.noteSelection.segment);this.noteSelection.note&&this.currentTab.bars[r].segments[i].notes.indexOf(this.noteSelection.note),this.currentTab.bars[r].segments[i].isRest=t,this.modifyTab.next(null)}selectNextSegmentNote(){var t,r,i,a,c;if(!this.noteSelection)return;let b,f=this.currentTab.bars.indexOf(this.noteSelection.bar),m=this.currentTab.bars[f].segments.indexOf(this.noteSelection.segment);this.noteSelection.note&&!this.noteSelection.segment.isRest&&(b=this.currentTab.bars[f].segments[m].notes.indexOf(this.noteSelection.note));let A,R,I=null===(t=this.HTMLBars)||void 0===t?void 0:t.get(f).el.nativeElement;return this.noteSelection.bar.totalDurationRatio<this.noteSelection.bar.timeSignatureRatio?(this.addSegment(f),this.modifyTab.next(null),void(null===(r=this.HTMLSegments)||void 0===r||r.changes.pipe(_n(1)).subscribe(()=>{A=I.lastElementChild.children[m+1],R=A.lastElementChild.children[b]||A.lastElementChild.children[0],R.focus()}))):this.noteSelection.bar.segments[m]===this.noteSelection.bar.segments[this.noteSelection.bar.segments.length-1]&&this.noteSelection.bar.valid?this.currentTab.bars[f+1]?(I=null===(a=this.HTMLBars)||void 0===a?void 0:a.get(f+1).el.nativeElement,A=I.lastElementChild.children[0],R=A.lastElementChild.children[b]||A.lastElementChild.children[0],void R.focus()):(this.addBar(),this.modifyTab.next(null),void(null===(i=this.HTMLBars)||void 0===i||i.changes.pipe(_n(1)).subscribe(()=>{var L;I=null===(L=this.HTMLBars)||void 0===L?void 0:L.get(f+1).el.nativeElement,A=I.lastElementChild.children[0],R=A.lastElementChild.children[b]||A.lastElementChild.children[0],R.focus()}))):(I=null===(c=this.HTMLBars)||void 0===c?void 0:c.get(f).el.nativeElement,A=I.lastElementChild.children[m+1],R=A.lastElementChild.children[b]||A.lastElementChild.children[0],void R.focus())}selectPreviousSegmentNote(){var t,r;if(!this.noteSelection)return;let c,f,m,b,i=this.currentTab.bars.indexOf(this.noteSelection.bar),a=this.currentTab.bars[i].segments.indexOf(this.noteSelection.segment);this.noteSelection.note&&(c=this.currentTab.bars[i].segments[a].notes.indexOf(this.noteSelection.note)),this.currentTab.bars[i]===this.currentTab.bars[this.currentTab.bars.length-1]&&this.noteSelection.segment===this.noteSelection.bar.segments[this.noteSelection.bar.segments.length-1]&&!this.noteSelection.segment.isRest&&this.currentTab.bars[i].segments[a].notes.every(I=>!I.fretValue&&0!==I.fretValue)&&(this.currentTab.bars[i].segments.length<=1?(this.currentTab.bars.pop(),this.modifyTab.next(null)):(this.currentTab.bars[i].segments.pop(),this.modifyTab.next(null))),this.noteSelection.bar.segments[a-1]?(f=null===(t=this.HTMLBars)||void 0===t?void 0:t.get(i).el.nativeElement,m=f.lastElementChild.children[a-1],b=m.lastElementChild.children[c]||m.lastElementChild.children[0],b.focus()):!this.noteSelection.bar.segments[a-1]&&0!==i&&(f=null===(r=this.HTMLBars)||void 0===r?void 0:r.get(i-1).el.nativeElement,m=f.lastElementChild.children[this.currentTab.bars[i-1].segments.length-1],this.noteSelection.note?(b=m.lastElementChild.children[c]||m.lastElementChild.children[0],b.focus()):this.noteSelection.segment.isRest&&(b=m.lastElementChild.children[Math.floor(this.currentTab.instrument.strings/2)],b.focus()))}selectUpperNote(){var t;if(!this.noteSelection||this.noteSelection.segment.isRest||!this.noteSelection.note)return;let m,r=this.currentTab.bars.indexOf(this.noteSelection.bar),i=this.currentTab.bars[r].segments.indexOf(this.noteSelection.segment),a=this.currentTab.bars[r].segments[i].notes.indexOf(this.noteSelection.note),f=(null===(t=this.HTMLBars)||void 0===t?void 0:t.get(r).el.nativeElement).lastElementChild.children[i];this.noteSelection.segment.notes[a+1]&&(m=f.lastElementChild.children[a+1],m.focus())}selectLowerNote(){var t;if(!this.noteSelection||this.noteSelection.segment.isRest||!this.noteSelection.note)return;let m,r=this.currentTab.bars.indexOf(this.noteSelection.bar),i=this.currentTab.bars[r].segments.indexOf(this.noteSelection.segment),a=this.currentTab.bars[r].segments[i].notes.indexOf(this.noteSelection.note),f=(null===(t=this.HTMLBars)||void 0===t?void 0:t.get(r).el.nativeElement).lastElementChild.children[i];this.noteSelection.segment.notes[a-1]&&(m=f.lastElementChild.children[a-1],m.focus())}removeNote(){if(!this.noteSelection)return;let t=this.currentTab.bars.indexOf(this.noteSelection.bar),r=this.currentTab.bars[t].segments.indexOf(this.noteSelection.segment);if(this.noteSelection.note){let i=this.currentTab.bars[t].segments[r].notes.indexOf(this.noteSelection.note);if(this.noteSelection.segment.notes.every(a=>!a.fretValue&&0!==a.fretValue))return 1===this.noteSelection.bar.segments.length&&1!==this.currentTab.bars.length?this.currentTab.bars.splice(t,1):this.currentTab.bars[t].segments.splice(r,1),void(this.noteSelection=void 0);this.currentTab.bars[t].segments[r].notes[i].fretValue=void 0}else this.noteSelection.segment.isRest&&(1===this.noteSelection.bar.segments.length&&1!==this.currentTab.bars.length?this.currentTab.bars.splice(t,1):this.currentTab.bars[t].segments.splice(r,1),this.noteSelection=void 0);this.modifyTab.next(null)}fillSegmentsNotesSpaces(){this.currentTab.bars.forEach(t=>{t.segments.forEach(r=>{var i;r.notes||(r.notes=[]);for(let a=0;a<this.currentTab.instrument.strings;a++)(null===(i=r.notes)||void 0===i?void 0:i.find(c=>c.string===a))||r.notes.push({string:a});r.notes.sort((a,c)=>c.string-a.string)})})}sortNotes(){this.currentTab.bars.forEach(t=>{t.segments.forEach(r=>{var i;r.isRest||null===(i=r.notes)||void 0===i||i.sort((a,c)=>c.string-a.string)})}),this.modifyTab.next(null)}play(){let t=0;this.sub=this.playInterval.subscribe(()=>{var r,i;(null===(r=this.HTMLSegments)||void 0===r?void 0:r.get(t))?(null===(i=this.HTMLSegments)||void 0===i||i.get(t).el.nativeElement.focus(),t++):this.sub.unsubscribe()})}pause(){var t;null===(t=this.sub)||void 0===t||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(N0))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function WU(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"app-topbar",14),u.NdJ("appStatusOutput",function(i){return u.CHM(t),u.oxw(2).updateAppStatus(i)}),u.qZA()}}function KU(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"app-edit-topbar",15),u.NdJ("appStatusOutput",function(i){return u.CHM(t),u.oxw(2).updateAppStatus(i)}),u.qZA()}if(2&n){const t=u.oxw(2);u.Q6J("barPropertiesInput",t.barProperties)}}function YU(n,e){if(1&n&&(u.TgZ(0,"div",16)(1,"h2",17),u._uU(2),u.qZA()()),2&n){const t=u.oxw(2);u.xp6(2),u.Oqu(t.currentTab.instrument.name.toUpperCase().replace("-"," "))}}function QU(n,e){if(1&n&&(u.O4$(),u.kcU(),u.TgZ(0,"div",49)(1,"h5"),u._uU(2,"About this song:"),u.qZA(),u.TgZ(3,"ul",50)(4,"li",51),u._uU(5,"Initial key: "),u.TgZ(6,"span",52),u._uU(7,"GM"),u.qZA()(),u.TgZ(8,"li",51),u._uU(9,"Avg. BPM: "),u.TgZ(10,"span",52),u._uU(11),u.qZA()(),u.TgZ(12,"li",51),u._uU(13,"Tuning: "),u.TgZ(14,"span",52),u._uU(15,"Standard"),u.qZA()()()()),2&n){const t=u.oxw(3);u.Q6J("@appear",void 0),u.xp6(11),u.hij("",null==t.currentTab?null:t.currentTab.initialTempo," ")}}function JU(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",18)(1,"div",19)(2,"div",20)(3,"div",21)(4,"input",22),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw(2).appStatus.tempoMultiplier=i}),u.qZA()(),u.TgZ(5,"p",23),u._uU(6),u.qZA()(),u.TgZ(7,"div",24),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return i.appStatus.isCountdownActive=!i.appStatus.isCountdownActive}),u.TgZ(8,"p",25),u._uU(9,"123"),u.qZA()(),u._UZ(10,"div",26),u.TgZ(11,"div",27),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return i.appStatus.isMetronomeActive=!i.appStatus.isMetronomeActive}),u.O4$(),u.TgZ(12,"svg",28),u._UZ(13,"path",29),u.qZA()()(),u.kcU(),u.TgZ(14,"div",30)(15,"div",31),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return i.showSongInfo=!i.showSongInfo}),u.O4$(),u.TgZ(16,"svg",32),u._UZ(17,"path",33),u.qZA(),u.YNc(18,QU,16,2,"div",34),u.qZA(),u.kcU(),u.TgZ(19,"div",35)(20,"div",36)(21,"div",37),u.NdJ("click",function(){return u.CHM(t),u.oxw(2).editTabGroup()}),u.O4$(),u.TgZ(22,"svg",38),u._UZ(23,"path",39),u.qZA()(),u.kcU(),u.TgZ(24,"button",40),u._uU(25,"COMMENTS"),u.qZA(),u.TgZ(26,"button",41),u._uU(27,"RATE THIS TAB"),u.qZA()()(),u.TgZ(28,"div",42)(29,"div",43),u.O4$(),u.TgZ(30,"svg",44),u._UZ(31,"path",45),u.qZA()(),u.kcU(),u.TgZ(32,"div",46),u.O4$(),u.TgZ(33,"svg",47),u._UZ(34,"path",48),u.qZA()()()()()}if(2&n){const t=u.oxw(2);u.xp6(4),u.Q6J("ngModel",t.appStatus.tempoMultiplier)("defaultValue",t.appStatus.tempoMultiplier),u.xp6(2),u.hij(" ",t.appStatus.tempoMultiplier,"% "),u.xp6(1),u.Q6J("ngClass",t.appStatus.isCountdownActive?"active-tool":""),u.xp6(4),u.Q6J("ngClass",t.appStatus.isMetronomeActive?"active-tool":""),u.xp6(7),u.Q6J("ngIf",t.showSongInfo)}}function XU(n,e){1&n&&(u.O4$(),u.kcU(),u.TgZ(0,"div",49)(1,"h5"),u._uU(2,"About this song:"),u.qZA(),u.TgZ(3,"ul",50)(4,"li",51),u._uU(5,"Initial key: "),u.TgZ(6,"span",52),u._uU(7,"GM"),u.qZA()(),u.TgZ(8,"li",51),u._uU(9,"Avg. BPM: "),u.TgZ(10,"span",52),u._uU(11,"110"),u.qZA()(),u.TgZ(12,"li",51),u._uU(13,"Tuning: "),u.TgZ(14,"span",52),u._uU(15,"Standard"),u.qZA()()()()),2&n&&u.Q6J("@appear",void 0)}function eV(n,e){if(1&n){const t=u.EpF();u.O4$(),u.kcU(),u.TgZ(0,"div",68)(1,"div",69),u.NdJ("click",function(){return u.CHM(t),u.oxw(3).deleteTab()}),u.TgZ(2,"div",70),u.O4$(),u.TgZ(3,"svg",71),u._UZ(4,"path",72),u.qZA()(),u.kcU(),u.TgZ(5,"h6",73),u._uU(6,"Delete this tab"),u.qZA()()()}2&n&&u.Q6J("@appear",void 0)}function tV(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",53)(1,"div",30)(2,"div",54),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return i.showSongInfo=!i.showSongInfo}),u.O4$(),u.TgZ(3,"svg",32),u._UZ(4,"path",33),u.qZA(),u.YNc(5,XU,16,1,"div",34),u.qZA(),u.kcU(),u.TgZ(6,"div",35)(7,"div",36)(8,"div",55)(9,"div",56),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return i.showMenu=!i.showMenu}),u.O4$(),u.TgZ(10,"svg",57),u._UZ(11,"path",58),u.qZA()(),u.YNc(12,eV,7,1,"div",59),u.qZA(),u.kcU(),u.TgZ(13,"div",60),u.NdJ("click",function(){return u.CHM(t),u.oxw(2).saveTabGroup()}),u.O4$(),u.TgZ(14,"svg",61),u._UZ(15,"path",62)(16,"path",63),u.qZA(),u.kcU(),u.TgZ(17,"p",64),u._uU(18,"SAVE"),u.qZA()(),u.TgZ(19,"div",65),u.NdJ("click",function(){return u.CHM(t),u.oxw(2).saveAndPostTabGroup()}),u.O4$(),u.TgZ(20,"svg",66),u._UZ(21,"path",62)(22,"path",63),u.qZA(),u.kcU(),u.TgZ(23,"p",64),u._uU(24,"SAVE AND POST"),u.qZA()()()(),u.TgZ(25,"div",67)(26,"div",43),u.O4$(),u.TgZ(27,"svg",44),u._UZ(28,"path",45),u.qZA()(),u.kcU(),u.TgZ(29,"div",46),u.O4$(),u.TgZ(30,"svg",47),u._UZ(31,"path",48),u.qZA()()()()()}if(2&n){const t=u.oxw(2);u.xp6(5),u.Q6J("ngIf",t.showSongInfo),u.xp6(7),u.Q6J("ngIf",t.showMenu)}}function nV(n,e){1&n&&u._UZ(0,"app-tab")}function rV(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"app-edit-tab",74),u.NdJ("noteSelectedOutput",function(i){return u.CHM(t),u.oxw(2).updateNoteSelection(i)}),u.qZA()}}function iV(n,e){if(1&n&&(u.TgZ(0,"div",4)(1,"div"),u.YNc(2,WU,1,0,"app-topbar",5),u.YNc(3,KU,1,1,"app-edit-topbar",6),u.qZA(),u.TgZ(4,"div",7)(5,"div",8),u.YNc(6,YU,3,1,"div",9),u.qZA(),u.YNc(7,JU,35,6,"div",10),u.YNc(8,tV,32,2,"div",11),u.qZA(),u.TgZ(9,"div",12),u.YNc(10,nV,1,0,"app-tab",3),u.YNc(11,rV,1,0,"app-edit-tab",13),u.qZA()()),2&n){const t=u.oxw();u.xp6(2),u.Q6J("ngIf",!t.editMode),u.xp6(1),u.Q6J("ngIf",t.editMode),u.xp6(3),u.Q6J("ngIf",t.currentTab),u.xp6(1),u.Q6J("ngIf",!t.editMode),u.xp6(1),u.Q6J("ngIf",t.editMode),u.xp6(2),u.Q6J("ngIf",!t.editMode),u.xp6(1),u.Q6J("ngIf",t.editMode)}}function sV(n,e){1&n&&u._UZ(0,"app-not-found")}let ak=(()=>{class n{constructor(t,r,i,a,c,f){this.playerService=t,this.route=r,this.authService=i,this.loadingService=a,this.editTabService=c,this.router=f,this.editMode=!1,this.exists=!1,this.currentUser=this.authService.currentUser.value,this.showMenu=!1,this.subs=[],this.appStatus={isPlaying:!1,isMenuActive:!1,isCountdownActive:!1,isMetronomeActive:!1,tempoMultiplier:100},this.showSongInfo=!1}ngOnInit(){this.route.snapshot.data.tab&&(this.exists=!0);const r=this.playerService.changingTrack.subscribe(()=>this.editMode?this.saveTabGroup():null),i=this.authService.currentUser.subscribe(b=>this.currentUser=b),a=this.playerService.currentTab.subscribe(b=>this.currentTab=b),c=this.playerService.currentSpotifyTrack.subscribe(b=>this.trackId=null==b?void 0:b.id),f=this.playerService.currentTabIndex.subscribe(b=>this.currentTabIndex=b),m=this.playerService.editMode.subscribe(b=>this.editMode=b);this.subs.push(i,r,c,a,f,m)}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe())}updateAppStatus(t){this.appStatus=t}updateNoteSelection(t){this.barProperties=t}toggleMenu(t){this.appStatus.isMenuActive=t}editTabGroup(){var t;this.loadingService.isLoading.next(!0),null===(t=this.playerService.saveTabToUser(this.route.snapshot.paramMap.get("id")))||void 0===t||t.then(()=>{this.router.navigate([],{queryParams:{isCustom:!0}}).then(()=>{this.loadingService.isLoading.next(!1),this.playerService.editMode.next(!0)})})}saveTabGroup(){var t;this.loadingService.isLoading.next(!0),null===(t=this.playerService.saveTabToUser(this.trackId))||void 0===t||t.then(()=>{this.playerService.editMode.next(!1),this.loadingService.isLoading.next(!1)})}saveAndPostTabGroup(){var t;this.loadingService.isLoading.next(!0),null===(t=this.playerService.postTab(this.trackId))||void 0===t||t.then(()=>this.saveTabGroup())}deleteTab(){this.playerService.deleteTab()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Rc),u.Y36(xo),u.Y36(Ch),u.Y36(Ih),u.Y36(R0),u.Y36(lr))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-player"]],decls:4,vars:3,consts:[[3,"menuStatus","menuStatusOutput"],["id","main-container"],["id","main","class","d-flex flex-column position-relative",4,"ngIf"],[4,"ngIf"],["id","main",1,"d-flex","flex-column","position-relative"],[3,"appStatusOutput",4,"ngIf"],[3,"barPropertiesInput","appStatusOutput",4,"ngIf"],["preventUnfocus","","id","tab-background",1,"d-flex","m-0","p-0","flex-column","justify-content-between","flex-grow-1"],["preventUnfocus","",1,"d-flex","flex-column","justify-content-evenly"],["id","instrument","class","ps-4 flex-grow-1 m-0 d-flex flex-column justify-content-center",4,"ngIf"],["preventUnfocus","","id","actions","class","fs-4 p-0 flex-grow-1 d-flex flex-column justify-content-end",4,"ngIf"],["id","actions","class","fs-4 p-0 flex-grow-1 d-flex flex-column justify-content-end",4,"ngIf"],["id","tab-player-container",1,"p-0"],[3,"noteSelectedOutput",4,"ngIf"],[3,"appStatusOutput"],[3,"barPropertiesInput","appStatusOutput"],["id","instrument",1,"ps-4","flex-grow-1","m-0","d-flex","flex-column","justify-content-center"],[1,"m-0","p-0"],["preventUnfocus","","id","actions",1,"fs-4","p-0","flex-grow-1","d-flex","flex-column","justify-content-end"],["id","tools",1,"row","m-0","d-md-none"],["id","tempo-container",1,"row","m-0","p-0","col-12"],["id","tempo-input-container",1,"ms-2","py-2","my-auto","rounded","col"],["type","range","step","5","min","50","max","200",1,"w-100",3,"ngModel","defaultValue","ngModelChange"],["id","tempo",1,"fs-2","m-0","col-auto","px-3","py-2","text-center",2,"color","#BF9C6E","width","80px"],["id","countdown",1,"col","py-2","text-center",3,"ngClass","click"],[1,"fs-1","m-0"],[1,"p-0","shadow-none",2,"width","8px","background-color","#202020","cursor","initial"],[1,"col","py-2","fs-2","text-center",3,"ngClass","click"],["version","1.1","width","36","height","36","viewBox","0 0 314 314",0,"xml","space","preserve"],["d","M281.853,46.631c-0.39-2.035-1.66-3.794-3.47-4.802l-11.257-6.271l5.297-9.511c1.881-3.378,0.668-7.641-2.709-9.521\n         c-3.38-1.881-7.641-0.667-9.521,2.709l-5.297,9.511l-11.257-6.269c-1.81-1.008-3.975-1.162-5.908-0.422\n         c-1.936,0.74-3.442,2.3-4.117,4.259l-13.806,40.109c-1.103,3.207,0.25,6.743,3.213,8.394l4.741,2.642l-23.115,41.501L184.592,17.11\n         C182.703,7.516,173.563,0,163.783,0h-56.052c-9.778,0-18.918,7.516-20.809,17.11L46.102,224.425\n         c-0.002,0.012-0.004,0.023-0.006,0.035l-13.729,69.725c-0.998,5.067,0.205,10.132,3.3,13.895C38.76,311.842,43.496,314,48.66,314\n         h174.195c5.163,0,9.898-2.158,12.993-5.92c3.095-3.763,4.298-8.827,3.301-13.896l-13.732-69.741\n         c-0.001-0.002-0.001-0.004-0.001-0.004l-16.584-84.225l31.16-55.944l4.742,2.642c1.072,0.598,2.243,0.885,3.402,0.885\n         c2.046,0,4.056-0.896,5.425-2.571l26.836-32.853C281.708,50.769,282.241,48.665,281.853,46.631z M100.659,19.816\n         c0.6-3.044,3.971-5.816,7.072-5.816h56.052c3.103,0,6.473,2.771,7.072,5.815l23.249,118.069L164,191.933\n         c-6.17-2.645-13.121-4.627-21.242-5.363v-14.92h10.96c3.866,0,7-3.134,7-7s-3.134-7-7-7h-10.96v-41.211h10.96c3.866,0,7-3.134,7-7\n         c0-3.866-3.134-7-7-7h-10.96v-41.21h10.96c3.866,0,7-3.134,7-7s-3.134-7-7-7h-10.96V34.938c0-3.866-3.134-7-7-7\n         c-3.866,0-7,3.134-7,7v12.291h-10.96c-3.866,0-7,3.134-7,7s3.134,7,7,7h10.96v41.21h-10.96c-3.866,0-7,3.134-7,7\n         c0,3.866,3.134,7,7,7h10.96v41.211h-10.96c-3.866,0-7,3.134-7,7s3.134,7,7,7h10.96v14.92c-19.447,1.763-32.189,10.688-43.564,18.666\n         c-7.894,5.536-14.975,10.493-23.52,12.573L100.659,19.816z M225.036,299.188c-0.432,0.523-1.206,0.813-2.181,0.813H48.66\n         c-0.976,0-1.75-0.289-2.181-0.814c-0.432-0.524-0.565-1.34-0.377-2.297l12.675-64.372c14.147-1.593,24.455-8.807,34.455-15.82\n         c12.059-8.457,23.448-16.444,42.525-16.444c19.077,0,30.466,7.987,42.524,16.444c10.001,7.014,20.308,14.228,34.456,15.82\n         l12.675,64.371C225.602,297.846,225.468,298.662,225.036,299.188z M209.842,217.809c-8.545-2.08-15.627-7.037-23.521-12.574\n         c-3.175-2.227-6.456-4.527-9.959-6.726l21.928-39.367L209.842,217.809z M246.427,71.829l-11.474-6.392l9.177-26.662l20.136,11.216\n         L246.427,71.829z"],[1,"d-flex","justify-content-between","align-items-center","p-4"],["id","info-container",1,"d-inline-block","position-relative","flex-shrink-0",3,"click"],["height","23","viewBox","0 0 488.9 488.9",0,"xml","space","preserve"],["fill","white","d","M239.15,0c31.9,0,57.7,25.8,57.7,57.7s-25.8,57.7-57.7,57.7s-57.7-25.8-57.7-57.7S207.25,0,239.15,0z M291.65,151.6h-1.5\n                    h-92.8h-3.4c-19,0-34.3,15.4-34.3,34.3l0,0c0,19,15.4,34.3,34.3,34.3h3.4v200h-37.7v68.7h169.6v-68.7h-37.5V151.6H291.65z"],["id","song-info","class","p-3 rounded",4,"ngIf"],["id","end-btns",1,"float-end"],[1,"d-none","d-md-flex","justify-content-between"],["id","edit-btn",1,"px-2","rounded","d-flex","justify-content-center","align-items-center",3,"click"],["width","30","height","30","viewBox","0 0 40 40","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M27.5 5.00001L32 0.500009C32.5 0.166675 33.8 -0.299991 35 0.500009C36.2 1.30001 38.5 3.83334 39.5 5.00001C39.8333 5.50001 40.3 6.8 39.5 8L35 12.5L27.5 5.00001ZM0 40L3.5 29L25 7.5L32.5 15L11.5 36L0 40Z","fill","#D6D6D6"],["id","comment-btn",1,"px-3","py-1","mx-3"],["id","rate-btn",1,"px-3","py-1"],["id","mobile-end-btns",1,"d-flex","justify-content-evenly","d-md-none","float-end"],["id","comment-icon",1,"p-2","rounded"],["width","31","height","30","viewBox","0 0 31 30","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M1.00003 4V17C0.600029 20.2 3.1667 21.3333 4.50003 21.5H7.50003V30L16 21.5H27C29.4 21.5 30.6667 19.0042 31 17.7562V4C30.6 1.2 27.8334 0.166667 26.5 0H5.00003C2.20003 0.8 1.1667 3 1.00003 4Z","fill","#707070"],["id","rate-icon",1,"p-2","rounded"],["width","37","height","35","viewBox","0 0 37 35","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M15 14.5H3.5L13 21.5L9.5 32L18.5 25.5L27.5 32L24.5 21.5L33.5 14.5H22L18.5 4L15 14.5Z","stroke","#BF9C6E","stroke-width","2"],["id","song-info",1,"p-3","rounded"],[1,"list-unstyled","fs-5","m-0"],[1,"list-group-item"],[1,"text-white"],["id","actions",1,"fs-4","p-0","flex-grow-1","d-flex","flex-column","justify-content-end"],["preventUnfocus","","id","info-container",1,"d-inline-block","position-relative","flex-shrink-0",3,"click"],["id","menu-btn-container",1,"position-relative","mx-3"],["id","menu-btn",3,"click"],["width","30","height","30","viewBox","0 0 16 16",1,"bi","bi-three-dots-vertical"],["d","M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"],["id","menu","class","rounded p-2",4,"ngIf"],["id","edit-btn",1,"px-3","py-1","me-3","d-flex","justify-content-center","align-items-center","text-white","border",3,"click"],["width","30","height","30","fill","white","viewBox","0 0 16 16",1,"bi","bi-check2-circle"],["d","M2.5 8a5.5 5.5 0 0 1 8.25-4.764.5.5 0 0 0 .5-.866A6.5 6.5 0 1 0 14.5 8a.5.5 0 0 0-1 0 5.5 5.5 0 1 1-11 0z"],["d","M15.354 3.354a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l7-7z"],[1,"my-auto","mx-2",2,"font-family","Barlow Condensed"],["id","edit-btn",1,"px-3","py-1","d-flex","justify-content-center","align-items-center",2,"color","#BF9C6E","border","#BF9C6E solid 1px",3,"click"],["width","30","height","30","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-check2-circle"],["id","mobile-end-btns",1,"d-flex","jusstify-content-evenly","d-md-none","float-end"],["id","menu",1,"rounded","p-2"],[1,"text-nowrap","p-2","d-flex","justify-content-center","align-items-center","option","rounded",3,"click"],["id","delete-icon",1,"me-2","my-1","d-flex","align-items-center"],["width","20","height","20","fill","#878787","viewBox","0 0 16 16",1,"bi","bi-trash3"],["d","M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"],[1,"m-0"],[3,"noteSelectedOutput"]],template:function(t,r){1&t&&(u.TgZ(0,"app-sidebar",0),u.NdJ("menuStatusOutput",function(a){return r.toggleMenu(a)}),u.qZA(),u.TgZ(1,"div",1),u.YNc(2,iV,12,7,"div",2),u.YNc(3,sV,1,0,"app-not-found",3),u.qZA()),2&t&&(u.Q6J("menuStatus",r.appStatus.isMenuActive),u.xp6(2),u.Q6J("ngIf",r.exists),u.xp6(1),u.Q6J("ngIf",!r.exists))},styles:["#main[_ngcontent-%COMP%]{background-color:#202020;height:100vh}@media (min-width:768px){#main-container[_ngcontent-%COMP%]{padding-left:max(75px,5.2vw)}}#tab-background[_ngcontent-%COMP%]{max-height:calc(100vh - 80px);min-height:calc(100vh - 121px)}#tab-player-container[_ngcontent-%COMP%]{position:fixed;top:50%;left:max(75px,5.2vw);transform:translateY(-50%);width:calc(100vw - max(75px,5.2vw));max-height:360px}@media (max-width:767px){#tab-player-container[_ngcontent-%COMP%]{left:0;width:100vw}}#instrument[_ngcontent-%COMP%]{padding-top:4vh;cursor:default}@media (max-height:880px){#instrument[_ngcontent-%COMP%]{font-size:10vh;padding-top:1vh}}@media (max-height:730px){#instrument[_ngcontent-%COMP%]{visibility:hidden}}h2[_ngcontent-%COMP%]{font-size:12vh;font-family:Barlow Condensed,sans-serif;font-style:italic;font-weight:700;color:#333533;line-height:100px}#actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:1px solid;background:none;font-family:Barlow Condensed,sans-serif}#tools[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Barlow Condensed,sans-serif;font-weight:500;color:#707070;margin:0;transition:color .2s}#tools[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#707070;transition:fill .2s}#tools[_ngcontent-%COMP%]   .active-tool[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#bf9c6e}#tools[_ngcontent-%COMP%]   .active-tool[_ngcontent-%COMP%]{box-shadow:inset 0 0 10px #0000004d}#tools[_ngcontent-%COMP%]   .active-tool[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#bf9c6e}#tools[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:not(#tempo-container){transition:background-color .1s}#tools[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:not(#tempo-container):hover{cursor:pointer;background-color:#ffffff26;transition:background-color 10ms}#tempo-input-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{vertical-align:middle}#info-container[_ngcontent-%COMP%]{background-color:#333533;border-radius:50%;width:44px;height:44px;text-align:center;cursor:pointer}#song-info[_ngcontent-%COMP%]{cursor:initial;text-align:start;width:max-content;position:absolute;bottom:0;left:60px;background-color:#08080880;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);color:#fff}#song-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-family:Barlow Condensed,sans-serif;color:gray}#menu-btn[_ngcontent-%COMP%]{cursor:pointer}#menu-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{fill:#b9b9b9}#menu-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#fff6;transition:fill .1s ease-in}#menu[_ngcontent-%COMP%]{position:absolute;top:-150%;right:0;color:#b6b6b6;background-color:#262626;box-shadow:1px 1px 4px #0000006f;transition:opacity .15s ease-in}.option[_ngcontent-%COMP%]{transition:background-color .1s ease-in}.option[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#ffffff0d}.option[_ngcontent-%COMP%]:active{transition:background-color 20ms ease-in;background-color:#ffffff1a}#edit-btn[_ngcontent-%COMP%]{transition:background-color .1s}#edit-btn[_ngcontent-%COMP%]:hover{background-color:#ffffff0d;cursor:pointer}#edit-btn[_ngcontent-%COMP%]:active{background-color:#fff3;transition:background-color 20ms}#comment-btn[_ngcontent-%COMP%]{border-color:#d6d6d6;color:#d6d6d6}#rate-btn[_ngcontent-%COMP%]{border-color:#bf9c6e;color:#bf9c6e}#mobile-end-btns[_ngcontent-%COMP%]{width:150px}#mobile-end-btns[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:hover{background-color:#343533}"],data:{animation:[ro("appear",[nr(":enter",[Xt({opacity:0}),tr("100ms ease-in-out",Xt({opacity:1}))]),nr(":leave",[tr("100ms ease-in-out",Xt({opacity:0}))])])]}}),n})(),oV=(()=>{class n{constructor(t,r,i){this.playerService=t,this.loadingService=r,this.router=i}resolve(t,r){let i=t.paramMap.get("id"),a=+t.paramMap.get("tabId"),c="true"===t.queryParamMap.get("isCustom"),f=this.playerService.loadTab(i,a);return c&&(f=this.playerService.loadTab(i,a,!0)),null==f?void 0:f.pipe((0,Yr.b)(m=>(this.loadingService.isLoading.next(!1),m||(this.router.navigate(["not-found"]),!1))))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Rc),u.LFG(Ih),u.LFG(lr))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),aV=(()=>{class n{constructor(t,r,i){this.authService=t,this.firestore=r,this.http=i,this.currentUser=this.authService.currentUser.value}requestUpdateProfile(t,r){return this.currentUser=this.authService.currentUser.value,Eb([(0,fa.ag)((0,fa.n)().currentUser,t),(0,fa.af)((0,fa.n)().currentUser,{displayName:r})])}requestUpdatePassword(t){return(0,fa.ah)((0,fa.n)().currentUser,t)}getUserTabIds(t){return this.firestore.collection("users").doc(t).collection("tabs").get().pipe(_n(1),(0,ft.U)(r=>{let i=[];return r.docs.forEach(a=>{i.push(a.ref.id)}),i}))}getUserTabSpotifyTracks(t,r){let i=t.join(",");return this.http.get(`https://api.spotify.com/v1/tracks?ids=${i}`,{headers:new os({"Content-Type":"application/json",Authorization:`Bearer ${r}`})}).pipe((0,ft.U)(a=>a.tracks))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ch),u.LFG(dy),u.LFG(zl))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const uV=function(n){return{transform:n}};function lV(n,e){if(1&n&&(u.TgZ(0,"div",24),u._UZ(1,"div",25),u.qZA()),2&n){const t=u.oxw(2);u.Q6J("@appear",void 0),u.xp6(1),u.Q6J("ngStyle",u.VKq(2,uV,"scale("+t.uploadPercentage/100+")"))}}function cV(n,e){if(1&n&&(u.TgZ(0,"p",26),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.xp6(1),u.hij("",t.fileUploadErrorMessage," ")}}function dV(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",13)(1,"div")(2,"label",14),u._UZ(3,"img",15),u.TgZ(4,"div",16)(5,"div"),u.O4$(),u.TgZ(6,"svg",17),u._UZ(7,"path",18)(8,"path",19),u.qZA()(),u.kcU(),u.TgZ(9,"p",20),u._uU(10,"EDIT"),u.qZA()()(),u.TgZ(11,"input",21),u.NdJ("input",function(i){return u.CHM(t),u.oxw().uploadNewProfilePic(i)}),u.qZA(),u.YNc(12,lV,2,4,"div",22),u.qZA(),u.YNc(13,cV,2,1,"p",23),u.qZA()}if(2&n){const t=u.oxw();u.xp6(3),u.Q6J("src",t.currentFirebaseUser?t.currentFirebaseUser.photoURL:t.imageSrc,u.LSH),u.xp6(9),u.Q6J("ngIf",t.uploadPercentage||0===t.uploadPercentage),u.xp6(1),u.Q6J("ngIf",t.fileUploadErrorMessage)}}function hV(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",32)(1,"button",40),u.NdJ("click",function(){return u.CHM(t),u.oxw(3).changePasswordMode=!0}),u._uU(2,"Change your password"),u.qZA(),u.TgZ(3,"button",41),u.NdJ("click",function(){return u.CHM(t),u.oxw(3).editMode=!0}),u._uU(4,"Edit profile"),u.qZA()()}}function fV(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div")(1,"div",30)(2,"h5"),u._uU(3,"Email"),u.qZA(),u.TgZ(4,"p",31),u._uU(5),u.qZA()(),u.TgZ(6,"div",32)(7,"h5"),u._uU(8,"Username"),u.qZA(),u.TgZ(9,"p",31),u._uU(10),u.qZA()(),u.YNc(11,hV,5,0,"div",33),u.TgZ(12,"div",34),u.NdJ("click",function(){return u.CHM(t),u.oxw(2).logOut()}),u.TgZ(13,"div",35)(14,"p",36),u._uU(15,"Log out"),u.qZA(),u.O4$(),u.TgZ(16,"svg",37),u._UZ(17,"path",38)(18,"path",39),u.qZA()()()()}if(2&n){const t=u.oxw(2);u.Q6J("@appear",void 0),u.xp6(5),u.Oqu(t.profileForm.value.email),u.xp6(5),u.Oqu(t.profileForm.value.username),u.xp6(1),u.Q6J("ngIf",!t.editMode&&!t.changePasswordMode&&t.profileForm.valid)}}function pV(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",32)(1,"button",40),u.NdJ("click",function(){return u.CHM(t),u.oxw(3).editMode=!1}),u._uU(2,"Cancel"),u.qZA(),u.TgZ(3,"button",41),u.NdJ("click",function(){return u.CHM(t),u.oxw(3).requestUpdateProfile()}),u._uU(4,"Save changes"),u.qZA()()}}function gV(n,e){if(1&n&&(u.TgZ(0,"form",42)(1,"div",43)(2,"h5",44),u._uU(3,"Email"),u.qZA(),u._UZ(4,"input",45),u.qZA(),u.TgZ(5,"div")(6,"h5",46),u._uU(7,"Username"),u.qZA(),u._UZ(8,"input",47),u.qZA(),u.YNc(9,pV,5,0,"div",33),u.qZA()),2&n){const t=u.oxw(2);u.Q6J("@appear",void 0)("formGroup",t.profileForm),u.xp6(9),u.Q6J("ngIf",t.editMode)}}function mV(n,e){1&n&&(u.TgZ(0,"p",57),u._uU(1," Password is too short "),u.qZA())}function yV(n,e){1&n&&(u.TgZ(0,"p",58),u._uU(1,"Passwords don't match"),u.qZA())}function _V(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",32)(1,"button",40),u.NdJ("click",function(){return u.CHM(t),u.oxw(3).changePasswordMode=!1}),u._uU(2,"Cancel"),u.qZA(),u.TgZ(3,"button",53),u.NdJ("click",function(){return u.CHM(t),u.oxw(3).updatePassword()}),u._uU(4,"Save changes"),u.qZA(),u.TgZ(5,"div",54),u.YNc(6,mV,2,0,"p",55),u.YNc(7,yV,2,0,"p",56),u.qZA()()}if(2&n){const t=u.oxw(3);u.xp6(3),u.Q6J("disabled",!t.passwordForm.valid),u.xp6(3),u.Q6J("ngIf",t.passwordForm.get("newPassword").errors&&t.passwordForm.get("newPassword").errors.minlength&&t.passwordForm.get("newPassword").dirty&&t.passwordForm.get("newPassword").invalid),u.xp6(1),u.Q6J("ngIf",t.passwordForm.get("confirmPassword").errors&&t.passwordForm.get("confirmPassword").errors.incorrectPassword)}}function vV(n,e){if(1&n&&(u.TgZ(0,"form",42),u._UZ(1,"input",48),u.TgZ(2,"div",43)(3,"h5",49),u._uU(4,"New password"),u.qZA(),u._UZ(5,"input",50),u.qZA(),u.TgZ(6,"div")(7,"h5",51),u._uU(8,"Confirm password"),u.qZA(),u._UZ(9,"input",52),u.qZA(),u.YNc(10,_V,8,3,"div",33),u.qZA()),2&n){const t=u.oxw(2);u.Q6J("@appear",void 0)("formGroup",t.passwordForm),u.xp6(10),u.Q6J("ngIf",t.changePasswordMode)}}function bV(n,e){if(1&n&&(u.TgZ(0,"div",27),u.YNc(1,fV,19,4,"div",28),u.YNc(2,gV,10,3,"form",29),u.YNc(3,vV,11,3,"form",29),u.qZA()),2&n){const t=u.oxw();u.Q6J("@appear",void 0),u.xp6(1),u.Q6J("ngIf",!t.editMode&&!t.changePasswordMode&&t.profileForm.valid),u.xp6(1),u.Q6J("ngIf",t.editMode),u.xp6(1),u.Q6J("ngIf",t.changePasswordMode)}}function wV(n,e){if(1&n&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.hij(", ",t.name,"")}}const uk=function(n){return["/play",n,"0"]},lk=function(){return{isCustom:!0}};function EV(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",63)(1,"div",64),u._UZ(2,"img",65),u.qZA(),u.TgZ(3,"div",66)(4,"h5",67),u._uU(5),u.qZA(),u.TgZ(6,"h6",68),u._uU(7),u.YNc(8,wV,2,1,"span",69),u.qZA()(),u.TgZ(9,"div",70)(10,"div",71),u.NdJ("click",function(){const a=u.CHM(t).$implicit;return u.oxw(3).deleteTab(a.id)}),u.O4$(),u.TgZ(11,"svg",72),u._UZ(12,"path",73),u.qZA()()(),u.kcU(),u.TgZ(13,"div",74)(14,"h2",75),u._uU(15,"\u203a"),u.qZA()()()}if(2&n){const t=e.$implicit;u.Q6J("@appear",void 0),u.xp6(1),u.Q6J("routerLink",u.VKq(9,uk,t.id))("queryParams",u.DdM(11,lk)),u.xp6(1),u.Q6J("src",t.album.images[1].url,u.LSH),u.xp6(1),u.Q6J("routerLink",u.VKq(12,uk,t.id))("queryParams",u.DdM(14,lk)),u.xp6(2),u.Oqu(t.name),u.xp6(2),u.Oqu(t.artists[0].name),u.xp6(1),u.Q6J("ngForOf",t.artists.slice(1))}}function TV(n,e){1&n&&(u.TgZ(0,"div")(1,"h6",76),u._uU(2,"Your created tabs will be displayed here"),u.qZA()())}function CV(n,e){if(1&n&&(u.TgZ(0,"div",61),u.YNc(1,EV,16,15,"div",62),u.YNc(2,TV,3,0,"div",28),u.qZA()),2&n){const t=u.oxw(2);u.xp6(1),u.Q6J("ngForOf",t.userTabTracks),u.xp6(1),u.Q6J("ngIf",t.userTabTracks&&0===t.userTabTracks.length)}}function IV(n,e){if(1&n&&(u.TgZ(0,"div",59),u.YNc(1,CV,3,2,"div",60),u.qZA()),2&n){const t=u.oxw();u.Q6J("@appear",void 0),u.xp6(1),u.Q6J("ngIf",t.userTabTracks)}}const SV=function(){return["/"]},DV=[{path:"",pathMatch:"full",redirectTo:"play/3lyHyxVE8JHvNz75wBmExR/0"},{path:"auth",component:MU},{path:"user",component:(()=>{class n{constructor(t,r,i,a,c,f){this.userService=t,this.fireAuth=r,this.storage=i,this.authService=a,this.firestore=c,this.loadingService=f,this.currentFirebaseUser=null,this.profileForm=new us({email:new xr(null,[$n.required,$n.email]),username:new xr(null,$n.required)}),this.passwordForm=new us({newPassword:new xr(null,[$n.required,$n.minLength(6),$n.pattern("^[a-zA-Z]+$")]),confirmPassword:new xr(null,[$n.required,this.matchPasswordValidator()])}),this.showTabs=!1,this.editMode=!1,this.changePasswordMode=!1}ngOnInit(){this.fireAuth.onAuthStateChanged(t=>{this.currentFirebaseUser=t,this.profileForm.patchValue({email:null==t?void 0:t.email,username:null==t?void 0:t.displayName}),t&&this.requestTabs()}),setTimeout(()=>{this.imageSrc="https://firebasestorage.googleapis.com/v0/b/tab-player.appspot.com/o/default_profile.png?alt=media&token=631da581-8c28-4504-88ae-207b61e334b4"},2500)}requestTabs(){this.loadingService.isLoading.next(!0),this.userService.getUserTabIds(this.currentFirebaseUser.uid).pipe(_n(1)).subscribe(t=>{t&&0!==t.length?(this.loadingService.isLoading.next(!1),this.authService.getAccessToken().pipe(_n(1)).subscribe(r=>{this.userService.getUserTabSpotifyTracks(t,r).pipe(_n(1)).subscribe(i=>{var a,c;this.userTabTracks=i,0!==(null===(a=this.userTabTracks)||void 0===a?void 0:a.length)&&(null===(c=this.userTabTracks)||void 0===c||c.sort((f,m)=>(""+f.artists[0].name).localeCompare(m.artists[0].name)||(""+f.album.name).localeCompare(m.album.name))),this.loadingService.isLoading.next(!1)})})):this.loadingService.isLoading.next(!1)})}requestUpdateProfile(){this.userService.requestUpdateProfile(this.profileForm.value.email,this.profileForm.value.username).pipe(_n(1)).subscribe(()=>this.editMode=!1)}updatePassword(){this.passwordForm.invalid||this.userService.requestUpdatePassword(this.passwordForm.value.newPassword).then(()=>this.changePasswordMode=!1)}uploadNewProfilePic(t){if(!this.currentFirebaseUser||!t||0===t.target.files.length)return;let r=t.target.files[0];if(!r.type.startsWith("image"))return void(this.fileUploadErrorMessage="Please upload a valid image format");if(r.size>4194304)return void(this.fileUploadErrorMessage="File size limit is 4 MB");this.fileUploadErrorMessage=void 0;let i=this.storage.upload(this.currentFirebaseUser.uid,r);i.then(c=>{this.storage.ref(c.metadata.fullPath).getDownloadURL().pipe(_n(1)).subscribe(f=>{var m;this.firestore.collection("users").doc(null===(m=this.currentFirebaseUser)||void 0===m?void 0:m.uid).update({photoURL:f}),(0,fa.af)(this.currentFirebaseUser,{photoURL:f}).then(()=>this.fireAuth.updateCurrentUser(this.currentFirebaseUser))})}).catch(c=>console.log(c));let a=i.percentageChanges().subscribe(c=>{this.uploadPercentage=c,100===c&&(a.unsubscribe(),setTimeout(()=>{this.uploadPercentage=void 0},1e3))})}logOut(){this.authService.logOut()}deleteTab(t){var r;this.firestore.collection("users").doc(null===(r=this.currentFirebaseUser)||void 0===r?void 0:r.uid).collection("tabs").doc(t).delete().then(()=>this.requestTabs())}matchPasswordValidator(){return()=>{var t,r;return this.passwordForm?(null===(t=this.passwordForm.get("newPassword"))||void 0===t?void 0:t.value)===(null===(r=this.passwordForm.get("confirmPassword"))||void 0===r?void 0:r.value)?null:{incorrectPassword:!0}:null}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(aV),u.Y36(cc),u.Y36(pA),u.Y36(Ch),u.Y36(dy),u.Y36(Ih))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-user"]],decls:20,vars:7,consts:[["id","container",1,"row","m-0","py-5"],[1,"col","p-0"],["id","back-btn-container",1,"fs-3","rounded-end",3,"routerLink"],["id","arrow-head"],["id","profile-container",1,"col-lg-6","col-sm-8","col-10","rounded","row","mx-0","my-5","p-0"],["id","pic-column","class","col-2 pt-2 px-3",4,"ngIf"],[1,"text-white","col","p-0","position-relative"],["id","btns-container",1,"row","m-0","text-center",2,"font-family","Barlow Condensed"],[1,"col-6","py-1",3,"ngClass","click"],[1,"m-0"],["id","profile","class","p-3 ",4,"ngIf"],["id","songs-container","class","pt-3 pe-3 m-0 p-0 w-100",4,"ngIf"],[1,"col"],["id","pic-column",1,"col-2","pt-2","px-3"],["id","profile-pic-label","for","profile-pic-input"],["id","profile-pic","alt","",1,"rounded-circle","img-fluid",3,"src"],["id","profile-hover-container",1,"d-flex","justify-content-center","align-items-center","flex-column"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","white","viewBox","0 0 16 16",1,"bi","bi-pencil-square"],["d","M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"],["fill-rule","evenodd","d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"],[2,"font-family","Barlow Condensed","color","white"],["hidden","","type","file","accept","image/*","name","profile-pic-input","id","profile-pic-input",3,"input"],["id","bar-container","class","rounded-pill",4,"ngIf"],["id","error-message","class","text-danger",4,"ngIf"],["id","bar-container",1,"rounded-pill"],["id","bar",1,"rounded-pill",3,"ngStyle"],["id","error-message",1,"text-danger"],["id","profile",1,"p-3"],[4,"ngIf"],[3,"formGroup",4,"ngIf"],[1,"mb-4"],[1,"text-white-50"],[1,"my-4"],["class","my-4",4,"ngIf"],["id","logout-btn",1,"text-danger","border","border-danger","d-inline-block","p-2","rounded",3,"click"],[1,"d-flex","align-items-center"],[1,"d-inline-block","mb-0","me-2"],["width","20","height","20","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-box-arrow-right"],["fill-rule","evenodd","d","M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"],["fill-rule","evenodd","d","M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"],[1,"btn","text-white","border-white","me-2",3,"click"],[1,"btn","text-white","border-white",3,"click"],[3,"formGroup"],[1,"mb-3"],["for","email"],["type","email","name","email","id","email","formControlName","email",1,"form-control-plaintext","text-white-50"],["for","username"],["type","text","name","username","id","username","formControlName","username",1,"form-control-plaintext","text-white-50"],["hidden","","type","email","autocomplete","email"],["for","newPassword"],["type","password","autocomplete","new-password","name","newPassword","id","newPassword","formControlName","newPassword","placeholder","Your new password",1,"form-control-plaintext","text-white-50"],["for","confirmPassword"],["type","password","autocomplete","new-password","name","confirmPassword","id","confirmPassword","formControlName","confirmPassword","placeholder","Confirm your new password",1,"form-control-plaintext","text-white-50"],[1,"btn","text-white","border-white",3,"disabled","click"],[1,"float-end"],["class","text-warning",4,"ngIf"],["class","text-warning my-1",4,"ngIf"],[1,"text-warning"],[1,"text-warning","my-1"],["id","songs-container",1,"pt-3","pe-3","m-0","p-0","w-100"],["class","p-0",4,"ngIf"],[1,"p-0"],["class","song row mx-0 mb-2 py-1 rounded",4,"ngFor","ngForOf"],[1,"song","row","mx-0","mb-2","py-1","rounded"],[1,"col-3","col-xl-2","col-lg-3","px-3","px-xxl-4",3,"routerLink","queryParams"],["alt","",1,"img-fluid",3,"src"],[1,"col","p-0","my-auto","song-info-container",3,"routerLink","queryParams"],[1,"mb-1","song-title"],[1,"m-0","text-white-50","fw-","artists"],[4,"ngFor","ngForOf"],[1,"col-1","p-0","my-auto"],[1,"delete-btn","p-1","mx-2","rounded","d-flex","align-items-center","justify-content-center",3,"click"],["width","18","height","18","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-trash3"],["d","M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"],[1,"col-1","py-0","px-2","arrow-head","my-auto","d-flex"],[2,"cursor","pointer"],[1,"text-center","text-white-50","lead","fs-6"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),u._uU(4,"\u2039"),u.qZA(),u.TgZ(5,"p"),u._uU(6,"HOME"),u.qZA()()(),u.TgZ(7,"div",4),u.YNc(8,dV,14,3,"div",5),u.TgZ(9,"div",6)(10,"div",7)(11,"div",8),u.NdJ("click",function(){return r.showTabs=!1}),u.TgZ(12,"h4",9),u._uU(13,"PROFILE"),u.qZA()(),u.TgZ(14,"div",8),u.NdJ("click",function(){return r.showTabs=!0}),u.TgZ(15,"h4",9),u._uU(16,"TABS"),u.qZA()()(),u.YNc(17,bV,4,4,"div",10),u.YNc(18,IV,2,2,"div",11),u.qZA()(),u._UZ(19,"div",12),u.qZA()),2&t&&(u.xp6(2),u.Q6J("routerLink",u.DdM(6,SV)),u.xp6(6),u.Q6J("ngIf",r.currentFirebaseUser||r.imageSrc),u.xp6(3),u.Q6J("ngClass",r.showTabs?"":"selected"),u.xp6(3),u.Q6J("ngClass",r.showTabs?"selected":""),u.xp6(3),u.Q6J("ngIf",!r.showTabs),u.xp6(1),u.Q6J("ngIf",r.showTabs))},directives:[Cd,Mn,_u,Ki,tc,Ql,nc,Po,Xu,iu,Pn],styles:['#container[_ngcontent-%COMP%]{height:100vh}#profile-container[_ngcontent-%COMP%]{border:2px solid #4a4a4a;height:calc(100% - 100px);overflow:hidden}p[_ngcontent-%COMP%]{margin:0}#btns-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:not(.selected):hover{background-color:#ffffff1a;cursor:pointer}.btn[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.btn[_ngcontent-%COMP%]:active{background-color:#ffffff26;transition:background-color 20ms}.selected[_ngcontent-%COMP%]{position:relative}.selected[_ngcontent-%COMP%]:after{content:" ";position:absolute;left:0;right:0;top:0;bottom:0;border-bottom:2px solid white;animation:open .3s;transform-origin:center}@keyframes open{0%{transform:scaleX(0)}to{transform:scale(1)}}#profile-pic[_ngcontent-%COMP%]{width:100%;object-position:center;object-fit:cover;aspect-ratio:1}#profile-pic-label[_ngcontent-%COMP%]{position:relative}#profile-pic-label[_ngcontent-%COMP%]:hover   #profile-hover-container[_ngcontent-%COMP%]{opacity:1}#profile-hover-container[_ngcontent-%COMP%]{opacity:0;position:absolute;top:-1px;left:-1px;right:-1px;bottom:-1px;border-radius:50%;background-color:#000c;cursor:pointer;transition:opacity .15s ease-in-out}#bar-container[_ngcontent-%COMP%]{margin-top:10px;width:100%;height:2px;background-color:#505050}#bar[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#bf9c6e;transform-origin:left;transition:transform .5s ease-in-out}#songs-container[_ngcontent-%COMP%]{position:absolute;height:calc(100% - 36.8px);overflow:auto}#songs-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}#songs-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#ffffff0d;width:8px;border-radius:100px}#songs-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#ffffff1a;border-radius:100px}.song[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;cursor:pointer}.song[_ngcontent-%COMP%]:active{background-color:#ffffff26;transition:background-color 40ms}.arrow-head[_ngcontent-%COMP%]{opacity:0;transition:opacity .3s,transform .3s ease-out;transform:translate(-20px)}.song[_ngcontent-%COMP%]:hover   .arrow-head[_ngcontent-%COMP%]{opacity:1;transform:translate(0)}.delete-btn[_ngcontent-%COMP%]{opacity:0;transform:translateY(30px);transition:opacity .3s ease-out,transform .3s ease-out}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.delete-btn[_ngcontent-%COMP%]:active{background-color:#ffffff26}.song[_ngcontent-%COMP%]:hover   .delete-btn[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}@media (hover:none){.delete-btn[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}}.form-control-plaintext[_ngcontent-%COMP%]{border-bottom:1px solid #505050}.song-info-container[_ngcontent-%COMP%]{overflow:hidden}.song-title[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}#error-message[_ngcontent-%COMP%]{font-size:.8em;margin-top:10px}#back-btn-container[_ngcontent-%COMP%]{color:#fff;font-family:Barlow Condensed;vertical-align:middle;padding-bottom:5px;margin-right:50%}#back-btn-container[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#ffffff1a}#back-btn-container[_ngcontent-%COMP%]:active{cursor:pointer;background-color:#ffffff26}#back-btn-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}#arrow-head[_ngcontent-%COMP%]{font-size:1.5em;margin-inline:10px;line-height:40px;max-height:40px!important;vertical-align:sub}#logout-btn[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;cursor:pointer}#logout-btn[_ngcontent-%COMP%]:active{background-color:#ffffff26}.artists[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}'],data:{animation:[ro("appear",[nr(":enter",[Xt({position:"absolute",opacity:0}),tr("150ms 150ms ease-in-out",Xt({opacity:1}))]),nr(":leave",[tr("150ms ease-in-out",Xt({opacity:0}))])])]}}),n})(),canActivate:[nk]},{path:"play",canActivate:[nk],children:[{path:"",pathMatch:"full",redirectTo:"3lyHyxVE8JHvNz75wBmExR/0"},{path:":id",children:[{path:"",pathMatch:"full",redirectTo:"0"},{path:":tabId",resolve:{tab:oV},component:ak}]},{path:"**",redirectTo:"/not-found"}]},{path:"not-found",component:rk}];let AV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[jy.forRoot(DV)],jy]}),n})();const un=!1;function ck(n){return new u.vHH(3e3,un)}function u3(){return"undefined"!=typeof window&&void 0!==window.document}function mA(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Dh(n){switch(n.length){case 0:return new tf;case 1:return n[0];default:return new db(n)}}function dk(n,e,t,r,i={},a={}){const c=[],f=[];let m=-1,b=null;if(r.forEach(I=>{const A=I.offset,R=A==m,L=R&&b||{};Object.keys(I).forEach(j=>{let oe=j,be=I[j];if("offset"!==j)switch(oe=e.normalizePropertyName(oe,c),be){case"!":be=i[j];break;case aa:be=a[j];break;default:be=e.normalizeStyleValue(j,oe,be,c)}L[oe]=be}),R||f.push(L),b=L,m=A}),c.length)throw function QV(n){return new u.vHH(3502,un)}();return f}function yA(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&_A(t,"start",n)));break;case"done":n.onDone(()=>r(t&&_A(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&_A(t,"destroy",n)))}}function _A(n,e,t){const r=t.totalTime,a=vA(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(a._data=c),a}function vA(n,e,t,r,i="",a=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!c}}function Bo(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function hk(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let bA=(n,e)=>!1,fk=(n,e,t)=>[],pk=null;function wA(n){const e=n.parentNode||n.host;return e===pk?null:e}(mA()||"undefined"!=typeof Element)&&(u3()?(pk=(()=>document.documentElement)(),bA=(n,e)=>{for(;e;){if(e===n)return!0;e=wA(e)}return!1}):bA=(n,e)=>n.contains(e),fk=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Sp=null,gk=!1;function mk(n){Sp||(Sp=function c3(){return"undefined"!=typeof document?document.body:null}()||{},gk=!!Sp.style&&"WebkitAppearance"in Sp.style);let e=!0;return Sp.style&&!function l3(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Sp.style,!e&&gk&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Sp.style)),e}const yk=bA,_k=fk;let vk=(()=>{class n{validateStyleProperty(t){return mk(t)}matchesElement(t,r){return!1}containsElement(t,r){return yk(t,r)}getParentElement(t){return wA(t)}query(t,r,i){return _k(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,c,f=[],m){return new tf(i,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),EA=(()=>{class n{}return n.NOOP=new vk,n})();const TA="ng-enter",sC="ng-leave",oC="ng-trigger",aC=".ng-trigger",wk="ng-animating",CA=".ng-animating";function Dp(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:IA(parseFloat(e[1]),e[2])}function IA(n,e){return"s"===e?1e3*n:n}function uC(n,e,t){return n.hasOwnProperty("duration")?n:function f3(n,e,t){let i,a=0,c="";if("string"==typeof n){const f=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return e.push(ck()),{duration:0,delay:0,easing:""};i=IA(parseFloat(f[1]),f[2]);const m=f[3];null!=m&&(a=IA(parseFloat(m),f[4]));const b=f[5];b&&(c=b)}else i=n;if(!t){let f=!1,m=e.length;i<0&&(e.push(function xV(){return new u.vHH(3100,un)}()),f=!0),a<0&&(e.push(function MV(){return new u.vHH(3101,un)}()),f=!0),f&&e.splice(m,0,ck())}return{duration:i,delay:a,easing:c}}(n,e,t)}function gy(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Ah(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else gy(n,t);return t}function Tk(n,e,t){return t?e+":"+t+";":""}function Ck(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=Tk(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=Tk(0,m3(t),n.style[t]));n.setAttribute("style",e)}function vl(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=DA(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),mA()&&Ck(n))}function Ap(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=DA(t);n.style[r]=""}),mA()&&Ck(n))}function F0(n){return Array.isArray(n)?1==n.length?n[0]:mg(n):n}const SA=new RegExp("{{\\s*(.+?)\\s*}}","g");function Ik(n){let e=[];if("string"==typeof n){let t;for(;t=SA.exec(n);)e.push(t[1]);SA.lastIndex=0}return e}function lC(n,e,t){const r=n.toString(),i=r.replace(SA,(a,c)=>{let f=e[c];return e.hasOwnProperty(c)||(t.push(function PV(n){return new u.vHH(3003,un)}()),f=""),f.toString()});return i==r?n:i}function cC(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const g3=/-+([a-z0-9])/g;function DA(n){return n.replace(g3,(...e)=>e[1].toUpperCase())}function m3(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function jo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function kV(n){return new u.vHH(3004,un)}()}}function Sk(n,e){return window.getComputedStyle(n)[e]}function E3(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function T3(n,e,t){if(":"==n[0]){const m=function C3(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function zV(n){return new u.vHH(3016,un)}()),"* => *"}}(n,t);if("function"==typeof m)return void e.push(m);n=m}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function ZV(n){return new u.vHH(3015,un)}()),e;const i=r[1],a=r[2],c=r[3];e.push(Dk(i,c));"<"==a[0]&&!("*"==i&&"*"==c)&&e.push(Dk(c,i))}(r,t,e)):t.push(n),t}const pC=new Set(["true","1"]),gC=new Set(["false","0"]);function Dk(n,e){const t=pC.has(n)||gC.has(n),r=pC.has(e)||gC.has(e);return(i,a)=>{let c="*"==n||n==i,f="*"==e||e==a;return!c&&t&&"boolean"==typeof i&&(c=i?pC.has(n):gC.has(n)),!f&&r&&"boolean"==typeof a&&(f=a?pC.has(e):gC.has(e)),c&&f}}const I3=new RegExp("s*:selfs*,?","g");function AA(n,e,t,r){return new S3(n).build(e,t,r)}class S3{constructor(e){this._driver=e}build(e,t,r){const i=new x3(t);this._resetContextStyleTimingState(i);const a=jo(this,F0(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),a}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function RV(){return new u.vHH(3006,un)}()),e.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const m=f,b=m.name;b.toString().split(/\s*,\s*/).forEach(I=>{m.name=I,a.push(this.visitState(m,t))}),m.name=b}else if(1==f.type){const m=this.visitTransition(f,t);r+=m.queryCount,i+=m.depCount,c.push(m)}else t.errors.push(function FV(){return new u.vHH(3007,un)}())}),{type:7,name:e.name,states:a,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const a=new Set,c=i||{};r.styles.forEach(f=>{if(mC(f)){const m=f;Object.keys(m).forEach(b=>{Ik(m[b]).forEach(I=>{c.hasOwnProperty(I)||a.add(I)})})}}),a.size&&(cC(a.values()),t.errors.push(function LV(n,e){return new u.vHH(3008,un)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=jo(this,F0(e.animation),t);return{type:1,matchers:E3(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:xp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>jo(this,r,t)),options:xp(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const a=e.steps.map(c=>{t.currentTime=r;const f=jo(this,c,t);return i=Math.max(i,t.currentTime),f});return t.currentTime=i,{type:3,steps:a,options:xp(e.options)}}visitAnimate(e,t){const r=function O3(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return xA(uC(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=xA(0,0,"");return a.dynamic=!0,a.strValue=t,a}const i=uC(t,e);return xA(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,a=e.styles?e.styles:Xt({});if(5==a.type)i=this.visitKeyframes(a,t);else{let c=e.styles,f=!1;if(!c){f=!0;const b={};r.easing&&(b.easing=r.easing),c=Xt(b)}t.currentTime+=r.duration+r.delay;const m=this.visitStyle(c,t);m.isEmptyStep=f,i=m}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==aa?r.push(c):t.errors.push(function UV(n){return new u.vHH(3002,un)}()):r.push(c)}):r.push(e.styles);let i=!1,a=null;return r.forEach(c=>{if(mC(c)){const f=c,m=f.easing;if(m&&(a=m,delete f.easing),!i)for(let b in f)if(f[b].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:a,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(f=>{if(!this._driver.validateStyleProperty(f))return delete c[f],void t.unsupportedCSSPropertiesFound.add(f);const m=t.collectedStyles[t.currentQuerySelector],b=m[f];let I=!0;b&&(a!=i&&a>=b.startTime&&i<=b.endTime&&(t.errors.push(function VV(n,e,t,r,i){return new u.vHH(3010,un)}()),I=!1),a=b.startTime),I&&(m[f]={startTime:a,endTime:i}),t.options&&function p3(n,e,t){const r=e.params||{},i=Ik(n);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(function OV(n){return new u.vHH(3001,un)}())})}(c[f],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function BV(){return new u.vHH(3011,un)}()),r;let a=0;const c=[];let f=!1,m=!1,b=0;const I=e.steps.map($e=>{const rt=this._makeStyleAst($e,t);let st=null!=rt.offset?rt.offset:function M3(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(mC(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(mC(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(rt.styles),Qe=0;return null!=st&&(a++,Qe=rt.offset=st),m=m||Qe<0||Qe>1,f=f||Qe<b,b=Qe,c.push(Qe),rt});m&&t.errors.push(function jV(){return new u.vHH(3012,un)}()),f&&t.errors.push(function HV(){return new u.vHH(3200,un)}());const A=e.steps.length;let R=0;a>0&&a<A?t.errors.push(function $V(){return new u.vHH(3202,un)}()):0==a&&(R=1/(A-1));const L=A-1,j=t.currentTime,oe=t.currentAnimateTimings,be=oe.duration;return I.forEach(($e,rt)=>{const st=R>0?rt==L?1:R*rt:c[rt],Qe=st*be;t.currentTime=j+oe.delay+Qe,oe.duration=Qe,this._validateStyleAst($e,t),$e.offset=st,r.styles.push($e)}),r}visitReference(e,t){return{type:8,animation:jo(this,F0(e.animation),t),options:xp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:xp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:xp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[a,c]=function D3(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(I3,"")),n=n.replace(/@\*/g,aC).replace(/@\w+/g,t=>aC+"-"+t.substr(1)).replace(/:animating/g,CA),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+a:a,Bo(t.collectedStyles,t.currentQuerySelector,{});const f=jo(this,F0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:f,originalSelector:e.selector,options:xp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function qV(){return new u.vHH(3013,un)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:uC(e.timings,t.errors,!0);return{type:12,animation:jo(this,F0(e.animation),t),timings:r,options:null}}}class x3{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function mC(n){return!Array.isArray(n)&&"object"==typeof n}function xp(n){return n?(n=gy(n)).params&&(n.params=function A3(n){return n?gy(n):null}(n.params)):n={},n}function xA(n,e,t){return{duration:n,delay:e,easing:t}}function MA(n,e,t,r,i,a,c=null,f=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:c,subTimeline:f}}class yC{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const N3=new RegExp(":enter","g"),F3=new RegExp(":leave","g");function OA(n,e,t,r,i,a={},c={},f,m,b=[]){return(new L3).buildKeyframes(n,e,t,r,i,a,c,f,m,b)}class L3{buildKeyframes(e,t,r,i,a,c,f,m,b,I=[]){b=b||new yC;const A=new PA(e,t,b,i,a,I,[]);A.options=m,A.currentTimeline.setStyles([c],null,A.errors,m),jo(this,r,A);const R=A.timelines.filter(L=>L.containsAnimation());if(Object.keys(f).length){let L;for(let j=R.length-1;j>=0;j--){const oe=R[j];if(oe.element===t){L=oe;break}}L&&!L.allowOnlyTimelineStyles()&&L.setStyles([f],null,A.errors,m)}return R.length?R.map(L=>L.buildKeyframes()):[MA(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);a!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let a=t.currentTimeline.currentTime;const c=null!=r.duration?Dp(r.duration):null,f=null!=r.delay?Dp(r.delay):null;return 0!==c&&e.forEach(m=>{const b=t.appendInstructionToTimeline(m,c,f);a=Math.max(a,b.duration+b.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),jo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=_C);const c=Dp(a.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>jo(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?Dp(e.options.delay):0;e.steps.forEach(c=>{const f=t.createSubContext(e.options);a&&f.delayNextStep(a),jo(this,c,f),i=Math.max(i,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return uC(t.params?lC(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const a=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(a):r.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,e.styles.forEach(m=>{f.forwardTime((m.offset||0)*a),f.setStyles(m.styles,m.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?Dp(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=_C);let c=r;const f=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=f.length;let m=null;f.forEach((b,I)=>{t.currentQueryIndex=I;const A=t.createSubContext(e.options,b);a&&A.delayNextStep(a),b===t.element&&(m=A.currentTimeline),jo(this,e.animation,A),A.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,A.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),m&&(t.currentTimeline.mergeTimelineCollectedStyles(m),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,a=e.timings,c=Math.abs(a.duration),f=c*(t.currentQueryTotal-1);let m=c*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":m=f-m;break;case"full":m=r.currentStaggerTime}const I=t.currentTimeline;m&&I.delayNextStep(m);const A=I.currentTime;jo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-A+(i.startTime-r.currentTimeline.startTime)}}const _C={};class PA{constructor(e,t,r,i,a,c,f,m){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=c,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=_C,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new vC(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Dp(r.duration)),null!=r.delay&&(i.delay=Dp(r.delay));const a=r.params;if(a){let c=i.params;c||(c=this.options.params={}),Object.keys(a).forEach(f=>{(!t||!c.hasOwnProperty(f))&&(c[f]=lC(a[f],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,a=new PA(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=_C,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},a=new U3(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,a,c){let f=[];if(i&&f.push(this.element),e.length>0){e=(e=e.replace(N3,"."+this._enterClassName)).replace(F3,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),f.push(...b)}return!a&&0==f.length&&c.push(function GV(n){return new u.vHH(3014,un)}()),f}}class vC{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new vC(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||aa,this._currentKeyframe[t]=aa}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const a=i&&i.params||{},c=function V3(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(a=>{t[a]=aa})):Ah(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(f=>{const m=lC(c[f],a,r);this._pendingStyles[f]=m,this._localTimelineStyles.hasOwnProperty(f)||(this._backFill[f]=this._globalTimelineStyles.hasOwnProperty(f)?this._globalTimelineStyles[f]:aa),this._updateStyle(f,m)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((f,m)=>{const b=Ah(f,!0);Object.keys(b).forEach(I=>{const A=b[I];"!"==A?e.add(I):A==aa&&t.add(I)}),r||(b.offset=m/this.duration),i.push(b)});const a=e.size?cC(e.values()):[],c=t.size?cC(t.values()):[];if(r){const f=i[0],m=gy(f);f.offset=0,m.offset=1,i=[f,m]}return MA(this.element,i,a,c,this.duration,this.startTime,this.easing,!1)}}class U3 extends vC{constructor(e,t,r,i,a,c,f=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=f,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],c=r+t,f=t/c,m=Ah(e[0],!1);m.offset=0,a.push(m);const b=Ah(e[0],!1);b.offset=Mk(f),a.push(b);const I=e.length-1;for(let A=1;A<=I;A++){let R=Ah(e[A],!1);R.offset=Mk((t+R.offset*r)/c),a.push(R)}r=c,t=0,i="",e=a}return MA(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function Mk(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class kA{}class B3 extends kA{normalizePropertyName(e,t){return DA(e)}normalizeStyleValue(e,t,r,i){let a="";const c=r.toString().trim();if(j3[t]&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&i.push(function NV(n,e){return new u.vHH(3005,un)}())}return c+a}}const j3=(()=>function H3(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Ok(n,e,t,r,i,a,c,f,m,b,I,A,R){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:c,timelines:f,queriedElements:m,preStyleProps:b,postStyleProps:I,totalTime:A,errors:R}}const NA={};class Pk{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function $3(n,e,t,r,i){return n.some(a=>a(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],a=this._stateStyles[e],c=i?i.buildStyles(t,r):{};return a?a.buildStyles(t,r):c}build(e,t,r,i,a,c,f,m,b,I){const A=[],R=this.ast.options&&this.ast.options.params||NA,j=this.buildStyles(r,f&&f.params||NA,A),oe=m&&m.params||NA,be=this.buildStyles(i,oe,A),$e=new Set,rt=new Map,st=new Map,Qe="void"===i,Tt={params:Object.assign(Object.assign({},R),oe)},At=I?[]:OA(e,t,this.ast.animation,a,c,j,be,Tt,b,A);let nn=0;if(At.forEach(Ho=>{nn=Math.max(Ho.duration+Ho.delay,nn)}),A.length)return Ok(t,this._triggerName,r,i,Qe,j,be,[],[],rt,st,nn,A);At.forEach(Ho=>{const Fc=Ho.element,Kk=Bo(rt,Fc,{});Ho.preStyleProps.forEach(Mp=>Kk[Mp]=!0);const U0=Bo(st,Fc,{});Ho.postStyleProps.forEach(Mp=>U0[Mp]=!0),Fc!==t&&$e.add(Fc)});const $r=cC($e.values());return Ok(t,this._triggerName,r,i,Qe,j,be,At,$r,rt,st,nn)}}class q3{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=gy(this.defaultParams);return Object.keys(e).forEach(a=>{const c=e[a];null!=c&&(i[a]=c)}),this.styles.styles.forEach(a=>{if("string"!=typeof a){const c=a;Object.keys(c).forEach(f=>{let m=c[f];m.length>1&&(m=lC(m,i,t));const b=this.normalizer.normalizePropertyName(f,t);m=this.normalizer.normalizeStyleValue(f,b,m,t),r[b]=m})}}),r}}class Z3{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new q3(i.style,i.options&&i.options.params||{},r)}),kk(this.states,"true","1"),kk(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Pk(e,i,this.states))}),this.fallbackTransition=function z3(n,e,t){return new Pk(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,f)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function kk(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const W3=new yC;class K3{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],a=AA(this._driver,t,r,[]);if(r.length)throw function JV(n){return new u.vHH(3503,un)}();this._animations[e]=a}_buildPlayer(e,t,r){const i=e.element,a=dk(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],a=this._animations[e];let c;const f=new Map;if(a?(c=OA(this._driver,t,a,TA,sC,{},{},r,W3,i),c.forEach(I=>{const A=Bo(f,I.element,{});I.postStyleProps.forEach(R=>A[R]=null)})):(i.push(function XV(){return new u.vHH(3300,un)}()),c=[]),i.length)throw function e3(n){return new u.vHH(3504,un)}();f.forEach((I,A)=>{Object.keys(I).forEach(R=>{I[R]=this._driver.computeStyle(A,R,aa)})});const b=Dh(c.map(I=>{const A=f.get(I.element);return this._buildPlayer(I,{},A)}));return this._playersById[e]=b,b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function t3(n){return new u.vHH(3301,un)}();return t}listen(e,t,r,i){const a=vA(t,"","","");return yA(this._getPlayer(e),r,a,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const a=this._getPlayer(e);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Nk="ng-animate-queued",RA="ng-animate-disabled",e6=[],Rk={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},t6={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ia="__ng_removed";class FA{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function s6(n){return null!=n?n:null}(r?e.value:e),r){const a=gy(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const L0="void",LA=new FA(L0);class n6{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Sa(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function n3(n,e){return new u.vHH(3302,un)}();if(null==r||0==r.length)throw function r3(n){return new u.vHH(3303,un)}();if(!function o6(n){return"start"==n||"done"==n}(r))throw function i3(n,e){return new u.vHH(3400,un)}();const a=Bo(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};a.push(c);const f=Bo(this._engine.statesByElement,e,{});return f.hasOwnProperty(t)||(Sa(e,oC),Sa(e,oC+"-"+t),f[t]=LA),()=>{this._engine.afterFlush(()=>{const m=a.indexOf(c);m>=0&&a.splice(m,1),this._triggers[t]||delete f[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function s3(n){return new u.vHH(3401,un)}();return t}trigger(e,t,r,i=!0){const a=this._getTrigger(t),c=new UA(this.id,t,e);let f=this._engine.statesByElement.get(e);f||(Sa(e,oC),Sa(e,oC+"-"+t),this._engine.statesByElement.set(e,f={}));let m=f[t];const b=new FA(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&m&&b.absorbOptions(m.options),f[t]=b,m||(m=LA),b.value!==L0&&m.value===b.value){if(!function l6(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(m.params,b.params)){const oe=[],be=a.matchStyles(m.value,m.params,oe),$e=a.matchStyles(b.value,b.params,oe);oe.length?this._engine.reportError(oe):this._engine.afterFlush(()=>{Ap(e,be),vl(e,$e)})}return}const R=Bo(this._engine.playersByElement,e,[]);R.forEach(oe=>{oe.namespaceId==this.id&&oe.triggerName==t&&oe.queued&&oe.destroy()});let L=a.matchTransition(m.value,b.value,e,b.params),j=!1;if(!L){if(!i)return;L=a.fallbackTransition,j=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:L,fromState:m,toState:b,player:c,isFallbackTransition:j}),j||(Sa(e,Nk),c.onStart(()=>{my(e,Nk)})),c.onDone(()=>{let oe=this.players.indexOf(c);oe>=0&&this.players.splice(oe,1);const be=this._engine.playersByElement.get(e);if(be){let $e=be.indexOf(c);$e>=0&&be.splice($e,1)}}),this.players.push(c),R.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,aC,!0);r.forEach(i=>{if(i[Ia])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const a=this._engine.statesByElement.get(e),c=new Map;if(a){const f=[];if(Object.keys(a).forEach(m=>{if(c.set(m,a[m].value),this._triggers[m]){const b=this.trigger(e,m,L0,i);b&&f.push(b)}}),f.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&Dh(f).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(a=>{const c=a.name;if(i.has(c))return;i.add(c);const m=this._triggers[c].fallbackTransition,b=r[c]||LA,I=new FA(L0),A=new UA(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:m,fromState:b,toState:I,player:A,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const a=e[Ia];(!a||a===Rk)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Sa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,c=this._elementListeners.get(a);c&&c.forEach(f=>{if(f.name==r.triggerName){const m=vA(a,r.triggerName,r.fromState.value,r.toState.value);m._data=e,yA(r.player,f.phase,m,f.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==a||0==c?a-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class r6{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new n6(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,a=r.length-1;if(a>=0){let c=!1;if(void 0!==this.driver.getParentElement){let f=this.driver.getParentElement(t);for(;f;){const m=i.get(f);if(m){const b=r.indexOf(m);r.splice(b+1,0,e),c=!0;break}f=this.driver.getParentElement(f)}}else for(let f=a;f>=0;f--)if(this.driver.containsElement(r[f].hostElement,t)){r.splice(f+1,0,e),c=!0;break}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let a=0;a<i.length;a++){const c=r[i[a]].namespaceId;if(c){const f=this._fetchNamespace(c);f&&t.add(f)}}}return t}trigger(e,t,r,i){if(bC(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!bC(t))return;const a=t[Ia];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Sa(e,RA)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),my(e,RA))}removeNode(e,t,r,i){if(bC(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,a){this.collectedLeaveElements.push(t),t[Ia]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,r,i,a){return bC(t)?this._fetchNamespace(e).listen(t,r,i,a):()=>{}}_buildInstruction(e,t,r,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,aC,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,CA,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Dh(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Ia];if(r&&r.setForRemoval){if(e[Ia]=Rk,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(RA))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Sa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Dh(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function o3(n){return new u.vHH(3402,un)}()}_flushAnimations(e,t){const r=new yC,i=[],a=new Map,c=[],f=new Map,m=new Map,b=new Map,I=new Set;this.disabledNodes.forEach(_t=>{I.add(_t);const Pt=this.driver.query(_t,".ng-animate-queued",!0);for(let Ut=0;Ut<Pt.length;Ut++)I.add(Pt[Ut])});const A=this.bodyNode,R=Array.from(this.statesByElement.keys()),L=Uk(R,this.collectedEnterElements),j=new Map;let oe=0;L.forEach((_t,Pt)=>{const Ut=TA+oe++;j.set(Pt,Ut),_t.forEach(bn=>Sa(bn,Ut))});const be=[],$e=new Set,rt=new Set;for(let _t=0;_t<this.collectedLeaveElements.length;_t++){const Pt=this.collectedLeaveElements[_t],Ut=Pt[Ia];Ut&&Ut.setForRemoval&&(be.push(Pt),$e.add(Pt),Ut.hasAnimation?this.driver.query(Pt,".ng-star-inserted",!0).forEach(bn=>$e.add(bn)):rt.add(Pt))}const st=new Map,Qe=Uk(R,Array.from($e));Qe.forEach((_t,Pt)=>{const Ut=sC+oe++;st.set(Pt,Ut),_t.forEach(bn=>Sa(bn,Ut))}),e.push(()=>{L.forEach((_t,Pt)=>{const Ut=j.get(Pt);_t.forEach(bn=>my(bn,Ut))}),Qe.forEach((_t,Pt)=>{const Ut=st.get(Pt);_t.forEach(bn=>my(bn,Ut))}),be.forEach(_t=>{this.processLeaveNode(_t)})});const Tt=[],At=[];for(let _t=this._namespaceList.length-1;_t>=0;_t--)this._namespaceList[_t].drainQueuedTransitions(t).forEach(Ut=>{const bn=Ut.player,ki=Ut.element;if(Tt.push(bn),this.collectedEnterElements.length){const Us=ki[Ia];if(Us&&Us.setForMove){if(Us.previousTriggersValues&&Us.previousTriggersValues.has(Ut.triggerName)){const Op=Us.previousTriggersValues.get(Ut.triggerName),Mh=this.statesByElement.get(Ut.element);Mh&&Mh[Ut.triggerName]&&(Mh[Ut.triggerName].value=Op)}return void bn.destroy()}}const bl=!A||!this.driver.containsElement(A,ki),$o=st.get(ki),xh=j.get(ki),Sr=this._buildInstruction(Ut,r,xh,$o,bl);if(Sr.errors&&Sr.errors.length)return void At.push(Sr);if(bl)return bn.onStart(()=>Ap(ki,Sr.fromStyles)),bn.onDestroy(()=>vl(ki,Sr.toStyles)),void i.push(bn);if(Ut.isFallbackTransition)return bn.onStart(()=>Ap(ki,Sr.fromStyles)),bn.onDestroy(()=>vl(ki,Sr.toStyles)),void i.push(bn);const Jk=[];Sr.timelines.forEach(Us=>{Us.stretchStartingKeyframe=!0,this.disabledNodes.has(Us.element)||Jk.push(Us)}),Sr.timelines=Jk,r.append(ki,Sr.timelines),c.push({instruction:Sr,player:bn,element:ki}),Sr.queriedElements.forEach(Us=>Bo(f,Us,[]).push(bn)),Sr.preStyleProps.forEach((Us,Op)=>{const Mh=Object.keys(Us);if(Mh.length){let Pp=m.get(Op);Pp||m.set(Op,Pp=new Set),Mh.forEach($A=>Pp.add($A))}}),Sr.postStyleProps.forEach((Us,Op)=>{const Mh=Object.keys(Us);let Pp=b.get(Op);Pp||b.set(Op,Pp=new Set),Mh.forEach($A=>Pp.add($A))})});if(At.length){const _t=[];At.forEach(Pt=>{_t.push(function a3(n,e){return new u.vHH(3505,un)}())}),Tt.forEach(Pt=>Pt.destroy()),this.reportError(_t)}const nn=new Map,$r=new Map;c.forEach(_t=>{const Pt=_t.element;r.has(Pt)&&($r.set(Pt,Pt),this._beforeAnimationBuild(_t.player.namespaceId,_t.instruction,nn))}),i.forEach(_t=>{const Pt=_t.element;this._getPreviousPlayers(Pt,!1,_t.namespaceId,_t.triggerName,null).forEach(bn=>{Bo(nn,Pt,[]).push(bn),bn.destroy()})});const Ho=be.filter(_t=>Bk(_t,m,b)),Fc=new Map;Lk(Fc,this.driver,rt,b,aa).forEach(_t=>{Bk(_t,m,b)&&Ho.push(_t)});const U0=new Map;L.forEach((_t,Pt)=>{Lk(U0,this.driver,new Set(_t),m,"!")}),Ho.forEach(_t=>{const Pt=Fc.get(_t),Ut=U0.get(_t);Fc.set(_t,Object.assign(Object.assign({},Pt),Ut))});const Mp=[],Yk=[],Qk={};c.forEach(_t=>{const{element:Pt,player:Ut,instruction:bn}=_t;if(r.has(Pt)){if(I.has(Pt))return Ut.onDestroy(()=>vl(Pt,bn.toStyles)),Ut.disabled=!0,Ut.overrideTotalTime(bn.totalTime),void i.push(Ut);let ki=Qk;if($r.size>1){let $o=Pt;const xh=[];for(;$o=$o.parentNode;){const Sr=$r.get($o);if(Sr){ki=Sr;break}xh.push($o)}xh.forEach(Sr=>$r.set(Sr,ki))}const bl=this._buildAnimation(Ut.namespaceId,bn,nn,a,U0,Fc);if(Ut.setRealPlayer(bl),ki===Qk)Mp.push(Ut);else{const $o=this.playersByElement.get(ki);$o&&$o.length&&(Ut.parentPlayer=Dh($o)),i.push(Ut)}}else Ap(Pt,bn.fromStyles),Ut.onDestroy(()=>vl(Pt,bn.toStyles)),Yk.push(Ut),I.has(Pt)&&i.push(Ut)}),Yk.forEach(_t=>{const Pt=a.get(_t.element);if(Pt&&Pt.length){const Ut=Dh(Pt);_t.setRealPlayer(Ut)}}),i.forEach(_t=>{_t.parentPlayer?_t.syncPlayerEvents(_t.parentPlayer):_t.destroy()});for(let _t=0;_t<be.length;_t++){const Pt=be[_t],Ut=Pt[Ia];if(my(Pt,sC),Ut&&Ut.hasAnimation)continue;let bn=[];if(f.size){let bl=f.get(Pt);bl&&bl.length&&bn.push(...bl);let $o=this.driver.query(Pt,CA,!0);for(let xh=0;xh<$o.length;xh++){let Sr=f.get($o[xh]);Sr&&Sr.length&&bn.push(...Sr)}}const ki=bn.filter(bl=>!bl.destroyed);ki.length?a6(this,Pt,ki):this.processLeaveNode(Pt)}return be.length=0,Mp.forEach(_t=>{this.players.push(_t),_t.onDone(()=>{_t.destroy();const Pt=this.players.indexOf(_t);this.players.splice(Pt,1)}),_t.play()}),Mp}elementContainsData(e,t){let r=!1;const i=t[Ia];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,a){let c=[];if(t){const f=this.playersByQueriedElement.get(e);f&&(c=f)}else{const f=this.playersByElement.get(e);if(f){const m=!a||a==L0;f.forEach(b=>{b.queued||!m&&b.triggerName!=i||c.push(b)})}}return(r||i)&&(c=c.filter(f=>!(r&&r!=f.namespaceId||i&&i!=f.triggerName))),c}_beforeAnimationBuild(e,t,r){const a=t.element,c=t.isRemovalTransition?void 0:e,f=t.isRemovalTransition?void 0:t.triggerName;for(const m of t.timelines){const b=m.element,I=b!==a,A=Bo(r,b,[]);this._getPreviousPlayers(b,I,c,f,t.toState).forEach(L=>{const j=L.getRealPlayer();j.beforeDestroy&&j.beforeDestroy(),L.destroy(),A.push(L)})}Ap(a,t.fromStyles)}_buildAnimation(e,t,r,i,a,c){const f=t.triggerName,m=t.element,b=[],I=new Set,A=new Set,R=t.timelines.map(j=>{const oe=j.element;I.add(oe);const be=oe[Ia];if(be&&be.removedBeforeQueried)return new tf(j.duration,j.delay);const $e=oe!==m,rt=function u6(n){const e=[];return Vk(n,e),e}((r.get(oe)||e6).map(nn=>nn.getRealPlayer())).filter(nn=>!!nn.element&&nn.element===oe),st=a.get(oe),Qe=c.get(oe),Tt=dk(0,this._normalizer,0,j.keyframes,st,Qe),At=this._buildPlayer(j,Tt,rt);if(j.subTimeline&&i&&A.add(oe),$e){const nn=new UA(e,f,oe);nn.setRealPlayer(At),b.push(nn)}return At});b.forEach(j=>{Bo(this.playersByQueriedElement,j.element,[]).push(j),j.onDone(()=>function i6(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,j.element,j))}),I.forEach(j=>Sa(j,wk));const L=Dh(R);return L.onDestroy(()=>{I.forEach(j=>my(j,wk)),vl(m,t.toStyles)}),A.forEach(j=>{Bo(i,j,[]).push(L)}),L}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new tf(e.duration,e.delay)}}class UA{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new tf,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>yA(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Bo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function bC(n){return n&&1===n.nodeType}function Fk(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function Lk(n,e,t,r,i){const a=[];t.forEach(m=>a.push(Fk(m)));const c=[];r.forEach((m,b)=>{const I={};m.forEach(A=>{const R=I[A]=e.computeStyle(b,A,i);(!R||0==R.length)&&(b[Ia]=t6,c.push(b))}),n.set(b,I)});let f=0;return t.forEach(m=>Fk(m,a[f++])),c}function Uk(n,e){const t=new Map;if(n.forEach(f=>t.set(f,[])),0==e.length)return t;const i=new Set(e),a=new Map;function c(f){if(!f)return 1;let m=a.get(f);if(m)return m;const b=f.parentNode;return m=t.has(b)?b:i.has(b)?1:c(b),a.set(f,m),m}return e.forEach(f=>{const m=c(f);1!==m&&t.get(m).push(f)}),t}function Sa(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function my(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function a6(n,e,t){Dh(t).onDone(()=>n.processLeaveNode(e))}function Vk(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof db?Vk(r.players,e):e.push(r)}}function Bk(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(a=>i.add(a)):e.set(n,r),t.delete(n),!0}class wC{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new r6(e,t,r),this._timelineEngine=new K3(e,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,r,i,a){const c=e+"-"+i;let f=this._triggerCache[c];if(!f){const m=[],I=AA(this._driver,a,m,[]);if(m.length)throw function YV(n,e){return new u.vHH(3404,un)}();f=function G3(n,e,t){return new Z3(n,e,t)}(i,I,this._normalizer),this._triggerCache[c]=f}this._transitionEngine.registerTrigger(t,i,f)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[a,c]=hk(r);this._timelineEngine.command(a,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,a){if("@"==r.charAt(0)){const[c,f]=hk(r);return this._timelineEngine.listen(c,t,f,a)}return this._transitionEngine.listen(e,t,r,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let d6=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a={}),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&vl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(vl(this._element,this._initialStyles),this._endStyles&&(vl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Ap(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ap(this._element,this._endStyles),this._endStyles=null),vl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function VA(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];h6(i)&&(e=e||{},e[i]=n[i])}return e}function h6(n){return"display"===n||"position"===n}class jk{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:Sk(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class f6{validateStyleProperty(e){return mk(e)}matchesElement(e,t){return!1}containsElement(e,t){return yk(e,t)}getParentElement(e){return wA(e)}query(e,t,r){return _k(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,a,c=[]){const m={duration:r,delay:i,fill:0==i?"both":"forwards"};a&&(m.easing=a);const b={},I=c.filter(R=>R instanceof jk);(function y3(n,e){return 0===n||0===e})(r,i)&&I.forEach(R=>{let L=R.currentSnapshot;Object.keys(L).forEach(j=>b[j]=L[j])}),t=function _3(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let a=e[0],c=[];if(r.forEach(f=>{a.hasOwnProperty(f)||c.push(f),a[f]=t[f]}),c.length)for(var i=1;i<e.length;i++){let f=e[i];c.forEach(function(m){f[m]=Sk(n,m)})}}return e}(e,t=t.map(R=>Ah(R,!1)),b);const A=function c6(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=VA(e[0]),e.length>1&&(r=VA(e[e.length-1]))):e&&(t=VA(e)),t||r?new d6(n,t,r):null}(e,t);return new jk(e,t,m,A)}}let p6=(()=>{class n extends Dd{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:u.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?mg(t):t;return Hk(this._renderer,null,r,"register",[i]),new g6(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(me))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class g6 extends class YC{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new m6(this._id,e,t||{},this._renderer)}}class m6{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Hk(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function Hk(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const $k="@.disabled";let y6=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(a,c)=>{const f=null==c?void 0:c.parentNode(a);f&&c.removeChild(f,a)}}createRenderer(t,r){const a=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let I=this._rendererCache.get(a);return I||(I=new qk("",a,this.engine),this._rendererCache.set(a,I)),I}const c=r.id,f=r.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const m=I=>{Array.isArray(I)?I.forEach(m):this.engine.registerTrigger(c,f,t,I.name,I)};return r.data.animation.forEach(m),new _6(this,f,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[c,f]=a;c(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(wC),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class qk{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==$k?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class _6 extends qk{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==$k?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function v6(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.substr(1),c="";return"@"!=a.charAt(0)&&([a,c]=function b6(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(a)),this.engine.listen(this.namespaceId,i,a,c,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(e,t,r)}}let w6=(()=>{class n extends wC{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(me),u.LFG(EA),u.LFG(kA))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Gk=new u.OlP("AnimationModuleType"),Zk=[{provide:Dd,useClass:p6},{provide:kA,useFactory:function E6(){return new B3}},{provide:wC,useClass:w6},{provide:u.FYo,useFactory:function T6(n,e,t){return new y6(n,e,t)},deps:[Ra,wC,u.R0b]}],zk=[{provide:EA,useFactory:()=>new f6},{provide:Gk,useValue:"BrowserAnimations"},...Zk],C6=[{provide:EA,useClass:vk},{provide:Gk,useValue:"NoopAnimations"},...Zk];let I6=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?C6:zk}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:zk,imports:[Su]}),n})();function S6(n,e){if(1&n&&(u.TgZ(0,"h3",3),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Oqu(t.message)}}let D6=(()=>{class n{constructor(t){this.loadingService=t,this.message="LOADING"}ngOnInit(){this.loadingService.message.subscribe(t=>{this.message=t})}ngOnDestroy(){var t;null===(t=this.sub)||void 0===t||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ih))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-loading"]],features:[u._Bn([n])],decls:3,vars:1,consts:[["id","container"],[1,"lds-dual-ring"],["class","text-white",4,"ngIf"],[1,"text-white"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u._UZ(1,"div",1),u.YNc(2,S6,2,1,"h3",2),u.qZA()),2&t&&(u.xp6(2),u.Q6J("ngIf",r.message))},directives:[Mn],styles:['#container[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;z-index:1000;background-color:#00000080;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);display:flex;justify-content:center;align-items:center;flex-direction:column}.lds-dual-ring[_ngcontent-%COMP%]{display:inline-block;width:80px;height:80px}.lds-dual-ring[_ngcontent-%COMP%]:after{content:" ";display:block;width:64px;height:64px;margin:8px;border-radius:50%;border:4px solid #fff;border-color:#fff transparent #fff transparent;animation:lds-dual-ring 1.2s linear infinite}@keyframes lds-dual-ring{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']}),n})();function A6(n,e){1&n&&u._UZ(0,"app-loading"),2&n&&u.Q6J("@appear",void 0)}let x6=(()=>{class n{constructor(t){this.loadingService=t,this.isLoading=!1}ngOnInit(){this.loadingService.isLoading.subscribe(t=>this.isLoading=t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ih))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:1,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(u.TgZ(0,"main"),u.YNc(1,A6,1,1,"app-loading",0),u._UZ(2,"router-outlet"),u.qZA()),2&t&&(u.xp6(1),u.Q6J("ngIf",r.isLoading))},directives:[Mn,D6,jl],styles:[""],data:{animation:[ro("appear",[nr(":enter",[Xt({opacity:0}),tr("50ms ease-in-out",Xt({opacity:1}))]),nr(":leave",[tr("300ms ease-in-out",Xt({opacity:0}))])])]}}),n})(),M6=(()=>{class n{constructor(t,r,i){this.http=t,this.authService=r,this.firestore=i,this.currentUser=this.authService.currentUser.value}searchTracks(t){var r,i;return this.currentUser=this.authService.currentUser.value,this.http.get(`https://api.spotify.com/v1/search?q=${t}&type=track`,{headers:new os({Authorization:`Bearer ${null===(i=null===(r=this.currentUser)||void 0===r?void 0:r.spotify)||void 0===i?void 0:i.access_token}`,"Content-Type":"application/json"})}).pipe(_n(1))}searchTabs(t){return this.firestore.collection("tracks").doc(t).collection("tabs").get().pipe((0,ft.U)(r=>{const i=r.docs,a=[];return i.forEach(c=>{this.firestore.collection("users").doc(c.data().uid).get().pipe(_n(1)).subscribe(f=>{if(!f.data())return;const m=f.data();a.push(m.displayName)})}),{tabGroupArray:i,usernameArray:a}}))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(zl),u.LFG(Ch),u.LFG(dy))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function O6(n,e){if(1&n&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.hij(", ",t.name,"")}}function P6(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",15),u.NdJ("click",function(){const a=u.CHM(t).$implicit;return u.oxw().searchTabs(a.id,a.name)}),u.TgZ(1,"div",16),u._UZ(2,"img",17),u.qZA(),u.TgZ(3,"div",18)(4,"h5",19),u._uU(5),u.qZA(),u.TgZ(6,"p",20),u._uU(7),u.YNc(8,O6,2,1,"span",21),u.qZA()()()}if(2&n){const t=e.$implicit;u.Q6J("@appear",void 0),u.xp6(2),u.Q6J("src",t.album.images[2].url,u.LSH)("alt",t.album.name),u.xp6(3),u.Oqu(t.name),u.xp6(2),u.Oqu(t.artists[0].name),u.xp6(1),u.Q6J("ngForOf",t.artists.slice(1))}}function k6(n,e){1&n&&(u.TgZ(0,"div")(1,"h5",22),u._uU(2,"Type something!"),u.qZA()()),2&n&&u.Q6J("@appear",void 0)}function N6(n,e){1&n&&(u.TgZ(0,"div")(1,"h5",22),u._uU(2,"Didn't find a song with that name! :("),u.qZA()()),2&n&&u.Q6J("@appear",void 0)}function R6(n,e){if(1&n&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&n){const t=u.oxw(2).index,r=u.oxw();u.xp6(1),u.Oqu(r.usernameArray[t])}}function F6(n,e){1&n&&(u.TgZ(0,"span",27),u._uU(1,"[deletedUser]"),u.qZA())}function L6(n,e){if(1&n&&(u.TgZ(0,"span",7),u._uU(1,"by\xa0 "),u.YNc(2,R6,2,1,"span",10),u.YNc(3,F6,2,0,"span",26),u.qZA()),2&n){const t=u.oxw().index,r=u.oxw();u.Q6J("@appear",void 0),u.xp6(2),u.Q6J("ngIf",r.usernameArray[t]),u.xp6(1),u.Q6J("ngIf",!r.usernameArray[t])}}function U6(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",23)(1,"p",24),u.NdJ("click",function(){const a=u.CHM(t).index;return u.oxw().loadTab(a)}),u._uU(2),u.qZA(),u.YNc(3,L6,4,3,"span",25),u.qZA()}if(2&n){const t=e.$implicit,r=u.oxw();u.Q6J("@appear",void 0),u.xp6(2),u.AsE(" ",r.selectedTrackName,"\xa0 (",r.searchTabsResult.indexOf(t),")"),u.xp6(1),u.Q6J("ngIf",r.usernameArray)}}function V6(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",28)(1,"p",29),u._uU(2,"There are no tabs related to this song!"),u._UZ(3,"br"),u.TgZ(4,"span",30),u.NdJ("click",function(){return u.CHM(t),u.oxw().createTabGroup()}),u._uU(5,"Create one!"),u.qZA()()()}2&n&&u.Q6J("@appear",void 0)}function B6(n,e){1&n&&(u.TgZ(0,"div",31)(1,"p",32),u._uU(2,"Select a song to display its tabs!"),u.qZA()()),2&n&&u.Q6J("@appear",void 0)}let j6=(()=>{class n{constructor(t,r,i,a){this.searchService=t,this.playerService=r,this.loadingService=i,this.router=a,this.searchMenuStatus=new u.vpe,this.queryForm=new us({query:new xr(null,$n.required)}),this.searchTracksResult=[],this.noTrackMatches=!1,this.searchTabsResult=[],this.usernameArray=[],this.noTabMatches=!1}ngOnInit(){}searchTracks(){if(this.searchTabsResult=[],this.noTabMatches=!1,this.selectedTrackId=void 0,this.selectedTrackName=void 0,this.timeout&&clearTimeout(this.timeout),!this.queryForm.value.query)return this.searchTracksResult=[],void(this.noTrackMatches=!1);this.timeout=setTimeout(()=>{this.searchService.searchTracks(this.queryForm.value.query).pipe(_n(1)).subscribe(t=>{this.searchTracksResult=t.tracks.items,this.noTrackMatches=0===this.searchTracksResult.length})},500)}searchTabs(t,r){this.searchService.searchTabs(t).pipe(_n(1)).subscribe(i=>{const a=i.tabGroupArray;this.usernameArray=i.usernameArray,this.selectedTrackName=r,this.selectedTrackId=t,this.searchTabsResult=a,this.noTabMatches=0===a.length})}emitNewTrack(){this.playerService.changingTrack.next(null),this.loadingService.isLoading.next(!0),this.searchMenuStatus.emit()}loadTab(t,r){var i;this.playerService.changingTrack.next(null),this.loadingService.isLoading.next(!0),this.selectedTrackId&&(null===(i=this.playerService.loadTab(this.selectedTrackId,t,r))||void 0===i||i.pipe(_n(1)).subscribe(()=>{this.loadingService.isLoading.next(!1),r&&this.router.navigate(["play",this.selectedTrackId,"0"],{queryParams:{isCustom:!0}}),this.searchMenuStatus.emit()}))}createTabGroup(){var t;null===(t=this.playerService.createTab(this.selectedTrackId))||void 0===t||t.then(()=>this.loadTab(0,!0))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(M6),u.Y36(Rc),u.Y36(Ih),u.Y36(lr))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-search"]],outputs:{searchMenuStatus:"searchMenuStatus"},decls:21,vars:8,consts:[["id","search-container"],[1,"m-3"],[3,"formGroup"],["type","text","name","query","id","search","autocomplete","off","placeholder","Search by song,artist or album","formControlName","query",1,"form-control-plaintext","fs-4",3,"input"],[1,"row","m-0","h-100"],[1,"col-6","px-3"],[1,"m-0","p-0"],[1,"my-2"],["id","songs-container"],["class","song row p-0 mx-0 my-2 flex-nowrap rounded p-2",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],["id","tabs-container"],["class","tab",4,"ngFor","ngForOf"],["class","text-center fs-5",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"song","row","p-0","mx-0","my-2","flex-nowrap","rounded","p-2",3,"click"],[1,"col-auto","p-0","song-cover-art-container"],[1,"song-cover-art","img-fluid",3,"src","alt"],[1,"col","my-auto","pe-0","info-container"],[1,"mb-1","song-title"],[1,"m-0","artists"],[4,"ngFor","ngForOf"],[1,"text-center","text-white-50","fw-lighter","my-3"],[1,"tab"],[1,"my-2","d-inline-block",3,"click"],["class","my-2",4,"ngIf"],["class","fst-italic",4,"ngIf"],[1,"fst-italic"],[1,"text-center","fs-5"],[1,"text-white-50"],["id","create-btn",3,"click"],[1,"text-center"],[1,"text-white-50","fw-lighter","fs-5","my-3"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"input",3),u.NdJ("input",function(){return r.searchTracks()}),u.qZA()()(),u.TgZ(4,"div",4)(5,"div",5)(6,"h5",6),u._uU(7,"Songs"),u.qZA(),u._UZ(8,"hr",7),u.TgZ(9,"div",8),u.YNc(10,P6,9,6,"div",9),u.YNc(11,k6,3,1,"div",10),u.YNc(12,N6,3,1,"div",10),u.qZA()(),u.TgZ(13,"div",5)(14,"h5",6),u._uU(15,"Tabs"),u.qZA(),u._UZ(16,"hr",7),u.TgZ(17,"div",11),u.YNc(18,U6,4,4,"div",12),u.YNc(19,V6,6,1,"div",13),u.YNc(20,B6,3,1,"div",14),u.qZA()()()()),2&t&&(u.Q6J("@slideIn",void 0),u.xp6(2),u.Q6J("formGroup",r.queryForm),u.xp6(8),u.Q6J("ngForOf",r.searchTracksResult),u.xp6(1),u.Q6J("ngIf",!(r.searchTracksResult&&0!==r.searchTracksResult.length||r.noTrackMatches)),u.xp6(1),u.Q6J("ngIf",r.noTrackMatches),u.xp6(6),u.Q6J("ngForOf",r.searchTabsResult),u.xp6(1),u.Q6J("ngIf",r.noTabMatches),u.xp6(1),u.Q6J("ngIf",!r.selectedTrackName&&!r.noTabMatches))},directives:[tc,Ql,nc,Po,Xu,iu,Pn,Mn],styles:["#search-container[_ngcontent-%COMP%]{position:fixed;left:100px;height:100vh;background-color:#202020;z-index:10;color:#d6d6d6}@media (min-width:768px){#search-container[_ngcontent-%COMP%]{left:max(75px,5.2vw)}}#search[_ngcontent-%COMP%]{color:#d6d6d6;border-bottom:#333533 solid 1px;min-width:1061px}#songs-container[_ngcontent-%COMP%]{max-height:calc(100vh - 131px);overflow:auto}.song-cover-art-container[_ngcontent-%COMP%]{width:64px;height:64px}.info-container[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.song-title[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;max-width:100%;font-weight:700}.song[_ngcontent-%COMP%]:hover{background-color:#333533;cursor:pointer}.artists[_ngcontent-%COMP%]{color:#909090;text-overflow:ellipsis;overflow:hidden;max-width:400px}.tab[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer;color:#fff}.tab[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{float:right;color:#909090;font-weight:light}#create-btn[_ngcontent-%COMP%]{color:#fff}#create-btn[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}"],data:{animation:[ro("slideIn",[nr(":enter",[Xt({transform:"translateX(-100%)"}),tr("150ms ease-in-out",Xt({transform:"translateX(0)"}))]),nr(":leave",[tr("150ms ease-in-out",Xt({transform:"translateX(-100%)"}))])]),ro("appear",[nr(":enter",[Xt({opacity:0}),tr("150ms 300ms ease-in-out",Xt({opacity:1}))]),nr(":leave",[tr("150ms ease-in-out",Xt({opacity:0}))])])]}}),n})();const H6=["instruments"];function $6(n,e){1&n&&(u.TgZ(0,"a",20),u._UZ(1,"img",21),u.qZA())}function q6(n,e){1&n&&(u.TgZ(0,"a",20),u._UZ(1,"img",22),u.qZA())}function G6(n,e){1&n&&(u.TgZ(0,"a",20),u._UZ(1,"img",23),u.qZA())}function Z6(n,e){1&n&&(u.TgZ(0,"a",20),u._UZ(1,"img",24),u.qZA())}function z6(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",18),u.NdJ("click",function(){const a=u.CHM(t).$implicit;return u.oxw(2).changeTab(a)}),u.YNc(1,$6,2,0,"a",19),u.YNc(2,q6,2,0,"a",19),u.YNc(3,G6,2,0,"a",19),u.YNc(4,Z6,2,0,"a",19),u.qZA()}if(2&n){const t=e.$implicit;u.Q6J("ngClass",t.instrument.name)("ngSwitch",t.instrument.name),u.xp6(1),u.Q6J("ngSwitchCase","guitar"),u.xp6(1),u.Q6J("ngSwitchCase","acoustic-guitar"),u.xp6(1),u.Q6J("ngSwitchCase","bass"),u.xp6(1),u.Q6J("ngSwitchCase","voice")}}function W6(n,e){if(1&n&&(u.TgZ(0,"div",15,16),u.YNc(2,z6,5,6,"div",17),u.qZA()),2&n){const t=u.oxw();u.Q6J("@appear2",void 0),u.xp6(2),u.Q6J("ngForOf",t.currentTabGroup.tabs)}}function K6(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",25),u.NdJ("click",function(){return u.CHM(t),u.oxw().showSelectionModal=!0}),u.O4$(),u.TgZ(1,"svg",26),u._UZ(2,"path",27)(3,"path",28),u.qZA()()}}function Y6(n,e){if(1&n&&(u.TgZ(0,"div",29)(1,"div",30),u._UZ(2,"img",31),u.qZA()()),2&n){const t=u.oxw();u.Q6J("@appear2",void 0),u.xp6(2),u.Q6J("src",t.imageSrc,u.LSH)}}function Q6(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",32)(1,"div",33)(2,"div")(3,"h2",34),u._uU(4,"Select an instrument"),u.qZA()(),u.TgZ(5,"form",35)(6,"div",36)(7,"div",37)(8,"select",38)(9,"option",39),u._uU(10," Guitar"),u.qZA(),u.TgZ(11,"option",40),u._uU(12,"Acoustic guitar"),u.qZA(),u.TgZ(13,"option",41),u._uU(14,"Bass"),u.qZA(),u.TgZ(15,"option",42),u._uU(16,"Voice"),u.qZA()()(),u.TgZ(17,"div",43)(18,"select",44)(19,"option",45),u._uU(20,"4"),u.qZA(),u.TgZ(21,"option",46),u._uU(22,"5"),u.qZA(),u.TgZ(23,"option",47),u._uU(24,"6"),u.qZA(),u.TgZ(25,"option",48),u._uU(26,"7"),u.qZA(),u.TgZ(27,"option",49),u._uU(28,"8"),u.qZA()()()(),u.TgZ(29,"div",50)(30,"button",51),u.NdJ("click",function(){return u.CHM(t),u.oxw().showSelectionModal=!1}),u._uU(31,"CANCEL"),u.qZA(),u.TgZ(32,"button",52),u.NdJ("click",function(i){return u.CHM(t),u.oxw().addInstrument(i)}),u._uU(33,"CONFIRM"),u.qZA()()()()()}if(2&n){const t=u.oxw();u.Q6J("@appear",void 0),u.xp6(5),u.Q6J("formGroup",t.instrumentForm)}}function J6(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"app-search",53),u.NdJ("searchMenuStatus",function(){return u.CHM(t),u.oxw().closeSearchMenu()}),u.qZA()}}function X6(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",54),u.NdJ("click",function(){return u.CHM(t),u.oxw().showSearchMenu=!1}),u.qZA()}2&n&&u.Q6J("@appear",void 0)}function eB(n,e){1&n&&(u.TgZ(0,"div",55)(1,"div",56)(2,"div",3),u.O4$(),u.TgZ(3,"svg",4),u._UZ(4,"path",5),u.qZA()()(),u.kcU(),u._UZ(5,"div",6),u.TgZ(6,"div")(7,"a",57),u._UZ(8,"img",58),u.qZA()(),u.TgZ(9,"div")(10,"a",57),u._UZ(11,"img",59),u.qZA()(),u.TgZ(12,"div")(13,"a",57),u._UZ(14,"img",60),u.qZA()(),u.TgZ(15,"div")(16,"a",57),u._UZ(17,"img",61),u.qZA()()()),2&n&&u.Q6J("@enterFromSide",void 0)}function tB(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",62),u.NdJ("click",function(){return u.CHM(t),u.oxw().closeMenu()}),u.qZA()}2&n&&u.Q6J("@appear",void 0)}let nB=(()=>{class n{constructor(t,r,i,a){this.fireAuth=t,this.authService=r,this.playerService=i,this.editTabService=a,this.menuStatus=!1,this.menuStatusOutput=new u.vpe,this.isMenuActive=!1,this.showSearchMenu=!1,this.showSelectionModal=!1,this.editMode=!1,this.HTMLIconCollection=[],this.instrumentForm=new us({name:new xr("guitar",$n.required),strings:new xr(6,$n.required)})}ngOnInit(){var t;this.fireAuth.onAuthStateChanged(f=>this.imageSrc=null==f?void 0:f.photoURL);const r=this.playerService.editMode.subscribe(f=>this.editMode=f),i=this.playerService.currentTab.subscribe(f=>{this.currentTab=f,0!==this.HTMLIconCollection.length&&(this.getCollection(),this.HTMLIconCollection.forEach(m=>m.classList.remove("active-instrument")),this.HTMLIconCollection[this.playerService.currentTabIndex.value].classList.add("active-instrument"))}),a=this.playerService.currentTabGroup.subscribe(f=>this.currentTabGroup=f),c=this.fireAuth.user.subscribe(f=>{f||this.authService.logOut()});null===(t=this.subs)||void 0===t||t.push(r,i,c,a)}ngAfterViewInit(){var t;const r=this.playerService.currentTab.pipe(_n(1)).subscribe(i=>{!i||(this.getCollection(),this.HTMLIconCollection[this.playerService.currentTabIndex.value].classList.add("active-instrument"))});null===(t=this.subs)||void 0===t||t.push(r),setTimeout(()=>{this.imageSrc||(this.imageSrc="https://firebasestorage.googleapis.com/v0/b/tab-player.appspot.com/o/default_profile.png?alt=media&token=631da581-8c28-4504-88ae-207b61e334b4")},2500)}ngAfterViewChecked(){this.detectOverflow()}ngOnChanges(t){this.isMenuActive=t.menuStatus.currentValue}ngOnDestroy(){var t;null===(t=this.subs)||void 0===t||t.forEach(r=>r.unsubscribe())}closeMenu(){this.isMenuActive=!1,this.menuStatusOutput.emit(this.isMenuActive)}closeSearchMenu(){this.showSearchMenu=!1}detectOverflow(){var t,r;this.container&&function i(a){return a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth}(null===(t=this.container)||void 0===t?void 0:t.nativeElement)?this.container.nativeElement.classList.add("overflow"):null===(r=this.container)||void 0===r||r.nativeElement.classList.remove("overflow")}changeTab(t){this.playerService.changeTab(t)}addInstrument(t){t.preventDefault(),this.playerService.addInstrument(this.instrumentForm.value),this.showSelectionModal=!1}getCollection(){var t;let r=[];for(let i of null===(t=this.container)||void 0===t?void 0:t.nativeElement.children)r.push(i),i.classList.remove("active-instrument");this.HTMLIconCollection=r}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(cc),u.Y36(Ch),u.Y36(Rc),u.Y36(R0))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-sidebar"]],viewQuery:function(t,r){if(1&t&&u.Gf(H6,5),2&t){let i;u.iGM(i=u.CRH())&&(r.container=i.first)}},hostBindings:function(t,r){1&t&&u.NdJ("resize",function(a){return r.detectOverflow(a)},!1,u.Jf7)},inputs:{menuStatus:"menuStatus"},outputs:{menuStatusOutput:"menuStatusOutput"},features:[u.TTD],decls:16,vars:8,consts:[["id","sidebar",1,"d-none","d-md-flex","flex-column","justify-content-between"],["id","icons-container",1,"d-flex","flex-column"],["id","search",1,"my-4",3,"click"],[1,"my-3"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","viewBox","0 0 40 40"],["id","Icon_material-search","data-name","Icon material-search","d","M35.338,31.907H33.531l-.64-.617a14.888,14.888,0,1,0-1.6,1.6l.617.64v1.807L43.342,46.75l3.408-3.408Zm-13.722,0A10.292,10.292,0,1,1,31.907,21.616,10.278,10.278,0,0,1,21.616,31.907Z","transform","translate(-6.75 -6.75)"],[1,"space-line"],["id","instruments-container","class","d-flex flex-column justify-content-between align-items-center",4,"ngIf"],["id","add-instrument-btn-container",3,"click",4,"ngIf"],["id","profile-pic-container","class","p-3",4,"ngIf"],["id","modal-container",4,"ngIf"],[3,"searchMenuStatus",4,"ngIf"],["id","background",3,"click",4,"ngIf"],["id","sidebar","class","d-flex flex-column",4,"ngIf"],["id","modal-background",3,"click",4,"ngIf"],["id","instruments-container",1,"d-flex","flex-column","justify-content-between","align-items-center"],["instruments",""],["class","instrument",3,"ngClass","ngSwitch","click",4,"ngFor","ngForOf"],[1,"instrument",3,"ngClass","ngSwitch","click"],["class","w-100 text-center",4,"ngSwitchCase"],[1,"w-100","text-center"],["src","../../../assets/images/guitar.png","alt","Electric Guitar",1,"my-4"],["src","../../../assets/images/acoustic-guitar.png","alt","Acoustic Guitar",1,"my-4"],["src","../../../assets/images/bass.png","alt","Bass Guitar",1,"my-4"],["src","../../../assets/images/mic.png","alt","Microphone",1,"my-4"],["id","add-instrument-btn-container",3,"click"],["viewBox","0 0 16 16",1,"bi","bi-plus-circle"],["d","M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"],["d","M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"],["id","profile-pic-container",1,"p-3"],["routerLink","/user"],["id","profile-pic","alt","Profile picture",1,"rounded-circle","w-100",3,"src"],["id","modal-container"],["id","modal-dialog",1,"p-5"],[1,"text-white"],["action","",3,"formGroup"],[1,"row","m-0","p-0"],[1,"col-8","p-0"],["name","name","id","instrument-selection","formControlName","name",1,"form-select","shadow-none","my-4","rounded-0","fs-5"],["value","guitar"],["value","acoustic-guitar"],["value","bass"],["value","voice"],[1,"col-4","p-0"],["name","strings","id","strings","formControlName","strings",1,"form-select","shadow-none","my-4","rounded-0","fs-5"],["value","4"],["value","5"],["value","6"],["value","7"],["value","8"],[1,"float-end"],[1,"btn","btn-light","shadow-none","me-3","fs-5",3,"click"],["id","confirm-btn","type","submit",1,"btn","fs-5",3,"click"],[3,"searchMenuStatus"],["id","background",3,"click"],["id","sidebar",1,"d-flex","flex-column"],["id","search",1,"py-4"],[1,"py-4","w-100","text-center"],["src","../../../assets/images/guitar.png","alt","Electric Guitar",1,"my-2"],["src","../../../assets/images/acoustic-guitar.png","alt","Acoustic Guitar",1,"my-2"],["src","../../../assets/images/bass.png","alt","Bass Guitar",1,"my-2"],["src","../../../assets/images/mic.png","alt","Microphone",1,"my-2"],["id","modal-background",3,"click"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2),u.NdJ("click",function(){return r.showSearchMenu=!r.showSearchMenu}),u.TgZ(3,"div",3),u.O4$(),u.TgZ(4,"svg",4),u._UZ(5,"path",5),u.qZA()()(),u.kcU(),u._UZ(6,"div",6),u.YNc(7,W6,3,2,"div",7),u.YNc(8,K6,4,0,"div",8),u.qZA(),u.YNc(9,Y6,3,2,"div",9),u.qZA(),u.YNc(10,Q6,34,2,"div",10),u.YNc(11,J6,1,0,"app-search",11),u.YNc(12,X6,1,1,"div",12),u.TgZ(13,"div"),u.YNc(14,eB,18,1,"div",13),u.YNc(15,tB,1,1,"div",14),u.qZA()),2&t&&(u.xp6(7),u.Q6J("ngIf",r.currentTabGroup),u.xp6(1),u.Q6J("ngIf",r.editMode),u.xp6(1),u.Q6J("ngIf",r.imageSrc),u.xp6(1),u.Q6J("ngIf",r.showSelectionModal),u.xp6(1),u.Q6J("ngIf",r.showSearchMenu),u.xp6(1),u.Q6J("ngIf",r.showSearchMenu),u.xp6(2),u.Q6J("ngIf",r.isMenuActive),u.xp6(1),u.Q6J("ngIf",r.isMenuActive))},directives:[Mn,Pn,Ki,wi,si,Cd,tc,Ql,nc,Ng,Xu,iu,jb,$b,j6],styles:['#sidebar[_ngcontent-%COMP%]{height:100vh;max-height:100vh;background-color:#333533;box-shadow:3px 0 2px #00000026;position:fixed;left:0;top:0;bottom:0;z-index:100}@media (min-width:768px){#sidebar[_ngcontent-%COMP%]{width:max(75px,5.2vw)}}a[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:calc(40px + 1.5vw)}@media (max-width:767px){#sidebar[_ngcontent-%COMP%]{width:100px}img[_ngcontent-%COMP%], #add-instrument-btn-container[_ngcontent-%COMP%]{width:70px}}#sidebar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center}#instruments-container[_ngcontent-%COMP%]{overflow-y:overlay;background-color:#0000;background-clip:initial;-webkit-background-clip:text;transition:background-color .15s ease-in-out,padding-right .15s ease-in-out}#sidebar[_ngcontent-%COMP%]:hover   #instruments-container.overflow[_ngcontent-%COMP%]{background-color:#ffffff1a;padding-right:8px}#instruments-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:inherit}#instruments-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#0000}#icons-container[_ngcontent-%COMP%], #instruments-container[_ngcontent-%COMP%]{min-height:0}#search[_ngcontent-%COMP%]{cursor:pointer}#search[_ngcontent-%COMP%]:hover   path[_ngcontent-%COMP%]{fill:#d7d7d7}path[_ngcontent-%COMP%]{fill:gray;transition:fill 125ms}.space-line[_ngcontent-%COMP%]{background-color:#bf9c6e;height:2px}#sidebar[_ngcontent-%COMP%]:hover   #add-instrument-btn-container[_ngcontent-%COMP%]{max-height:200px;padding-top:1.5em;padding-bottom:1.5em}#add-instrument-btn-container[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0;overflow:hidden;max-height:0;background-color:#202020;box-shadow:0 0 5px inset #0006;transition:padding .3s ease-in-out,max-height .3s ease-in-out,background-color 50ms ease-in-out;cursor:pointer}#add-instrument-btn-container[_ngcontent-%COMP%]:hover{background-color:#262626}#add-instrument-btn-container[_ngcontent-%COMP%]:active{background-color:#2b2b2b;transition:background-color 20ms ease-in-out}#add-instrument-btn-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:calc(30px + 1.5vw);transition:transform .15s ease-in-out,color .15s ease-in-out}#add-instrument-btn-container[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:scale(1.05)}#add-instrument-btn-container[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#fffc;transition:fill .15s ease-in-out}#add-instrument-btn-container[_ngcontent-%COMP%]:hover   path[_ngcontent-%COMP%]{fill:#fff}.instrument[_ngcontent-%COMP%]{transition:background-color .1s ease-in-out,box-shadow .1s ease-in-out}.active-instrument[_ngcontent-%COMP%]{background-color:#20202066;box-shadow:5px 0 5px inset}.instrument[_ngcontent-%COMP%]{transition:background-color .1s}.instrument[_ngcontent-%COMP%]:hover{background-color:#20202066;box-shadow:3px 0 5px inset #232323;cursor:pointer}.active-instrument[_ngcontent-%COMP%]:hover{box-shadow:3px 0 5px inset;transition:20ms}.instrument[_ngcontent-%COMP%]:active{background-color:#20202080;box-shadow:6px 0 10px 8px inset #232323;transition:20ms ease-in}.instrument.guitar[_ngcontent-%COMP%]{order:1}.instrument.acoustic-guitar[_ngcontent-%COMP%]{order:2}.instrument.bass[_ngcontent-%COMP%]{order:3}.instrument.voice[_ngcontent-%COMP%]{order:4}#profile-pic[_ngcontent-%COMP%]{width:100%;object-position:center;object-fit:cover;aspect-ratio:1;transition:transform .15s ease-in-out,box-shadow .15s ease-in-out}#profile-pic[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:2px 2px 5px #0000004d;cursor:pointer}#profile-pic[_ngcontent-%COMP%]:active{transform:scale(1.05);box-shadow:1px 1px 2px;transition:transform 20ms ease-in-out,box-shadow 20ms ease-in-out}#modal-background[_ngcontent-%COMP%]{position:fixed;left:0;top:0;bottom:0;right:0;background-color:#000000bf;-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);z-index:1}#background[_ngcontent-%COMP%]{position:fixed;left:0;right:0;top:0;bottom:0;background-color:#000000a6;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);z-index:1}#modal-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#000000a6;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);z-index:1000;display:flex;justify-content:center;align-items:center}#modal-dialog[_ngcontent-%COMP%]{background-color:#202020}select[_ngcontent-%COMP%]{background-color:#202020;color:#fff;border-color:#505050!important;border-width:2px;font-family:Barlow Condensed}#instrument-selection[_ngcontent-%COMP%]{border-right-width:0px}button[_ngcontent-%COMP%]{font-family:Barlow Condensed;background:none;border-radius:0;color:#fff;position:relative;z-index:1}#confirm-btn[_ngcontent-%COMP%]{background:none;border-color:#bf9c6e;color:#bf9c6e}button[_ngcontent-%COMP%]:before{content:"";position:absolute;display:block;top:0;right:0;left:0;bottom:0;z-index:1;background-color:#fff;transform:scaleY(0);transform-origin:bottom;transition:transform .15s ease-out;z-index:-1}#confirm-btn[_ngcontent-%COMP%]:before{background-color:#bf9c6e;z-index:-1}button[_ngcontent-%COMP%]:hover:before{transform:scaleY(1)}button[_ngcontent-%COMP%]:hover{background:none;color:#202020!important}'],data:{animation:[ro("appear",[nr(":enter",[Xt({opacity:0}),tr("150ms ease-in-out",Xt({opacity:1}))]),nr(":leave",[tr("150ms ease-in-out",Xt({opacity:0}))])]),ro("appear2",[nr(":enter",[Xt({opacity:0}),tr("150ms 500ms ease-in-out",Xt({opacity:1}))])]),ro("enterFromSide",[nr(":enter",[Xt({transform:"translateX(-150%)"}),tr("150ms ease-in-out",Xt({transform:"translateX(0)"}))]),nr(":leave",[tr("150ms ease-in-out",Xt({transform:"translateX(-150%)"}))])])]}}),n})(),BA=(()=>{class n{constructor(t){this.el=t}preventDefault(t){t.preventDefault()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","preventUnfocus",""]],hostBindings:function(t,r){1&t&&u.NdJ("mousedown",function(a){return r.preventDefault(a)})}}),n})();function rB(n,e){if(1&n&&(u.TgZ(0,"div",19)(1,"div",20),u._UZ(2,"img",21),u.qZA(),u.TgZ(3,"div",22)(4,"h3",23),u._uU(5),u.qZA(),u.TgZ(6,"h4",24),u._uU(7),u.qZA()()()),2&n){const t=u.oxw();u.Q6J("@appear",void 0),u.xp6(2),u.Q6J("src",t.currentSpotifyTrack.album.images[1].url,u.LSH),u.xp6(3),u.Oqu(t.currentSpotifyTrack.name),u.xp6(2),u.Oqu(t.currentSpotifyTrack.artists[0].name)}}function iB(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",29),u.NdJ("click",function(){return u.CHM(t),u.oxw(2).pause()}),u.O4$(),u.TgZ(1,"svg",30),u._UZ(2,"path",31),u.qZA()()}}function sB(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",32),u.NdJ("click",function(){return u.CHM(t),u.oxw(2).play()}),u.O4$(),u.TgZ(1,"svg",33),u._UZ(2,"path",34),u.qZA()()}}function oB(n,e){if(1&n&&(u.TgZ(0,"div",25),u._UZ(1,"div",26),u.YNc(2,iB,3,0,"div",27),u.YNc(3,sB,3,0,"div",28),u.qZA()),2&n){const t=u.oxw();u.Q6J("@appear",void 0),u.xp6(2),u.Q6J("ngIf",t.appStatus.isPlaying),u.xp6(1),u.Q6J("ngIf",!t.appStatus.isPlaying)}}let aB=(()=>{class n{constructor(t,r){this.tabService=t,this.playerService=r,this.appStatusOutput=new u.vpe,this.appStatus={isPlaying:!1,isMenuActive:!1,isCountdownActive:!1,isMetronomeActive:!1,tempoMultiplier:100},this.subs=[]}ngOnInit(){this.appStatusOutput.emit(this.appStatus);const t=this.tabService.isPlaying.subscribe(i=>{this.appStatus.isPlaying=!!i}),r=this.playerService.currentSpotifyTrack.subscribe(i=>{!i||(this.currentSpotifyTrack=i)});this.subs.push(t,r)}openMenu(){this.appStatus.isMenuActive=!0,this.appStatusOutput.emit(this.appStatus)}updateTempo(){this.appStatusOutput.emit(this.appStatus)}play(){this.tabService.play()}pause(){this.tabService.pause()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(N0),u.Y36(Rc))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-topbar"]],outputs:{appStatusOutput:"appStatusOutput"},decls:23,vars:7,consts:[["id","container",1,"row","m-0","px-md-2","px-lg-4","pt-4","flex-nowrap","justify-content-center","justify-content-md-between"],["preventUnfocus","",1,"row","justify-content-evenly","justify-content-md-start","p-0","m-0","col-auto","flex-grow-1","flex-nowrap"],["id","burger-container",1,"d-flex","d-md-none","col-2","col-sm-auto","p-0","m-0","justify-content-center","align-items-center",3,"click"],["id","burger"],["class","row m-0 p-0 col col-sm-auto flex-shrink-1 flex-nowrap overflow-hidden",4,"ngIf"],["id","play-pause","class","p-0 col-auto text-white position-relative",4,"ngIf"],["id","tools",1,"row","m-0","d-none","d-md-flex","col-lg","col-auto","p-0","flex-grow-1","flex-lg-grow-0","flex-row-reverse","flex-nowrap"],["preventUnfocus","",1,"col-4","my-auto","py-3","px-lg-4","px-md-2","text-center","rounded-1",3,"ngClass","click"],["version","1.1","width","36","height","36","viewBox","0 0 314 314",0,"xml","space","preserve"],["d","M281.853,46.631c-0.39-2.035-1.66-3.794-3.47-4.802l-11.257-6.271l5.297-9.511c1.881-3.378,0.668-7.641-2.709-9.521\n     c-3.38-1.881-7.641-0.667-9.521,2.709l-5.297,9.511l-11.257-6.269c-1.81-1.008-3.975-1.162-5.908-0.422\n     c-1.936,0.74-3.442,2.3-4.117,4.259l-13.806,40.109c-1.103,3.207,0.25,6.743,3.213,8.394l4.741,2.642l-23.115,41.501L184.592,17.11\n     C182.703,7.516,173.563,0,163.783,0h-56.052c-9.778,0-18.918,7.516-20.809,17.11L46.102,224.425\n     c-0.002,0.012-0.004,0.023-0.006,0.035l-13.729,69.725c-0.998,5.067,0.205,10.132,3.3,13.895C38.76,311.842,43.496,314,48.66,314\n     h174.195c5.163,0,9.898-2.158,12.993-5.92c3.095-3.763,4.298-8.827,3.301-13.896l-13.732-69.741\n     c-0.001-0.002-0.001-0.004-0.001-0.004l-16.584-84.225l31.16-55.944l4.742,2.642c1.072,0.598,2.243,0.885,3.402,0.885\n     c2.046,0,4.056-0.896,5.425-2.571l26.836-32.853C281.708,50.769,282.241,48.665,281.853,46.631z M100.659,19.816\n     c0.6-3.044,3.971-5.816,7.072-5.816h56.052c3.103,0,6.473,2.771,7.072,5.815l23.249,118.069L164,191.933\n     c-6.17-2.645-13.121-4.627-21.242-5.363v-14.92h10.96c3.866,0,7-3.134,7-7s-3.134-7-7-7h-10.96v-41.211h10.96c3.866,0,7-3.134,7-7\n     c0-3.866-3.134-7-7-7h-10.96v-41.21h10.96c3.866,0,7-3.134,7-7s-3.134-7-7-7h-10.96V34.938c0-3.866-3.134-7-7-7\n     c-3.866,0-7,3.134-7,7v12.291h-10.96c-3.866,0-7,3.134-7,7s3.134,7,7,7h10.96v41.21h-10.96c-3.866,0-7,3.134-7,7\n     c0,3.866,3.134,7,7,7h10.96v41.211h-10.96c-3.866,0-7,3.134-7,7s3.134,7,7,7h10.96v14.92c-19.447,1.763-32.189,10.688-43.564,18.666\n     c-7.894,5.536-14.975,10.493-23.52,12.573L100.659,19.816z M225.036,299.188c-0.432,0.523-1.206,0.813-2.181,0.813H48.66\n     c-0.976,0-1.75-0.289-2.181-0.814c-0.432-0.524-0.565-1.34-0.377-2.297l12.675-64.372c14.147-1.593,24.455-8.807,34.455-15.82\n     c12.059-8.457,23.448-16.444,42.525-16.444c19.077,0,30.466,7.987,42.524,16.444c10.001,7.014,20.308,14.228,34.456,15.82\n     l12.675,64.371C225.602,297.846,225.468,298.662,225.036,299.188z M209.842,217.809c-8.545-2.08-15.627-7.037-23.521-12.574\n     c-3.175-2.227-6.456-4.527-9.959-6.726l21.928-39.367L209.842,217.809z M246.427,71.829l-11.474-6.392l9.177-26.662l20.136,11.216\n     L246.427,71.829z"],["preventUnfocus","",1,"col-4","my-auto","py-3","px-lg-4","px-md-2","text-center","rounded-1",3,"click"],[1,"fs-4","m-0",3,"ngClass"],["id","tempo-container","tabindex","0",1,"col-4","my-auto","mx-0","py-3","px-lg-4","px-md-2","text-center","rounded-1","position-relative"],["id","fill-div2"],["id","tempo",1,"fs-4","m-0",2,"color","#BF9C6E"],["id","tempo-input-container",1,"p-3","my-auto","rounded"],["type","range","step","5","min","50","max","200",1,"mx-2",3,"ngModel","defaultValue","ngModelChange","input"],[1,"d-inline-block","float-start","text-white","fw-light"],[1,"d-inline-block","float-end","text-white","fw-light"],[1,"row","m-0","p-0","col","col-sm-auto","flex-shrink-1","flex-nowrap","overflow-hidden"],[1,"col-sm-auto","col-2","p-0","text-center","my-auto"],["alt","",1,"img-fluid",3,"src"],["id","song-info",1,"col-10","col-sm-auto","p-0","my-auto"],["id","song-title",1,"m-0","ms-2","fw-bold"],["id","artists",1,"m-0","ms-2","fw-light"],["id","play-pause",1,"p-0","col-auto","text-white","position-relative"],["id","fill-div"],["id","pause",3,"click",4,"ngIf"],["id","play",3,"click",4,"ngIf"],["id","pause",3,"click"],["fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-pause-circle-fill"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],["id","play",3,"click"],["fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2),u.NdJ("click",function(){return r.openMenu()}),u._UZ(3,"button",3),u.qZA(),u.YNc(4,rB,8,4,"div",4),u.YNc(5,oB,4,3,"div",5),u.qZA(),u.TgZ(6,"div",6)(7,"div",7),u.NdJ("click",function(){return r.appStatus.isMetronomeActive=!r.appStatus.isMetronomeActive}),u.O4$(),u.TgZ(8,"svg",8),u._UZ(9,"path",9),u.qZA()(),u.kcU(),u.TgZ(10,"div",10),u.NdJ("click",function(){return r.appStatus.isCountdownActive=!r.appStatus.isCountdownActive}),u.TgZ(11,"p",11),u._uU(12,"123"),u.qZA()(),u.TgZ(13,"div",12),u._UZ(14,"div",13),u.TgZ(15,"p",14),u._uU(16),u.qZA(),u.TgZ(17,"div",15)(18,"input",16),u.NdJ("ngModelChange",function(a){return r.appStatus.tempoMultiplier=a})("input",function(){return r.updateTempo()}),u.qZA(),u.TgZ(19,"p",17),u._uU(20,"50%"),u.qZA(),u.TgZ(21,"p",18),u._uU(22,"200% "),u.qZA()()()()()),2&t&&(u.xp6(4),u.Q6J("ngIf",r.currentSpotifyTrack),u.xp6(1),u.Q6J("ngIf",r.currentSpotifyTrack),u.xp6(2),u.Q6J("ngClass",r.appStatus.isMetronomeActive?"active-tool":""),u.xp6(4),u.Q6J("ngClass",r.appStatus.isCountdownActive?"active-tool":""),u.xp6(5),u.hij("",r.appStatus.tempoMultiplier,"%"),u.xp6(2),u.Q6J("ngModel",r.appStatus.tempoMultiplier)("defaultValue",r.appStatus.tempoMultiplier))},directives:[BA,Mn,Ki,kd,Po,Xu,ff],styles:['#container[_ngcontent-%COMP%]{max-height:121px;min-width:0%;max-width:100vw}#burger-container[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;cursor:pointer;min-width:50px}#burger[_ngcontent-%COMP%]{width:30px;height:3px;background-color:#bf9c6e;border-radius:50px;border:none;transition:opacity .15s ease-in-out}#burger[_ngcontent-%COMP%]:before{content:"";position:absolute;width:30px;height:3px;background-color:#bf9c6e;border-radius:50px;transform:translate(-15px,-11.5px)}#burger[_ngcontent-%COMP%]:after{content:"";position:absolute;width:30px;height:3px;background-color:#bf9c6e;border-radius:50px;transform:translate(-15px,8.5px)}#song[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}#fill-div[_ngcontent-%COMP%]{width:80px}#fill-div2[_ngcontent-%COMP%]{width:50px}#play-pause[_ngcontent-%COMP%]{width:min-content}img[_ngcontent-%COMP%]{max-height:97px}#song-info[_ngcontent-%COMP%]{cursor:default}#song-title[_ngcontent-%COMP%]{color:#fff;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}#artists[_ngcontent-%COMP%]{color:#d6d6d6;line-height:30px;white-space:nowrap}#play[_ngcontent-%COMP%], #pause[_ngcontent-%COMP%]{width:50px;height:50px;cursor:pointer;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}#tools[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Barlow Condensed,sans-serif;font-weight:500;color:#707070;margin:0;transition:color .2s}#tools[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#707070;transition:fill .2s}#tools[_ngcontent-%COMP%]   .active-tool[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#bf9c6e}#tools[_ngcontent-%COMP%]   .active-tool[_ngcontent-%COMP%]{color:#bf9c6e}@media (min-width:992px){#tools[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:not(#fill-div2), #tempo-container[_ngcontent-%COMP%]{min-width:88px;min-height:68px}}#tools[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:not(#tempo-input-container){transition:background-color .1s;max-width:100px}#tools[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#ffffff26;transition:background-color 10ms}#tempo-input-container[_ngcontent-%COMP%]{display:none;background-color:#1010104d;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);position:absolute;top:50%;left:50%;transform:translate(-50%,50%)}#tempo-container[_ngcontent-%COMP%]:focus   #tempo-input-container[_ngcontent-%COMP%], #tempo-input-container[_ngcontent-%COMP%]:active{display:inline-block}'],data:{animation:[ro("appear",[nr(":enter",[Xt({opacity:0}),tr("300ms 500ms ease-in-out",Xt({opacity:1}))]),nr(":leave",[tr("300ms 500ms  ease-in-out",Xt({opacity:0}))])])]}}),n})();function uB(n,e){if(1&n&&(u.TgZ(0,"div",50)(1,"div",51),u._UZ(2,"img",52),u.qZA(),u.TgZ(3,"div",53)(4,"h3",54),u._uU(5),u.qZA(),u.TgZ(6,"h4",55),u._uU(7),u.qZA()()()),2&n){const t=u.oxw();u.Q6J("@appear",void 0),u.xp6(2),u.Q6J("src",t.currentSpotifyTrack.album.images[1].url,u.LSH),u.xp6(3),u.Oqu(t.currentSpotifyTrack.name),u.xp6(2),u.Oqu(t.currentSpotifyTrack.artists[0].name)}}function lB(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",60),u.NdJ("click",function(){return u.CHM(t),u.oxw(2).pause()}),u.O4$(),u.TgZ(1,"svg",61),u._UZ(2,"path",62),u.qZA()()}}function cB(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",63),u.NdJ("click",function(){return u.CHM(t),u.oxw(2).play()}),u.O4$(),u.TgZ(1,"svg",64),u._UZ(2,"path",65),u.qZA()()}}function dB(n,e){if(1&n&&(u.TgZ(0,"div",56),u._UZ(1,"div",57),u.YNc(2,lB,3,0,"div",58),u.YNc(3,cB,3,0,"div",59),u.qZA()),2&n){const t=u.oxw();u.Q6J("@appear",void 0),u.xp6(2),u.Q6J("ngIf",t.appStatus.isPlaying),u.xp6(1),u.Q6J("ngIf",!t.appStatus.isPlaying)}}function hB(n,e){1&n&&(u.TgZ(0,"div",66)(1,"div")(2,"div",67),u._UZ(3,"input",68),u.TgZ(4,"label",69),u._UZ(5,"img",70),u.qZA()(),u.TgZ(6,"div",71),u._UZ(7,"input",72),u.TgZ(8,"label",69),u._UZ(9,"img",73),u.qZA()(),u.TgZ(10,"div",71),u._UZ(11,"input",74),u.TgZ(12,"label",69),u._UZ(13,"img",75),u.qZA()(),u._UZ(14,"hr",76),u.qZA(),u.TgZ(15,"div")(16,"div",67),u._UZ(17,"input",77),u.TgZ(18,"label",78),u._UZ(19,"img",79),u.qZA()(),u.TgZ(20,"div",71),u._UZ(21,"input",80),u.TgZ(22,"label",78),u._UZ(23,"img",81),u.qZA()()()()),2&n&&u.Q6J("@scale",void 0)}let jA=(()=>{class n{constructor(t,r,i){this.editTabService=t,this.tabService=r,this.playerService=i,this.appStatusOutput=new u.vpe,this.subs=[],this.appStatus={isPlaying:!1,isMenuActive:!1,isCountdownActive:!1,isMetronomeActive:!1,tempoMultiplier:100},this.noteProperties=new us({initialDurationInverse:new xr(4,$n.required),isDotted:new xr(!1),isRest:new xr(!1),timeSignatureNumerator:new xr(4,$n.required),timeSignatureDenominator:new xr(4,$n.required),slideOutMode:new xr(null),slideInMode:new xr(null)}),this.showSlideMenu=!1}ngOnInit(){this.appStatusOutput.emit(this.appStatus);const t=this.tabService.isPlaying.subscribe(i=>{this.appStatus.isPlaying=!!i}),r=this.playerService.currentSpotifyTrack.subscribe(i=>{this.currentSpotifyTrack=i});this.subs.push(t,r)}ngOnChanges(t){var r;if(!this.barPropertiesInput)return;this.selectionSub&&(null===(r=this.selectionSub)||void 0===r||r.unsubscribe()),this.noteProperties.reset();let i=t.barPropertiesInput.currentValue;this.noteProperties.patchValue({initialDurationInverse:i.segment.initialDurationInverse,isRest:!!i.segment.isRest,timeSignatureNumerator:i.bar.timeSignature.numerator,timeSignatureDenominator:i.bar.timeSignature.denominator}),i.segment.effects&&this.noteProperties.patchValue({isDotted:!!i.segment.effects.isDotted}),i.note&&i.note.effects&&this.noteProperties.patchValue({slideOutMode:i.note.effects.slides.slideOut,slideInMode:i.note.effects.slides.slideIn}),this.selectionSub=this.noteProperties.valueChanges.subscribe(a=>{Object.values(a).every(f=>null===f)||(this.editTabService.changeDuration(a.initialDurationInverse,a.isDotted),null!==a.isRest&&this.editTabService.toggleRest(a.isRest),this.editTabService.notePropertiesInput=a,this.noteProperties.valid&&this.editTabService.changeTimeSignature(a.timeSignatureNumerator,a.timeSignatureDenominator),this.editTabService.changeSlides({slideOut:a.slideOutMode,slideIn:a.slideInMode}))})}openMenu(){this.appStatus.isMenuActive=!0,this.appStatusOutput.emit(this.appStatus)}updateTempo(){this.appStatusOutput.emit(this.appStatus)}play(){this.appStatus.isPlaying=!0,this.tabService.play()}pause(){this.appStatus.isPlaying=!1,this.tabService.pause()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(R0),u.Y36(N0),u.Y36(Rc))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-edit-topbar"]],inputs:{barPropertiesInput:"barPropertiesInput"},outputs:{appStatusOutput:"appStatusOutput"},features:[u.TTD],decls:74,vars:16,consts:[["id","container",1,"row","m-0","px-md-2","px-lg-4","flex-nowrap","justify-content-center","justify-content-md-between"],["preventUnfocus","",1,"row","justify-content-evenly","justify-content-md-start","p-0","m-0","col-auto","flex-grow-1","flex-nowrap"],["id","burger-container",1,"d-flex","d-md-none","col-2","col-sm-auto","p-0","m-0","justify-content-center","align-items-center",3,"click"],["id","burger"],["class","row m-0 p-0 col col-sm-auto flex-shrink-1 flex-nowrap overflow-hidden",4,"ngIf"],["id","play-pause","class","p-0 col-auto text-white position-relative",4,"ngIf"],["id","tools",1,"row","m-0","d-none","d-md-flex","col","p-0","flex-grow-1","flex-lg-grow-0","flex-row-reverse","flex-nowrap"],["id","notation-group",1,"col","p-0"],[1,"d-flex","justify-content-evenly","col-auto","h-100",3,"formGroup"],["id","time-signature-input-container",1,"d-flex","flex-column","justify-content-center"],["autocomplete","off","type","number","name","timeSignatureNumerator","min","1","step","1","max","99","formControlName","timeSignatureNumerator",1,"form-control-plaintext","m-0","border-0","p-0"],["autocomplete","off","type","number","name","timeSignatureDenominator","min","1","step","1","max","99","formControlName","timeSignatureDenominator",1,"form-control-plaintext","m-0","border-0","p-0"],[1,"p-0","mx-2","my-2",2,"height","95%","width","1px","background-color","#333533"],["preventUnfocus","","id","note-duration-input-group",1,"px-0","py-2","m-0","d-flex","justify-content-end","flex-wrap"],[1,"mx-0","position-relative","rounded","d-flex","align-items-center"],["type","radio","name","initialDurationInverse","formControlName","initialDurationInverse",3,"value"],["for","initialDurationInverse",1,"rounded-1","p-2","px-1","h-100","d-flex","align-items-center"],["src","../../../assets/svgs/notes/1st_note.svg","alt","Whole note"],[1,"mx-1","position-relative","rounded"],["for","initialDurationInverse",1,"rounded-1","p-2","h-100","d-flex","align-items-center"],["height","35px","src","../../../assets/svgs/notes/2nd_note.svg","alt","Half note"],["height","35px","src","../../../assets/svgs/notes/4th_note.svg","alt","Quarter note"],["height","35px","src","../../../assets/svgs/notes/8th_note.svg","alt","Eighth note"],["height","35px","src","../../../assets/svgs/notes/16th_note.svg","alt","Sixteenth note"],["height","35px","src","../../../assets/svgs/notes/32nd_note.svg","alt","Thirty-second note"],["height","35px","src","../../../assets/svgs/notes/64th_note.svg","alt","Whole note"],["preventUnfocus","","id","note-effects",1,"col-auto","d-flex","justify-content-end"],["id","note-dot",1,"mx-1","my-auto","position-relative","rounded","d-flex","align-items-center"],["type","checkbox","name","isDotted","formControlName","isDotted"],["for","effects",1,"rounded-1","p-2","px-1","h-100","d-flex","align-items-center"],["src","../../../assets/svgs/effects/dot.svg","alt","Note dot"],["id","additional-options",1,"d-flex","flex-column","justify-content-evenly"],["id","rest-btn-container",1,"position-relative"],["type","checkbox","name","isRest","formControlName","isRest"],["for","isRest",1,"rounded-2","d-flex","justify-content-center","align-items-center"],[1,"fw-normal"],[1,"position-relative"],["id","slide-menu-btn",1,"btn-group"],[1,"btn",3,"disabled","click"],[1,"btn","fw-normal","position-relative",3,"disabled","click"],[2,"height","19px","width","9px"],[2,"position","absolute","top","50%","left","50%","transform","translate(-50%,-75%)"],["id","slide-menu","class","d-flex justify-content-end flex-wrap rounded p-2",4,"ngIf"],["id","tempo-container","tabindex","0",1,"col","my-auto","mx-0","py-3","px-lg-4","px-md-2","text-center","rounded-1","position-relative"],["id","fill-div2"],["id","tempo",1,"fs-4","m-0",2,"color","#BF9C6E"],["id","tempo-input-container",1,"p-3","my-auto","rounded"],["type","range","step","5","min","50","max","200",1,"mx-2",3,"ngModel","defaultValue","ngModelChange","input"],[1,"d-inline-block","float-start","text-white","fw-light"],[1,"d-inline-block","float-end","text-white","fw-light"],[1,"row","m-0","p-0","col","col-sm-auto","flex-shrink-1","flex-nowrap","overflow-hidden"],[1,"col-sm-auto","col-2","p-0","text-center","my-auto"],["alt","",1,"img-fluid",3,"src"],[1,"col-10","col-sm-auto","p-0","my-auto"],["id","song-title",1,"m-0","ms-2","fw-bold"],["id","artists",1,"m-0","ms-2","fw-light"],["id","play-pause",1,"p-0","col-auto","text-white","position-relative"],["id","fill-div"],["id","pause",3,"click",4,"ngIf"],["id","play",3,"click",4,"ngIf"],["id","pause",3,"click"],["fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-pause-circle-fill"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"],["id","play",3,"click"],["fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-play-circle-fill"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"],["id","slide-menu",1,"d-flex","justify-content-end","flex-wrap","rounded","p-2"],[1,"position-relative","rounded","d-flex","align-items-center"],["type","radio","uncheck","","name","slideOutMode","value","slideToNote","formControlName","slideOutMode"],["for","slideOutMode",1,"rounded-1","px-2","h-100","d-flex","align-items-center"],["src","../../../assets/svgs/effects/slide-to-note.svg","alt","Whole note",1,"slide-figure"],[1,"mt-3","position-relative","rounded","d-flex","align-items-center"],["type","radio","uncheck","","name","slideOutMode","value","slideUp","formControlName","slideOutMode"],["src","../../../assets/svgs/effects/slide-out-up.svg","alt","Whole note",1,"slide-figure"],["type","radio","uncheck","","name","slideOutMode","value","slideDown","formControlName","slideOutMode"],["src","../../../assets/svgs/effects/slide-out-down.svg","alt","Whole note",1,"slide-figure"],[1,"my-3","text-white-50"],["type","radio","uncheck","","name","slideInMode","value","slideDown","formControlName","slideInMode"],["for","slideInMode",1,"rounded-1","px-2","h-100","d-flex","align-items-center"],["src","../../../assets/svgs/effects/slide-in-down.svg","alt","Whole note",1,"slide-figure"],["type","radio","uncheck","","name","slideInMode","value","slideUp","formControlName","slideInMode"],["src","../../../assets/svgs/effects/slide-in-up.svg","alt","Whole note",1,"slide-figure"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2),u.NdJ("click",function(){return r.openMenu()}),u._UZ(3,"button",3),u.qZA(),u.YNc(4,uB,8,4,"div",4),u.YNc(5,dB,4,3,"div",5),u.qZA(),u.TgZ(6,"div",6)(7,"div",7)(8,"form",8)(9,"div",9),u._UZ(10,"input",10)(11,"input",11),u.qZA(),u._UZ(12,"div",12),u.TgZ(13,"div",13)(14,"div",14),u._UZ(15,"input",15),u.TgZ(16,"label",16),u._UZ(17,"img",17),u.qZA()(),u.TgZ(18,"div",18),u._UZ(19,"input",15),u.TgZ(20,"label",19),u._UZ(21,"img",20),u.qZA()(),u.TgZ(22,"div",18),u._UZ(23,"input",15),u.TgZ(24,"label",19),u._UZ(25,"img",21),u.qZA()(),u.TgZ(26,"div",18),u._UZ(27,"input",15),u.TgZ(28,"label",19),u._UZ(29,"img",22),u.qZA()(),u.TgZ(30,"div",18),u._UZ(31,"input",15),u.TgZ(32,"label",19),u._UZ(33,"img",23),u.qZA()(),u.TgZ(34,"div",18),u._UZ(35,"input",15),u.TgZ(36,"label",19),u._UZ(37,"img",24),u.qZA()(),u.TgZ(38,"div",18),u._UZ(39,"input",15),u.TgZ(40,"label",19),u._UZ(41,"img",25),u.qZA()()(),u._UZ(42,"div",12),u.TgZ(43,"div",26)(44,"div",27),u._UZ(45,"input",28),u.TgZ(46,"label",29),u._UZ(47,"img",30),u.qZA()(),u.TgZ(48,"div",31)(49,"div",32),u._UZ(50,"input",33),u.TgZ(51,"label",34)(52,"span",35),u._uU(53,"Rest"),u.qZA()()(),u.TgZ(54,"div",36)(55,"div",37)(56,"button",38),u.NdJ("click",function(){return r.showSlideMenu=!r.showSlideMenu}),u._uU(57,"Slide"),u.qZA(),u.TgZ(58,"button",39),u.NdJ("click",function(){return r.showSlideMenu=!r.showSlideMenu}),u._UZ(59,"div",40),u.TgZ(60,"span",41),u._uU(61,"\u2304"),u.qZA()()(),u.YNc(62,hB,24,1,"div",42),u.qZA()()()()(),u._UZ(63,"div",12),u.TgZ(64,"div",43),u._UZ(65,"div",44),u.TgZ(66,"p",45),u._uU(67),u.qZA(),u.TgZ(68,"div",46)(69,"input",47),u.NdJ("ngModelChange",function(a){return r.appStatus.tempoMultiplier=a})("input",function(){return r.updateTempo()}),u.qZA(),u.TgZ(70,"p",48),u._uU(71,"50%"),u.qZA(),u.TgZ(72,"p",49),u._uU(73,"200% "),u.qZA()()()()()),2&t&&(u.xp6(4),u.Q6J("ngIf",r.currentSpotifyTrack),u.xp6(1),u.Q6J("ngIf",r.currentSpotifyTrack),u.xp6(3),u.Q6J("formGroup",r.noteProperties),u.xp6(7),u.Q6J("value",1),u.xp6(4),u.Q6J("value",2),u.xp6(4),u.Q6J("value",4),u.xp6(4),u.Q6J("value",8),u.xp6(4),u.Q6J("value",16),u.xp6(4),u.Q6J("value",32),u.xp6(4),u.Q6J("value",64),u.xp6(17),u.Q6J("disabled",r.noteProperties.controls.isRest.value),u.xp6(2),u.Q6J("disabled",r.noteProperties.controls.isRest.value),u.xp6(4),u.Q6J("ngIf",r.showSlideMenu),u.xp6(5),u.hij("",r.appStatus.tempoMultiplier,"%"),u.xp6(2),u.Q6J("ngModel",r.appStatus.tempoMultiplier)("defaultValue",r.appStatus.tempoMultiplier))},styles:["#container[_ngcontent-%COMP%]{max-height:121px;min-width:0%;max-width:100vw}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}input[type=radio][_ngcontent-%COMP%], input[type=checkbox][_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;z-index:10;cursor:pointer;transition:background-color 50ms}label[_ngcontent-%COMP%]{transition:background-color 50ms}input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{background-color:#ffffff1a}input[type=radio][_ngcontent-%COMP%]:hover + label[_ngcontent-%COMP%], input[type=checkbox][_ngcontent-%COMP%]:hover + label[_ngcontent-%COMP%]{background-color:#ffffff0d}input[_ngcontent-%COMP%]:checked:hover + label[_ngcontent-%COMP%]{background-color:#ffffff1a}input[_ngcontent-%COMP%]:active + label[_ngcontent-%COMP%]{background-color:#ffffff26!important;transition:background-color 10ms}#song[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}#fill-div[_ngcontent-%COMP%]{width:80px}#fill-div2[_ngcontent-%COMP%]{width:50px}#play-pause[_ngcontent-%COMP%]{width:min-content}#img-fill[_ngcontent-%COMP%]{background-color:#000;width:auto;height:100%;aspect-ratio:1}img[_ngcontent-%COMP%]{max-height:97px}#song-title[_ngcontent-%COMP%]{color:#fff;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;cursor:default}#artists[_ngcontent-%COMP%]{color:#d6d6d6;line-height:30px;white-space:nowrap;cursor:default}#play[_ngcontent-%COMP%], #pause[_ngcontent-%COMP%]{width:50px;height:50px;cursor:pointer;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}#tempo-container[_ngcontent-%COMP%]{min-height:68px}#tools[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Barlow Condensed,sans-serif;font-weight:500;color:#707070;margin:0;transition:color .2s}#tools[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#707070;transition:fill .2s}#tools[_ngcontent-%COMP%]   .active-tool[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#bf9c6e}#tools[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:checked{color:#bf9c6e}#tempo-container[_ngcontent-%COMP%]{max-width:88px;min-height:68px}#tools[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:not(#tempo-input-container){transition:background-color .1s}#tools[_ngcontent-%COMP%]   #tempo-container[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#ffffff26;transition:background-color 10ms}#tempo-input-container[_ngcontent-%COMP%]{display:none;background-color:#1010104d;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);position:absolute;top:50%;left:50%;transform:translate(-50%,50%);cursor:initial}#tempo-container[_ngcontent-%COMP%]:focus   #tempo-input-container[_ngcontent-%COMP%], #tempo-input-container[_ngcontent-%COMP%]:active{display:inline-block}#time-signature-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#fff;text-align:center;font:500 40px Barlow Condensed;line-height:40px;height:40px;width:35px}#note-duration-input-group[_ngcontent-%COMP%]{min-width:146px}#note-dot[_ngcontent-%COMP%]{max-height:30px}#additional-options[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], #additional-options[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#d6d6d6;border:#333533 1px solid;height:38px;width:100%;font-weight:700;text-align:center}#additional-options[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover > button[_ngcontent-%COMP%]{background-color:#70707080}#slide-menu[_ngcontent-%COMP%]{position:absolute;top:120%;width:100px;background-color:#202020;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);z-index:100;box-shadow:0 2px 4px 1px #00000059;transform-origin:top}button[_ngcontent-%COMP%]:disabled:hover{cursor:no-drop!important}#slide-menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], #slide-menu[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%}.slide-figure[_ngcontent-%COMP%]{width:100%;height:45px}.clear-btn[_ngcontent-%COMP%]{transition:color 20ms!important}.clear-btn[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}.clear-btn[_ngcontent-%COMP%]:active{color:#a1a1a1!important}"],data:{animation:[ro("scale",[nr(":enter",[Xt({opacity:0}),tr("100ms ease-in-out",Xt({opacity:1}))]),nr(":leave",[tr("100ms ease-in-out",Xt({opacity:0}))])]),ro("appear",[nr(":enter",[Xt({opacity:0}),tr("300ms ease-in-out",Xt({opacity:1}))]),nr(":leave",[tr("300ms ease-in-out",Xt({opacity:0}))])])]}}),n})(),HA=(()=>{class n{constructor(t){this.el=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","bar",""]]}),n})(),Wk=(()=>{class n{constructor(t,r){this.el=t,this.editTabService=r}manageNote(t){switch(t.code){case"KeyW":case"ArrowUp":t.preventDefault(),this.editTabService.selectUpperNote();break;case"KeyA":case"ArrowLeft":t.preventDefault(),this.editTabService.selectPreviousSegmentNote();break;case"KeyS":case"ArrowDown":t.preventDefault(),this.editTabService.selectLowerNote();break;case"KeyD":case"ArrowRight":t.preventDefault(),this.editTabService.selectNextSegmentNote();break;case"Delete":case"Backspace":t.preventDefault(),this.editTabService.removeNote()}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(R0))},n.\u0275dir=u.lG2({type:n,selectors:[["","note",""]],hostBindings:function(t,r){1&t&&u.NdJ("keydown",function(a){return r.manageNote(a)})}}),n})();const fB=["canvasContainer"];function pB(n,e){1&n&&u._UZ(0,"div",16)}function gB(n,e){if(1&n&&(u.TgZ(0,"div")(1,"p"),u._uU(2),u.qZA(),u.TgZ(3,"p"),u._uU(4),u.qZA()()),2&n){const t=u.oxw().$implicit;u.xp6(2),u.Oqu(t.timeSignature.numerator),u.xp6(2),u.Oqu(t.timeSignature.denominator)}}function mB(n,e){if(1&n&&u._UZ(0,"hr",25),2&n){const t=u.oxw().$implicit,r=u.oxw(2).$implicit,i=u.oxw().$implicit,a=u.oxw();u.Q6J("ngStyle",a.styleSlideOut(t,r,i))}}function yB(n,e){if(1&n&&u._UZ(0,"hr",26),2&n){const t=u.oxw().$implicit,r=u.oxw(2).$implicit,i=u.oxw(2);u.Q6J("ngStyle",i.styleSlideIn(t,r))}}function _B(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"span",22),u.NdJ("focus",function(){const a=u.CHM(t).$implicit,c=u.oxw(2).$implicit,f=u.oxw().$implicit;return u.oxw().detectNoteSelection(c,f,a)}),u._uU(1),u.YNc(2,mB,1,1,"hr",23),u.YNc(3,yB,1,1,"hr",24),u.qZA()}if(2&n){const t=e.$implicit,r=u.oxw(4);u.Q6J("ngStyle",r.styleNote(t)),u.xp6(1),u.hij(" ",t.fretValue," "),u.xp6(1),u.Q6J("ngIf",t.effects&&t.effects.slides&&t.effects.slides.slideOut),u.xp6(1),u.Q6J("ngIf",t.effects&&t.effects.slides&&t.effects.slides.slideIn)}}function vB(n,e){if(1&n&&(u.TgZ(0,"div",20),u.YNc(1,_B,4,4,"span",21),u.qZA()),2&n){const t=u.oxw().$implicit;u.xp6(1),u.Q6J("ngForOf",t.notes)}}function bB(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",27)(1,"div",28),u.NdJ("focus",function(){u.CHM(t);const i=u.oxw().$implicit,a=u.oxw().$implicit;return u.oxw().detectNoteSelection(i,a)}),u._UZ(2,"img",29),u.qZA()()}if(2&n){const t=u.oxw().$implicit,r=u.oxw(2);u.xp6(2),u.Q6J("src",r.assignRestImg(t),u.LSH)}}function wB(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",17),u.NdJ("focus",function(){const a=u.CHM(t).$implicit,c=u.oxw().$implicit;return u.oxw().detectNoteSelection(a,c)}),u.YNc(1,vB,2,1,"div",18),u.YNc(2,bB,3,1,"div",19),u.qZA()}if(2&n){const t=e.$implicit,r=u.oxw(2);u.Q6J("ngStyle",r.styleSegment(t)),u.xp6(1),u.Q6J("ngIf",!t.isRest),u.xp6(1),u.Q6J("ngIf",t.isRest)}}const EB=function(){return[]};function TB(n,e){if(1&n&&(u.TgZ(0,"div",9)(1,"div",10),u.YNc(2,pB,1,0,"div",11),u.qZA(),u.TgZ(3,"div",12),u.YNc(4,gB,5,2,"div",13),u.qZA(),u.TgZ(5,"div",14),u.YNc(6,wB,3,3,"div",15),u.qZA()()),2&n){const t=e.$implicit,r=e.index,i=u.oxw();u.Q6J("ngStyle",i.styleBar(t,r)),u.xp6(2),u.Q6J("ngForOf",u.DdM(5,EB).constructor(i.currentTab.instrument.strings)),u.xp6(1),u.Q6J("ngStyle",i.styleTimeSignature(t,r)),u.xp6(1),u.Q6J("ngIf",i.hasTimeSignatureChanged(t,r)),u.xp6(2),u.Q6J("ngForOf",t.segments)}}let CB=(()=>{class n{constructor(t,r,i){this.editTabService=t,this.tabService=r,this.playerService=i,this.noteSelectedOutput=new u.vpe,this.tabLayout=Sh,this.currentTab=this.playerService.currentTab.value,this.currentTabGroup=this.playerService.currentTabGroup.value,this.currentTabIndex=this.playerService.currentTabIndex.value,this.staffHeight=42*(this.currentTab.instrument.strings-1),this.subs=[],this.playInterval=ok(500),this.index=0,this.keyInput=[]}ngAfterViewInit(){this.editTabService.fillSegmentsNotesSpaces(),this.editTabService.HTMLBars=this.HTMLBars,this.editTabService.HTMLSegments=this.HTMLSegments;const t=this.HTMLBars.changes.subscribe(i=>{this.editTabService.HTMLBars=i}),r=this.HTMLSegments.changes.subscribe(i=>{this.editTabService.HTMLSegments=i});setTimeout(()=>{var i;null===(i=this.HTMLBars)||void 0===i||i.get(0).el.nativeElement.lastElementChild.children[0].lastElementChild.children[0].focus()}),this.subs.push(t,r)}ngOnInit(){const t=this.editTabService.modifyTab.subscribe(()=>{this.currentTabGroup.tabs[this.currentTabIndex]=this.editTabService.currentTab,this.playerService.currentTabGroup.next(this.currentTabGroup)}),r=this.tabService.isPlaying.subscribe(c=>{c?this.play():this.pause()}),i=this.playerService.currentTabGroup.subscribe(c=>this.currentTabGroup=c),a=this.playerService.currentTab.subscribe(c=>{this.currentTabIndex=this.playerService.currentTabIndex.value,this.tabService.currentTab=c,this.editTabService.currentTab=c,this.editTabService.fillSegmentsNotesSpaces(),this.currentTab=c});this.subs.push(a,r,t,i)}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe())}play(){this.sub=this.playInterval.subscribe(()=>{var t,r;if(!(null===(t=this.HTMLSegments)||void 0===t?void 0:t.get(this.index)))return this.tabService.pause(),void(this.index=0);null===(r=this.HTMLSegments)||void 0===r||r.get(this.index).el.nativeElement.focus(),this.index++})}pause(){var t;null===(t=this.sub)||void 0===t||t.unsubscribe()}detectNoteSelection(t,r,i){this.noteSelectedOutput.emit({segment:t,bar:r,note:i}),this.editTabService.updateNoteSelection({segment:t,bar:r,note:i}),this.selectedNote={segment:t,bar:r,note:i}}styleBar(t,r){return this.tabService.styleBar(t,r)}styleTimeSignature(t,r){return this.tabService.styleTimeSignature(t,r)}styleSegment(t){return this.tabService.styleSegment(t)}styleNote(t){return this.tabService.styleNote(t)}styleSlideOut(t,r,i){return this.tabService.styleSlideOut(t,r,i)}styleSlideIn(t,r){return this.tabService.styleSlideIn(t,r)}assignRestImg(t){return this.tabService.assignRestImg(t)}hasTimeSignatureChanged(t,r){return this.tabService.hasTimeSignatureChanged(t,r)}addBar(){this.editTabService.addBar()}addKeypress(t){var r;null===(r=this.keyInput)||void 0===r||r.push(t.key),this.changeFretValue()}changeFretValue(){if(!this.keyInput)return;let t=parseInt(this.keyInput.join(""),10);this.selectedNote&&this.editTabService.changeFretValue(t),setTimeout(()=>{this.keyInput=[]},200)}changeToHorizontalScroll(t){!this.canvasContainer||(t.deltaY>0?this.canvasContainer.nativeElement.scrollLeft+=100:this.canvasContainer.nativeElement.scrollLeft-=100)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(R0),u.Y36(N0),u.Y36(Rc))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-edit-tab"]],viewQuery:function(t,r){if(1&t&&(u.Gf(fB,5),u.Gf(HA,5),u.Gf(tC,5)),2&t){let i;u.iGM(i=u.CRH())&&(r.canvasContainer=i.first),u.iGM(i=u.CRH())&&(r.HTMLBars=i),u.iGM(i=u.CRH())&&(r.HTMLSegments=i)}},hostBindings:function(t,r){1&t&&u.NdJ("keypress",function(a){return r.addKeypress(a)},!1,u.evT)("wheel",function(a){return r.changeToHorizontalScroll(a)})},outputs:{noteSelectedOutput:"noteSelectedOutput"},decls:9,vars:1,consts:[["id","canvas-container",1,"d-flex","align-items-center","py-5"],["canvasContainer",""],["id","editing-tab",1,"d-flex","text-white"],["class","bar d-flex","bar","",3,"ngStyle",4,"ngFor","ngForOf"],["id","add-bar-btn-container",1,"ps-4"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","width","50","height","50","viewBox","0 0 16 16",1,"bi","bi-plus-circle"],["d","M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"],["d","M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"],["bar","",1,"bar","d-flex",3,"ngStyle"],[1,"instrument-strings-container"],["class","instrument-string",4,"ngFor","ngForOf"],[1,"time-signature-container",3,"ngStyle"],[4,"ngIf"],[1,"segments-container","d-flex","h-100"],["tabindex","0","class","segment","segment","",3,"ngStyle","focus",4,"ngFor","ngForOf"],[1,"instrument-string"],["tabindex","0","segment","",1,"segment",3,"ngStyle","focus"],["class","notes-container h-100",4,"ngIf"],["class","rest-container",4,"ngIf"],[1,"notes-container","h-100"],["class","music-note","note","","tabindex","0",3,"ngStyle","focus",4,"ngFor","ngForOf"],["note","","tabindex","0",1,"music-note",3,"ngStyle","focus"],["class","slide-out rounded-pill",3,"ngStyle",4,"ngIf"],["class","slide-in rounded-pill",3,"ngStyle",4,"ngIf"],[1,"slide-out","rounded-pill",3,"ngStyle"],[1,"slide-in","rounded-pill",3,"ngStyle"],[1,"rest-container"],["note","","tabindex","0",1,"rest",3,"focus"],[3,"src"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0,1)(2,"div",2),u.YNc(3,TB,7,6,"div",3),u.qZA(),u.TgZ(4,"div",4)(5,"div",5),u.NdJ("click",function(){return r.addBar()}),u.O4$(),u.TgZ(6,"svg",6),u._UZ(7,"path",7)(8,"path",8),u.qZA()()()()),2&t&&(u.xp6(3),u.Q6J("ngForOf",r.currentTab.bars))},directives:[Pn,HA,_u,Mn,tC,Wk],styles:['#canvas-container[_ngcontent-%COMP%]{box-shadow:0 0 8px #00000040;overflow-x:auto;-ms-overflow-style:none;scrollbar-width:none;cursor:initial;overflow-y:hidden}#canvas-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.bar[_ngcontent-%COMP%]{border-inline:#707070 1px solid;position:relative}.instrument-strings-container[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;z-index:-1}.instrument-string[_ngcontent-%COMP%]{height:2px;width:100%;background-color:#707070;margin-bottom:39.7px}.segment[_ngcontent-%COMP%]{position:relative;height:100%}.segment[_ngcontent-%COMP%]:focus{outline:none}.segment[_ngcontent-%COMP%]:focus:after{content:"";position:absolute;top:0;bottom:0;left:0;right:0;background-color:#bf9c6e4d;outline:none;transform:scaleY(2);z-index:100}span[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{cursor:default}span[_ngcontent-%COMP%]{background-color:#202020;font:500 22pt Barlow Condensed;border-radius:2px;line-height:20px;padding:2.5px;vertical-align:middle;text-align:center;position:absolute;z-index:10;transition:50ms;cursor:pointer;min-width:20px;min-height:28px;display:flex;align-items:center;justify-content:center;transform:translate(-2.5px,-5px)}.slide-out[_ngcontent-%COMP%], .slide-in[_ngcontent-%COMP%]{position:absolute;border-width:2px;border-color:#fff;opacity:.6;margin:0}.rest[_ngcontent-%COMP%]{transition:50ms;margin-right:5px;cursor:pointer}span[_ngcontent-%COMP%]:hover{background-color:#33333380!important}span[_ngcontent-%COMP%]:focus{background-color:#8f734ee6!important;outline:none}.rest[_ngcontent-%COMP%]:focus{background-color:#bf9c6e4d;outline:none}.time-signature-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;max-width:100%}.time-signature-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font:500 60px Barlow Condensed;margin:0;line-height:60px}#add-bar-btn-container[_ngcontent-%COMP%]{min-width:480px}#add-bar-btn-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#999;transition:fill .3s}#add-bar-btn-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:hover{animation:pulse 1s infinite;cursor:pointer;fill:#fff}@keyframes pulse{50%{transform:scale(1.05)}}']}),n})(),IB=(()=>{class n{constructor(t,r){this.el=t,this.editTopbar=r}uncheck(t){this.el.nativeElement.checked&&setTimeout(()=>{this.editTopbar.noteProperties.controls[t.target.name].reset()},100)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(jA))},n.\u0275dir=u.lG2({type:n,selectors:[["","uncheck",""]],hostBindings:function(t,r){1&t&&u.NdJ("mousedown",function(a){return r.uncheck(a)})}}),n})(),SB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[$s,jy,Gb,lI,M_]]}),n})();u.B6R(ak,[nB,Mn,aB,jA,BA,kd,Po,Xu,ff,Ki,ik,CB,rk],[]),u.B6R(ik,[Mn,Pn,HA,_u,tC,Wk],[]),u.B6R(jA,[BA,Mn,tc,Ql,nc,ou,rc,Mg,Po,Xu,iu,pf,Qy,IB,kd,ff],[]);let DB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[x6]}),n.\u0275inj=u.cJS({providers:[],imports:[[Su,lI,I6,M_,AV,SB,$i.hO.initializeApp(Vd_firebase),F2,fS,IU]]}),n})();(0,u.G48)(),Xc().bootstrapModule(DB).catch(n=>console.error(n))},5867:(ot,Ce,N)=>{N.d(Ce,{C6:()=>u.getApps,Mq:()=>u.getApp});var u=N(9681);(0,u.registerVersion)("firebase","9.10.0","app")},127:(ot,Ce,N)=>{N.d(Ce,{Z:()=>u.Z});var u=N(3942);u.Z.registerVersion("firebase","9.10.0","app-compat")},5881:(ot,Ce,N)=>{N.r(Ce);var u=N(5861),V=N(3942),P=N(7143),ae=N(2090),me=(N(9681),N(1877),N(4859));function le(){return window}function G(){return(G=(0,u.Z)(function*(ee,Y,K){var De;const{BuildInfo:Je}=le();(0,P.aq)(Y.sessionId,"AuthEvent did not contain a session ID");const dt=yield Ie(Y.sessionId),Mt={};return(0,P.ar)()?Mt.ibi=Je.packageName:(0,P.as)()?Mt.apn=Je.packageName:(0,P.at)(ee,"operation-not-supported-in-this-environment"),Je.displayName&&(Mt.appDisplayName=Je.displayName),Mt.sessionId=dt,(0,P.au)(ee,K,Y.type,void 0,null!==(De=Y.eventId)&&void 0!==De?De:void 0,Mt)})).apply(this,arguments)}function Ge(){return(Ge=(0,u.Z)(function*(ee){const{BuildInfo:Y}=le(),K={};(0,P.ar)()?K.iosBundleId=Y.packageName:(0,P.as)()?K.androidPackageName=Y.packageName:(0,P.at)(ee,"operation-not-supported-in-this-environment"),yield(0,P.av)(ee,K)})).apply(this,arguments)}function qe(){return(qe=(0,u.Z)(function*(ee,Y,K){const{cordova:De}=le();let Je=()=>{};try{yield new Promise((dt,Mt)=>{let Qt=null;function $t(){var qt;dt();const Fr=null===(qt=De.plugins.browsertab)||void 0===qt?void 0:qt.close;"function"==typeof Fr&&Fr(),"function"==typeof(null==K?void 0:K.close)&&K.close()}function Zn(){Qt||(Qt=window.setTimeout(()=>{Mt((0,P.aw)(ee,"redirect-cancelled-by-user"))},2e3))}function ri(){"visible"===(null==document?void 0:document.visibilityState)&&Zn()}Y.addPassiveListener($t),document.addEventListener("resume",Zn,!1),(0,P.as)()&&document.addEventListener("visibilitychange",ri,!1),Je=()=>{Y.removePassiveListener($t),document.removeEventListener("resume",Zn,!1),document.removeEventListener("visibilitychange",ri,!1),Qt&&window.clearTimeout(Qt)}})}finally{Je()}})).apply(this,arguments)}function Ie(ee){return ze.apply(this,arguments)}function ze(){return(ze=(0,u.Z)(function*(ee){const Y=Ze(ee),K=yield crypto.subtle.digest("SHA-256",Y);return Array.from(new Uint8Array(K)).map(Je=>Je.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ze(ee){if((0,P.aq)(/[0-9a-zA-Z]+/.test(ee),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(ee);const Y=new ArrayBuffer(ee.length),K=new Uint8Array(Y);for(let De=0;De<ee.length;De++)K[De]=ee.charCodeAt(De);return K}class Me extends P.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Y=>{this.resolveInialized=Y})}addPassiveListener(Y){this.passiveListeners.add(Y)}removePassiveListener(Y){this.passiveListeners.delete(Y)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Y){return this.resolveInialized(),this.passiveListeners.forEach(K=>K(Y)),super.onEvent(Y)}initialized(){var Y=this;return(0,u.Z)(function*(){yield Y.initPromise})()}}function ne(ee){return pe.apply(this,arguments)}function pe(){return(pe=(0,u.Z)(function*(ee){const Y=yield re()._get(se(ee));return Y&&(yield re()._remove(se(ee))),Y})).apply(this,arguments)}function Q(){const ee=[],Y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let K=0;K<20;K++){const De=Math.floor(Math.random()*Y.length);ee.push(Y.charAt(De))}return ee.join("")}function re(){return(0,P.ay)(P.b)}function se(ee){return(0,P.az)("authEvent",ee.config.apiKey,ee.name)}function Ue(ee){if(!(null==ee?void 0:ee.includes("?")))return{};const[Y,...K]=ee.split("?");return(0,ae.zd)(K.join("?"))}function Ke(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.aw)("no-auth-event")}}function Ht(){var ee;return(null===(ee=null==self?void 0:self.location)||void 0===ee?void 0:ee.protocol)||null}function Dn(ee=(0,ae.z$)()){return!("file:"!==Ht()&&"ionic:"!==Ht()&&"capacitor:"!==Ht()||!ee.toLowerCase().match(/iphone|ipad|ipod|android/))}function _i(){try{const ee=self.localStorage,Y=P.aI();if(ee)return ee.setItem(Y,"1"),ee.removeItem(Y),!function gs(ee=(0,ae.z$)()){return function Nr(){return(0,ae.w1)()&&11===(null==document?void 0:document.documentMode)}()||function On(ee=(0,ae.z$)()){return/Edge\/\d+/.test(ee)}(ee)}()||(0,ae.hl)()}catch(ee){return Ni()&&(0,ae.hl)()}return!1}function Ni(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Un(){return(function rn(){return"http:"===Ht()||"https:"===Ht()}()||(0,ae.ru)()||Dn())&&!function zi(){return(0,ae.b$)()||(0,ae.UG)()}()&&_i()&&!Ni()}function ms(){return Dn()&&"undefined"!=typeof document}function Rr(){return(Rr=(0,u.Z)(function*(){return!!ms()&&new Promise(ee=>{const Y=setTimeout(()=>{ee(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Y),ee(!0)})})})).apply(this,arguments)}const an={LOCAL:"local",NONE:"none",SESSION:"session"},ir=P.ax,qr="persistence";function xn(ee){return gr.apply(this,arguments)}function gr(){return(gr=(0,u.Z)(function*(ee){yield ee._initializationPromise;const Y=Yt(),K=P.az(qr,ee.config.apiKey,ee.name);Y&&Y.setItem(K,ee._getPersistence())})).apply(this,arguments)}function Yt(){var ee;try{return(null===(ee=function An(){return"undefined"!=typeof window?window:null}())||void 0===ee?void 0:ee.sessionStorage)||null}catch(Y){return null}}const pt=P.ax;class ut{constructor(){this.browserResolver=P.ay(P.k),this.cordovaResolver=P.ay(class en{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize(Y){var K=this;return(0,u.Z)(function*(){const De=Y._key();let Je=K.eventManagers.get(De);return Je||(Je=new Me(Y),K.eventManagers.set(De,Je),K.attachCallbackListeners(Y,Je)),Je})()}_openPopup(Y){(0,P.at)(Y,"operation-not-supported-in-this-environment")}_openRedirect(Y,K,De,Je){var dt=this;return(0,u.Z)(function*(){!function ge(ee){var Y,K,De,Je,dt,Mt,Qt,$t,Zn,ri;const qt=le();(0,P.ax)("function"==typeof(null===(Y=null==qt?void 0:qt.universalLinks)||void 0===Y?void 0:Y.subscribe),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.ax)(void 0!==(null===(K=null==qt?void 0:qt.BuildInfo)||void 0===K?void 0:K.packageName),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.ax)("function"==typeof(null===(dt=null===(Je=null===(De=null==qt?void 0:qt.cordova)||void 0===De?void 0:De.plugins)||void 0===Je?void 0:Je.browsertab)||void 0===dt?void 0:dt.openUrl),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===($t=null===(Qt=null===(Mt=null==qt?void 0:qt.cordova)||void 0===Mt?void 0:Mt.plugins)||void 0===Qt?void 0:Qt.browsertab)||void 0===$t?void 0:$t.isAvailable),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(ri=null===(Zn=null==qt?void 0:qt.cordova)||void 0===Zn?void 0:Zn.InAppBrowser)||void 0===ri?void 0:ri.open),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Y);const Mt=yield dt._initialize(Y);yield Mt.initialized(),Mt.resetRedirect(),(0,P.aD)(),yield dt._originValidation(Y);const Qt=function Se(ee,Y,K=null){return{type:Y,eventId:K,urlResponse:null,sessionId:Q(),postBody:null,tenantId:ee.tenantId,error:(0,P.aw)(ee,"no-auth-event")}}(Y,De,Je);yield function We(ee,Y){return re()._set(se(ee),Y)}(Y,Qt);const $t=yield function Z(ee,Y,K){return G.apply(this,arguments)}(Y,Qt,K),Zn=yield function Oe(ee){const{cordova:Y}=le();return new Promise(K=>{Y.plugins.browsertab.isAvailable(De=>{let Je=null;De?Y.plugins.browsertab.openUrl(ee):Je=Y.InAppBrowser.open(ee,(0,P.ap)()?"_blank":"_system","location=yes"),K(Je)})})}($t);return function Le(ee,Y,K){return qe.apply(this,arguments)}(Y,Mt,Zn)})()}_isIframeWebStorageSupported(Y,K){throw new Error("Method not implemented.")}_originValidation(Y){const K=Y._key();return this.originValidationPromises[K]||(this.originValidationPromises[K]=function ie(ee){return Ge.apply(this,arguments)}(Y)),this.originValidationPromises[K]}attachCallbackListeners(Y,K){const{universalLinks:De,handleOpenURL:Je,BuildInfo:dt}=le(),Mt=setTimeout((0,u.Z)(function*(){yield ne(Y),K.onEvent(Ke())}),500),Qt=function(){var ri=(0,u.Z)(function*(qt){clearTimeout(Mt);const Fr=yield ne(Y);let Wi=null;Fr&&(null==qt?void 0:qt.url)&&(Wi=function Ee(ee,Y){var K,De;const Je=function ce(ee){const Y=Ue(ee),K=Y.link?decodeURIComponent(Y.link):void 0,De=Ue(K).link,Je=Y.deep_link_id?decodeURIComponent(Y.deep_link_id):void 0;return Ue(Je).link||Je||De||K||ee}(Y);if(Je.includes("/__/auth/callback")){const dt=Ue(Je),Mt=dt.firebaseError?function _e(ee){try{return JSON.parse(ee)}catch(Y){return null}}(decodeURIComponent(dt.firebaseError)):null,Qt=null===(De=null===(K=null==Mt?void 0:Mt.code)||void 0===K?void 0:K.split("auth/"))||void 0===De?void 0:De[1],$t=Qt?(0,P.aw)(Qt):null;return $t?{type:ee.type,eventId:ee.eventId,tenantId:ee.tenantId,error:$t,urlResponse:null,sessionId:null,postBody:null}:{type:ee.type,eventId:ee.eventId,tenantId:ee.tenantId,sessionId:ee.sessionId,urlResponse:Je,postBody:null}}return null}(Fr,qt.url)),K.onEvent(Wi||Ke())});return function(Fr){return ri.apply(this,arguments)}}();void 0!==De&&"function"==typeof De.subscribe&&De.subscribe(null,Qt);const $t=Je,Zn=`${dt.packageName.toLowerCase()}://`;le().handleOpenURL=function(){var ri=(0,u.Z)(function*(qt){if(qt.toLowerCase().startsWith(Zn)&&Qt({url:qt}),"function"==typeof $t)try{$t(qt)}catch(Fr){console.error(Fr)}});return function(qt){return ri.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize(Y){var K=this;return(0,u.Z)(function*(){return yield K.selectUnderlyingResolver(),K.assertedUnderlyingResolver._initialize(Y)})()}_openPopup(Y,K,De,Je){var dt=this;return(0,u.Z)(function*(){return yield dt.selectUnderlyingResolver(),dt.assertedUnderlyingResolver._openPopup(Y,K,De,Je)})()}_openRedirect(Y,K,De,Je){var dt=this;return(0,u.Z)(function*(){return yield dt.selectUnderlyingResolver(),dt.assertedUnderlyingResolver._openRedirect(Y,K,De,Je)})()}_isIframeWebStorageSupported(Y,K){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Y,K)}_originValidation(Y){return this.assertedUnderlyingResolver._originValidation(Y)}get _shouldInitProactively(){return ms()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return pt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Y=this;return(0,u.Z)(function*(){if(Y.underlyingResolver)return;const K=yield function wt(){return Rr.apply(this,arguments)}();Y.underlyingResolver=K?Y.cordovaResolver:Y.browserResolver})()}}function vi(ee){return ee.unwrap()}function zt(ee){return Vn(ee)}function Vn(ee){const{_tokenResponse:Y}=ee instanceof ae.ZR?ee.customData:ee;if(!Y)return null;if(!(ee instanceof ae.ZR)&&"temporaryProof"in Y&&"phoneNumber"in Y)return P.P.credentialFromResult(ee);const K=Y.providerId;if(!K||K===P.o.PASSWORD)return null;let De;switch(K){case P.o.GOOGLE:De=P.Q;break;case P.o.FACEBOOK:De=P.N;break;case P.o.GITHUB:De=P.T;break;case P.o.TWITTER:De=P.W;break;default:const{oauthIdToken:Je,oauthAccessToken:dt,oauthTokenSecret:Mt,pendingToken:Qt,nonce:$t}=Y;return dt||Mt||Je||Qt?Qt?K.startsWith("saml.")?P.aL._create(K,Qt):P.J._fromParams({providerId:K,signInMethod:K,pendingToken:Qt,idToken:Je,accessToken:dt}):new P.U(K).credential({idToken:Je,accessToken:dt,rawNonce:$t}):null}return ee instanceof ae.ZR?De.credentialFromError(ee):De.credentialFromResult(ee)}function mn(ee,Y){return Y.catch(K=>{throw K instanceof ae.ZR&&function Ri(ee,Y){var K,De;const Je=null===(K=Y.customData)||void 0===K?void 0:K._tokenResponse;if("auth/multi-factor-auth-required"===(null===(De=Y)||void 0===De?void 0:De.code))Y.resolver=new z(ee,P.an(ee,Y));else if(Je){const dt=Vn(Y),Mt=Y;dt&&(Mt.credential=dt,Mt.tenantId=Je.tenantId||void 0,Mt.email=Je.email||void 0,Mt.phoneNumber=Je.phoneNumber||void 0)}}(ee,K),K}).then(K=>{const Je=K.user;return{operationType:K.operationType,credential:zt(K),additionalUserInfo:P.al(K),user:H.getOrCreate(Je)}})}function gt(ee,Y){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,u.Z)(function*(ee,Y){const K=yield Y;return{verificationId:K.verificationId,confirm:De=>mn(ee,K.confirm(De))}})).apply(this,arguments)}class z{constructor(Y,K){this.resolver=K,this.auth=function bi(ee){return ee.wrapped()}(Y)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Y){return mn(vi(this.auth),this.resolver.resolveSignIn(Y))}}class H{constructor(Y){this._delegate=Y,this.multiFactor=P.ao(Y)}static getOrCreate(Y){return H.USER_MAP.has(Y)||H.USER_MAP.set(Y,new H(Y)),H.USER_MAP.get(Y)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Y){return this._delegate.getIdTokenResult(Y)}getIdToken(Y){return this._delegate.getIdToken(Y)}linkAndRetrieveDataWithCredential(Y){return this.linkWithCredential(Y)}linkWithCredential(Y){var K=this;return(0,u.Z)(function*(){return mn(K.auth,P.Z(K._delegate,Y))})()}linkWithPhoneNumber(Y,K){var De=this;return(0,u.Z)(function*(){return gt(De.auth,P.l(De._delegate,Y,K))})()}linkWithPopup(Y){var K=this;return(0,u.Z)(function*(){return mn(K.auth,P.d(K._delegate,Y,ut))})()}linkWithRedirect(Y){var K=this;return(0,u.Z)(function*(){return yield xn(P.aE(K.auth)),P.g(K._delegate,Y,ut)})()}reauthenticateAndRetrieveDataWithCredential(Y){return this.reauthenticateWithCredential(Y)}reauthenticateWithCredential(Y){var K=this;return(0,u.Z)(function*(){return mn(K.auth,P._(K._delegate,Y))})()}reauthenticateWithPhoneNumber(Y,K){return gt(this.auth,P.r(this._delegate,Y,K))}reauthenticateWithPopup(Y){return mn(this.auth,P.e(this._delegate,Y,ut))}reauthenticateWithRedirect(Y){var K=this;return(0,u.Z)(function*(){return yield xn(P.aE(K.auth)),P.h(K._delegate,Y,ut)})()}sendEmailVerification(Y){return P.ab(this._delegate,Y)}unlink(Y){var K=this;return(0,u.Z)(function*(){return yield P.ak(K._delegate,Y),K})()}updateEmail(Y){return P.ag(this._delegate,Y)}updatePassword(Y){return P.ah(this._delegate,Y)}updatePhoneNumber(Y){return P.u(this._delegate,Y)}updateProfile(Y){return P.af(this._delegate,Y)}verifyBeforeUpdateEmail(Y,K){return P.ac(this._delegate,Y,K)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}H.USER_MAP=new WeakMap;const B=P.ax;let $=(()=>{class ee{constructor(K,De){if(this.app=K,De.isInitialized())return this._delegate=De.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Je}=K.options;B(Je,"invalid-api-key",{appName:K.name}),B(Je,"invalid-api-key",{appName:K.name});const dt="undefined"!=typeof window?ut:void 0;this._delegate=De.initialize({options:{persistence:xe(Je,K.name),popupRedirectResolver:dt}}),this._delegate._updateErrorMap(P.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?H.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(K){this._delegate.languageCode=K}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(K){this._delegate.tenantId=K}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(K,De){P.G(this._delegate,K,De)}applyActionCode(K){return P.a2(this._delegate,K)}checkActionCode(K){return P.a3(this._delegate,K)}confirmPasswordReset(K,De){return P.a1(this._delegate,K,De)}createUserWithEmailAndPassword(K,De){var Je=this;return(0,u.Z)(function*(){return mn(Je._delegate,P.a5(Je._delegate,K,De))})()}fetchProvidersForEmail(K){return this.fetchSignInMethodsForEmail(K)}fetchSignInMethodsForEmail(K){return P.aa(this._delegate,K)}isSignInWithEmailLink(K){return P.a8(this._delegate,K)}getRedirectResult(){var K=this;return(0,u.Z)(function*(){B(Un(),K._delegate,"operation-not-supported-in-this-environment");const De=yield P.j(K._delegate,ut);return De?mn(K._delegate,Promise.resolve(De)):{credential:null,user:null}})()}addFrameworkForLogging(K){!function hn(ee,Y){(0,P.aE)(ee)._logFramework(Y)}(this._delegate,K)}onAuthStateChanged(K,De,Je){const{next:dt,error:Mt,complete:Qt}=W(K,De,Je);return this._delegate.onAuthStateChanged(dt,Mt,Qt)}onIdTokenChanged(K,De,Je){const{next:dt,error:Mt,complete:Qt}=W(K,De,Je);return this._delegate.onIdTokenChanged(dt,Mt,Qt)}sendSignInLinkToEmail(K,De){return P.a7(this._delegate,K,De)}sendPasswordResetEmail(K,De){return P.a0(this._delegate,K,De||void 0)}setPersistence(K){var De=this;return(0,u.Z)(function*(){let Je;switch(function pr(ee,Y){ir(Object.values(an).includes(Y),ee,"invalid-persistence-type"),(0,ae.b$)()?ir(Y!==an.SESSION,ee,"unsupported-persistence-type"):(0,ae.UG)()?ir(Y===an.NONE,ee,"unsupported-persistence-type"):Ni()?ir(Y===an.NONE||Y===an.LOCAL&&(0,ae.hl)(),ee,"unsupported-persistence-type"):ir(Y===an.NONE||_i(),ee,"unsupported-persistence-type")}(De._delegate,K),K){case an.SESSION:Je=P.a;break;case an.LOCAL:Je=(yield P.ay(P.i)._isAvailable())?P.i:P.b;break;case an.NONE:Je=P.L;break;default:return P.at("argument-error",{appName:De._delegate.name})}return De._delegate.setPersistence(Je)})()}signInAndRetrieveDataWithCredential(K){return this.signInWithCredential(K)}signInAnonymously(){return mn(this._delegate,P.X(this._delegate))}signInWithCredential(K){return mn(this._delegate,P.Y(this._delegate,K))}signInWithCustomToken(K){return mn(this._delegate,P.$(this._delegate,K))}signInWithEmailAndPassword(K,De){return mn(this._delegate,P.a6(this._delegate,K,De))}signInWithEmailLink(K,De){return mn(this._delegate,P.a9(this._delegate,K,De))}signInWithPhoneNumber(K,De){return gt(this._delegate,P.s(this._delegate,K,De))}signInWithPopup(K){var De=this;return(0,u.Z)(function*(){return B(Un(),De._delegate,"operation-not-supported-in-this-environment"),mn(De._delegate,P.c(De._delegate,K,ut))})()}signInWithRedirect(K){var De=this;return(0,u.Z)(function*(){return B(Un(),De._delegate,"operation-not-supported-in-this-environment"),yield xn(De._delegate),P.f(De._delegate,K,ut)})()}updateCurrentUser(K){return this._delegate.updateCurrentUser(K)}verifyPasswordResetCode(K){return P.a4(this._delegate,K)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ee.Persistence=an,ee})();function W(ee,Y,K){let De=ee;"function"!=typeof ee&&({next:De,error:Y,complete:K}=ee);const Je=De;return{next:Mt=>Je(Mt&&H.getOrCreate(Mt)),error:Y,complete:K}}function xe(ee,Y){const K=function Vs(ee,Y){const K=Yt();if(!K)return[];const De=P.az(qr,ee,Y);switch(K.getItem(De)){case an.NONE:return[P.L];case an.LOCAL:return[P.i,P.a];case an.SESSION:return[P.a];default:return[]}}(ee,Y);if("undefined"!=typeof self&&!K.includes(P.i)&&K.push(P.i),"undefined"!=typeof window)for(const De of[P.b,P.a])K.includes(De)||K.push(De);return K.includes(P.L)||K.push(P.L),K}class He{constructor(){this.providerId="phone",this._delegate=new P.P(vi(V.Z.auth()))}static credential(Y,K){return P.P.credential(Y,K)}verifyPhoneNumber(Y,K){return this._delegate.verifyPhoneNumber(Y,K)}unwrap(){return this._delegate}}He.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,He.PROVIDER_ID=P.P.PROVIDER_ID;const It=P.ax;class sn{constructor(Y,K,De=V.Z.app()){var Je;It(null===(Je=De.options)||void 0===Je?void 0:Je.apiKey,"invalid-api-key",{appName:De.name}),this._delegate=new P.R(Y,K,De.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function sr(ee){ee.INTERNAL.registerComponent(new me.wA("auth-compat",Y=>{const K=Y.getProvider("app-compat").getImmediate(),De=Y.getProvider("auth");return new $(K,De)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.M,FacebookAuthProvider:P.N,GithubAuthProvider:P.T,GoogleAuthProvider:P.Q,OAuthProvider:P.U,SAMLAuthProvider:P.V,PhoneAuthProvider:He,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:sn,TwitterAuthProvider:P.W,Auth:$,AuthCredential:P.H,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ee.registerVersion("@firebase/auth-compat","0.2.20")}(V.Z)},8306:(ot,Ce,N)=>{N.d(Ce,{y:()=>Z});var u=N(2961),V=N(727),P=N(8822),ae=N(4671);var me=N(2416),le=N(576),ve=N(2806);let Z=(()=>{class Oe{constructor(qe){qe&&(this._subscribe=qe)}lift(qe){const ge=new Oe;return ge.source=this,ge.operator=qe,ge}subscribe(qe,ge,Ie){const ze=function Ge(Oe){return Oe&&Oe instanceof u.Lv||function ie(Oe){return Oe&&(0,le.m)(Oe.next)&&(0,le.m)(Oe.error)&&(0,le.m)(Oe.complete)}(Oe)&&(0,V.Nn)(Oe)}(qe)?qe:new u.Hp(qe,ge,Ie);return(0,ve.x)(()=>{const{operator:Ze,source:Re}=this;ze.add(Ze?Ze.call(ze,Re):Re?this._subscribe(ze):this._trySubscribe(ze))}),ze}_trySubscribe(qe){try{return this._subscribe(qe)}catch(ge){qe.error(ge)}}forEach(qe,ge){return new(ge=G(ge))((Ie,ze)=>{const Ze=new u.Hp({next:Re=>{try{qe(Re)}catch(Me){ze(Me),Ze.unsubscribe()}},error:ze,complete:Ie});this.subscribe(Ze)})}_subscribe(qe){var ge;return null===(ge=this.source)||void 0===ge?void 0:ge.subscribe(qe)}[P.L](){return this}pipe(...qe){return function ye(Oe){return 0===Oe.length?ae.y:1===Oe.length?Oe[0]:function(qe){return Oe.reduce((ge,Ie)=>Ie(ge),qe)}}(qe)(this)}toPromise(qe){return new(qe=G(qe))((ge,Ie)=>{let ze;this.subscribe(Ze=>ze=Ze,Ze=>Ie(Ze),()=>ge(ze))})}}return Oe.create=Le=>new Oe(Le),Oe})();function G(Oe){var Le;return null!==(Le=null!=Oe?Oe:me.v.Promise)&&void 0!==Le?Le:Promise}},7579:(ot,Ce,N)=>{N.d(Ce,{x:()=>me});var u=N(8306),V=N(727);const ae=(0,N(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=N(8737),ye=N(2806);let me=(()=>{class ve extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const ie=new le(this,this);return ie.operator=G,ie}_throwIfClosed(){if(this.closed)throw new ae}next(G){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ie of this.currentObservers)ie.next(G)}})}error(G){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:ie}=this;for(;ie.length;)ie.shift().error(G)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:ie,isStopped:Ge,observers:Oe}=this;return ie||Ge?V.Lc:(this.currentObservers=null,Oe.push(G),new V.w0(()=>{this.currentObservers=null,(0,de.P)(Oe,G)}))}_checkFinalizedStatuses(G){const{hasError:ie,thrownError:Ge,isStopped:Oe}=this;ie?G.error(Ge):Oe&&G.complete()}asObservable(){const G=new u.y;return G.source=this,G}}return ve.create=(Z,G)=>new le(Z,G),ve})();class le extends me{constructor(Z,G){super(),this.destination=Z,this.source=G}next(Z){var G,ie;null===(ie=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===ie||ie.call(G,Z)}error(Z){var G,ie;null===(ie=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===ie||ie.call(G,Z)}complete(){var Z,G;null===(G=null===(Z=this.destination)||void 0===Z?void 0:Z.complete)||void 0===G||G.call(Z)}_subscribe(Z){var G,ie;return null!==(ie=null===(G=this.source)||void 0===G?void 0:G.subscribe(Z))&&void 0!==ie?ie:V.Lc}}},2961:(ot,Ce,N)=>{N.d(Ce,{Hp:()=>qe,Lv:()=>ie});var u=N(576),V=N(727),P=N(2416),ae=N(7849);function de(){}const ye=ve("C",void 0,void 0);function ve(Re,Me,Se){return{kind:Re,value:Me,error:Se}}var Z=N(3410),G=N(2806);class ie extends V.w0{constructor(Me){super(),this.isStopped=!1,Me?(this.destination=Me,(0,V.Nn)(Me)&&Me.add(this)):this.destination=Ze}static create(Me,Se,We){return new qe(Me,Se,We)}next(Me){this.isStopped?ze(function le(Re){return ve("N",Re,void 0)}(Me),this):this._next(Me)}error(Me){this.isStopped?ze(function me(Re){return ve("E",void 0,Re)}(Me),this):(this.isStopped=!0,this._error(Me))}complete(){this.isStopped?ze(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Me){this.destination.next(Me)}_error(Me){try{this.destination.error(Me)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Oe(Re,Me){return Ge.call(Re,Me)}class Le{constructor(Me){this.partialObserver=Me}next(Me){const{partialObserver:Se}=this;if(Se.next)try{Se.next(Me)}catch(We){ge(We)}}error(Me){const{partialObserver:Se}=this;if(Se.error)try{Se.error(Me)}catch(We){ge(We)}else ge(Me)}complete(){const{partialObserver:Me}=this;if(Me.complete)try{Me.complete()}catch(Se){ge(Se)}}}class qe extends ie{constructor(Me,Se,We){let ne;if(super(),(0,u.m)(Me)||!Me)ne={next:null!=Me?Me:void 0,error:null!=Se?Se:void 0,complete:null!=We?We:void 0};else{let pe;this&&P.v.useDeprecatedNextContext?(pe=Object.create(Me),pe.unsubscribe=()=>this.unsubscribe(),ne={next:Me.next&&Oe(Me.next,pe),error:Me.error&&Oe(Me.error,pe),complete:Me.complete&&Oe(Me.complete,pe)}):ne=Me}this.destination=new Le(ne)}}function ge(Re){P.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Re):(0,ae.h)(Re)}function ze(Re,Me){const{onStoppedNotification:Se}=P.v;Se&&Z.z.setTimeout(()=>Se(Re,Me))}const Ze={closed:!0,next:de,error:function Ie(Re){throw Re},complete:de}},727:(ot,Ce,N)=>{N.d(Ce,{Lc:()=>ye,w0:()=>de,Nn:()=>me});var u=N(576);const P=(0,N(3888).d)(ve=>function(G){ve(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((ie,Ge)=>`${Ge+1}) ${ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var ae=N(8737);class de{constructor(Z){this.initialTeardown=Z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Z;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Oe of G)Oe.remove(this);else G.remove(this);const{initialTeardown:ie}=this;if((0,u.m)(ie))try{ie()}catch(Oe){Z=Oe instanceof P?Oe.errors:[Oe]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Oe of Ge)try{le(Oe)}catch(Le){Z=null!=Z?Z:[],Le instanceof P?Z=[...Z,...Le.errors]:Z.push(Le)}}if(Z)throw new P(Z)}}add(Z){var G;if(Z&&Z!==this)if(this.closed)le(Z);else{if(Z instanceof de){if(Z.closed||Z._hasParent(this))return;Z._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(Z)}}_hasParent(Z){const{_parentage:G}=this;return G===Z||Array.isArray(G)&&G.includes(Z)}_addParent(Z){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(Z),G):G?[G,Z]:Z}_removeParent(Z){const{_parentage:G}=this;G===Z?this._parentage=null:Array.isArray(G)&&(0,ae.P)(G,Z)}remove(Z){const{_finalizers:G}=this;G&&(0,ae.P)(G,Z),Z instanceof de&&Z._removeParent(this)}}de.EMPTY=(()=>{const ve=new de;return ve.closed=!0,ve})();const ye=de.EMPTY;function me(ve){return ve instanceof de||ve&&"closed"in ve&&(0,u.m)(ve.remove)&&(0,u.m)(ve.add)&&(0,u.m)(ve.unsubscribe)}function le(ve){(0,u.m)(ve)?ve():ve.unsubscribe()}},2416:(ot,Ce,N)=>{N.d(Ce,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ot,Ce,N)=>{N.d(Ce,{E:()=>V});const V=new(N(8306).y)(de=>de.complete())},8996:(ot,Ce,N)=>{N.d(Ce,{D:()=>Me});var u=N(8421),V=N(5363),P=N(9468),ye=N(8306),le=N(2202),ve=N(576),Z=N(9672);function ie(Se,We){if(!Se)throw new Error("Iterable cannot be null");return new ye.y(ne=>{(0,Z.f)(ne,We,()=>{const pe=Se[Symbol.asyncIterator]();(0,Z.f)(ne,We,()=>{pe.next().then(Ee=>{Ee.done?ne.complete():ne.next(Ee.value)})},0,!0)})})}var Ge=N(3670),Oe=N(8239),Le=N(1144),qe=N(6495),ge=N(2206),Ie=N(4532),ze=N(3260);function Me(Se,We){return We?function Re(Se,We){if(null!=Se){if((0,Ge.c)(Se))return function ae(Se,We){return(0,u.Xf)(Se).pipe((0,P.R)(We),(0,V.Q)(We))}(Se,We);if((0,Le.z)(Se))return function me(Se,We){return new ye.y(ne=>{let pe=0;return We.schedule(function(){pe===Se.length?ne.complete():(ne.next(Se[pe++]),ne.closed||this.schedule())})})}(Se,We);if((0,Oe.t)(Se))return function de(Se,We){return(0,u.Xf)(Se).pipe((0,P.R)(We),(0,V.Q)(We))}(Se,We);if((0,ge.D)(Se))return ie(Se,We);if((0,qe.T)(Se))return function G(Se,We){return new ye.y(ne=>{let pe;return(0,Z.f)(ne,We,()=>{pe=Se[le.h](),(0,Z.f)(ne,We,()=>{let Ee,Q;try{({value:Ee,done:Q}=pe.next())}catch(re){return void ne.error(re)}Q?ne.complete():ne.next(Ee)},0,!0)}),()=>(0,ve.m)(null==pe?void 0:pe.return)&&pe.return()})}(Se,We);if((0,ze.L)(Se))return function Ze(Se,We){return ie((0,ze.Q)(Se),We)}(Se,We)}throw(0,Ie.z)(Se)}(Se,We):(0,u.Xf)(Se)}},8421:(ot,Ce,N)=>{N.d(Ce,{Xf:()=>Ge});var u=N(655),V=N(1144),P=N(8239),ae=N(8306),de=N(3670),ye=N(2206),me=N(4532),le=N(6495),ve=N(3260),Z=N(576),G=N(7849),ie=N(8822);function Ge(Re){if(Re instanceof ae.y)return Re;if(null!=Re){if((0,de.c)(Re))return function Oe(Re){return new ae.y(Me=>{const Se=Re[ie.L]();if((0,Z.m)(Se.subscribe))return Se.subscribe(Me);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Re);if((0,V.z)(Re))return function Le(Re){return new ae.y(Me=>{for(let Se=0;Se<Re.length&&!Me.closed;Se++)Me.next(Re[Se]);Me.complete()})}(Re);if((0,P.t)(Re))return function qe(Re){return new ae.y(Me=>{Re.then(Se=>{Me.closed||(Me.next(Se),Me.complete())},Se=>Me.error(Se)).then(null,G.h)})}(Re);if((0,ye.D)(Re))return Ie(Re);if((0,le.T)(Re))return function ge(Re){return new ae.y(Me=>{for(const Se of Re)if(Me.next(Se),Me.closed)return;Me.complete()})}(Re);if((0,ve.L)(Re))return function ze(Re){return Ie((0,ve.Q)(Re))}(Re)}throw(0,me.z)(Re)}function Ie(Re){return new ae.y(Me=>{(function Ze(Re,Me){var Se,We,ne,pe;return(0,u.mG)(this,void 0,void 0,function*(){try{for(Se=(0,u.KL)(Re);!(We=yield Se.next()).done;)if(Me.next(We.value),Me.closed)return}catch(Ee){ne={error:Ee}}finally{try{We&&!We.done&&(pe=Se.return)&&(yield pe.call(Se))}finally{if(ne)throw ne.error}}Me.complete()})})(Re,Me).catch(Se=>Me.error(Se))})}},6451:(ot,Ce,N)=>{N.d(Ce,{T:()=>ye});var u=N(8189),V=N(8421),P=N(515),ae=N(3269),de=N(8996);function ye(...me){const le=(0,ae.yG)(me),ve=(0,ae._6)(me,1/0),Z=me;return Z.length?1===Z.length?(0,V.Xf)(Z[0]):(0,u.J)(ve)((0,de.D)(Z,le)):P.E}},5403:(ot,Ce,N)=>{N.d(Ce,{x:()=>V});var u=N(2961);function V(ae,de,ye,me,le){return new P(ae,de,ye,me,le)}class P extends u.Lv{constructor(de,ye,me,le,ve,Z){super(de),this.onFinalize=ve,this.shouldUnsubscribe=Z,this._next=ye?function(G){try{ye(G)}catch(ie){de.error(ie)}}:super._next,this._error=le?function(G){try{le(G)}catch(ie){de.error(ie)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(G){de.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}}},4004:(ot,Ce,N)=>{N.d(Ce,{U:()=>P});var u=N(4482),V=N(5403);function P(ae,de){return(0,u.e)((ye,me)=>{let le=0;ye.subscribe((0,V.x)(me,ve=>{me.next(ae.call(de,ve,le++))}))})}},8189:(ot,Ce,N)=>{N.d(Ce,{J:()=>P});var u=N(5577),V=N(4671);function P(ae=1/0){return(0,u.z)(V.y,ae)}},5577:(ot,Ce,N)=>{N.d(Ce,{z:()=>le});var u=N(4004),V=N(8421),P=N(4482),ae=N(9672),de=N(5403),me=N(576);function le(ve,Z,G=1/0){return(0,me.m)(Z)?le((ie,Ge)=>(0,u.U)((Oe,Le)=>Z(ie,Oe,Ge,Le))((0,V.Xf)(ve(ie,Ge))),G):("number"==typeof Z&&(G=Z),(0,P.e)((ie,Ge)=>function ye(ve,Z,G,ie,Ge,Oe,Le,qe){const ge=[];let Ie=0,ze=0,Ze=!1;const Re=()=>{Ze&&!ge.length&&!Ie&&Z.complete()},Me=We=>Ie<ie?Se(We):ge.push(We),Se=We=>{Oe&&Z.next(We),Ie++;let ne=!1;(0,V.Xf)(G(We,ze++)).subscribe((0,de.x)(Z,pe=>{null==Ge||Ge(pe),Oe?Me(pe):Z.next(pe)},()=>{ne=!0},void 0,()=>{if(ne)try{for(Ie--;ge.length&&Ie<ie;){const pe=ge.shift();Le?(0,ae.f)(Z,Le,()=>Se(pe)):Se(pe)}Re()}catch(pe){Z.error(pe)}}))};return ve.subscribe((0,de.x)(Z,Me,()=>{Ze=!0,Re()})),()=>{null==qe||qe()}}(ie,Ge,ve,G)))}},5363:(ot,Ce,N)=>{N.d(Ce,{Q:()=>ae});var u=N(9672),V=N(4482),P=N(5403);function ae(de,ye=0){return(0,V.e)((me,le)=>{me.subscribe((0,P.x)(le,ve=>(0,u.f)(le,de,()=>le.next(ve),ye),()=>(0,u.f)(le,de,()=>le.complete(),ye),ve=>(0,u.f)(le,de,()=>le.error(ve),ye)))})}},3099:(ot,Ce,N)=>{N.d(Ce,{B:()=>de});var u=N(8421),V=N(7579),P=N(2961),ae=N(4482);function de(me={}){const{connector:le=(()=>new V.x),resetOnError:ve=!0,resetOnComplete:Z=!0,resetOnRefCountZero:G=!0}=me;return ie=>{let Ge,Oe,Le,qe=0,ge=!1,Ie=!1;const ze=()=>{null==Oe||Oe.unsubscribe(),Oe=void 0},Ze=()=>{ze(),Ge=Le=void 0,ge=Ie=!1},Re=()=>{const Me=Ge;Ze(),null==Me||Me.unsubscribe()};return(0,ae.e)((Me,Se)=>{qe++,!Ie&&!ge&&ze();const We=Le=null!=Le?Le:le();Se.add(()=>{qe--,0===qe&&!Ie&&!ge&&(Oe=ye(Re,G))}),We.subscribe(Se),!Ge&&qe>0&&(Ge=new P.Hp({next:ne=>We.next(ne),error:ne=>{Ie=!0,ze(),Oe=ye(Ze,ve,ne),We.error(ne)},complete:()=>{ge=!0,ze(),Oe=ye(Ze,Z),We.complete()}}),(0,u.Xf)(Me).subscribe(Ge))})(ie)}}function ye(me,le,...ve){if(!0===le)return void me();if(!1===le)return;const Z=new P.Hp({next:()=>{Z.unsubscribe(),me()}});return le(...ve).subscribe(Z)}},9468:(ot,Ce,N)=>{N.d(Ce,{R:()=>V});var u=N(4482);function V(P,ae=0){return(0,u.e)((de,ye)=>{ye.add(P.schedule(()=>de.subscribe(ye),ae))})}},8505:(ot,Ce,N)=>{N.d(Ce,{b:()=>de});var u=N(576),V=N(4482),P=N(5403),ae=N(4671);function de(ye,me,le){const ve=(0,u.m)(ye)||me||le?{next:ye,error:me,complete:le}:ye;return ve?(0,V.e)((Z,G)=>{var ie;null===(ie=ve.subscribe)||void 0===ie||ie.call(ve);let Ge=!0;Z.subscribe((0,P.x)(G,Oe=>{var Le;null===(Le=ve.next)||void 0===Le||Le.call(ve,Oe),G.next(Oe)},()=>{var Oe;Ge=!1,null===(Oe=ve.complete)||void 0===Oe||Oe.call(ve),G.complete()},Oe=>{var Le;Ge=!1,null===(Le=ve.error)||void 0===Le||Le.call(ve,Oe),G.error(Oe)},()=>{var Oe,Le;Ge&&(null===(Oe=ve.unsubscribe)||void 0===Oe||Oe.call(ve)),null===(Le=ve.finalize)||void 0===Le||Le.call(ve)}))}):ae.y}},4408:(ot,Ce,N)=>{N.d(Ce,{o:()=>de});var u=N(727);class V extends u.w0{constructor(me,le){super()}schedule(me,le=0){return this}}const P={setInterval(ye,me,...le){const{delegate:ve}=P;return(null==ve?void 0:ve.setInterval)?ve.setInterval(ye,me,...le):setInterval(ye,me,...le)},clearInterval(ye){const{delegate:me}=P;return((null==me?void 0:me.clearInterval)||clearInterval)(ye)},delegate:void 0};var ae=N(8737);class de extends V{constructor(me,le){super(me,le),this.scheduler=me,this.work=le,this.pending=!1}schedule(me,le=0){if(this.closed)return this;this.state=me;const ve=this.id,Z=this.scheduler;return null!=ve&&(this.id=this.recycleAsyncId(Z,ve,le)),this.pending=!0,this.delay=le,this.id=this.id||this.requestAsyncId(Z,this.id,le),this}requestAsyncId(me,le,ve=0){return P.setInterval(me.flush.bind(me,this),ve)}recycleAsyncId(me,le,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return le;P.clearInterval(le)}execute(me,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(me,le);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,le){let Z,ve=!1;try{this.work(me)}catch(G){ve=!0,Z=G||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),Z}unsubscribe(){if(!this.closed){const{id:me,scheduler:le}=this,{actions:ve}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(ve,this),null!=me&&(this.id=this.recycleAsyncId(le,me,null)),this.delay=null,super.unsubscribe()}}}},7565:(ot,Ce,N)=>{N.d(Ce,{v:()=>P});var u=N(6063);class V{constructor(de,ye=V.now){this.schedulerActionCtor=de,this.now=ye}schedule(de,ye=0,me){return new this.schedulerActionCtor(this,de).schedule(me,ye)}}V.now=u.l.now;class P extends V{constructor(de,ye=V.now){super(de,ye),this.actions=[],this._active=!1,this._scheduled=void 0}flush(de){const{actions:ye}=this;if(this._active)return void ye.push(de);let me;this._active=!0;do{if(me=de.execute(de.state,de.delay))break}while(de=ye.shift());if(this._active=!1,me){for(;de=ye.shift();)de.unsubscribe();throw me}}}},4986:(ot,Ce,N)=>{N.d(Ce,{P:()=>ae,z:()=>P});var u=N(4408);const P=new(N(7565).v)(u.o),ae=P},6063:(ot,Ce,N)=>{N.d(Ce,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},3410:(ot,Ce,N)=>{N.d(Ce,{z:()=>u});const u={setTimeout(V,P,...ae){const{delegate:de}=u;return(null==de?void 0:de.setTimeout)?de.setTimeout(V,P,...ae):setTimeout(V,P,...ae)},clearTimeout(V){const{delegate:P}=u;return((null==P?void 0:P.clearTimeout)||clearTimeout)(V)},delegate:void 0}},2202:(ot,Ce,N)=>{N.d(Ce,{h:()=>V});const V=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ot,Ce,N)=>{N.d(Ce,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ot,Ce,N)=>{N.d(Ce,{_6:()=>ye,jO:()=>ae,yG:()=>de});var u=N(576),V=N(3532);function P(me){return me[me.length-1]}function ae(me){return(0,u.m)(P(me))?me.pop():void 0}function de(me){return(0,V.K)(P(me))?me.pop():void 0}function ye(me,le){return"number"==typeof P(me)?me.pop():le}},8737:(ot,Ce,N)=>{function u(V,P){if(V){const ae=V.indexOf(P);0<=ae&&V.splice(ae,1)}}N.d(Ce,{P:()=>u})},3888:(ot,Ce,N)=>{function u(V){const ae=V(de=>{Error.call(de),de.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}N.d(Ce,{d:()=>u})},2806:(ot,Ce,N)=>{N.d(Ce,{O:()=>ae,x:()=>P});var u=N(2416);let V=null;function P(de){if(u.v.useDeprecatedSynchronousErrorHandling){const ye=!V;if(ye&&(V={errorThrown:!1,error:null}),de(),ye){const{errorThrown:me,error:le}=V;if(V=null,me)throw le}}else de()}function ae(de){u.v.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=de)}},9672:(ot,Ce,N)=>{function u(V,P,ae,de=0,ye=!1){const me=P.schedule(function(){ae(),ye?V.add(this.schedule(null,de)):this.unsubscribe()},de);if(V.add(me),!ye)return me}N.d(Ce,{f:()=>u})},4671:(ot,Ce,N)=>{function u(V){return V}N.d(Ce,{y:()=>u})},1144:(ot,Ce,N)=>{N.d(Ce,{z:()=>u});const u=V=>V&&"number"==typeof V.length&&"function"!=typeof V},2206:(ot,Ce,N)=>{N.d(Ce,{D:()=>V});var u=N(576);function V(P){return Symbol.asyncIterator&&(0,u.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(ot,Ce,N)=>{function u(V){return"function"==typeof V}N.d(Ce,{m:()=>u})},3670:(ot,Ce,N)=>{N.d(Ce,{c:()=>P});var u=N(8822),V=N(576);function P(ae){return(0,V.m)(ae[u.L])}},6495:(ot,Ce,N)=>{N.d(Ce,{T:()=>P});var u=N(2202),V=N(576);function P(ae){return(0,V.m)(null==ae?void 0:ae[u.h])}},8239:(ot,Ce,N)=>{N.d(Ce,{t:()=>V});var u=N(576);function V(P){return(0,u.m)(null==P?void 0:P.then)}},3260:(ot,Ce,N)=>{N.d(Ce,{L:()=>ae,Q:()=>P});var u=N(655),V=N(576);function P(de){return(0,u.FC)(this,arguments,function*(){const me=de.getReader();try{for(;;){const{value:le,done:ve}=yield(0,u.qq)(me.read());if(ve)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(le)}}finally{me.releaseLock()}})}function ae(de){return(0,V.m)(null==de?void 0:de.getReader)}},3532:(ot,Ce,N)=>{N.d(Ce,{K:()=>V});var u=N(576);function V(P){return P&&(0,u.m)(P.schedule)}},4482:(ot,Ce,N)=>{N.d(Ce,{A:()=>V,e:()=>P});var u=N(576);function V(ae){return(0,u.m)(null==ae?void 0:ae.lift)}function P(ae){return de=>{if(V(de))return de.lift(function(ye){try{return ae(ye,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(ot,Ce,N)=>{N.d(Ce,{h:()=>P});var u=N(2416),V=N(3410);function P(ae){V.z.setTimeout(()=>{const{onUnhandledError:de}=u.v;if(!de)throw ae;de(ae)})}},4532:(ot,Ce,N)=>{function u(V){return new TypeError(`You provided ${null!==V&&"object"==typeof V?"an invalid object":`'${V}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(Ce,{z:()=>u})},655:(ot,Ce,N)=>{function ae(Q,re){var se={};for(var _e in Q)Object.prototype.hasOwnProperty.call(Q,_e)&&re.indexOf(_e)<0&&(se[_e]=Q[_e]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var ce=0;for(_e=Object.getOwnPropertySymbols(Q);ce<_e.length;ce++)re.indexOf(_e[ce])<0&&Object.prototype.propertyIsEnumerable.call(Q,_e[ce])&&(se[_e[ce]]=Q[_e[ce]])}return se}function le(Q,re,se,_e){return new(se||(se=Promise))(function(Ue,vt){function en(hn){try{Ke(_e.next(hn))}catch(Ln){vt(Ln)}}function Zt(hn){try{Ke(_e.throw(hn))}catch(Ln){vt(Ln)}}function Ke(hn){hn.done?Ue(hn.value):function ce(Ue){return Ue instanceof se?Ue:new se(function(vt){vt(Ue)})}(hn.value).then(en,Zt)}Ke((_e=_e.apply(Q,re||[])).next())})}function ge(Q){return this instanceof ge?(this.v=Q,this):new ge(Q)}function Ie(Q,re,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ce,_e=se.apply(Q,re||[]),Ue=[];return ce={},vt("next"),vt("throw"),vt("return"),ce[Symbol.asyncIterator]=function(){return this},ce;function vt(gn){_e[gn]&&(ce[gn]=function(on){return new Promise(function(Ht,rn){Ue.push([gn,on,Ht,rn])>1||en(gn,on)})})}function en(gn,on){try{!function Zt(gn){gn.value instanceof ge?Promise.resolve(gn.value.v).then(Ke,hn):Ln(Ue[0][2],gn)}(_e[gn](on))}catch(Ht){Ln(Ue[0][3],Ht)}}function Ke(gn){en("next",gn)}function hn(gn){en("throw",gn)}function Ln(gn,on){gn(on),Ue.shift(),Ue.length&&en(Ue[0][0],Ue[0][1])}}function Ze(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,re=Q[Symbol.asyncIterator];return re?re.call(Q):(Q=function ie(Q){var re="function"==typeof Symbol&&Symbol.iterator,se=re&&Q[re],_e=0;if(se)return se.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&_e>=Q.length&&(Q=void 0),{value:Q&&Q[_e++],done:!Q}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),se={},_e("next"),_e("throw"),_e("return"),se[Symbol.asyncIterator]=function(){return this},se);function _e(Ue){se[Ue]=Q[Ue]&&function(vt){return new Promise(function(en,Zt){!function ce(Ue,vt,en,Zt){Promise.resolve(Zt).then(function(Ke){Ue({value:Ke,done:en})},vt)}(en,Zt,(vt=Q[Ue](vt)).done,vt.value)})}}}N.d(Ce,{FC:()=>Ie,KL:()=>Ze,_T:()=>ae,mG:()=>le,qq:()=>ge})},5e3:(ot,Ce,N)=>{N.d(Ce,{$8M:()=>ts,$Z:()=>ew,AFp:()=>Sm,AaK:()=>le,AsE:()=>Af,B6R:()=>It,CHM:()=>Ra,CRH:()=>Fv,CZH:()=>Gi,CqO:()=>jd,DdM:()=>bv,EJc:()=>zS,EpF:()=>nw,F4k:()=>rw,FYo:()=>_v,FiY:()=>ct,G48:()=>e1,Gf:()=>sl,GfV:()=>Xd,Gpc:()=>G,JOm:()=>oa,Jf7:()=>Ry,LFG:()=>M,LSH:()=>wd,Lbi:()=>he,NdJ:()=>Lg,O4$:()=>rd,OlP:()=>kn,Oqu:()=>qd,PXZ:()=>ll,Q6J:()=>N_,QGY:()=>V_,Qsj:()=>xS,R0b:()=>cs,RDi:()=>wl,Rgc:()=>Kf,SBq:()=>fc,Sil:()=>YS,Suo:()=>Rv,TTD:()=>Ma,TgZ:()=>lc,VKq:()=>wv,VLi:()=>Wv,X6Q:()=>XS,XFs:()=>wt,Xpm:()=>He,Y36:()=>bf,YKP:()=>th,YNc:()=>we,Yjl:()=>Je,Yz7:()=>on,ZZ4:()=>Hm,_Bn:()=>Jd,_UZ:()=>Ef,_Vd:()=>lm,_c5:()=>pT,_uU:()=>qg,aQg:()=>qm,c2e:()=>ZS,cJS:()=>rn,cg1:()=>X_,dDg:()=>pu,deG:()=>dd,dqk:()=>zt,eFA:()=>cl,ekj:()=>Z_,evT:()=>$C,g9A:()=>Dm,h0i:()=>ya,hGG:()=>Gm,hij:()=>Y_,iGM:()=>Nv,ifc:()=>Yt,ip1:()=>Zv,kL8:()=>hi,kcU:()=>Bp,lG2:()=>De,n5z:()=>er,oAB:()=>ee,oxw:()=>aw,q4F:()=>il,qLn:()=>og,qOj:()=>iu,qZA:()=>wf,sBO:()=>oT,sIi:()=>Nd,s_b:()=>Yf,soG:()=>ba,tBr:()=>Nt,tb:()=>tp,tp0:()=>Wn,uIk:()=>gf,vHH:()=>Le,vpe:()=>Fo,wAp:()=>bt,xp6:()=>fb,z2F:()=>Ic,zSh:()=>el,zs3:()=>ko});var u=N(7579),V=N(727),P=N(8306),ae=N(6451),de=N(3099);function ye(s){for(let o in s)if(s[o]===ye)return o;throw Error("Could not find renamed property on target object.")}function me(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function le(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(le).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function ve(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const Z=ye({__forward_ref__:ye});function G(s){return s.__forward_ref__=G,s.toString=function(){return le(this())},s}function ie(s){return Ge(s)?s():s}function Ge(s){return"function"==typeof s&&s.hasOwnProperty(Z)&&s.__forward_ref__===G}class Le extends Error{constructor(o,l){super(function qe(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,l)),this.code=o}}function ge(s){return"string"==typeof s?s:null==s?"":String(s)}function Ie(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ge(s)}function Me(s,o){const l=o?` in ${o}`:"";throw new Le(-201,`No provider for ${Ie(s)} found${l}`)}function Zt(s,o){null==s&&function Ke(s,o,l,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${l} ${d} ${o} <=Actual]`))}(o,s,null,"!=")}function on(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function rn(s){return{providers:s.providers||[],imports:s.imports||[]}}function Dn(s){return zi(s,_i)||zi(s,Un)}function zi(s,o){return s.hasOwnProperty(o)?s[o]:null}function gs(s){return s&&(s.hasOwnProperty(Ni)||s.hasOwnProperty(ms))?s[Ni]:null}const _i=ye({\u0275prov:ye}),Ni=ye({\u0275inj:ye}),Un=ye({ngInjectableDef:ye}),ms=ye({ngInjectorDef:ye});var wt=(()=>((wt=wt||{})[wt.Default=0]="Default",wt[wt.Host=1]="Host",wt[wt.Self=2]="Self",wt[wt.SkipSelf=4]="SkipSelf",wt[wt.Optional=8]="Optional",wt))();let Rr;function an(s){const o=Rr;return Rr=s,o}function ir(s,o,l){const d=Dn(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&wt.Optional?null:void 0!==o?o:void Me(le(s),"Injector")}function pr(s){return{toString:s}.toString()}var xn=(()=>((xn=xn||{})[xn.OnPush=0]="OnPush",xn[xn.Default=1]="Default",xn))(),Yt=(()=>{return(s=Yt||(Yt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Yt;var s})();const pt="undefined"!=typeof globalThis&&globalThis,ut="undefined"!=typeof window&&window,vi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,zt=pt||"undefined"!=typeof global&&global||ut||vi,mn={},gt=[],Gr=ye({\u0275cmp:ye}),z=ye({\u0275dir:ye}),H=ye({\u0275pipe:ye}),B=ye({\u0275mod:ye}),$=ye({\u0275fac:ye}),W=ye({__NG_ELEMENT_ID__:ye});let xe=0;function He(s){return pr(()=>{const l={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===xn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||gt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Yt.Emulated,id:"c",styles:s.styles||gt,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,p=s.features,_=s.pipes;return d.id+=xe++,d.inputs=K(s.inputs,l),d.outputs=K(s.outputs),p&&p.forEach(w=>w(d)),d.directiveDefs=h?()=>("function"==typeof h?h():h).map(sn):null,d.pipeDefs=_?()=>("function"==typeof _?_():_).map(tn):null,d})}function It(s,o,l){const d=s.\u0275cmp;d.directiveDefs=()=>o.map(sn),d.pipeDefs=()=>l.map(tn)}function sn(s){return dt(s)||function Mt(s){return s[z]||null}(s)}function tn(s){return function Qt(s){return s[H]||null}(s)}const sr={};function ee(s){return pr(()=>{const o={type:s.type,bootstrap:s.bootstrap||gt,declarations:s.declarations||gt,imports:s.imports||gt,exports:s.exports||gt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(sr[s.id]=s.type),o})}function K(s,o){if(null==s)return mn;const l={};for(const d in s)if(s.hasOwnProperty(d)){let h=s[d],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),l[h]=d,o&&(o[h]=p)}return l}const De=He;function Je(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function dt(s){return s[Gr]||null}function $t(s,o){const l=s[B]||null;if(!l&&!0===o)throw new Error(`Type ${le(s)} does not have '\u0275mod' property.`);return l}function wi(s){return Array.isArray(s)&&"object"==typeof s[1]}function si(s){return Array.isArray(s)&&!0===s[1]}function Uc(s){return 0!=(8&s.flags)}function yu(s){return 2==(2&s.flags)}function js(s){return 1==(1&s.flags)}function Ei(s){return null!==s.template}function _u(s){return 0!=(512&s[2])}function Ti(s,o){return s.hasOwnProperty($)?s[$]:null}class Wo{constructor(o,l,d){this.previousValue=o,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function Ma(){return Oa}function Oa(s){return s.type.prototype.ngOnChanges&&(s.setInput=Vp),Ph}function Ph(){const s=qc(this),o=null==s?void 0:s.current;if(o){const l=s.previous;if(l===mn)s.previous=o;else for(let d in o)l[d]=o[d];s.current=null,this.ngOnChanges(o)}}function Vp(s,o,l,d){const h=qc(s)||function ws(s,o){return s[$s]=o}(s,{previous:mn,current:null}),p=h.current||(h.current={}),_=h.previous,w=this.declaredInputs[l],C=_[w];p[w]=new Wo(C&&C.currentValue,o,_===mn),s[d]=o}Ma.ngInherit=!0;const $s="__ngSimpleChanges__";function qc(s){return s[$s]||null}let Eu;function wl(s){Eu=s}function yn(s){return!!s.listen}const Pa={createRenderer:(s,o)=>function Es(){return void 0!==Eu?Eu:"undefined"!=typeof document?document:void 0}()};function pn(s){for(;Array.isArray(s);)s=s[0];return s}function yo(s,o){return pn(o[s])}function yr(s,o){return pn(o[s.index])}function jn(s,o){return s.data[o]}function _r(s,o){const l=o[s];return wi(l)?l:l[0]}function Ko(s){return 4==(4&s[2])}function Yi(s){return 128==(128&s[2])}function oi(s,o){return null==o?null:s[o]}function Gs(s){s[18]=0}function Zs(s,o){s[5]+=o;let l=s,d=s[3];for(;null!==d&&(1===o&&1===l[5]||-1===o&&0===l[5]);)d[5]+=o,l=d,d=d[3]}const St={lFrame:nd(null),bindingsEnabled:!0};function Yo(){return St.bindingsEnabled}function Ne(){return St.lFrame.lView}function Wt(){return St.lFrame.tView}function Ra(s){return St.lFrame.contextLView=s,s[8]}function Sn(){let s=Yc();for(;null!==s&&64===s.type;)s=s.parent;return s}function Yc(){return St.lFrame.currentTNode}function Qi(s,o){const l=St.lFrame;l.currentTNode=s,l.isParent=o}function Cl(){return St.lFrame.isParent}function vr(){const s=St.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Jo(){return St.lFrame.bindingIndex++}function ai(s){const o=St.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}function Xc(s,o){const l=St.lFrame;l.bindingIndex=l.bindingRootIndex=s,Su(o)}function Su(s){St.lFrame.currentDirectiveIndex=s}function ed(){return St.lFrame.currentQueryIndex}function td(s){St.lFrame.currentQueryIndex=s}function Il(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Ua(s,o,l){if(l&wt.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||l&wt.Host||(h=Il(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,s=p}const d=St.lFrame=bo();return d.currentTNode=o,d.lView=s,!0}function Va(s){const o=bo(),l=s[1];St.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function bo(){const s=St.lFrame,o=null===s?null:s.child;return null===o?nd(s):o}function nd(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Fh(){const s=St.lFrame;return St.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Du=Fh;function ui(){const s=Fh();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Dr(){return St.lFrame.selectedIndex}function wo(s){St.lFrame.selectedIndex=s}function Qn(){const s=St.lFrame;return jn(s.tView,s.selectedIndex)}function rd(){St.lFrame.currentNamespace="svg"}function Bp(){!function Dl(){St.lFrame.currentNamespace=null}()}function Is(s,o){for(let l=o.directiveStart,d=o.directiveEnd;l<d;l++){const p=s.data[l].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:w,ngAfterViewInit:C,ngAfterViewChecked:D,ngOnDestroy:O}=p;_&&(s.contentHooks||(s.contentHooks=[])).push(-l,_),w&&((s.contentHooks||(s.contentHooks=[])).push(l,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,w)),C&&(s.viewHooks||(s.viewHooks=[])).push(-l,C),D&&((s.viewHooks||(s.viewHooks=[])).push(l,D),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,D)),null!=O&&(s.destroyHooks||(s.destroyHooks=[])).push(l,O)}}function Ba(s,o,l){sd(s,o,3,l)}function ja(s,o,l,d){(3&s[2])===l&&sd(s,o,l,d)}function or(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function sd(s,o,l,d){const p=null!=d?d:-1,_=o.length-1;let w=0;for(let C=void 0!==d?65535&s[18]:0;C<_;C++)if("number"==typeof o[C+1]){if(w=o[C],null!=d&&w>=d)break}else o[C]<0&&(s[18]+=65536),(w<p||-1==p)&&(Hp(s,l,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Hp(s,o,l,d){const h=l[d]<0,p=l[d+1],w=s[h?-l[d]:l[d]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(w)}finally{}}}else try{p.call(w)}finally{}}class ta{constructor(o,l,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function ar(s,o,l){const d=yn(s);let h=0;for(;h<l.length;){const p=l[h];if("number"==typeof p){if(0!==p)break;h++;const _=l[h++],w=l[h++],C=l[h++];d?s.setAttribute(o,w,C,_):o.setAttributeNS(_,w,C)}else{const _=p,w=l[++h];zr(_)?d&&s.setProperty(o,_,w):d?s.setAttribute(o,_,w):o.setAttribute(_,w),h++}}return h}function Jn(s){return 3===s||4===s||6===s}function zr(s){return 64===s.charCodeAt(0)}function Ha(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let d=0;d<o.length;d++){const h=o[d];"number"==typeof h?l=h:0===l||na(s,l,h,null,-1===l||2===l?o[++d]:null)}}return s}function na(s,o,l,d,h){let p=0,_=s.length;if(-1===o)_=-1;else for(;p<s.length;){const w=s[p++];if("number"==typeof w){if(w===o){_=-1;break}if(w>o){_=p-1;break}}}for(;p<s.length;){const w=s[p];if("number"==typeof w)break;if(w===l){if(null===d)return void(null!==h&&(s[p+1]=h));if(d===s[p+1])return void(s[p+2]=h)}p++,null!==d&&p++,null!==h&&p++}-1!==_&&(s.splice(_,0,o),p=_+1),s.splice(p++,0,l),null!==d&&s.splice(p++,0,d),null!==h&&s.splice(p++,0,h)}function ad(s){return-1!==s}function Tn(s){return 32767&s}function Xi(s,o){let l=function ud(s){return s>>16}(s),d=o;for(;l>0;)d=d[15],l--;return d}let Ws=!0;function ft(s){const o=Ws;return Ws=s,o}let Mu=0;function Ks(s,o){const l=Ys(s,o);if(-1!==l)return l;const d=o[1];d.firstCreatePass&&(s.injectorIndex=o.length,To(d.data,s),To(o,null),To(d.blueprint,null));const h=$a(s,o),p=s.injectorIndex;if(ad(h)){const _=Tn(h),w=Xi(h,o),C=w[1].data;for(let D=0;D<8;D++)o[p+D]=w[_+D]|C[_+D]}return o[p+8]=h,p}function To(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Ys(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function $a(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,d=null,h=o;for(;null!==h;){const p=h[1],_=p.type;if(d=2===_?p.declTNode:1===_?h[6]:null,null===d)return-1;if(l++,h=h[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function es(s,o,l){!function Xn(s,o,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(W)&&(d=l[W]),null==d&&(d=l[W]=Mu++);const h=255&d;o.data[s+(h>>5)]|=1<<h}(s,o,l)}function ra(s,o,l){if(l&wt.Optional)return s;Me(o,"NodeInjector")}function Ga(s,o,l,d){if(l&wt.Optional&&void 0===d&&(d=null),0==(l&(wt.Self|wt.Host))){const h=s[9],p=an(void 0);try{return h?h.get(o,d,l&wt.Optional):ir(o,d,l&wt.Optional)}finally{an(p)}}return ra(d,o,l)}function Ds(s,o,l,d=wt.Default,h){if(null!==s){const p=function cd(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(W)?s[W]:void 0;return"number"==typeof o?o>=0?255&o:Ou:o}(l);if("function"==typeof p){if(!Ua(o,s,d))return d&wt.Host?ra(h,l,d):Ga(o,l,d,h);try{const _=p(d);if(null!=_||d&wt.Optional)return _;Me(l)}finally{Du()}}else if("number"==typeof p){let _=null,w=Ys(s,o),C=-1,D=d&wt.Host?o[16][6]:null;for((-1===w||d&wt.SkipSelf)&&(C=-1===w?$a(s,o):o[w+8],-1!==C&&Ml(d,!1)?(_=o[1],w=Tn(C),o=Xi(C,o)):w=-1);-1!==w;){const O=o[1];if(ur(p,w,O.data)){const F=za(w,o,l,_,d,D);if(F!==Za)return F}C=o[w+8],-1!==C&&Ml(d,o[1].data[w+8]===D)&&ur(p,w,o)?(_=O,w=Tn(C),o=Xi(C,o)):w=-1}}}return Ga(o,l,d,h)}const Za={};function Ou(){return new Ar(Sn(),Ne())}function za(s,o,l,d,h,p){const _=o[1],w=_.data[s+8],O=Pu(w,_,l,null==d?yu(w)&&Ws:d!=_&&0!=(3&w.type),h&wt.Host&&p===w);return null!==O?Wr(o,_,O,w):Za}function Pu(s,o,l,d,h){const p=s.providerIndexes,_=o.data,w=1048575&p,C=s.directiveStart,O=p>>20,q=h?w+O:s.directiveEnd;for(let X=d?w:w+O;X<q;X++){const Te=_[X];if(X<C&&l===Te||X>=C&&Te.type===l)return X}if(h){const X=_[C];if(X&&Ei(X)&&X.type===l)return C}return null}function Wr(s,o,l,d){let h=s[l];const p=o.data;if(function od(s){return s instanceof ta}(h)){const _=h;_.resolving&&function ze(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Le(-200,`Circular dependency in DI detected for ${s}${l}`)}(Ie(p[l]));const w=ft(_.canSeeViewProviders);_.resolving=!0;const C=_.injectImpl?an(_.injectImpl):null;Ua(s,d,wt.Default);try{h=s[l]=_.factory(void 0,p,s,d),o.firstCreatePass&&l>=d.directiveStart&&function id(s,o,l){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(d){const _=Oa(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,_),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,_)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),p&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,p),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,p))}(l,p[l],o)}finally{null!==C&&an(C),ft(w),_.resolving=!1,Du()}}return h}function ur(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function Ml(s,o){return!(s&wt.Self||s&wt.Host&&o)}class Ar{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,d){return Ds(this._tNode,this._lView,o,d,l)}}function er(s){return pr(()=>{const o=s.prototype.constructor,l=o[$]||_n(o),d=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==d;){const p=h[$]||_n(h);if(p&&p!==l)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function _n(s){return Ge(s)?()=>{const o=_n(ie(s));return o&&o()}:Ti(s)}function ts(s){return function qa(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const d=l.length;let h=0;for(;h<d;){const p=l[h];if(Jn(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<d&&"string"==typeof l[h];)h++;else{if(p===o)return l[h+1];h+=2}}}return null}(Sn(),s)}const Li="__parameters__";function Ui(s,o,l){return pr(()=>{const d=function br(s){return function(...l){if(s){const d=s(...l);for(const h in d)this[h]=d[h]}}}(o);function h(...p){if(this instanceof h)return d.apply(this,p),this;const _=new h(...p);return w.annotation=_,w;function w(C,D,O){const F=C.hasOwnProperty(Li)?C[Li]:Object.defineProperty(C,Li,{value:[]})[Li];for(;F.length<=O;)F.push(null);return(F[O]=F[O]||[]).push(_),C}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class kn{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=on({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const dd=new kn("AnalyzeForEntryComponents");function Vr(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let d=s[l];Array.isArray(d)?(o===s&&(o=s.slice(0,l)),Vr(d,o)):o!==s&&o.push(d)}return o}function li(s,o){s.forEach(l=>Array.isArray(l)?li(l,o):o(l))}function Pl(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function Ka(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function wr(s,o,l){let d=Js(s,o);return d>=0?s[1|d]=l:(d=~d,function fd(s,o,l,d){let h=s.length;if(h==o)s.push(l,d);else if(1===h)s.push(d,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=d}}(s,d,o,l)),d}function Do(s,o){const l=Js(s,o);if(l>=0)return s[1|l]}function Js(s,o){return function Lu(s,o,l){let d=0,h=s.length>>l;for(;h!==d;){const p=d+(h-d>>1),_=s[p<<l];if(o===_)return p<<l;_>o?h=p:d=p+1}return~(h<<l)}(s,o,1)}const Qr={},ia="__NG_DI_FLAG__",ns="ngTempTokenPath",jh=/\n/gm,Rl="__source",ju=ye({provide:String,useValue:ye});let Ci;function T(s){const o=Ci;return Ci=s,o}function S(s,o=wt.Default){if(void 0===Ci)throw new Le(203,"");return null===Ci?ir(s,void 0,o):Ci.get(s,o&wt.Optional?null:void 0,o)}function M(s,o=wt.Default){return(function An(){return Rr}()||S)(ie(s),o)}const J=M;function ue(s){const o=[];for(let l=0;l<s.length;l++){const d=ie(s[l]);if(Array.isArray(d)){if(0===d.length)throw new Le(900,"");let h,p=wt.Default;for(let _=0;_<d.length;_++){const w=d[_],C=Ye(w);"number"==typeof C?-1===C?h=w.token:p|=C:h=w}o.push(M(h,p))}else o.push(M(d))}return o}function Pe(s,o){return s[ia]=o,s.prototype[ia]=o,s}function Ye(s){return s[ia]}const Nt=Pe(Ui("Inject",s=>({token:s})),-1),ct=Pe(Ui("Optional"),8),Wn=Pe(Ui("SkipSelf"),4);class Ul{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function xs(s){return s instanceof Ul?s.changingThisBreaksApplicationSecurity:s}const Sy=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,g=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Tr=(()=>((Tr=Tr||{})[Tr.NONE=0]="NONE",Tr[Tr.HTML=1]="HTML",Tr[Tr.STYLE=2]="STYLE",Tr[Tr.SCRIPT=3]="SCRIPT",Tr[Tr.URL=4]="URL",Tr[Tr.RESOURCE_URL=5]="RESOURCE_URL",Tr))();function wd(s){const o=function Ed(){const s=Ne();return s&&s[12]}();return o?o.sanitize(Tr.URL,s)||"":function Ms(s,o){const l=function Zh(s){return s instanceof Ul&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}(s,"URL")?xs(s):function y(s){return(s=String(s)).match(Sy)||s.match(g)?s:"unsafe:"+s}(ge(s))}const G0="__ngContext__";function Ii(s,o){s[G0]=o}function xy(s){const o=function Yh(s){return s[G0]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function ky(s){return s.ngOriginalError}function PC(s,...o){s.error(...o)}class og{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o),d=function OC(s){return s&&s.ngErrorLogger||PC}(o);d(this._console,"ERROR",o),l&&d(this._console,"ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&ky(o);for(;l&&ky(l);)l=ky(l);return l||null}}const HC=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(zt))();function Ry(s){return s.ownerDocument.defaultView}function $C(s){return s.ownerDocument}function Mo(s){return s instanceof Function?s():s}var oa=(()=>((oa=oa||{})[oa.Important=1]="Important",oa[oa.DashCase=2]="DashCase",oa))();function Fy(s,o){return undefined(s,o)}function ef(s){const o=s[3];return si(o)?o[3]:o}function lg(s){return Q0(s[13])}function Uy(s){return Q0(s[4])}function Q0(s){for(;null!==s&&!si(s);)s=s[4];return s}function Td(s,o,l,d,h){if(null!=d){let p,_=!1;si(d)?p=d:wi(d)&&(_=!0,d=d[0]);const w=pn(d);0===s&&null!==l?null==h?rb(o,l,w):Wu(o,l,w,h||null,!0):1===s&&null!==l?Wu(o,l,w,h||null,!0):2===s?function lb(s,o,l){const d=fg(s,o);d&&function jy(s,o,l,d){yn(s)?s.removeChild(o,l,d):o.removeChild(l)}(s,d,o,l)}(o,w,_):3===s&&o.destroyNode(w),null!=p&&function ro(s,o,l,d,h){const p=l[7];p!==pn(l)&&Td(o,s,d,p,h);for(let w=10;w<l.length;w++){const C=l[w];Dd(C[1],C,s,o,d,p)}}(o,s,p,l,h)}}function lr(s,o,l){if(yn(s))return s.createElement(o,l);{const d=null!==l?function wu(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(l):null;return null===d?s.createElement(o):s.createElementNS(d,o)}}function eb(s,o){const l=s[9],d=l.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,Zs(h,-1)),l.splice(d,1)}function dg(s,o){if(s.length<=10)return;const l=10+o,d=s[l];if(d){const h=d[17];null!==h&&h!==s&&eb(h,d),o>0&&(s[l-1][4]=d[4]);const p=Ka(s,10+o);!function ZC(s,o){Dd(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(d[1],d);const _=p[19];null!==_&&_.detachView(p[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function tb(s,o){if(!(256&o[2])){const l=o[11];yn(l)&&l.destroyNode&&Dd(s,o,l,3,null,null),function Vy(s){let o=s[13];if(!o)return hg(s[1],s);for(;o;){let l=null;if(wi(o))l=o[13];else{const d=o[10];d&&(l=d)}if(!l){for(;o&&!o[4]&&o!==s;)wi(o)&&hg(o[1],o),o=o[3];null===o&&(o=s),wi(o)&&hg(o[1],o),l=o&&o[4]}o=l}}(o)}}function hg(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function By(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let d=0;d<l.length;d+=2){const h=o[l[d]];if(!(h instanceof ta)){const p=l[d+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const w=h[p[_]],C=p[_+1];try{C.call(w)}finally{}}else try{p.call(h)}finally{}}}}(s,o),function nb(s,o){const l=s.cleanup,d=o[7];let h=-1;if(null!==l)for(let p=0;p<l.length-1;p+=2)if("string"==typeof l[p]){const _=l[p+1],w="function"==typeof _?_(o):pn(o[_]),C=d[h=l[p+2]],D=l[p+3];"boolean"==typeof D?w.removeEventListener(l[p],C,D):D>=0?d[h=D]():d[h=-D].unsubscribe(),p+=2}else{const _=d[h=l[p+1]];l[p].call(_)}if(null!==d){for(let p=h+1;p<d.length;p++)d[p]();o[7]=null}}(s,o),1===o[1].type&&yn(o[11])&&o[11].destroy();const l=o[17];if(null!==l&&si(o[3])){l!==o[3]&&eb(l,o);const d=o[19];null!==d&&d.detachView(s)}}}function WC(s,o,l){return function zu(s,o,l){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return l[0];if(2&d.flags){const h=s.data[d.directiveStart].encapsulation;if(h===Yt.None||h===Yt.Emulated)return null}return yr(d,l)}(s,o.parent,l)}function Wu(s,o,l,d,h){yn(s)?s.insertBefore(o,l,d,h):o.insertBefore(l,d,h)}function rb(s,o,l){yn(s)?s.appendChild(o,l):o.appendChild(l)}function ib(s,o,l,d,h){null!==d?Wu(s,o,l,d,h):rb(s,o,l)}function fg(s,o){return yn(s)?s.parentNode(o):o.parentNode}let ob=function Hy(s,o,l){return 40&s.type?yr(s,l):null};function Sd(s,o,l,d){const h=WC(s,d,o),p=o[11],w=function sb(s,o,l){return ob(s,o,l)}(d.parent||o[6],d,o);if(null!=h)if(Array.isArray(l))for(let C=0;C<l.length;C++)ib(p,h,l[C],w,!1);else ib(p,h,l,w,!1)}function pg(s,o){if(null!==o){const l=o.type;if(3&l)return yr(o,s);if(4&l)return gg(-1,s[o.index]);if(8&l){const d=o.child;if(null!==d)return pg(s,d);{const h=s[o.index];return si(h)?gg(-1,h):pn(h)}}if(32&l)return Fy(o,s)()||pn(s[o.index]);{const d=ub(s,o);return null!==d?Array.isArray(d)?d[0]:pg(ef(s[16]),d):pg(s,o.next)}}return null}function ub(s,o){return null!==o?s[16][6].projection[o.projection]:null}function gg(s,o){const l=10+s+1;if(l<o.length){const d=o[l],h=d[1].firstChild;if(null!==h)return pg(d,h)}return o[7]}function cb(s,o,l,d,h,p,_){for(;null!=l;){const w=d[l.index],C=l.type;if(_&&0===o&&(w&&Ii(pn(w),d),l.flags|=4),64!=(64&l.flags))if(8&C)cb(s,o,l.child,d,h,p,!1),Td(o,s,h,w,p);else if(32&C){const D=Fy(l,d);let O;for(;O=D();)Td(o,s,h,O,p);Td(o,s,h,w,p)}else 16&C?aa(s,o,d,l,h,p):Td(o,s,h,w,p);l=_?l.projectionNext:l.next}}function Dd(s,o,l,d,h,p){cb(l,d,s.firstChild,o,h,p,!1)}function aa(s,o,l,d,h,p){const _=l[16],C=_[6].projection[d.projection];if(Array.isArray(C))for(let D=0;D<C.length;D++)Td(o,s,h,C[D],p);else cb(s,o,C,_[3],h,p,!0)}function QC(s,o,l){yn(s)?s.setAttribute(o,"style",l):o.style.cssText=l}function mg(s,o,l){yn(s)?""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l):o.className=l}function Xt(s,o,l){let d=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===d||s.charCodeAt(h+p)<=32)return h}l=h+1}}const JC="ng-template";function nr(s,o,l){let d=0;for(;d<s.length;){let h=s[d++];if(l&&"class"===h){if(h=s[d],-1!==Xt(h.toLowerCase(),o,0))return!0}else if(1===h){for(;d<s.length&&"string"==typeof(h=s[d++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function XC(s){return 4===s.type&&s.value!==JC}function zA(s,o,l){return o===(4!==s.type||l?s.value:JC)}function WA(s,o,l){let d=4;const h=s.attrs||[],p=function db(s){for(let o=0;o<s.length;o++)if(Jn(s[o]))return o;return s.length}(h);let _=!1;for(let w=0;w<o.length;w++){const C=o[w];if("number"!=typeof C){if(!_)if(4&d){if(d=2|1&d,""!==C&&!zA(s,C,l)||""===C&&1===o.length){if(ua(d))return!1;_=!0}}else{const D=8&d?C:o[++w];if(8&d&&null!==s.attrs){if(!nr(s.attrs,D,l)){if(ua(d))return!1;_=!0}continue}const F=KA(8&d?"class":C,h,XC(s),l);if(-1===F){if(ua(d))return!1;_=!0;continue}if(""!==D){let q;q=F>p?"":h[F+1].toLowerCase();const X=8&d?q:null;if(X&&-1!==Xt(X,D,0)||2&d&&D!==q){if(ua(d))return!1;_=!0}}}}else{if(!_&&!ua(d)&&!ua(C))return!1;if(_&&ua(C))continue;_=!1,d=C|1&d}}return ua(d)||_}function ua(s){return 0==(1&s)}function KA(s,o,l,d){if(null===o)return-1;let h=0;if(d||!l){let p=!1;for(;h<o.length;){const _=o[h];if(_===s)return h;if(3===_||6===_)p=!0;else{if(1===_||2===_){let w=o[++h];for(;"string"==typeof w;)w=o[++h];continue}if(4===_)break;if(0===_){h+=4;continue}}h+=p?1:2}return-1}return function Gy(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const d=s[l];if("number"==typeof d)return-1;if(d===o)return l;l++}return-1}(o,s)}function qy(s,o,l=!1){for(let d=0;d<o.length;d++)if(WA(s,o[d],l))return!0;return!1}function Zy(s,o){return s?":not("+o.trim()+")":o}function os(s){let o=s[0],l=1,d=2,h="",p=!1;for(;l<s.length;){let _=s[l];if("string"==typeof _)if(2&d){const w=s[++l];h+="["+_+(w.length>0?'="'+w+'"':"")+"]"}else 8&d?h+="."+_:4&d&&(h+=" "+_);else""!==h&&!ua(_)&&(o+=Zy(p,h),h=""),d=_,p=p||!ua(d);l++}return""!==h&&(o+=Zy(p,h)),o}const Bt={};function fb(s){zy(Wt(),Ne(),Dr()+s,!1)}function zy(s,o,l,d){if(!d)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&Ba(o,p,l)}else{const p=s.preOrderHooks;null!==p&&ja(o,p,0,l)}wo(l)}function io(s,o){return s<<17|o<<2}function la(s){return s>>17&32767}function yg(s){return 2|s}function ca(s){return(131068&s)>>2}function _g(s,o){return-131069&s|o<<2}function Gl(s){return 1|s}function Jy(s,o){const l=s.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const h=l[d],p=l[d+1];if(-1!==p){const _=s.data[p];td(h),_.contentQueries(2,o[p],p)}}}function sf(s,o,l,d,h,p,_,w,C,D){const O=o.blueprint.slice();return O[0]=h,O[2]=140|d,Gs(O),O[3]=O[15]=s,O[8]=l,O[10]=_||s&&s[10],O[11]=w||s&&s[11],O[12]=C||s&&s[12]||null,O[9]=D||s&&s[9]||null,O[6]=p,O[16]=2==o.type?s[16]:O,O}function $n(s,o,l,d,h){let p=s.data[o];if(null===p)p=function Eg(s,o,l,d,h){const p=Yc(),_=Cl(),C=s.data[o]=function s_(s,o,l,d,h,p){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,l,o,d,h);return null===s.firstChild&&(s.firstChild=C),null!==p&&(_?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C)),C}(s,o,l,d,h),function Rh(){return St.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=l,p.value=d,p.attrs=h;const _=function Cs(){const s=St.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return Qi(p,!0),p}function Kl(s,o,l,d){if(0===l)return-1;const h=o.length;for(let p=0;p<l;p++)o.push(d),s.blueprint.push(d),s.data.push(null);return h}function Ad(s,o,l){Va(o);try{const d=s.viewQuery;null!==d&&Ig(1,d,l);const h=s.template;null!==h&&Xy(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Jy(s,o),s.staticViewQueries&&Ig(2,s.viewQuery,l);const p=s.components;null!==p&&function Qu(s,o){for(let l=0;l<o.length;l++)lf(s,o[l])}(o,p)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{o[2]&=-5,ui()}}function Yl(s,o,l,d){const h=o[2];if(256!=(256&h)){Va(o);try{Gs(o),function Qo(s){return St.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&Xy(s,o,l,2,d);const _=3==(3&h);if(_){const D=s.preOrderCheckHooks;null!==D&&Ba(o,D,null)}else{const D=s.preOrderHooks;null!==D&&ja(o,D,0,null),or(o,0)}if(function mI(s){for(let o=lg(s);null!==o;o=Uy(o)){if(!o[2])continue;const l=o[9];for(let d=0;d<l.length;d++){const h=l[d],p=h[3];0==(1024&h[2])&&Zs(p,1),h[2]|=1024}}}(o),function gI(s){for(let o=lg(s);null!==o;o=Uy(o))for(let l=10;l<o.length;l++){const d=o[l],h=d[1];Yi(d)&&Yl(h,d,h.template,d[8])}}(o),null!==s.contentQueries&&Jy(s,o),_){const D=s.contentCheckHooks;null!==D&&Ba(o,D)}else{const D=s.contentHooks;null!==D&&ja(o,D,1),or(o,1)}!function Yu(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const h=l[d];if(h<0)wo(~h);else{const p=h,_=l[++d],w=l[++d];Xc(_,p),w(2,o[p])}}}finally{wo(-1)}}(s,o);const w=s.components;null!==w&&function Si(s,o){for(let l=0;l<o.length;l++)yI(s,o[l])}(o,w);const C=s.viewQuery;if(null!==C&&Ig(2,C,d),_){const D=s.viewCheckHooks;null!==D&&Ba(o,D)}else{const D=s.viewHooks;null!==D&&ja(o,D,2),or(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-73,1024&o[2]&&(o[2]&=-1025,Zs(o[3],-1))}finally{ui()}}}function Cb(s,o,l,d){const h=o[10],_=Ko(o);try{!_&&h.begin&&h.begin(),_&&Ad(s,o,d),Yl(s,o,l,d)}finally{!_&&h.end&&h.end()}}function Xy(s,o,l,d,h){const p=Dr(),_=2&d;try{wo(-1),_&&o.length>20&&zy(s,o,20,!1),l(d,h)}finally{wo(p)}}function Tg(s,o,l){!Yo()||(function sx(s,o,l,d){const h=l.directiveStart,p=l.directiveEnd;s.firstCreatePass||Ks(l,o),Ii(d,o);const _=l.initialInputs;for(let w=h;w<p;w++){const C=s.data[w],D=Ei(C);D&&ox(o,l,C);const O=Wr(o,s,w,l);Ii(O,o),null!==_&&ax(0,w-h,O,C,0,_),D&&(_r(l.index,o)[8]=O)}}(s,o,l,yr(l,o)),128==(128&l.flags)&&function Xu(s,o,l){const d=l.directiveStart,h=l.directiveEnd,_=l.index,w=function La(){return St.lFrame.currentDirectiveIndex}();try{wo(_);for(let C=d;C<h;C++){const D=s.data[C],O=o[C];Su(C),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&Ql(D,O)}}finally{wo(-1),Su(w)}}(s,o,l))}function xd(s,o,l=yr){const d=o.localNames;if(null!==d){let h=o.index+1;for(let p=0;p<d.length;p+=2){const _=d[p+1],w=-1===_?l(o,s):s[_];s[h++]=w}}}function t_(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=af(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function af(s,o,l,d,h,p,_,w,C,D){const O=20+d,F=O+h,q=function Ib(s,o){const l=[];for(let d=0;d<o;d++)l.push(d<s?null:Bt);return l}(O,F),X="function"==typeof D?D():D;return q[1]={type:s,blueprint:q,template:l,queries:null,viewQuery:w,declTNode:o,data:q.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:C,consts:X,incompleteFirstPass:!1}}function i_(s,o,l,d){const h=Ob(o);null===l?h.push(d):(h.push(l),s.firstCreatePass&&__(s).push(d,h.length-1))}function o_(s,o,l){for(let d in s)if(s.hasOwnProperty(d)){const h=s[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(o,h):l[d]=[o,h]}return l}function di(s,o,l,d){let h=!1;if(Yo()){const p=function h_(s,o,l){const d=s.directiveRegistry;let h=null;if(d)for(let p=0;p<d.length;p++){const _=d[p];qy(l,_.selectors,!1)&&(h||(h=[]),es(Ks(l,o),s,_.type),Ei(_)?(uf(s,l),h.unshift(_)):h.push(_))}return h}(s,o,l),_=null===d?null:{"":-1};if(null!==p){h=!0,Ab(l,s.data.length,p.length);for(let O=0;O<p.length;O++){const F=p[O];F.providersResolver&&F.providersResolver(F)}let w=!1,C=!1,D=Kl(s,o,p.length,null);for(let O=0;O<p.length;O++){const F=p[O];l.mergedAttrs=Ha(l.mergedAttrs,F.hostAttrs),pI(s,l,o,D,F),f_(D,F,_),null!==F.contentQueries&&(l.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(l.flags|=128);const q=F.type.prototype;!w&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),w=!0),!C&&(q.ngOnChanges||q.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),C=!0),D++}!function a_(s,o){const d=o.directiveEnd,h=s.data,p=o.attrs,_=[];let w=null,C=null;for(let D=o.directiveStart;D<d;D++){const O=h[D],F=O.inputs,q=null===p||XC(o)?null:ux(F,p);_.push(q),w=o_(F,D,w),C=o_(O.outputs,D,C)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=w,o.outputs=C}(s,l)}_&&function fI(s,o,l){if(o){const d=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=l[o[h+1]];if(null==p)throw new Le(-301,!1);d.push(o[h],p)}}}(l,d,_)}return l.mergedAttrs=Ha(l.mergedAttrs,l.attrs),h}function d_(s,o,l,d,h,p){const _=p.hostBindings;if(_){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const C=~o.index;(function ix(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(w)!=C&&w.push(C),w.push(d,h,_)}}function Ql(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function uf(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function f_(s,o,l){if(l){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)l[o.exportAs[d]]=s;Ei(o)&&(l[""]=s)}}function Ab(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function pI(s,o,l,d,h){s.data[d]=h;const p=h.factory||(h.factory=Ti(h.type)),_=new ta(p,Ei(h),null);s.blueprint[d]=_,l[d]=_,d_(s,o,0,d,Kl(s,l,h.hostVars,Bt),h)}function ox(s,o,l){const d=yr(o,s),h=t_(l),p=s[10],_=Jl(s,sf(s,h,null,l.onPush?64:16,d,o,p,p.createRenderer(d,l),null,null));s[o.index]=_}function nu(s,o,l,d,h,p){const _=yr(s,o);!function xb(s,o,l,d,h,p,_){if(null==p)yn(s)?s.removeAttribute(o,h,l):o.removeAttribute(h);else{const w=null==_?ge(p):_(p,d||"",h);yn(s)?s.setAttribute(o,h,w,l):l?o.setAttributeNS(l,h,w):o.setAttribute(h,w)}}(o[11],_,p,s.value,l,d,h)}function ax(s,o,l,d,h,p){const _=p[o];if(null!==_){const w=d.setInput;for(let C=0;C<_.length;){const D=_[C++],O=_[C++],F=_[C++];null!==w?d.setInput(l,F,D,O):l[O]=F}}}function ux(s,o){let l=null,d=0;for(;d<o.length;){const h=o[d];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,s[h],o[d+1])),d+=2}else d+=2;else d+=4}return l}function p_(s,o,l,d){return new Array(s,!0,!1,o,null,0,d,l,null,null)}function yI(s,o){const l=_r(o,s);if(Yi(l)){const d=l[1];80&l[2]?Yl(d,l,d.template,l[8]):l[5]>0&&Md(l)}}function Md(s){for(let d=lg(s);null!==d;d=Uy(d))for(let h=10;h<d.length;h++){const p=d[h];if(1024&p[2]){const _=p[1];Yl(_,p,_.template,p[8])}else p[5]>0&&Md(p)}const l=s[1].components;if(null!==l)for(let d=0;d<l.length;d++){const h=_r(l[d],s);Yi(h)&&h[5]>0&&Md(h)}}function lf(s,o){const l=_r(o,s),d=l[1];(function Cg(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(d,l),Ad(d,l,l[8])}function Jl(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function g_(s){for(;s;){s[2]|=64;const o=ef(s);if(_u(s)&&!o)return s;s=o}return null}function Mb(s){!function Od(s){for(let o=0;o<s.components.length;o++){const l=s.components[o],d=xy(l),h=d[1];Cb(h,d,h.template,l)}}(s[8])}function Ig(s,o,l){td(0),o(s,l)}const hx=(()=>Promise.resolve(null))();function Ob(s){return s[7]||(s[7]=[])}function __(s){return s.cleanup||(s.cleanup=[])}function Sg(s,o){const l=s[9],d=l?l.get(og,null):null;d&&d.handleError(o)}function Pb(s,o,l,d,h){for(let p=0;p<l.length;){const _=l[p++],w=l[p++],C=o[_],D=s.data[_];null!==D.setInput?D.setInput(C,h,d,w):C[w]=h}}function da(s,o,l){const d=yo(o,s);!function J0(s,o,l){yn(s)?s.setValue(o,l):o.textContent=l}(s[11],d,l)}function Pd(s,o,l){let d=l?s.styles:null,h=l?s.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const w=o[_];"number"==typeof w?p=w:1==p?h=ve(h,w):2==p&&(d=ve(d,w+": "+o[++_]+";"))}l?s.styles=d:s.stylesWithoutHost=d,l?s.classes=h:s.classesWithoutHost=h}const Xl=new kn("INJECTOR",-1);class cf{get(o,l=Qr){if(l===Qr){const d=new Error(`NullInjectorError: No provider for ${le(o)}!`);throw d.name="NullInjectorError",d}return l}}const el=new kn("Set Injector scope."),ru={},bI={};let df;function b_(){return void 0===df&&(df=new cf),df}function Dg(s,o=null,l=null,d){const h=w_(s,o,l,d);return h._resolveInjectorDefTypes(),h}function w_(s,o=null,l=null,d){return new Ag(s,l,o||b_(),d)}class Ag{constructor(o,l,d,h=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];l&&li(l,w=>this.processProvider(w,o,l)),li([o],w=>this.processInjectorType(w,[],p)),this.records.set(Xl,ec(void 0,this));const _=this.records.get(el);this.scope=null!=_?_.value:null,this.source=h||("object"==typeof o?null:le(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,l=Qr,d=wt.Default){this.assertNotDestroyed();const h=T(this),p=an(void 0);try{if(!(d&wt.SkipSelf)){let w=this.records.get(o);if(void 0===w){const C=function S_(s){return"function"==typeof s||"object"==typeof s&&s instanceof kn}(o)&&Dn(o);w=C&&this.injectableDefInScope(C)?ec(xg(o),ru):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(d&wt.Self?b_():this.parent).get(o,l=d&wt.Optional&&l===Qr?null:l)}catch(_){if("NullInjectorError"===_.name){if((_[ns]=_[ns]||[]).unshift(le(o)),h)throw _;return function mt(s,o,l,d){const h=s[ns];throw o[Rl]&&h.unshift(o[Rl]),s.message=function xt(s,o,l,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=le(o);if(Array.isArray(o))h=o.map(le).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let w=o[_];p.push(_+":"+("string"==typeof w?JSON.stringify(w):le(w)))}h=`{${p.join(", ")}}`}return`${l}${d?"("+d+")":""}[${h}]: ${s.replace(jh,"\n  ")}`}("\n"+s.message,h,l,d),s.ngTokenPath=h,s[ns]=null,s}(_,o,"R3InjectorError",this.source)}throw _}finally{an(p),T(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((d,h)=>o.push(le(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Le(205,!1)}processInjectorType(o,l,d){if(!(o=ie(o)))return!1;let h=gs(o);const p=null==h&&o.ngModule||void 0,_=void 0===p?o:p,w=-1!==d.indexOf(_);if(void 0!==p&&(h=gs(p)),null==h)return!1;if(null!=h.imports&&!w){let O;d.push(_);try{li(h.imports,F=>{this.processInjectorType(F,l,d)&&(void 0===O&&(O=[]),O.push(F))})}finally{}if(void 0!==O)for(let F=0;F<O.length;F++){const{ngModule:q,providers:X}=O[F];li(X,Te=>this.processProvider(Te,q,X||gt))}}this.injectorDefTypes.add(_);const C=Ti(_)||(()=>new _);this.records.set(_,ec(C,ru));const D=h.providers;if(null!=D&&!w){const O=o;li(D,F=>this.processProvider(F,O,D))}return void 0!==p&&void 0!==o.providers}processProvider(o,l,d){let h=us(o=ie(o))?o:ie(o&&o.provide);const p=function wI(s,o,l){return C_(s)?ec(void 0,s.useValue):ec(T_(s),ru)}(o);if(us(o)||!0!==o.multi)this.records.get(h);else{let _=this.records.get(h);_||(_=ec(void 0,ru,!0),_.factory=()=>ue(_.multi),this.records.set(h,_)),h=o,_.multi.push(o)}this.records.set(h,p)}hydrate(o,l){return l.value===ru&&(l.value=bI,l.value=l.factory()),"object"==typeof l.value&&l.value&&function hf(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this.onDestroy.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=ie(o.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function xg(s){const o=Dn(s),l=null!==o?o.factory:Ti(s);if(null!==l)return l;if(s instanceof kn)throw new Le(204,!1);if(s instanceof Function)return function E_(s){const o=s.length;if(o>0)throw function Ya(s,o){const l=[];for(let d=0;d<s;d++)l.push(o);return l}(o,"?"),new Le(204,!1);const l=function Nr(s){const o=s&&(s[_i]||s[Un]);if(o){const l=function On(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Le(204,!1)}function T_(s,o,l){let d;if(us(s)){const h=ie(s);return Ti(h)||xg(h)}if(C_(s))d=()=>ie(s.useValue);else if(function xr(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...ue(s.deps||[]));else if(function I_(s){return!(!s||!s.useExisting)}(s))d=()=>M(ie(s.useExisting));else{const h=ie(s&&(s.useClass||s.provide));if(!function TI(s){return!!s.deps}(s))return Ti(h)||xg(h);d=()=>new h(...ue(s.deps))}return d}function ec(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function C_(s){return null!==s&&"object"==typeof s&&ju in s}function us(s){return"function"==typeof s}let ko=(()=>{class s{static create(l,d){var h;if(Array.isArray(l))return Dg({name:""},d,l,"");{const p=null!==(h=l.name)&&void 0!==h?h:"";return Dg({name:p},l.parent,l.providers,p)}}}return s.THROW_IF_NOT_FOUND=Qr,s.NULL=new cf,s.\u0275prov=on({token:s,providedIn:"any",factory:()=>M(Xl)}),s.__NG_ELEMENT_ID__=-1,s})();function D_(s,o){Is(xy(s)[1],Sn())}function iu(s){let o=function Bb(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const d=[s];for(;o;){let h;if(Ei(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Le(903,"");h=o.\u0275dir}if(h){if(l){d.push(h);const _=s;_.inputs=kg(s.inputs),_.declaredInputs=kg(s.declaredInputs),_.outputs=kg(s.outputs);const w=h.hostBindings;w&&jb(s,w);const C=h.viewQuery,D=h.contentQueries;if(C&&kI(s,C),D&&Ng(s,D),me(s.inputs,h.inputs),me(s.declaredInputs,h.declaredInputs),me(s.outputs,h.outputs),Ei(h)&&h.data.animation){const O=s.data;O.animation=(O.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let _=0;_<p.length;_++){const w=p[_];w&&w.ngInherit&&w(s),w===iu&&(l=!1)}}o=Object.getPrototypeOf(o)}!function PI(s){let o=0,l=null;for(let d=s.length-1;d>=0;d--){const h=s[d];h.hostVars=o+=h.hostVars,h.hostAttrs=Ha(h.hostAttrs,l=Ha(l,h.hostAttrs))}}(d)}function kg(s){return s===mn?{}:s===gt?[]:s}function kI(s,o){const l=s.viewQuery;s.viewQuery=l?(d,h)=>{o(d,h),l(d,h)}:o}function Ng(s,o){const l=s.contentQueries;s.contentQueries=l?(d,h,p)=>{o(d,h,p),l(d,h,p)}:o}function jb(s,o){const l=s.hostBindings;s.hostBindings=l?(d,h)=>{o(d,h),l(d,h)}:o}let A_=null;function tl(){if(!A_){const s=zt.Symbol;if(s&&s.iterator)A_=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const d=o[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(A_=d)}}}return A_}function Nd(s){return!!su(s)&&(Array.isArray(s)||!(s instanceof Map)&&tl()in s)}function su(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ha(s,o,l){return s[o]=l}function Di(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function gf(s,o,l,d){const h=Ne();return Di(h,Jo(),o)&&(Wt(),nu(Qn(),h,s,o,l,d)),gf}function sc(s,o,l,d,h,p){const w=function ou(s,o,l,d){const h=Di(s,o,l);return Di(s,o+1,d)||h}(s,function Ji(){return St.lFrame.bindingIndex}(),l,h);return ai(2),w?o+ge(l)+d+ge(h)+p:Bt}function we(s,o,l,d,h,p,_,w){const C=Ne(),D=Wt(),O=s+20,F=D.firstCreatePass?function Vd(s,o,l,d,h,p,_,w,C){const D=o.consts,O=$n(o,s,4,_||null,oi(D,w));di(o,l,O,oi(D,C)),Is(o,O);const F=O.tViews=af(2,O,d,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,D);return null!==o.queries&&(o.queries.template(o,O),F.queries=o.queries.embeddedTView(O)),O}(O,D,C,o,l,d,h,p,_):D.data[O];Qi(F,!1);const q=C[11].createComment("");Sd(D,C,q,F),Ii(q,C),Jl(C,C[O]=p_(q,C,q,F)),js(F)&&Tg(D,C,F),null!=_&&xd(C,F,w)}function bf(s,o=wt.Default){const l=Ne();return null===l?M(s,o):Ds(Sn(),l,ie(s),o)}function ew(){throw new Error("invalid")}function N_(s,o,l){const d=Ne();return Di(d,Jo(),o)&&function as(s,o,l,d,h,p,_,w){const C=yr(o,l);let O,D=o.inputs;!w&&null!=D&&(O=D[d])?(Pb(s,l,O,d,h),yu(o)&&function Db(s,o){const l=_r(o,s);16&l[2]||(l[2]|=64)}(l,o.index)):3&o.type&&(d=function Sb(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),h=null!=_?_(h,o.value||"",d):h,yn(p)?p.setProperty(C,d,h):zr(d)||(C.setProperty?C.setProperty(d,h):C[d]=h))}(Wt(),Qn(),d,s,o,d[11],l,!1),N_}function R_(s,o,l,d,h){const _=h?"class":"style";Pb(s,l,o.inputs[_],_,d)}function lc(s,o,l,d){const h=Ne(),p=Wt(),_=20+s,w=h[11],C=h[_]=lr(w,o,function jp(){return St.lFrame.currentNamespace}()),D=p.firstCreatePass?function qi(s,o,l,d,h,p,_){const w=o.consts,D=$n(o,s,2,h,oi(w,p));return di(o,l,D,oi(w,_)),null!==D.attrs&&Pd(D,D.attrs,!1),null!==D.mergedAttrs&&Pd(D,D.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,D),D}(_,p,h,0,o,l,d):p.data[_];Qi(D,!0);const O=D.mergedAttrs;null!==O&&ar(w,C,O);const F=D.classes;null!==F&&mg(w,C,F);const q=D.styles;return null!==q&&QC(w,C,q),64!=(64&D.flags)&&Sd(p,h,C,D),0===function Wc(){return St.lFrame.elementDepthCount}()&&Ii(C,h),function Na(){St.lFrame.elementDepthCount++}(),js(D)&&(Tg(p,h,D),function e_(s,o,l){if(Uc(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const _=s.data[p];_.contentQueries&&_.contentQueries(1,l[p],p)}}}(p,D,h)),null!==d&&xd(h,D),lc}function wf(){let s=Sn();Cl()?function Fa(){St.lFrame.isParent=!1}():(s=s.parent,Qi(s,!1));const o=s;!function Kc(){St.lFrame.elementDepthCount--}();const l=Wt();return l.firstCreatePass&&(Is(l,s),Uc(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function $p(s){return 0!=(16&s.flags)}(o)&&R_(l,o,Ne(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function En(s){return 0!=(32&s.flags)}(o)&&R_(l,o,Ne(),o.stylesWithoutHost,!1),wf}function Ef(s,o,l,d){return lc(s,o,l,d),wf(),Ef}function nw(){return Ne()}function V_(s){return!!s&&"function"==typeof s.then}function rw(s){return!!s&&"function"==typeof s.subscribe}const jd=rw;function Lg(s,o,l,d){const h=Ne(),p=Wt(),_=Sn();return function sw(s,o,l,d,h,p,_,w){const C=js(d),O=s.firstCreatePass&&__(s),F=o[8],q=Ob(o);let X=!0;if(3&d.type||w){const et=yr(d,o),at=w?w(et):et,ke=q.length,Dt=w?Ct=>w(pn(Ct[d.index])):d.index;if(yn(l)){let Ct=null;if(!w&&C&&(Ct=function iw(s,o,l,d){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const _=h[p];if(_===l&&h[p+1]===d){const w=o[7],C=h[p+2];return w.length>C?w[C]:null}"string"==typeof _&&(p+=2)}return null}(s,o,h,d.index)),null!==Ct)(Ct.__ngLastListenerFn__||Ct).__ngNextListenerFn__=p,Ct.__ngLastListenerFn__=p,X=!1;else{p=B_(d,o,F,p,!1);const ht=l.listen(at,h,p);q.push(p,ht),O&&O.push(h,Dt,ke,ke+1)}}else p=B_(d,o,F,p,!0),at.addEventListener(h,p,_),q.push(p),O&&O.push(h,Dt,ke,_)}else p=B_(d,o,F,p,!1);const Te=d.outputs;let Be;if(X&&null!==Te&&(Be=Te[h])){const et=Be.length;if(et)for(let at=0;at<et;at+=2){const hs=o[Be[at]][Be[at+1]].subscribe(p),dl=q.length;q.push(p,hs),O&&O.push(h,d.index,dl,-(dl+1))}}}(p,h,h[11],_,s,o,!!l,d),Lg}function ow(s,o,l,d){try{return!1!==l(d)}catch(h){return Sg(s,h),!1}}function B_(s,o,l,d,h){return function p(_){if(_===Function)return d;const w=2&s.flags?_r(s.index,o):o;0==(32&o[2])&&g_(w);let C=ow(o,0,d,_),D=p.__ngNextListenerFn__;for(;D;)C=ow(o,0,D,_)&&C,D=D.__ngNextListenerFn__;return h&&!1===C&&(_.preventDefault(),_.returnValue=!1),C}}function aw(s=1){return function Lh(s){return(St.lFrame.contextLView=function Sl(s,o){for(;s>0;)o=o[15],s--;return o}(s,St.lFrame.contextLView))[8]}(s)}function fw(s,o,l,d,h){const p=s[l+1],_=null===o;let w=d?la(p):ca(p),C=!1;for(;0!==w&&(!1===C||_);){const O=s[w+1];Hg(s[w],o)&&(C=!0,s[w+1]=d?Gl(O):yg(O)),w=d?la(O):ca(O)}C&&(s[l+1]=d?yg(p):Gl(p))}function Hg(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Js(s,o)>=0}function Z_(s,o){return function No(s,o,l,d){const h=Ne(),p=Wt(),_=ai(2);p.firstUpdatePass&&function z_(s,o,l,d){const h=s.data;if(null===h[l+1]){const p=h[Dr()],_=function Tw(s,o){return o>=s.expandoStartIndex}(s,l);(function K_(s,o){return 0!=(s.flags&(o?16:32))})(p,d)&&null===o&&!_&&(o=!1),o=function Cw(s,o,l,d){const h=function ea(s){const o=St.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=d?o.residualClasses:o.residualStyles;if(null===h)0===(d?o.classBindings:o.styleBindings)&&(l=Sf(l=Aw(null,s,o,l,d),o.attrs,d),p=null);else{const _=o.directiveStylingLast;if(-1===_||s[_]!==h)if(l=Aw(h,s,o,l,d),null===p){let C=function Iw(s,o,l){const d=l?o.classBindings:o.styleBindings;if(0!==ca(d))return s[la(d)]}(s,o,d);void 0!==C&&Array.isArray(C)&&(C=Aw(null,s,o,C[1],d),C=Sf(C,o.attrs,d),function Sw(s,o,l,d){s[la(l?o.classBindings:o.styleBindings)]=d}(s,o,d,C))}else p=function Dw(s,o,l){let d;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)d=Sf(d,s[p].hostAttrs,l);return Sf(d,o.attrs,l)}(s,o,d)}return void 0!==p&&(d?o.residualClasses=p:o.residualStyles=p),l}(h,p,o,d),function XI(s,o,l,d,h,p){let _=p?o.classBindings:o.styleBindings,w=la(_),C=ca(_);s[d]=l;let O,D=!1;if(Array.isArray(l)){const F=l;O=F[1],(null===O||Js(F,O)>0)&&(D=!0)}else O=l;if(h)if(0!==C){const q=la(s[w+1]);s[d+1]=io(q,w),0!==q&&(s[q+1]=_g(s[q+1],d)),s[w+1]=function nI(s,o){return 131071&s|o<<17}(s[w+1],d)}else s[d+1]=io(w,0),0!==w&&(s[w+1]=_g(s[w+1],d)),w=d;else s[d+1]=io(C,0),0===w?w=d:s[C+1]=_g(s[C+1],d),C=d;D&&(s[d+1]=yg(s[d+1])),fw(s,O,d,!0),fw(s,O,d,!1),function eS(s,o,l,d,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Js(p,o)>=0&&(l[d+1]=Gl(l[d+1]))}(o,O,s,d,p),_=io(w,C),p?o.classBindings=_:o.styleBindings=_}(h,p,o,l,_,d)}}(p,s,_,d),o!==Bt&&Di(h,_,o)&&function sS(s,o,l,d,h,p,_,w){if(!(3&o.type))return;const C=s.data,D=C[w+1];Df(function gb(s){return 1==(1&s)}(D)?xw(C,o,l,h,ca(D),_):void 0)||(Df(p)||function pb(s){return 2==(2&s)}(D)&&(p=xw(C,null,l,h,w,_)),function tr(s,o,l,d,h){const p=yn(s);if(o)h?p?s.addClass(l,d):l.classList.add(d):p?s.removeClass(l,d):l.classList.remove(d);else{let _=-1===d.indexOf("-")?void 0:oa.DashCase;if(null==h)p?s.removeStyle(l,d,_):l.style.removeProperty(d);else{const w="string"==typeof h&&h.endsWith("!important");w&&(h=h.slice(0,-10),_|=oa.Important),p?s.setStyle(l,d,h,_):l.style.setProperty(d,h,w?"important":"")}}}(d,_,yo(Dr(),l),h,p))}(p,p.data[Dr()],h,h[11],s,h[_+1]=function oS(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=le(xs(s)))),s}(o,l),d,_)}(s,o,null,!0),Z_}function Aw(s,o,l,d,h){let p=null;const _=l.directiveEnd;let w=l.directiveStylingLast;for(-1===w?w=l.directiveStart:w++;w<_&&(p=o[w],d=Sf(d,p.hostAttrs,h),p!==s);)w++;return null!==s&&(l.directiveStylingLast=w),d}function Sf(s,o,l){const d=l?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?h=_:h===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),wr(s,_,!!l||o[++p]))}return void 0===s?null:s}function xw(s,o,l,d,h,p){const _=null===o;let w;for(;h>0;){const C=s[h],D=Array.isArray(C),O=D?C[1]:C,F=null===O;let q=l[h+1];q===Bt&&(q=F?gt:void 0);let X=F?Do(q,d):O===d?q:void 0;if(D&&!Df(X)&&(X=Do(C,d)),Df(X)&&(w=X,_))return w;const Te=s[h+1];h=_?la(Te):ca(Te)}if(null!==o){let C=p?o.residualClasses:o.residualStyles;null!=C&&(w=Do(C,d))}return w}function Df(s){return void 0!==s}function qg(s,o=""){const l=Ne(),d=Wt(),h=s+20,p=d.firstCreatePass?$n(d,h,1,o,null):d.data[h],_=l[h]=function cg(s,o){return yn(s)?s.createText(o):s.createTextNode(o)}(l[11],o);Sd(d,l,_,p),Qi(p,!1)}function qd(s){return Y_("",s,""),qd}function Y_(s,o,l){const d=Ne(),h=function Rd(s,o,l,d){return Di(s,Jo(),l)?o+ge(l)+d:Bt}(d,s,o,l);return h!==Bt&&da(d,Dr(),h),Y_}function Af(s,o,l,d,h){const p=Ne(),_=sc(p,s,o,l,d,h);return _!==Bt&&da(p,Dr(),_),Af}const ga=void 0;var gS=["en",[["a","p"],["AM","PM"],ga],[["AM","PM"],ga,ga],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ga,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ga,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ga,"{1} 'at' {0}",ga],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Mf(s){const l=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let rl={};function X_(s){const o=function mS(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=Of(o);if(l)return l;const d=o.split("-")[0];if(l=Of(d),l)return l;if("en"===d)return gS;throw new Error(`Missing locale data for the locale "${s}".`)}function hi(s){return X_(s)[bt.PluralCase]}function Of(s){return s in rl||(rl[s]=zt.ng&&zt.ng.common&&zt.ng.common.locales&&zt.ng.common.locales[s]),rl[s]}var bt=(()=>((bt=bt||{})[bt.LocaleId=0]="LocaleId",bt[bt.DayPeriodsFormat=1]="DayPeriodsFormat",bt[bt.DayPeriodsStandalone=2]="DayPeriodsStandalone",bt[bt.DaysFormat=3]="DaysFormat",bt[bt.DaysStandalone=4]="DaysStandalone",bt[bt.MonthsFormat=5]="MonthsFormat",bt[bt.MonthsStandalone=6]="MonthsStandalone",bt[bt.Eras=7]="Eras",bt[bt.FirstDayOfWeek=8]="FirstDayOfWeek",bt[bt.WeekendRange=9]="WeekendRange",bt[bt.DateFormat=10]="DateFormat",bt[bt.TimeFormat=11]="TimeFormat",bt[bt.DateTimeFormat=12]="DateTimeFormat",bt[bt.NumberSymbols=13]="NumberSymbols",bt[bt.NumberFormats=14]="NumberFormats",bt[bt.CurrencyCode=15]="CurrencyCode",bt[bt.CurrencySymbol=16]="CurrencySymbol",bt[bt.CurrencyName=17]="CurrencyName",bt[bt.Currencies=18]="Currencies",bt[bt.Directionality=19]="Directionality",bt[bt.PluralCase=20]="PluralCase",bt[bt.ExtraData=21]="ExtraData",bt))();const Gd="en-US";let Kg=Gd;function pi(s,o,l,d,h){if(s=ie(s),Array.isArray(s))for(let p=0;p<s.length;p++)pi(s[p],o,l,d,h);else{const p=Wt(),_=Ne();let w=us(s)?s:ie(s.provide),C=T_(s);const D=Sn(),O=1048575&D.providerIndexes,F=D.directiveStart,q=D.providerIndexes>>20;if(us(s)||!s.multi){const X=new ta(C,h,bf),Te=Qd(w,o,h?O:O+q,F);-1===Te?(es(Ks(D,_),p,w),sm(p,s,o.length),o.push(w),D.directiveStart++,D.directiveEnd++,h&&(D.providerIndexes+=1048576),l.push(X),_.push(X)):(l[Te]=X,_[Te]=X)}else{const X=Qd(w,o,O+q,F),Te=Qd(w,o,O,O+q),Be=X>=0&&l[X],et=Te>=0&&l[Te];if(h&&!et||!h&&!Be){es(Ks(D,_),p,w);const at=function wE(s,o,l,d,h){const p=new ta(s,l,bf);return p.multi=[],p.index=o,p.componentProviders=0,Yd(p,h,d&&!l),p}(h?pv:bE,l.length,h,d,C);!h&&et&&(l[Te].providerFactory=at),sm(p,s,o.length,0),o.push(w),D.directiveStart++,D.directiveEnd++,h&&(D.providerIndexes+=1048576),l.push(at),_.push(at)}else sm(p,s,X>-1?X:Te,Yd(l[h?Te:X],C,!h&&d));!h&&d&&et&&l[Te].componentProviders++}}}function sm(s,o,l,d){const h=us(o),p=function EI(s){return!!s.useClass}(o);if(h||p){const C=(p?ie(o.useClass):o).prototype.ngOnDestroy;if(C){const D=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const O=D.indexOf(l);-1===O?D.push(l,[d,C]):D[O+1].push(d,C)}else D.push(l,C)}}}function Yd(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function Qd(s,o,l,d){for(let h=l;h<d;h++)if(o[h]===s)return h;return-1}function bE(s,o,l,d){return om(this.multi,[])}function pv(s,o,l,d){const h=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,w=Wr(l,l[1],this.providerFactory.index,d);p=w.slice(0,_),om(h,p);for(let C=_;C<w.length;C++)p.push(w[C])}else p=[],om(h,p);return p}function om(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function Jd(s,o=[]){return l=>{l.providersResolver=(d,h)=>function vE(s,o,l){const d=Wt();if(d.firstCreatePass){const h=Ei(s);pi(l,d.data,d.blueprint,h,!0),pi(o,d.data,d.blueprint,h,!1)}}(d,h?h(s):s,o)}}class am{}class EE{resolveComponentFactory(o){throw function mv(s){const o=Error(`No component factory found for ${le(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let lm=(()=>{class s{}return s.NULL=new EE,s})();function yv(){return uu(Sn(),Ne())}function uu(s,o){return new fc(yr(s,o))}let fc=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=yv,s})();function TE(s){return s instanceof fc?s.nativeElement:s}class _v{}let xS=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function CE(){const s=Ne(),l=_r(Sn().index,s);return function qf(s){return s[11]}(wi(l)?l:s)}(),s})(),cm=(()=>{class s{}return s.\u0275prov=on({token:s,providedIn:"root",factory:()=>null}),s})();class Xd{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const il=new Xd("13.3.11"),Gf={};function dm(s,o,l,d,h=!1){for(;null!==l;){const p=o[l.index];if(null!==p&&d.push(pn(p)),si(p))for(let w=10;w<p.length;w++){const C=p[w],D=C[1].firstChild;null!==D&&dm(C[1],C,D,d)}const _=l.type;if(8&_)dm(s,o,l.child,d);else if(32&_){const w=Fy(l,o);let C;for(;C=w();)d.push(C)}else if(16&_){const w=ub(o,l);if(Array.isArray(w))d.push(...w);else{const C=ef(o[16]);dm(C[1],C,w,d,!0)}}l=h?l.projectionNext:l.next}return d}class Zf{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return dm(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(si(o)){const l=o[8],d=l?l.indexOf(this):-1;d>-1&&(dg(o,d),Ka(l,d))}this._attachedToViewContainer=!1}tb(this._lView[1],this._lView)}onDestroy(o){i_(this._lView[1],this._lView,null,o)}markForCheck(){g_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function y_(s,o,l){const d=o[10];d.begin&&d.begin();try{Yl(s,o,s.template,l)}catch(h){throw Sg(o,h),h}finally{d.end&&d.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Le(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Cd(s,o){Dd(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Le(902,"");this._appRef=o}}class IE extends Zf{constructor(o){super(o),this._view=o}detectChanges(){Mb(this._view)}checkNoChanges(){}get context(){return null}}class vv extends lm{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=dt(o);return new eh(l,this.ngModule)}}function SE(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}class eh extends am{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function eI(s){return s.map(os).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return SE(this.componentDef.inputs)}get outputs(){return SE(this.componentDef.outputs)}create(o,l,d,h){const p=(h=h||this.ngModule)?function lu(s,o){return{get:(l,d,h)=>{const p=s.get(l,Gf,h);return p!==Gf||d===Gf?p:o.get(l,d,h)}}}(o,h.injector):o,_=p.get(_v,Pa),w=p.get(cm,null),C=_.createRenderer(null,this.componentDef),D=this.componentDef.selectors[0][0]||"div",O=d?function r_(s,o,l){if(yn(s))return s.selectRootElement(o,l===Yt.ShadowDom);let d="string"==typeof o?s.querySelector(o):o;return d.textContent="",d}(C,d,this.componentDef.encapsulation):lr(_.createRenderer(null,this.componentDef),D,function pc(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(D)),F=this.componentDef.onPush?576:528,q=function Vb(s,o){return{components:[],scheduler:s||HC,clean:hx,playerHandler:o||null,flags:0}}(),X=af(0,null,null,1,0,null,null,null,null,null),Te=sf(null,X,q,F,null,null,_,C,w,p);let Be,et;Va(Te);try{const at=function Ub(s,o,l,d,h,p){const _=l[1];l[20]=s;const C=$n(_,20,2,"#host",null),D=C.mergedAttrs=o.hostAttrs;null!==D&&(Pd(C,D,!0),null!==s&&(ar(h,s,D),null!==C.classes&&mg(h,s,C.classes),null!==C.styles&&QC(h,s,C.styles)));const O=d.createRenderer(s,o),F=sf(l,t_(o),null,o.onPush?64:16,l[20],C,d,O,p||null,null);return _.firstCreatePass&&(es(Ks(C,l),_,o.type),uf(_,C),Ab(C,l.length,1)),Jl(l,F),l[20]=F}(O,this.componentDef,Te,_,C);if(O)if(d)ar(C,O,["ng-version",il.full]);else{const{attrs:ke,classes:Dt}=function tI(s){const o=[],l=[];let d=1,h=2;for(;d<s.length;){let p=s[d];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++d]):8===h&&l.push(p);else{if(!ua(h))break;h=p}d++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);ke&&ar(C,O,ke),Dt&&Dt.length>0&&mg(C,O,Dt.join(" "))}if(et=jn(X,20),void 0!==l){const ke=et.projection=[];for(let Dt=0;Dt<this.ngContentSelectors.length;Dt++){const Ct=l[Dt];ke.push(null!=Ct?Array.from(Ct):null)}}Be=function Pg(s,o,l,d,h){const p=l[1],_=function Ju(s,o,l){const d=Sn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),pI(s,d,o,Kl(s,o,1,null),l));const h=Wr(o,s,d.directiveStart,d);Ii(h,o);const p=yr(d,o);return p&&Ii(p,o),h}(p,l,o);if(d.components.push(_),s[8]=_,h&&h.forEach(C=>C(_,o)),o.contentQueries){const C=Sn();o.contentQueries(1,_,C.directiveStart)}const w=Sn();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(wo(w.index),d_(l[1],w,0,w.directiveStart,w.directiveEnd,o),Ql(o,_)),_}(at,this.componentDef,Te,q,[D_]),Ad(X,Te,null)}finally{ui()}return new Kn(this.componentType,Be,uu(et,Te),Te,et)}}class Kn extends class gv{}{constructor(o,l,d,h,p){super(),this.location=d,this._rootLView=h,this._tNode=p,this.instance=l,this.hostView=this.changeDetectorRef=new IE(h),this.componentType=o}get injector(){return new Ar(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class ya{}class th{}const nh=new Map;class cu extends ya{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new vv(this);const d=$t(o);this._bootstrapComponents=Mo(d.bootstrap),this._r3Injector=w_(o,l,[{provide:ya,useValue:this},{provide:lm,useValue:this.componentFactoryResolver}],le(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,l=ko.THROW_IF_NOT_FOUND,d=wt.Default){return o===ko||o===ya||o===Xl?this:this._r3Injector.get(o,l,d)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class gm extends th{constructor(o){super(),this.moduleType=o,null!==$t(o)&&function PS(s){const o=new Set;!function l(d){const h=$t(d,!0),p=h.id;null!==p&&(function DE(s,o,l){if(o&&o!==l)throw new Error(`Duplicate module registered for ${s} - ${le(o)} vs ${le(o.name)}`)}(p,nh.get(p),d),nh.set(p,d));const _=Mo(h.imports);for(const w of _)o.has(w)||(o.add(w),l(w))}(s)}(o)}create(o){return new cu(this.moduleType,o)}}function bv(s,o,l){const d=vr()+s,h=Ne();return h[d]===Bt?ha(h,d,l?o.call(l):o()):function rc(s,o){return s[o]}(h,d)}function wv(s,o,l,d){return function Tv(s,o,l,d,h,p){const _=o+l;return Di(s,_,h)?ha(s,_+1,p?d.call(p,h):d(h)):function gc(s,o){const l=s[o];return l===Bt?void 0:l}(s,_+1)}(Ne(),vr(),s,o,l,d)}function cr(s){return o=>{setTimeout(s,void 0,o)}}const Fo=class LS extends u.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,d){var h,p,_;let w=o,C=l||(()=>null),D=d;if(o&&"object"==typeof o){const F=o;w=null===(h=F.next)||void 0===h?void 0:h.bind(F),C=null===(p=F.error)||void 0===p?void 0:p.bind(F),D=null===(_=F.complete)||void 0===_?void 0:_.bind(F)}this.__isAsync&&(C=cr(C),w&&(w=cr(w)),D&&(D=cr(D)));const O=super.subscribe({next:w,error:C,complete:D});return o instanceof V.w0&&o.add(O),O}};function US(){return this._results[tl()]()}class Sv{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=tl(),d=Sv.prototype;d[l]||(d[l]=US)}get changes(){return this._changes||(this._changes=new Fo)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const d=this;d.dirty=!1;const h=Vr(o);(this._changesDetected=!function Ol(s,o,l){if(s.length!==o.length)return!1;for(let d=0;d<s.length;d++){let h=s[d],p=o[d];if(l&&(h=l(h),p=l(p)),p!==h)return!1}return!0}(d._results,h,l))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Kf=(()=>{class s{}return s.__NG_ELEMENT_ID__=LE,s})();const RE=Kf,FE=class extends RE{constructor(o,l,d){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(o){const l=this._declarationTContainer.tViews,d=sf(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(d[19]=p.createEmbeddedView(l)),Ad(l,d,o),new Zf(d)}};function LE(){return mc(Sn(),Ne())}function mc(s,o){return 4&s.type?new FE(o,s,uu(s,o)):null}let Yf=(()=>{class s{}return s.__NG_ELEMENT_ID__=hu,s})();function hu(){return Av(Sn(),Ne())}const UE=Yf,Dv=class extends UE{constructor(o,l,d){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=d}get element(){return uu(this._hostTNode,this._hostLView)}get injector(){return new Ar(this._hostTNode,this._hostLView)}get parentInjector(){const o=$a(this._hostTNode,this._hostLView);if(ad(o)){const l=Xi(o,this._hostLView),d=Tn(o);return new Ar(l[1].data[d+8],l)}return new Ar(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=vm(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,d){const h=o.createEmbeddedView(l||{});return this.insert(h,d),h}createComponent(o,l,d,h,p){const _=o&&!function So(s){return"function"==typeof s}(o);let w;if(_)w=l;else{const F=l||{};w=F.index,d=F.injector,h=F.projectableNodes,p=F.ngModuleRef}const C=_?o:new eh(dt(o)),D=d||this.parentInjector;if(!p&&null==C.ngModule){const q=(_?D:this.parentInjector).get(ya,null);q&&(p=q)}const O=C.create(D,h,void 0,p);return this.insert(O.hostView,w),O}insert(o,l){const d=o._lView,h=d[1];if(function Tl(s){return si(s[3])}(d)){const O=this.indexOf(o);if(-1!==O)this.detach(O);else{const F=d[3],q=new Dv(F,F[6],F[3]);q.detach(q.indexOf(o))}}const p=this._adjustIndex(l),_=this._lContainer;!function Id(s,o,l,d){const h=10+d,p=l.length;d>0&&(l[h-1][4]=o),d<p-10?(o[4]=l[h],Pl(l,10+d,o)):(l.push(o),o[4]=null),o[3]=l;const _=o[17];null!==_&&l!==_&&function zC(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(_,o);const w=o[19];null!==w&&w.insertView(s),o[2]|=128}(h,d,_,p);const w=gg(p,_),C=d[11],D=fg(C,_[7]);return null!==D&&function X0(s,o,l,d,h,p){d[0]=h,d[6]=o,Dd(s,d,l,1,h,p)}(h,_[6],C,d,D,w),o.attachToViewContainerRef(),Pl(yc(_),p,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=vm(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),d=dg(this._lContainer,l);d&&(Ka(yc(this._lContainer),l),tb(d[1],d))}detach(o){const l=this._adjustIndex(o,-1),d=dg(this._lContainer,l);return d&&null!=Ka(yc(this._lContainer),l)?new Zf(d):null}_adjustIndex(o,l=0){return null==o?this.length+l:o}};function vm(s){return s[8]}function yc(s){return s[8]||(s[8]=[])}function Av(s,o){let l;const d=o[s.index];if(si(d))l=d;else{let h;if(8&s.type)h=pn(d);else{const p=o[11];h=p.createComment("");const _=yr(s,o);Wu(p,fg(p,_),h,function KC(s,o){return yn(s)?s.nextSibling(o):o.nextSibling}(p,_),!1)}o[s.index]=l=p_(d,o,h,s),Jl(o,l)}return new Dv(l,s,o)}class ih{constructor(o){this.queryList=o,this.matches=null}clone(){return new ih(this.queryList)}setDirty(){this.queryList.setDirty()}}class Mv{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const d=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let p=0;p<d;p++){const _=l.getByIndex(p);h.push(this.queries[_.indexInDeclarationView].clone())}return new Mv(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==Uv(o,l).matches&&this.queries[l].setDirty()}}class Ov{constructor(o,l,d=null){this.predicate=o,this.flags=l,this.read=d}}class _c{constructor(o=[]){this.queries=o}elementStart(o,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let d=0;d<this.length;d++){const h=null!==l?l.length:0,p=this.getByIndex(d).embeddedTView(o,h);p&&(p.indexInDeclarationView=d,null!==l?l.push(p):l=[p])}return null!==l?new _c(l):null}template(o,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class wm{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new wm(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const p=d[h];this.matchTNodeWithReadOption(o,l,VE(l,p)),this.matchTNodeWithReadOption(o,l,Pu(l,o,p,!1,!1))}else d===Kf?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,Pu(l,o,d,!1,!1))}matchTNodeWithReadOption(o,l,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===fc||h===Yf||h===Kf&&4&l.type)this.addMatch(l.index,-2);else{const p=Pu(l,o,h,!1,!1);null!==p&&this.addMatch(l.index,p)}else this.addMatch(l.index,d)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function VE(s,o){const l=s.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===o)return l[d+1];return null}function kv(s,o,l,d){return-1===l?function Pv(s,o){return 11&s.type?uu(s,o):4&s.type?mc(s,o):null}(o,s):-2===l?function BE(s,o,l){return l===fc?uu(o,s):l===Kf?mc(o,s):l===Yf?Av(o,s):void 0}(s,o,d):Wr(s,s[1],l,o)}function Qf(s,o,l,d){const h=o[19].queries[d];if(null===h.matches){const p=s.data,_=l.matches,w=[];for(let C=0;C<_.length;C+=2){const D=_[C];w.push(D<0?null:kv(o,p[D],_[C+1],l.metadata.read))}h.matches=w}return h.matches}function Em(s,o,l,d){const h=s.queries.getByIndex(l),p=h.matches;if(null!==p){const _=Qf(s,o,h,l);for(let w=0;w<p.length;w+=2){const C=p[w];if(C>0)d.push(_[w/2]);else{const D=p[w+1],O=o[-C];for(let F=10;F<O.length;F++){const q=O[F];q[17]===q[3]&&Em(q[1],q,D,d)}if(null!==O[9]){const F=O[9];for(let q=0;q<F.length;q++){const X=F[q];Em(X[1],X,D,d)}}}}}return d}function Nv(s){const o=Ne(),l=Wt(),d=ed();td(d+1);const h=Uv(l,d);if(s.dirty&&Ko(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?Em(l,o,d,[]):Qf(l,o,h,d);s.reset(p,TE),s.notifyOnChanges()}return!0}return!1}function sl(s,o,l){const d=Wt();d.firstCreatePass&&(Jf(d,new Ov(s,o,l),-1),2==(2&o)&&(d.staticViewQueries=!0)),Lv(d,Ne(),o)}function Rv(s,o,l,d){const h=Wt();if(h.firstCreatePass){const p=Sn();Jf(h,new Ov(o,l,d),p.index),function Ps(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}Lv(h,Ne(),l)}function Fv(){return function jE(s,o){return s[19].queries[o].queryList}(Ne(),ed())}function Lv(s,o,l){const d=new Sv(4==(4&l));i_(s,o,d,d.destroy),null===o[19]&&(o[19]=new Mv),o[19].queries.push(new ih(d))}function Jf(s,o,l){null===s.queries&&(s.queries=new _c),s.queries.track(new wm(o,l))}function Uv(s,o){return s.queries.getByIndex(o)}function ul(...s){}const Zv=new kn("Application Initializer");let Gi=(()=>{class s{constructor(l){this.appInits=l,this.resolve=ul,this.reject=ul,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,h)=>{this.resolve=d,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(V_(p))l.push(p);else if(jd(p)){const _=new Promise((w,C)=>{p.subscribe({complete:w,error:C})});l.push(_)}}Promise.all(l).then(()=>{d()}).catch(h=>{this.reject(h)}),0===l.length&&d(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(M(Zv,8))},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Sm=new kn("AppId",{providedIn:"root",factory:function zv(){return`${_a()}${_a()}${_a()}`}});function _a(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Dm=new kn("Platform Initializer"),he=new kn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),tp=new kn("appBootstrapListener");let ZS=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const ba=new kn("LocaleId",{providedIn:"root",factory:()=>J(ba,wt.Optional|wt.SkipSelf)||function np(){return"undefined"!=typeof $localize&&$localize.locale||Gd}()}),zS=new kn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class KS{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let YS=(()=>{class s{compileModuleSync(l){return new gm(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),p=Mo($t(l).declarations).reduce((_,w)=>{const C=dt(w);return C&&_.push(new eh(C)),_},[]);return new KS(d,p)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const bc=(()=>Promise.resolve(0))();function Am(s){"undefined"==typeof Zone?bc.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class cs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fo(!1),this.onMicrotaskEmpty=new Fo(!1),this.onStable=new Fo(!1),this.onError=new Fo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&l,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function dr(){let s=zt.requestAnimationFrame,o=zt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function uh(s){const o=()=>{!function nT(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(zt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Zi(s),s.isCheckStableRunning=!0,In(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Zi(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,h,p,_,w)=>{try{return rT(s),l.invokeTask(h,p,_,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),Pr(s)}},onInvoke:(l,d,h,p,_,w,C)=>{try{return rT(s),l.invoke(h,p,_,w,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),Pr(s)}},onHasTask:(l,d,h,p)=>{l.hasTask(h,p),d===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,Zi(s),In(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(l,d,h,p)=>(l.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!cs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(cs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,l,d){return this._inner.run(o,l,d)}runTask(o,l,d,h){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+h,o,mi,ul,ul);try{return p.runTask(_,l,d)}finally{p.cancelTask(_)}}runGuarded(o,l,d){return this._inner.runGuarded(o,l,d)}runOutsideAngular(o){return this._outer.run(o)}}const mi={};function In(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Zi(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function rT(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Pr(s){s._nesting--,In(s)}class JS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fo,this.onMicrotaskEmpty=new Fo,this.onStable=new Fo,this.onError=new Fo}run(o,l,d){return o.apply(l,d)}runGuarded(o,l,d){return o.apply(l,d)}runOutsideAngular(o){return o()}runTask(o,l,d,h){return o.apply(l,d)}}let pu=(()=>{class s{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{cs.assertNotInAngularZone(),Am(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Am(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,h){let p=-1;d&&d>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:p,updateCb:h})}whenStable(l,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,d,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(M(cs))},s.\u0275prov=on({token:s,factory:s.\u0275fac}),s})(),hr=(()=>{class s{constructor(){this._applications=new Map,xm.addToWindow(this)}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return xm.findTestabilityInTree(this,l,d)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class wc{addToWindow(o){}findTestabilityInTree(o,l,d){return null}}function Wv(s){xm=s}let xm=new wc,Lo=null;const iT=new kn("AllowMultipleToken"),gu=new kn("PlatformOnDestroy");class ll{constructor(o,l){this.name=o,this.token=l}}function cl(s,o,l=[]){const d=`Platform: ${o}`,h=new kn(d);return(p=[])=>{let _=Pm();if(!_||_.injector.get(iT,!1)){const w=[...l,...p,{provide:h,useValue:!0}];s?s(w):function Om(s){if(Lo&&!Lo.get(iT,!1))throw new Le(400,"");Lo=s;const o=s.get(Tc),l=s.get(Dm,null);l&&l.forEach(d=>d())}(function ip(s=[],o){return ko.create({name:o,providers:[{provide:el,useValue:"platform"},{provide:gu,useValue:()=>Lo=null},...s]})}(w,d))}return function wa(s){const o=Pm();if(!o)throw new Le(401,"");return o}()}}function Pm(){var s;return null!==(s=null==Lo?void 0:Lo.get(Tc))&&void 0!==s?s:null}let Tc=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const w=function Kv(s,o){let l;return l="noop"===s?new JS:("zone.js"===s?void 0:s)||new cs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),l}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),C=[{provide:cs,useValue:w}];return w.run(()=>{const D=ko.create({providers:C,parent:this.injector,name:l.moduleType.name}),O=l.create(D),F=O.injector.get(og,null);if(!F)throw new Le(402,"");return w.runOutsideAngular(()=>{const q=w.onError.subscribe({next:X=>{F.handleError(X)}});O.onDestroy(()=>{Nm(this._modules,O),q.unsubscribe()})}),function Cc(s,o,l){try{const d=l();return V_(d)?d.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):d}catch(d){throw o.runOutsideAngular(()=>s.handleError(d)),d}}(F,w,()=>{const q=O.injector.get(Gi);return q.runInitializers(),q.donePromise.then(()=>(function Yg(s){Zt(s,"Expected localeId to be defined"),"string"==typeof s&&(Kg=s.toLowerCase().replace(/_/g,"-"))}(O.injector.get(ba,Gd)||Gd),this._moduleDoBootstrap(O),O))})})}bootstrapModule(l,d=[]){const h=km({},d);return function rp(s,o,l){const d=new gm(l);return Promise.resolve(d)}(0,0,l).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(l){const d=l.injector.get(Ic);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new Le(403,"");l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Le(404,"");this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const l=this._injector.get(gu,null);null==l||l(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(M(ko))},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function km(s,o){return Array.isArray(o)?o.reduce(km,s):Object.assign(Object.assign({},s),o)}let Ic=(()=>{class s{constructor(l,d,h,p){this._zone=l,this._injector=d,this._exceptionHandler=h,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new P.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),w=new P.y(C=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{cs.assertNotInAngularZone(),Am(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const O=this._zone.onUnstable.subscribe(()=>{cs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{D.unsubscribe(),O.unsubscribe()}});this.isStable=(0,ae.T)(_,w.pipe((0,de.B)()))}bootstrap(l,d){if(!this._initStatus.done)throw new Le(405,"");let h;h=l instanceof am?l:this._injector.get(lm).resolveComponentFactory(l),this.componentTypes.push(h.componentType);const p=function sT(s){return s.isBoundToModule}(h)?void 0:this._injector.get(ya),w=h.create(ko.NULL,[],d||h.selector,p),C=w.location.nativeElement,D=w.injector.get(pu,null),O=D&&w.injector.get(hr);return D&&O&&O.registerApplication(C,D),w.onDestroy(()=>{this.detachView(w.hostView),Nm(this.components,w),O&&O.unregisterApplication(C)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Le(101,"");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;Nm(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(tp,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(l){return new(l||s)(M(cs),M(ko),M(og),M(Gi))},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Nm(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let lh=!0,Qv=!1;function XS(){return Qv=!0,lh}function e1(){if(Qv)throw new Error("Cannot enable prod mode after platform setup.");lh=!1}let oT=(()=>{class s{}return s.__NG_ELEMENT_ID__=Fn,s})();function Fn(s){return function r1(s,o,l){if(yu(s)&&!l){const d=_r(s.index,o);return new Zf(d,d)}return 47&s.type?new Zf(o[16],o):null}(Sn(),Ne(),16==(16&s))}class Ea{constructor(){}supports(o){return Nd(o)}create(o){return new dh(o)}}const cT=(s,o)=>o;class dh{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||cT}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,d=this._removalsHead,h=0,p=null;for(;l||d;){const _=!d||l&&l.currentIndex<Bm(d,h,p)?l:d,w=Bm(_,h,p),C=_.currentIndex;if(_===d)h--,d=d._nextRemoved;else if(l=l._next,null==_.previousIndex)h++;else{p||(p=[]);const D=w-h,O=C-h;if(D!=O){for(let q=0;q<D;q++){const X=q<p.length?p[q]:p[q]=0,Te=X+q;O<=Te&&Te<D&&(p[q]=X+1)}p[_.previousIndex]=O-D}}w!==C&&o(_,w,C)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!Nd(o))throw new Le(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,_,l=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)p=o[w],_=this._trackByFn(w,p),null!==l&&Object.is(l.trackById,_)?(d&&(l=this._verifyReinsertion(l,p,_,w)),Object.is(l.item,p)||this._addIdentityChange(l,p)):(l=this._mismatch(l,p,_,w),d=!0),l=l._next}else h=0,function qb(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[tl()]();let d;for(;!(d=l.next()).done;)o(d.value)}}(o,w=>{_=this._trackByFn(h,w),null!==l&&Object.is(l.trackById,_)?(d&&(l=this._verifyReinsertion(l,w,_,h)),Object.is(l.item,w)||this._addIdentityChange(l,w)):(l=this._mismatch(l,w,_,h),d=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,d,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,p,h)):o=this._addAfter(new dT(l,d),p,h),o}_verifyReinsertion(o,l,d,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,l,d),this._addToMoves(o,d),o}_moveAfter(o,l,d){return this._unlink(o),this._insertAfter(o,l,d),this._addToMoves(o,d),o}_addAfter(o,l,d){return this._insertAfter(o,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,d){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new Vm),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,d=o._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Vm),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class dT{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class n0{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const l=o._prevDup,d=o._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class Vm{constructor(){this.map=new Map}put(o){const l=o.trackById;let d=this.map.get(l);d||(d=new n0,this.map.set(l,d)),d.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Bm(s,o,l){const d=s.previousIndex;if(null===d)return d;let h=0;return l&&d<l.length&&(h=l[d]),d+o+h}class Dc{constructor(){}supports(o){return o instanceof Map||su(o)}create(){return new ds}}class ds{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||su(o)))throw new Le(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const p=this._getOrCreateRecordForKey(h,d);l=this._insertBeforeOrAppend(l,p)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const d=o._prev;return l._next=o,l._prev=d,o._prev=l,d&&(d._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const p=h._prev,_=h._next;return p&&(p._next=_),_&&(_._prev=p),h._next=null,h._prev=null,h}const d=new jm(o);return this._records.set(o,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(d=>l(o[d],d))}}class jm{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function hh(){return new Hm([new Ea])}let Hm=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(null!=d){const h=d.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||hh()),deps:[[s,new Wn,new ct]]}}find(l){const d=this.factories.find(h=>h.supports(l));if(null!=d)return d;throw new Le(901,"")}}return s.\u0275prov=on({token:s,providedIn:"root",factory:hh}),s})();function $m(){return new qm([new Dc])}let qm=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(d){const h=d.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||$m()),deps:[[s,new Wn,new ct]]}}find(l){const d=this.factories.find(p=>p.supports(l));if(d)return d;throw new Le(901,"")}}return s.\u0275prov=on({token:s,providedIn:"root",factory:$m}),s})();const pT=cl(null,"core",[]);let Gm=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(M(Ic))},s.\u0275mod=ee({type:s}),s.\u0275inj=rn({}),s})()},3942:(ot,Ce,N)=>{N.d(Ce,{Z:()=>Le});var u=N(2090),V=N(4859),P=N(9681),ae=N(1877);class de{constructor(ge,Ie){this._delegate=ge,this.firebase=Ie,(0,P._addComponent)(ge,new V.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(ge,Ie=P._DEFAULT_ENTRY_NAME){var ze;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(ge);return!Ze.isInitialized()&&"EXPLICIT"===(null===(ze=Ze.getComponent())||void 0===ze?void 0:ze.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:Ie})}_removeServiceInstance(ge,Ie=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(Ie)}_addComponent(ge){(0,P._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,P._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Z=function ve(){const qe=function le(qe){const ge={},Ie={__esModule:!0,initializeApp:function Re(ne,pe={}){const Ee=P.initializeApp(ne,pe);if((0,u.r3)(ge,Ee.name))return ge[Ee.name];const Q=new qe(Ee,Ie);return ge[Ee.name]=Q,Q},app:Ze,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Se(ne){const pe=ne.name,Ee=pe.replace("-compat","");if(P._registerComponent(ne)&&"PUBLIC"===ne.type){const Q=(re=Ze())=>{if("function"!=typeof re[Ee])throw me.create("invalid-app-argument",{appName:pe});return re[Ee]()};void 0!==ne.serviceProps&&(0,u.ZB)(Q,ne.serviceProps),Ie[Ee]=Q,qe.prototype[Ee]=function(...re){return this._getService.bind(this,pe).apply(this,ne.multipleInstances?re:[])}}return"PUBLIC"===ne.type?Ie[Ee]:null},removeApp:function ze(ne){delete ge[ne]},useAsService:function We(ne,pe){return"serverAuth"===pe?null:pe},modularAPIs:P}};function Ze(ne){if(!(0,u.r3)(ge,ne=ne||P._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:ne});return ge[ne]}return Ie.default=Ie,Object.defineProperty(Ie,"apps",{get:function Me(){return Object.keys(ge).map(ne=>ge[ne])}}),Ze.App=qe,Ie}(de);return qe.INTERNAL=Object.assign(Object.assign({},qe.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function ge(Ie){(0,u.ZB)(qe,Ie)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),qe}(),G=new ae.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const qe=self.firebase.SDK_VERSION;qe&&qe.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Le=Z;!function Oe(qe){(0,P.registerVersion)("@firebase/app-compat","0.1.34",qe)}()},9681:(ot,Ce,N)=>{N.r(Ce),N.d(Ce,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>_i,_DEFAULT_ENTRY_NAME:()=>Zt,_addComponent:()=>gn,_addOrOverwriteComponent:()=>on,_apps:()=>hn,_clearComponents:()=>zi,_components:()=>Ln,_getProvider:()=>rn,_registerComponent:()=>Ht,_removeServiceInstance:()=>Dn,deleteApp:()=>wt,getApp:()=>Un,getApps:()=>ms,initializeApp:()=>Ni,onLog:()=>an,registerVersion:()=>An,setLogLevel:()=>ir});var u=N(5861),V=N(4859),P=N(1877),ae=N(2090),de=N(8766);class ye{constructor($){this.container=$}getPlatformInfoString(){return this.container.getProviders().map(W=>{if(function me(B){const $=B.getComponent();return"VERSION"===(null==$?void 0:$.type)}(W)){const xe=W.getImmediate();return`${xe.library}/${xe.version}`}return null}).filter(W=>W).join(" ")}}const le="@firebase/app",Z=new P.Yd("@firebase/app"),Zt="[DEFAULT]",Ke={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},hn=new Map,Ln=new Map;function gn(B,$){try{B.container.addComponent($)}catch(W){Z.debug(`Component ${$.name} failed to register with FirebaseApp ${B.name}`,W)}}function on(B,$){B.container.addOrOverwriteComponent($)}function Ht(B){const $=B.name;if(Ln.has($))return Z.debug(`There were multiple attempts to register component ${$}.`),!1;Ln.set($,B);for(const W of hn.values())gn(W,B);return!0}function rn(B,$){const W=B.container.getProvider("heartbeat").getImmediate({optional:!0});return W&&W.triggerHeartbeat(),B.container.getProvider($)}function Dn(B,$,W=Zt){rn(B,$).clearInstance(W)}function zi(){Ln.clear()}const On=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class gs{constructor($,W,xe){this._isDeleted=!1,this._options=Object.assign({},$),this._config=Object.assign({},W),this._name=W.name,this._automaticDataCollectionEnabled=W.automaticDataCollectionEnabled,this._container=xe,this.container.addComponent(new V.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($){this.checkDestroyed(),this._automaticDataCollectionEnabled=$}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($){this._isDeleted=$}checkDestroyed(){if(this.isDeleted)throw On.create("app-deleted",{appName:this._name})}}const _i="9.10.0";function Ni(B,$={}){"object"!=typeof $&&($={name:$});const W=Object.assign({name:Zt,automaticDataCollectionEnabled:!1},$),xe=W.name;if("string"!=typeof xe||!xe)throw On.create("bad-app-name",{appName:String(xe)});const He=hn.get(xe);if(He){if((0,ae.vZ)(B,He.options)&&(0,ae.vZ)(W,He.config))return He;throw On.create("duplicate-app",{appName:xe})}const It=new V.H0(xe);for(const tn of Ln.values())It.addComponent(tn);const sn=new gs(B,W,It);return hn.set(xe,sn),sn}function Un(B=Zt){const $=hn.get(B);if(!$)throw On.create("no-app",{appName:B});return $}function ms(){return Array.from(hn.values())}function wt(B){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,u.Z)(function*(B){const $=B.name;hn.has($)&&(hn.delete($),yield Promise.all(B.container.getProviders().map(W=>W.delete())),B.isDeleted=!0)})).apply(this,arguments)}function An(B,$,W){var xe;let He=null!==(xe=Ke[B])&&void 0!==xe?xe:B;W&&(He+=`-${W}`);const It=He.match(/\s|\//),sn=$.match(/\s|\//);if(It||sn){const tn=[`Unable to register library "${He}" with version "${$}":`];return It&&tn.push(`library name "${He}" contains illegal characters (whitespace or "/")`),It&&sn&&tn.push("and"),sn&&tn.push(`version name "${$}" contains illegal characters (whitespace or "/")`),void Z.warn(tn.join(" "))}Ht(new V.wA(`${He}-version`,()=>({library:He,version:$}),"VERSION"))}function an(B,$){if(null!==B&&"function"!=typeof B)throw On.create("invalid-log-argument");(0,P.Am)(B,$)}function ir(B){(0,P.Ub)(B)}const xn="firebase-heartbeat-store";let gr=null;function Vs(){return gr||(gr=(0,de.X3)("firebase-heartbeat-database",1,{upgrade:(B,$)=>{0===$&&B.createObjectStore(xn)}}).catch(B=>{throw On.create("idb-open",{originalErrorMessage:B.message})})),gr}function pt(){return(pt=(0,u.Z)(function*(B){var $;try{return(yield Vs()).transaction(xn).objectStore(xn).get(bi(B))}catch(W){if(W instanceof ae.ZR)Z.warn(W.message);else{const xe=On.create("idb-get",{originalErrorMessage:null===($=W)||void 0===$?void 0:$.message});Z.warn(xe.message)}}})).apply(this,arguments)}function ut(B,$){return vi.apply(this,arguments)}function vi(){return(vi=(0,u.Z)(function*(B,$){var W;try{const He=(yield Vs()).transaction(xn,"readwrite");return yield He.objectStore(xn).put($,bi(B)),He.done}catch(xe){if(xe instanceof ae.ZR)Z.warn(xe.message);else{const He=On.create("idb-set",{originalErrorMessage:null===(W=xe)||void 0===W?void 0:W.message});Z.warn(He.message)}}})).apply(this,arguments)}function bi(B){return`${B.name}!${B.options.appId}`}class Vn{constructor($){this.container=$,this._heartbeatsCache=null;const W=this.container.getProvider("app").getImmediate();this._storage=new Gr(W),this._heartbeatsCachePromise=this._storage.read().then(xe=>(this._heartbeatsCache=xe,xe))}triggerHeartbeat(){var $=this;return(0,u.Z)(function*(){const xe=$.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),He=mn();if(null===$._heartbeatsCache&&($._heartbeatsCache=yield $._heartbeatsCachePromise),$._heartbeatsCache.lastSentHeartbeatDate!==He&&!$._heartbeatsCache.heartbeats.some(It=>It.date===He))return $._heartbeatsCache.heartbeats.push({date:He,agent:xe}),$._heartbeatsCache.heartbeats=$._heartbeatsCache.heartbeats.filter(It=>{const sn=new Date(It.date).valueOf();return Date.now()-sn<=2592e6}),$._storage.overwrite($._heartbeatsCache)})()}getHeartbeatsHeader(){var $=this;return(0,u.Z)(function*(){if(null===$._heartbeatsCache&&(yield $._heartbeatsCachePromise),null===$._heartbeatsCache||0===$._heartbeatsCache.heartbeats.length)return"";const W=mn(),{heartbeatsToSend:xe,unsentEntries:He}=function gt(B,$=1024){const W=[];let xe=B.slice();for(const He of B){const It=W.find(sn=>sn.agent===He.agent);if(It){if(It.dates.push(He.date),z(W)>$){It.dates.pop();break}}else if(W.push({agent:He.agent,dates:[He.date]}),z(W)>$){W.pop();break}xe=xe.slice(1)}return{heartbeatsToSend:W,unsentEntries:xe}}($._heartbeatsCache.heartbeats),It=(0,ae.L)(JSON.stringify({version:2,heartbeats:xe}));return $._heartbeatsCache.lastSentHeartbeatDate=W,He.length>0?($._heartbeatsCache.heartbeats=He,yield $._storage.overwrite($._heartbeatsCache)):($._heartbeatsCache.heartbeats=[],$._storage.overwrite($._heartbeatsCache)),It})()}}function mn(){return(new Date).toISOString().substring(0,10)}class Gr{constructor($){this.app=$,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var $=this;return(0,u.Z)(function*(){return(yield $._canUseIndexedDBPromise)&&(yield function Yt(B){return pt.apply(this,arguments)}($.app))||{heartbeats:[]}})()}overwrite($){var W=this;return(0,u.Z)(function*(){var xe;if(yield W._canUseIndexedDBPromise){const It=yield W.read();return ut(W.app,{lastSentHeartbeatDate:null!==(xe=$.lastSentHeartbeatDate)&&void 0!==xe?xe:It.lastSentHeartbeatDate,heartbeats:$.heartbeats})}})()}add($){var W=this;return(0,u.Z)(function*(){var xe;if(yield W._canUseIndexedDBPromise){const It=yield W.read();return ut(W.app,{lastSentHeartbeatDate:null!==(xe=$.lastSentHeartbeatDate)&&void 0!==xe?xe:It.lastSentHeartbeatDate,heartbeats:[...It.heartbeats,...$.heartbeats]})}})()}}function z(B){return(0,ae.L)(JSON.stringify({version:2,heartbeats:B})).length}!function H(B){Ht(new V.wA("platform-logger",$=>new ye($),"PRIVATE")),Ht(new V.wA("heartbeat",$=>new Vn($),"PRIVATE")),An(le,"0.7.33",B),An(le,"0.7.33","esm2017"),An("fire-js","")}("")},4859:(ot,Ce,N)=>{N.d(Ce,{H0:()=>le,wA:()=>P});var u=N(5861),V=N(2090);class P{constructor(Z,G,ie){this.name=Z,this.instanceFactory=G,this.type=ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Z){return this.instantiationMode=Z,this}setMultipleInstances(Z){return this.multipleInstances=Z,this}setServiceProps(Z){return this.serviceProps=Z,this}setInstanceCreatedCallback(Z){return this.onInstanceCreated=Z,this}}const ae="[DEFAULT]";class de{constructor(Z,G){this.name=Z,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Z){const G=this.normalizeInstanceIdentifier(Z);if(!this.instancesDeferred.has(G)){const ie=new V.BH;if(this.instancesDeferred.set(G,ie),this.isInitialized(G)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:G});Ge&&ie.resolve(Ge)}catch(Ge){}}return this.instancesDeferred.get(G).promise}getImmediate(Z){var G;const ie=this.normalizeInstanceIdentifier(null==Z?void 0:Z.identifier),Ge=null!==(G=null==Z?void 0:Z.optional)&&void 0!==G&&G;if(!this.isInitialized(ie)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ie})}catch(Oe){if(Ge)return null;throw Oe}}getComponent(){return this.component}setComponent(Z){if(Z.name!==this.name)throw Error(`Mismatching Component ${Z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Z,this.shouldAutoInitialize()){if(function me(ve){return"EAGER"===ve.instantiationMode}(Z))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(G){}for(const[G,ie]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(G);try{const Oe=this.getOrInitializeService({instanceIdentifier:Ge});ie.resolve(Oe)}catch(Oe){}}}}clearInstance(Z=ae){this.instancesDeferred.delete(Z),this.instancesOptions.delete(Z),this.instances.delete(Z)}delete(){var Z=this;return(0,u.Z)(function*(){const G=Array.from(Z.instances.values());yield Promise.all([...G.filter(ie=>"INTERNAL"in ie).map(ie=>ie.INTERNAL.delete()),...G.filter(ie=>"_delete"in ie).map(ie=>ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Z=ae){return this.instances.has(Z)}getOptions(Z=ae){return this.instancesOptions.get(Z)||{}}initialize(Z={}){const{options:G={}}=Z,ie=this.normalizeInstanceIdentifier(Z.instanceIdentifier);if(this.isInitialized(ie))throw Error(`${this.name}(${ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:ie,options:G});for(const[Oe,Le]of this.instancesDeferred.entries())ie===this.normalizeInstanceIdentifier(Oe)&&Le.resolve(Ge);return Ge}onInit(Z,G){var ie;const Ge=this.normalizeInstanceIdentifier(G),Oe=null!==(ie=this.onInitCallbacks.get(Ge))&&void 0!==ie?ie:new Set;Oe.add(Z),this.onInitCallbacks.set(Ge,Oe);const Le=this.instances.get(Ge);return Le&&Z(Le,Ge),()=>{Oe.delete(Z)}}invokeOnInitCallbacks(Z,G){const ie=this.onInitCallbacks.get(G);if(ie)for(const Ge of ie)try{Ge(Z,G)}catch(Oe){}}getOrInitializeService({instanceIdentifier:Z,options:G={}}){let ie=this.instances.get(Z);if(!ie&&this.component&&(ie=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=Z,ve===ae?void 0:ve),options:G}),this.instances.set(Z,ie),this.instancesOptions.set(Z,G),this.invokeOnInitCallbacks(ie,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,ie)}catch(Ge){}var ve;return ie||null}normalizeInstanceIdentifier(Z=ae){return this.component?this.component.multipleInstances?Z:ae:Z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(Z){this.name=Z,this.providers=new Map}addComponent(Z){const G=this.getProvider(Z.name);if(G.isComponentSet())throw new Error(`Component ${Z.name} has already been registered with ${this.name}`);G.setComponent(Z)}addOrOverwriteComponent(Z){this.getProvider(Z.name).isComponentSet()&&this.providers.delete(Z.name),this.addComponent(Z)}getProvider(Z){if(this.providers.has(Z))return this.providers.get(Z);const G=new de(Z,this);return this.providers.set(Z,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(ot,Ce,N)=>{N.d(Ce,{Am:()=>ve,Ub:()=>le,Yd:()=>me,in:()=>V});const u=[];var V=(()=>{return(Z=V||(V={}))[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT",V;var Z})();const P={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},ae=V.INFO,de={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},ye=(Z,G,...ie)=>{if(G<Z.logLevel)return;const Ge=(new Date).toISOString(),Oe=de[G];if(!Oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Oe](`[${Ge}]  ${Z.name}:`,...ie)};class me{constructor(G){this.name=G,this._logLevel=ae,this._logHandler=ye,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in V))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?P[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...G),this._logHandler(this,V.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...G),this._logHandler(this,V.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,V.INFO,...G),this._logHandler(this,V.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,V.WARN,...G),this._logHandler(this,V.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...G),this._logHandler(this,V.ERROR,...G)}}function le(Z){u.forEach(G=>{G.setLogLevel(Z)})}function ve(Z,G){for(const ie of u){let Ge=null;G&&G.level&&(Ge=P[G.level]),ie.userLogHandler=null===Z?null:(Oe,Le,...qe)=>{const ge=qe.map(Ie=>{if(null==Ie)return null;if("string"==typeof Ie)return Ie;if("number"==typeof Ie||"boolean"==typeof Ie)return Ie.toString();if(Ie instanceof Error)return Ie.message;try{return JSON.stringify(Ie)}catch(ze){return null}}).filter(Ie=>Ie).join(" ");Le>=(null!=Ge?Ge:Oe.logLevel)&&Z({level:V[Le].toLowerCase(),message:ge,args:qe,type:Oe.name})}}}},8766:(ot,Ce,N)=>{N.d(Ce,{Lj:()=>Re,X3:()=>Ze});var u=N(5861);let P,ae;const me=new WeakMap,le=new WeakMap,ve=new WeakMap,Z=new WeakMap,G=new WeakMap;let Oe={get(pe,Ee,Q){if(pe instanceof IDBTransaction){if("done"===Ee)return le.get(pe);if("objectStoreNames"===Ee)return pe.objectStoreNames||ve.get(pe);if("store"===Ee)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return Ie(pe[Ee])},set:(pe,Ee,Q)=>(pe[Ee]=Q,!0),has:(pe,Ee)=>pe instanceof IDBTransaction&&("done"===Ee||"store"===Ee)||Ee in pe};function ge(pe){return"function"==typeof pe?function qe(pe){return pe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(pe)?function(...Ee){return pe.apply(ze(this),Ee),Ie(me.get(this))}:function(...Ee){return Ie(pe.apply(ze(this),Ee))}:function(Ee,...Q){const re=pe.call(ze(this),Ee,...Q);return ve.set(re,Ee.sort?Ee.sort():[Ee]),Ie(re)}}(pe):(pe instanceof IDBTransaction&&function Ge(pe){if(le.has(pe))return;const Ee=new Promise((Q,re)=>{const se=()=>{pe.removeEventListener("complete",_e),pe.removeEventListener("error",ce),pe.removeEventListener("abort",ce)},_e=()=>{Q(),se()},ce=()=>{re(pe.error||new DOMException("AbortError","AbortError")),se()};pe.addEventListener("complete",_e),pe.addEventListener("error",ce),pe.addEventListener("abort",ce)});le.set(pe,Ee)}(pe),((pe,Ee)=>Ee.some(Q=>pe instanceof Q))(pe,function de(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(pe,Oe):pe)}function Ie(pe){if(pe instanceof IDBRequest)return function ie(pe){const Ee=new Promise((Q,re)=>{const se=()=>{pe.removeEventListener("success",_e),pe.removeEventListener("error",ce)},_e=()=>{Q(Ie(pe.result)),se()},ce=()=>{re(pe.error),se()};pe.addEventListener("success",_e),pe.addEventListener("error",ce)});return Ee.then(Q=>{Q instanceof IDBCursor&&me.set(Q,pe)}).catch(()=>{}),G.set(Ee,pe),Ee}(pe);if(Z.has(pe))return Z.get(pe);const Ee=ge(pe);return Ee!==pe&&(Z.set(pe,Ee),G.set(Ee,pe)),Ee}const ze=pe=>G.get(pe);function Ze(pe,Ee,{blocked:Q,upgrade:re,blocking:se,terminated:_e}={}){const ce=indexedDB.open(pe,Ee),Ue=Ie(ce);return re&&ce.addEventListener("upgradeneeded",vt=>{re(Ie(ce.result),vt.oldVersion,vt.newVersion,Ie(ce.transaction))}),Q&&ce.addEventListener("blocked",()=>Q()),Ue.then(vt=>{_e&&vt.addEventListener("close",()=>_e()),se&&vt.addEventListener("versionchange",()=>se())}).catch(()=>{}),Ue}function Re(pe,{blocked:Ee}={}){const Q=indexedDB.deleteDatabase(pe);return Ee&&Q.addEventListener("blocked",()=>Ee()),Ie(Q).then(()=>{})}const Me=["get","getKey","getAll","getAllKeys","count"],Se=["put","add","delete","clear"],We=new Map;function ne(pe,Ee){if(!(pe instanceof IDBDatabase)||Ee in pe||"string"!=typeof Ee)return;if(We.get(Ee))return We.get(Ee);const Q=Ee.replace(/FromIndex$/,""),re=Ee!==Q,se=Se.includes(Q);if(!(Q in(re?IDBIndex:IDBObjectStore).prototype)||!se&&!Me.includes(Q))return;const _e=function(){var ce=(0,u.Z)(function*(Ue,...vt){const en=this.transaction(Ue,se?"readwrite":"readonly");let Zt=en.store;return re&&(Zt=Zt.index(vt.shift())),(yield Promise.all([Zt[Q](...vt),se&&en.done]))[0]});return function(vt){return ce.apply(this,arguments)}}();return We.set(Ee,_e),_e}!function Le(pe){Oe=pe(Oe)}(pe=>nN(tN({},pe),{get:(Ee,Q,re)=>ne(Ee,Q)||pe.get(Ee,Q,re),has:(Ee,Q)=>!!ne(Ee,Q)||pe.has(Ee,Q)}))},5861:(ot,Ce,N)=>{function u(P,ae,de,ye,me,le,ve){try{var Z=P[le](ve),G=Z.value}catch(ie){return void de(ie)}Z.done?ae(G):Promise.resolve(G).then(ye,me)}function V(P){return function(){var ae=this,de=arguments;return new Promise(function(ye,me){var le=P.apply(ae,de);function ve(G){u(le,ye,me,ve,Z,"next",G)}function Z(G){u(le,ye,me,ve,Z,"throw",G)}ve(void 0)})}}N.d(Ce,{Z:()=>V})}},ot=>{ot(ot.s=386)}]);
